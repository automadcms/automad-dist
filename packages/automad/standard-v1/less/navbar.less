/*
 * Standard
 *
 * Copyright (c) 2020-2021 by Marc Anton Dahmen
 * https://marcdahmen.de
 *
 * MIT license
 */

@navbar-push: @navbar-nav-height;
@navbar-push-large: @navbar-nav-height-large;

@navbar-background: var(--color-navbar-bg);
@navbar-color: var(--color-navbar-text);
@navbar-border: var(--color-navbar-border);

@navbar-brand-color: @navbar-color;
@navbar-brand-hover-color: @navbar-nav-hover-color;

@navbar-nav-height: 3.5rem;
@navbar-nav-height-large: 4.25rem;
@navbar-nav-font-size: 1rem;
@navbar-nav-font-weight: 500;
@navbar-nav-font-family: @base-body-font-family;
@navbar-nav-padding-horizontal: 1rem;

@navbar-nav-color: @navbar-color;
@navbar-nav-hover-background: transparent;
@navbar-nav-hover-color: @navbar-color;
@navbar-nav-onclick-background: transparent;
@navbar-nav-onclick-color: @navbar-color;
@navbar-nav-active-background: transparent;
@navbar-nav-active-color: @navbar-color;

@navbar-brand-font-size: 1.25rem;

@navbar-toggle-width: 1.25rem;

.hook-navbar-misc() {
	.navbar {
		position: absolute;
		box-sizing: border-box;
		z-index: 1000;
		width: 100%;
		padding-top: 1rem;
		top: 0;
		background-color: @navbar-background;
		.transition(background-color 0.2s, padding-top 0.4s;);

		&-transparent {
			background-color: transparent;

			& + .hero {
				margin-top: -@navbar-push;

				@media (min-width: @breakpoint-xlarge) {
					margin-top: -@navbar-push-large;
				}
			}
		}

		@media (min-height: 680px) {
			position: fixed;

			.am-scrolled & {
				padding-top: 0;
				background-color: @navbar-background;
			}
		}

		& .uk-navbar {
			box-sizing: border-box;
			background-color: inherit;
		}

		& .uk-modal-dialog {
			padding-top: @utility-margin-large * 1.5;

			& .uk-block {
				max-width: var(--am-block-max-width);
				margin-left: auto;
				margin-right: auto;
			}
		}

		&-search-button {
			position: relative;
			z-index: 2000;
			padding: 0 @navbar-nav-padding-horizontal 5px
				@navbar-nav-padding-horizontal;
			height: @navbar-nav-height - 0.35;
			line-height: @navbar-nav-height - 0.35;

			@media (min-width: @breakpoint-xlarge) {
				min-height: @navbar-nav-height-large - 0.35;
				line-height: @navbar-nav-height-large - 0.35;
			}

			& svg,
			&:hover svg,
			&:focus svg {
				fill: @navbar-color;
			}
		}

		&-toggle {
			position: relative;
			z-index: 2000;
			cursor: pointer;
			display: block;
			height: @navbar-nav-height;
			width: @navbar-nav-height;
			margin-left: auto;
			margin-right: -((@navbar-nav-height - @navbar-toggle-width) / 2) + @navbar-nav-padding-horizontal;

			@media (min-width: @breakpoint-xlarge) {
				height: @navbar-nav-height-large;
				width: @navbar-nav-height-large;
				margin-right: -(
						(@navbar-nav-height-large - @navbar-toggle-width) / 2
					) + @navbar-nav-padding-horizontal;
			}

			& span {
				background-color: @navbar-color;
				display: block;
				height: 2px;
				left: ~'calc(50% - (@{navbar-toggle-width} / 2))';
				position: absolute;
				-webkit-transform-origin: center;
				transform-origin: center;
				transition-duration: 0.2s;
				transition-property: background-color, opacity,
					-webkit-transform;
				transition-property: background-color, opacity, transform;
				transition-property: background-color, opacity, transform,
					-webkit-transform;
				transition-timing-function: ease-out;
				width: @navbar-toggle-width;
			}

			& span:nth-child(1) {
				top: ~'calc(50% - 7px)';
				width: @navbar-toggle-width;
			}

			& span:nth-child(2) {
				top: ~'calc(50% - 1px)';
				width: @navbar-toggle-width;
			}

			& span:nth-child(3) {
				top: ~'calc(50% + 5px)';
				width: @navbar-toggle-width * 0.7;
			}

			&.uk-active span:nth-child(1) {
				width: @navbar-toggle-width;
				-webkit-transform: translateY(0.375rem) rotate(45deg);
				transform: translateY(0.375rem) rotate(45deg);
			}

			&.uk-active span:nth-child(2) {
				opacity: 0;
			}

			&.uk-active span:nth-child(3) {
				-webkit-transform: translateY(-0.375rem) rotate(-45deg);
				transform: translateY(-0.375rem) rotate(-45deg);
				width: @navbar-toggle-width;
			}
		}
	}

	.uk-navbar-brand {
		font-weight: 700;

		& img,
		& svg {
			max-height: 75%;
			width: auto;
		}

		& svg {
			fill: currentColor;
		}
	}
}

.hook-navbar() {
	margin: 0 -@utility-container-padding-horizontal;
	padding: 0
		(@utility-container-padding-horizontal - @navbar-nav-padding-horizontal);
}

.hook-navbar-nav() {
	@media (min-width: @breakpoint-xlarge) {
		height: @navbar-nav-height-large;
		line-height: @navbar-nav-height-large;
	}

	&:after {
		content: '';
		position: absolute;
		display: block;
		left: @navbar-nav-padding-horizontal;
		right: @navbar-nav-padding-horizontal;
		bottom: ~'calc(50% - 14px)';
		padding: inherit;
		border-bottom: 1px solid transparent;
		.transition(border-color 0.2s;);
	}
}

.hook-navbar-nav-hover() {
	&:after {
		border-bottom-color: @navbar-color;
	}
}

.hook-navbar-nav-onclick() {
	&:after {
		border-bottom-color: @navbar-color;
	}
}

.hook-navbar-nav-active() {
	&:after {
		border-bottom-color: @navbar-color;
	}
}

.hook-navbar-content() {
	@media (min-width: @breakpoint-xlarge) {
		height: @navbar-nav-height-large;
	}
}
