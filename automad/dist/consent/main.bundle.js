/*! Automad 2.0.0-alpha.41, (c) 2025 Marc Anton Dahmen, MIT license */(()=>{"use strict";const e=(e,t=[],n={},o=null,a=null,s=!1)=>{const c=document.createElement(e);t.forEach((e=>{c.classList.add(e)}));for(const[e,t]of Object.entries(n))void 0!==t&&c.setAttribute(e,t);return o&&(s?o.prepend(c):o.appendChild(c)),a&&(c.innerHTML=a),c};var t;!function(e){e.setup="setup",e.login="login",e.resetpassword="resetpassword",e.search="search",e.home="home",e.system="system",e.shared="shared",e.packages="packages",e.page="page",e.trash="trash",e.inpage="inpage",e.components="components"}(t||(t={}));const n='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16"><path d="M6 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4.5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-.5 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/><path d="M8 0a7.96 7.96 0 0 0-4.075 1.114q-.245.102-.437.28A8 8 0 1 0 8 0m3.25 14.201a1.5 1.5 0 0 0-2.13.71A7 7 0 0 1 8 15a6.97 6.97 0 0 1-3.845-1.15 1.5 1.5 0 1 0-2.005-2.005A6.97 6.97 0 0 1 1 8c0-1.953.8-3.719 2.09-4.989a1.5 1.5 0 1 0 2.469-1.574A7 7 0 0 1 8 1c1.42 0 2.742.423 3.845 1.15a1.5 1.5 0 1 0 2.005 2.005A6.97 6.97 0 0 1 15 8c0 .596-.074 1.174-.214 1.727a1.5 1.5 0 1 0-1.025 2.25 7 7 0 0 1-2.51 2.224Z"/></svg>',o="am-cookie-consent",a="am-cookie-consent-revoked",s="AutomadConsentStateChange",c=e=>{(()=>{const e=location.hostname.split("."),t=[];t.push(location.hostname);for(let n=0;n<e.length-1;n++){const o=e.slice(n).join(".");e.length-n>=2&&t.push(`.${o}`)}return[...new Set(t)]})().forEach((t=>{document.cookie=`${e}=; Max-Age=0; path=/; domain=${t}`})),document.cookie=`${e}=; Max-Age=0; path=/`},r="am-consent-banner",i="am-consent-banner--open",d="am-consent-banner--small",l="am-consent-banner__button",m="am-consent-placeholder";class h extends HTMLElement{static set state(e){localStorage.setItem(o,e),h.banner.classList.remove(i),h.banner.dispatchEvent(new Event(s))}static get state(){return localStorage.getItem(o)}static get hasConsent(){return"accepted"===h.state}static get hasNoConsent(){return"declined"===h.state}get type(){var e;return null!==(e=this.getAttribute("type"))&&void 0!==e?e:"iframe"}constructor(){super()}connectedCallback(){h.hasConsent&&this.injectContent(),h.pendingInstances.push(this),h.banner||(this.renderBanner(),localStorage.getItem(a)&&(document.cookie.split(";").map((e=>e.trim())).forEach((e=>{const[t]=e.split("=");/^Automad-/.test(t)||c(t)})),localStorage.clear(),sessionStorage.clear())),this.renderPlaceholder()}renderBanner(){h.banner=e("div",[r],{},document.body,`${n} <span>${decodeURIComponent(window.amCookieConsentText||"This site uses third-party cookies.")}</span>`);((e,t=document)=>t.querySelector(e))("svg",h.banner).addEventListener("click",(()=>{h.banner.classList.toggle(i)}));const t=()=>{e("button",[l],{},h.banner,decodeURIComponent(window.amCookieConsentAccept||"That's fine")).addEventListener("click",(()=>{h.state="accepted",h.pendingInstances.forEach((e=>e.injectContent())),h.pendingInstances=[]}))};h.banner.addEventListener(s,(()=>(((e,t=document)=>Array.from(t.querySelectorAll(e)))(`.${l}`,h.banner).forEach((e=>{e.remove()})),h.hasNoConsent?(h.banner.classList.add(d,i),void t()):h.hasConsent?(h.banner.classList.add(d),h.banner.setAttribute("title",window.amCookieConsentTooltip||"Manage cookie consent"),void e("button",[l],{},h.banner,decodeURIComponent(window.amCookieConsentRevoke||"Revoke consent")).addEventListener("click",(()=>{h.state=null,h.banner.remove(),localStorage.setItem(a,"true"),location.reload()}))):(t(),void e("button",[l],{},h.banner,decodeURIComponent(window.amCookieConsentDecline||"No, thanks")).addEventListener("click",(()=>{h.state="declined",h.banner.classList.add(i)}))))).bind(this)),h.banner.dispatchEvent(new Event(s))}renderPlaceholder(){"iframe"==this.type&&(this.innerHTML="<am-consent-placeholder></am-consent-placeholder>")}injectContent(){const t=this.type,n=Array.from(this.attributes).reduce(((e,t)=>(e[t.name]=t.value,e)),{});if("iframe"===t){const t=e("iframe",[],n);this.replaceWith(t)}if("script"===t){const t=e("script",[],n);setTimeout((()=>{t.text=atob(this.textContent),this.replaceWith(t)}),0)}}}h.banner=null,h.pendingInstances=[];class p extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add(m),this.innerHTML=`${n} <span>${window.amCookieConsentPlaceholder||"Cookies are disabled"}</span>`}}customElements.define("am-consent",h),customElements.define("am-consent-placeholder",p)})();