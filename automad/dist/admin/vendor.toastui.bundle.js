(self.webpackChunkautomad=self.webpackChunkautomad||[]).push([[459],{9582:t=>{
/*!
 * TOAST UI Editor : Code Syntax Highlight Plugin
 * @version 3.1.0 | Fri Aug 05 2022
 * @author NHN Cloud FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */!function(){"use strict";var e={928:function(t,e,n){var r=n(322);t.exports=function(t,e,n){var o,i;if(n=n||0,!r(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(i=e.length,o=n;n>=0&&o<i;o+=1)if(e[o]===t)return o;return-1}},690:function(t,e,n){var r=n(322),o=n(893),i=n(956);t.exports=function(t,e,n){r(t)?o(t,e,n):i(t,e,n)}},893:function(t){t.exports=function(t,e,n){var r=0,o=t.length;for(n=n||null;r<o&&!1!==e.call(n,t[r],r,t);r+=1);}},956:function(t){t.exports=function(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}},990:function(t,e,n){var r=n(893);t.exports=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],r(t,(function(t){e.push(t)}))}return e}},24:function(t,e,n){var r=n(322),o=n(929);t.exports=function(t,e){e=(e=r(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),o(t.className.baseVal)?t.className=e:t.className.baseVal=e}},204:function(t,e,n){var r=n(690),o=n(928),i=n(902),a=n(24);t.exports=function(t){var e,n=Array.prototype.slice.call(arguments,1),s=t.classList,l=[];s?r(n,(function(e){t.classList.add(e)})):((e=i(t))&&(n=[].concat(e.split(/\s+/),n)),r(n,(function(t){o(t,l)<0&&l.push(t)})),a(t,l))}},522:function(t,e,n){var r=n(758),o=n(690);t.exports=function(t,e,n){var i=t.style;r(e)?i[e]=n:o(e,(function(t,e){i[e]=t}))}},902:function(t,e,n){var r=n(929);t.exports=function(t){return t&&t.className?r(t.className.baseVal)?t.className:t.className.baseVal:""}},714:function(t,e,n){var r=n(928),o=n(902);t.exports=function(t,e){var n;return t.classList?t.classList.contains(e):(n=o(t).split(/\s+/),r(e,n)>-1)}},462:function(t,e,n){var r=n(893),o=n(928),i=n(902),a=n(24);t.exports=function(t){var e,n,s=Array.prototype.slice.call(arguments,1),l=t.classList;l?r(s,(function(t){l.remove(t)})):(e=i(t).split(/\s+/),n=[],r(e,(function(t){o(t,s)<0&&n.push(t)})),a(t,n))}},322:function(t){t.exports=function(t){return t instanceof Array}},294:function(t){t.exports=function(t){return t instanceof Function}},758:function(t){t.exports=function(t){return"string"==typeof t||t instanceof String}},929:function(t){t.exports=function(t){return void 0===t}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var o={};!function(){r.d(o,{default:function(){return A}});var t=r(294),e=r.n(t),n=3;var i=r(758),a=r.n(i);function s(t){return t.reduce((function(t,e){return t.concat(Array.isArray(e)?s(e):e)}),[])}var l=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},u="codeBlock";function c(t,e){return void 0===e&&(e=[]),a()(t)?[{text:t,classes:e}]:t.map((function(t){var n=t,r=n.type,o=n.alias,i=[],s=[];r&&(i=["token",r]),o&&(s=a()(o)?[o]:o);var u=l(l(l([],e),i),s);return a()(t)?{text:t,classes:u}:c(t.content,u)}))}function p(t,e,n){var r=e.pmView,o=[],i=function(t){var e=[];return t.descendants((function(t,n){t.isBlock&&t.type.name===u&&e.push({node:t,pos:n})})),e}(t);return i.forEach((function(t){var e=t.pos,i=t.node,a=i.attrs.language,l=n.languages[a],u=s(c(l?n.tokenize(i.textContent,l):[])),p=e+1;u.forEach((function(t){var e=t.text,n=t.classes,i=p,a=i+e.length;p=a;var s=n.join(" "),l=r.Decoration.inline(i,a,{class:s});s.length&&o.push(l)}))})),r.DecorationSet.create(t,o)}var d=r(204),f=r.n(d);function h(t){return parseInt(t,10)}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return"toastui-editor-"+t})).join(" ")}var v=r(522),g=r.n(v),y=r(462),b=r.n(y),w=r(714),k=r.n(w),x=r(990),C=r.n(x),T=r(928),E=r.n(T),L="data-language";var M=function(){function t(t,e,n){var r=this;this.buttons=[],this.prevStoredLanguage="",this.onSelectToggleButton=function(t){var e=t.target;(function(t,e,n){var r=h(t.left),o=h(t.top),i=h(t.width)+h(t.paddingLeft)+h(t.paddingRight),a=h(t.height)+h(t.paddingTop)+h(t.paddingBottom);return e>=r&&e<=r+i&&n>=o&&n<=o+a})(getComputedStyle(e,":after"),t.offsetX,t.offsetY)&&(t.preventDefault(),r.toggleFocus())},this.onSelectLanguageButtons=function(t){var e=t.target.getAttribute(L);e&&r.selectLanguage(e)},this.handleKeydown=function(t){var e=t.key;"ArrowUp"===e?(r.selectPrevLanguage(),t.preventDefault()):"ArrowDown"===e?(r.selectNextLanguage(),t.preventDefault()):"Enter"===e||"Tab"===e?(r.storeInputLanguage(),t.preventDefault()):r.hideList()},this.showLangugaeSelectBox=function(t,e){var n=t.top,o=t.right;e&&r.setLanguage(e),r.show();var i=r.input.parentElement.getBoundingClientRect().width;g()(r.wrapper,{top:n+10+"px",left:o-i-10+"px"}),r.toggleFocus()},this.rootEl=t,this.eventEmitter=e,this.languages=n,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){this.wrapper=document.createElement("div"),f()(this.wrapper,m("code-block-language")),this.createInputElement(),this.createLanguageListElement(),this.rootEl.appendChild(this.wrapper),this.hide()},t.prototype.createInputElement=function(){var t=document.createElement("span");f()(t,m("code-block-language-input"));var e=document.createElement("input");e.type="text",e.setAttribute("maxlength","20"),this.input=e,t.appendChild(this.input),this.wrapper.appendChild(t)},t.prototype.createLanguageListElement=function(){this.list=document.createElement("div"),f()(this.list,m("code-block-language-list"));var t=document.createElement("div");f()(t,"buttons"),t.innerHTML=this.languages.map((function(t){return'<button type="button" data-language="'+t+'">'+t+"</button>"})).join(""),this.buttons=C()(t.children),this.list.appendChild(t),this.wrapper.appendChild(this.list),this.activateButtonByIndex(0),this.hideList()},t.prototype.bindDOMEvent=function(){var t=this;this.wrapper.addEventListener("mousedown",this.onSelectToggleButton),this.input.addEventListener("keydown",this.handleKeydown),this.input.addEventListener("focus",(function(){return t.activateSelectBox()})),this.input.addEventListener("blur",(function(){return t.inactivateSelectBox()})),this.list.addEventListener("mousedown",this.onSelectLanguageButtons)},t.prototype.bindEvent=function(){this.eventEmitter.listen("showCodeBlockLanguages",this.showLangugaeSelectBox)},t.prototype.activateSelectBox=function(){f()(this.wrapper,"active"),g()(this.list,{display:"block"})},t.prototype.inactivateSelectBox=function(){this.input.value=this.prevStoredLanguage,b()(this.wrapper,"active"),this.hideList()},t.prototype.toggleFocus=function(){k()(this.wrapper,"active")?this.input.blur():this.input.focus()},t.prototype.storeInputLanguage=function(){var t=this.input.value;this.setLanguage(t),this.hideList(),this.eventEmitter.emit("selectLanguage",t)},t.prototype.activateButtonByIndex=function(t){this.currentButton&&b()(this.currentButton,"active"),this.buttons.length&&(this.currentButton=this.buttons[t],this.input.value=this.currentButton.getAttribute(L),f()(this.currentButton,"active"),this.currentButton.scrollIntoView())},t.prototype.selectLanguage=function(t){this.input.value=t,this.storeInputLanguage()},t.prototype.selectPrevLanguage=function(){var t=E()(this.currentButton,this.buttons)-1;t<0&&(t=this.buttons.length-1),this.activateButtonByIndex(t)},t.prototype.selectNextLanguage=function(){var t=E()(this.currentButton,this.buttons)+1;t>=this.buttons.length&&(t=0),this.activateButtonByIndex(t)},t.prototype.hideList=function(){g()(this.list,{display:"none"})},t.prototype.show=function(){g()(this.wrapper,{display:"inline-block"})},t.prototype.hide=function(){g()(this.wrapper,{display:"none"})},t.prototype.setLanguage=function(t){this.prevStoredLanguage=t,this.input.value=t;var e=this.buttons.filter((function(e){return e.getAttribute(L)===t}));if(e.length){var n=E()(e[0],this.buttons);this.activateButtonByIndex(n)}},t.prototype.destroy=function(){var t;(t=this.wrapper).parentNode&&t.parentNode.removeChild(t),this.eventEmitter.removeEventHandler("showCodeBlockLanguages",this.showLangugaeSelectBox)},t}(),N=function(){return N=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},N.apply(this,arguments)};var S=function(){function t(t,n,r,o,i){var a=this;this.node=t,this.view=n,this.getPos=r,this.eventEmitter=o,this.languages=i,this.contentDOM=null,this.languageSelectBox=null,this.onSelectLanguage=function(t){a.languageEditing&&a.changeLanguage(t)},this.onClickEditingButton=function(t){var n=t.target;if("none"!==getComputedStyle(n,":after").backgroundImage&&e()(a.getPos)){var r=a.view.coordsAtPos(a.getPos());a.openLanguageSelectBox(r)}},this.finishLanguageEditing=function(){a.languageEditing&&a.reset()},this.node=t,this.view=n,this.getPos=r,this.eventEmitter=o,this.languageEditing=!1,this.languages=i,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),f()(e,m("ww-code-block-highlighting"));var n=this.createCodeBlockElement(),r=n.firstChild;t&&(f()(n,"language-"+t),f()(r,"language-"+t)),e.appendChild(n),this.dom=e,this.contentDOM=r},t.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,r=function(t){var e=t.htmlAttrs,n=t.classNames;return N(N({},e),{class:n?n.join(" "):null})}(this.node.attrs);return n&&e.setAttribute("data-language",n),Object.keys(r).forEach((function(e){r[e]&&t.setAttribute(e,r[e])})),t.appendChild(e),t},t.prototype.bindDOMEvent=function(){this.dom&&(this.dom.addEventListener("click",this.onClickEditingButton),this.view.dom.addEventListener("mousedown",this.finishLanguageEditing),window.addEventListener("resize",this.finishLanguageEditing))},t.prototype.bindEvent=function(){this.eventEmitter.listen("selectLanguage",this.onSelectLanguage),this.eventEmitter.listen("scroll",this.finishLanguageEditing),this.eventEmitter.listen("finishLanguageEditing",this.finishLanguageEditing)},t.prototype.openLanguageSelectBox=function(t){this.languageSelectBox=new M(this.view.dom.parentElement,this.eventEmitter,this.languages),this.eventEmitter.emit("showCodeBlockLanguages",t,this.node.attrs.language),this.languageEditing=!0},t.prototype.changeLanguage=function(t){if(e()(this.getPos)){this.reset();var n=this.getPos(),r=this.view.state.tr;r.setNodeMarkup(n,null,{language:t}),this.view.dispatch(r)}},t.prototype.reset=function(){this.languageSelectBox&&(this.languageSelectBox.destroy(),this.languageSelectBox=null),this.languageEditing=!1},t.prototype.stopEvent=function(){return!0},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,!0)},t.prototype.destroy=function(){this.reset(),this.dom&&(this.dom.removeEventListener("click",this.onClickEditingButton),this.view.dom.removeEventListener("mousedown",this.finishLanguageEditing),window.removeEventListener("resize",this.finishLanguageEditing)),this.eventEmitter.removeEventHandler("selectLanguage",this.onSelectLanguage),this.eventEmitter.removeEventHandler("scroll",this.finishLanguageEditing),this.eventEmitter.removeEventHandler("finishLanguageEditing",this.finishLanguageEditing)},t}();void 0!==typeof window&&(window.Prism=window.Prism||{},window.Prism.manual=!0);var A=function(t,r){if(r){var o=t.eventEmitter,i=r.highlighter;o.addEventType("showCodeBlockLanguages"),o.addEventType("selectLanguage"),o.addEventType("finishLanguageEditing");var a=i.languages,s=Object.keys(a).filter((function(t){return!e()(a[t])}));return{toHTMLRenderers:(u=i,{codeBlock:function(t){var e=t,r=e.fenceLength,o=e.info,i=o?o.split(/\s+/):[],a=[],s={};r>n&&(s["data-backticks"]=r);var l=t.literal;if(i.length&&i[0].length){var c=i[0];a.push("lang-"+c),s["data-language"]=c;var p=u.languages[c];p&&(l=u.highlight(t.literal,p,c))}return[{type:"openTag",tagName:"pre",classNames:a},{type:"openTag",tagName:"code",attributes:s},{type:"html",content:l},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]}}),wysiwygPlugins:[function(){return function(t,e){return new t.pmState.Plugin({state:{init:function(n,r){return p(r.doc,t,e)},apply:function(n,r){return n.docChanged?p(n.doc,t,e):r.map(n.mapping,n.doc)}},props:{decorations:function(t){return this.getState(t)}}})}(t,i)}],wysiwygNodeViews:{codeBlock:(l=s,function(t,e,n,r){return new S(t,e,n,r,l)})}}}var l,u;return{}}}(),t.exports=o.default}()},471:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>uf});var r=n(7823),o=n(4348),i=n(6560),a=n(2376),s=n(7327),l=n(5804),u=n(6912),c=n(5284),p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)};function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},f.apply(this,arguments)};function h(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function m(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var v=function(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break};var g=function(t,e){var n,r,o,i,a=Object.prototype.hasOwnProperty;for(o=1,i=arguments.length;o<i;o+=1)for(r in n=arguments[o])a.call(n,r)&&(t[r]=n[r]);return t};var y=function(t){return"string"==typeof t||t instanceof String};var b=function(t){return t instanceof Array};var w=function(t,e,n){var r=0,o=t.length;for(n=n||null;r<o&&!1!==e.call(n,t[r],r,t);r+=1);},k=b,x=w,C=v;var T=function(t,e,n){k(t)?x(t,e,n):C(t,e,n)},E=y,L=T;var M=function(t,e,n){var r=t.style;E(e)?r[e]=n:L(e,(function(t,e){r[e]=t}))},N=b;var S=function(t,e,n){var r,o;if(n=n||0,!N(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,r=n;n>=0&&r<o;r+=1)if(e[r]===t)return r;return-1};var A=function(t){return void 0===t},O=A;var D=function(t){return t&&t.className?O(t.className.baseVal)?t.className:t.className.baseVal:""},I=b,R=A;var B=function(t,e){e=(e=I(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),R(t.className.baseVal)?t.className=e:t.className.baseVal=e},P=T,H=S,F=D,j=B;var q=function(t){var e,n=Array.prototype.slice.call(arguments,1),r=t.classList,o=[];r?P(n,(function(e){t.classList.add(e)})):((e=F(t))&&(n=[].concat(e.split(/\s+/),n)),P(n,(function(t){H(t,o)<0&&o.push(t)})),j(t,o))},_=w,z=S,U=D,V=B;var $=function(t){var e,n,r=Array.prototype.slice.call(arguments,1),o=t.classList;o?_(r,(function(t){o.remove(t)})):(e=U(t).split(/\s+/),n=[],_(e,(function(t){z(t,r)<0&&n.push(t)})),V(t,n))};var W=function(t){return"number"==typeof t||t instanceof Number};var G=function(t){return null===t},Y=v;var X=A,K=function(t,e){var n=document.createElement("img"),r="";return Y(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n},Z=6048e5;var Q=function(t,e){var n=location.hostname,r="TOAST UI "+t+" for "+n+": Statistics",o=window.localStorage.getItem(r);(X(window.tui)||!1!==window.tui.usageStatistics)&&(o&&!function(t){return(new Date).getTime()-t>Z}(o)||(window.localStorage.setItem(r,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||K("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))};/Mac/.test(navigator.platform);var J=/[\u0020]+/g,tt=/[>(){}[\]+-.!#|]/g,et=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,nt=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,rt=/[*_~`]/g,ot=/!\[.*\]\(.*\)/g,it=/[[\]]/g,at=/(?:^|[^\\])\\(?!\\)/g,st=new RegExp('[&<>"]',"g");function lt(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function ut(t){return st.test(t)?t.replace(st,lt):t}function ct(t,e){return-1!==t.indexOf(e)}var pt=["rel","target","hreflang","type"],dt={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function ft(t){if(!t)return null;var e={};return pt.forEach((function(n){A(t[n])||(e[n]=t[n])})),e}function ht(t,e){for(var n="",r=0;r<e;r+=1)n+=t;return n}function mt(t){for(var e=[],n=ot.exec(t);n;)e.push([n.index,n.index+n[0].length]),n=ot.exec(t);return t.replace(it,(function(t,n){var r=e.some((function(t){return n>t[0]&&n<t[1]}));return r?t:"\\"+t}))}function vt(t){var e=function(t){return"\\"+t},n=t.replace(J," ");return nt.test(n)&&(n=n.replace(nt,e)),at.test(n)&&(n=n.replace(at,(function(t){return t+"\\"}))),n=n.replace(rt,e),et.test(n)&&(n=n.replace(et,e)),function(t){var e=!1;return v(dt,(function(n){return n.test(t)&&(e=!0),!e})),e}(n)&&(n=n.replace(tt,e)),n}function gt(t){var e;return(e=-1===t.indexOf('"')?'""':-1===t.indexOf("'")?"''":"()")[0]+t+e[1]}function yt(t){return G(t)||A(t)}function bt(t,e){if(null===t&&t===e)return!0;if("object"!=typeof t||"object"!=typeof e||yt(t)||yt(e))return t===e;for(var n in t)if(t[n]!==e[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function wt(t){return t[t.length-1]}function kt(t){return"object"==typeof t&&null!==t}function xt(t,e){var n=f({},t);return t&&e&&Object.keys(e).forEach((function(t){kt(n[t])?Array.isArray(e[t])?n[t]=Ct(e[t]):n.hasOwnProperty(t)?n[t]=xt(n[t],e[t]):n[t]=Tt(e[t]):n[t]=e[t]})),n}function Ct(t){return t.map((function(t){return kt(t)?Array.isArray(t)?Ct(t):Tt(t):t}))}function Tt(t){var e=Object.keys(t);return e.length?e.reduce((function(e,n){return kt(t[n])?e[n]=Array.isArray(t[n])?Ct(t[n]):Tt(t[n]):e[n]=t[n],e}),{}):t}function Et(t,e){return void 0===e&&(e={}),Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&"object"==typeof t[n]?Array.isArray(e[n])?t[n]=e[n]:Et(t[n],e[n]):t[n]=e[n]})),t}function Lt(t,e){return t>e?[e,t]:[t,e]}var Mt=w;var Nt=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],Mt(t,(function(t){e.push(t)}))}return e};function St(t,e){var n=t.nodes.paragraph;return e?n.create(null,y(e)?t.text(e):e):n.createAndFill()}function At(t,e,n){return t.text(e,n)}function Ot(t,e,n){void 0===n&&(n=e);var r=t.doc.content.size,o=r>0?r-1:1;return a.Bs.create(t.doc,Math.min(e,o),Math.min(n,o))}function Dt(t,e,n){var r=e.pos;return t.replaceWith(r,r,St(n)),t.setSelection(Ot(t,r+1))}function It(t){for(var e=t.state,n=t.from,o=t.startIndex,i=t.endIndex,a=t.createText,s=e.tr,l=e.doc,u=e.schema,c=o;c<=i;c+=1){var p=l.child(c),d=p.nodeSize,f=p.textContent,h=p.content,m=a(f),v=m?At(u,m):r.HY.empty,g=s.mapping.map(n),y=g+h.size;s.replaceWith(g,y,v),n+=d}return s}function Rt(t,e,n,r){var o=n.length;t.split(e).delete(e-o,e).insert(t.mapping.map(e),r).setSelection(Ot(t,t.mapping.map(e)-o))}function Bt(t){return t.sourcepos[0][0]}function Pt(t){return t.sourcepos[1][0]}function Ht(t){return t.sourcepos[0][1]}function Ft(t){return t.sourcepos[1][1]}function jt(t){var e=t.type;return"strike"===e||"strong"===e||"emph"===e||"code"===e||"link"===e||"image"===e}function qt(t){return t&&("item"===t.type||"list"===t.type)}function _t(t){return qt(t)&&"ordered"===t.listData.type}function zt(t){return qt(t)&&"ordered"!==t.listData.type}function Ut(t){return t&&("tableCell"===t.type||"tableDelimCell"===t.type)}function Vt(t,e,n){for(void 0===n&&(n=!0),t=n?t:t.parent;t&&"document"!==t.type;){if(e(t))return t;t=t.parent}return null}function $t(t,e){return[t[0],t[1]+e]}function Wt(t,e){return[t[0],e]}function Gt(t){var e=t.firstChild.literal;switch(t.type){case"emph":return"*"+e+"*";case"strong":return"**"+e+"**";case"strike":return"~~"+e+"~~";case"code":return"`"+e+"`";case"link":case"image":var n=t,r=n.destination,o=n.title;return("link"===t.type?"":"!")+"["+e+"]("+r+(o?' "'+o+'"':"")+")";default:return null}}function Yt(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function Xt(t){for(var e=[],n=t.walker(),r=null;r=n.next();){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var Kt=[],Zt={},Qt=/\$\$widget\d+\s/;function Jt(t){var e=t.search(Qt);if(-1!==e){var n=t.substring(e).replace(Qt,"").replace("$$","");t=t.substring(0,e),t+=Jt(n)}return t}function te(t,e){return"$$"+t+" "+e+"$$"}function ee(t,e){var n=Zt[t],r=n.rule,o=n.toDOM,i=Jt(e).match(r);return i&&(e=i[0]),o(e)}function ne(){return Kt}function re(t){(Kt=t).forEach((function(t,e){Zt["widget"+e]=t}))}function oe(t,e,n,r){return t.concat(ie(e,n,r))}function ie(t,e,n){void 0===n&&(n=0);var r=[],o=(Kt[n]||{}).rule,i=n+1;if(t=Jt(t),o&&o.test(t)){for(var a=void 0;-1!==(a=t.search(o));){var s=t.substring(0,a);s&&(r=oe(r,s,e,i));var l=(t=t.substring(a)).match(o)[0],u="widget"+n;r.push(e.nodes.widget.create({info:u},e.text(te(u,l)))),t=t.substring(l.length)}t&&(r=oe(r,t,e,i))}else t&&(r=n<Kt.length-1?oe(r,t,e,i):[e.text(t)]);return r}function ae(t){for(var e,n="",r=t.walker();e=r.next();){var o=e.node;e.entering&&(o!==t&&"text"!==o.type?(n+=Gt(o),r.resumeAt(t,!1),r.next()):"text"===o.type&&(n+=o.literal))}return n}function se(){return{deleteSelection:function(){return l.NE},selectAll:function(){return l.td},undo:function(){return c.Yw},redo:function(){return c.KX}}}var le=S,ue=D;var ce=function(t,e){var n;return t.classList?t.classList.contains(e):(n=ue(t).split(/\s+/),le(e,n)>-1)},pe=S,de=Nt,fe=Element.prototype,he=fe.matches||fe.webkitMatchesSelector||fe.mozMatchesSelector||fe.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return pe(this,de(e.querySelectorAll(t)))>-1};var me=function(t,e){return he.call(t,e)},ve="[A-Za-z][A-Za-z0-9-]*",ge="(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)",ye="<("+ve+")("+ge+")*\\s*/?>",be="(?:"+ye+"|"+("</("+ve+")\\s*[>]")+")",we=new RegExp("^"+be,"i"),ke=/<br\s*\/*>/i,xe=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,Ce="</p><p>";function Te(t,e,n){var r=parseInt(t.left,10),o=parseInt(t.top,10),i=parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10),a=parseInt(t.height,10)+parseInt(t.paddingTop,10)+parseInt(t.paddingBottom,10);return e>=r&&e<=r+i&&n>=o&&n<=o+a}var Ee="toastui-editor-";function Le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r],a=void 0;(a=Array.isArray(i)?i[0]?i[1]:null:i)&&n.push(""+Ee+a)}return n.join(" ")}function Me(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return Ee+"md-"+t})).join(" ")}function Ne(t){return t&&t.nodeType===Node.ELEMENT_NODE}function Se(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e,n){A(n)&&(n=!ce(t,e)),(n?q:$)(t,e)}function Oe(t,e){var n=document.createElement("div");y(t)?n.innerHTML=t:n.appendChild(t);var r=n.firstChild;return e&&e.appendChild(r),r}function De(t){var e=window.getComputedStyle(t);return["margin-left","margin-right"].reduce((function(t,n){return t+parseInt(e.getPropertyValue(n),10)}),0)+t.offsetWidth}function Ie(t,e){var n;for(n=y(e)?function(t){return me(t,e)}:function(t){return t===e};t&&t!==document;){if(Ne(t)&&n(t))return t;t=t.parentNode}return null}function Re(t,e){for(var n=0,r=0;t&&t!==e;){if(n+=t.offsetTop,r+=t.offsetLeft,t.offsetParent===e.offsetParent)break;t=t.offsetParent}return{offsetTop:n,offsetLeft:r}}function Be(t,e){Object.keys(t).forEach((function(n){yt(t[n])?e.removeAttribute(n):e.setAttribute(n,t[n])}))}function Pe(t){var e=t;return e=(e=e.replace(/<img class="ProseMirror-separator" alt="">/g,"")).replace(/ class="ProseMirror-trailingBreak"/g,"")}var He=new a.H$("widget"),Fe=function(){function t(t,e){var n=this;this.popup=null,this.removeWidget=function(){n.popup&&(n.rootEl.removeChild(n.popup),n.popup=null)},this.rootEl=t.dom.parentElement,this.eventEmitter=e,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",(function(){n.rootEl=Ie(t.dom.parentElement,"."+Le("defaultUI"))})),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return t.prototype.update=function(t){var e=He.getState(t.state);if(this.removeWidget(),e){var n=e.node,r=e.style,o=t.coordsAtPos(e.pos),i=o.top,a=o.left,s=o.bottom-i,l=this.rootEl.getBoundingClientRect(),u=i-l.top;M(n,{opacity:"0"}),this.rootEl.appendChild(n),M(n,{position:"absolute",left:a-l.left+5+"px",top:("bottom"===r?u+s-5:u-s)+"px",opacity:"1"}),this.popup=n,t.focus()}},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},t}();function je(t,e,n){t.emit("addImageBlobHook",e,(function(n,r){t.emit("command","addImage",{imageUrl:n,altText:r||e.name||"image"})}),n)}function qe(t){var e=Nt(t).filter((function(t){return-1!==t.type.indexOf("image")}));if(1===e.length){var n=e[0];if(n)return n.getAsFile()}return null}function _e(t){var e=t.eventEmitter;return new a.Sy({props:{handleDOMEvents:{drop:function(t,n){var r,o=null===(r=n.dataTransfer)||void 0===r?void 0:r.files;return o&&w(o,(function(t){return-1===t.type.indexOf("image")||(n.preventDefault(),n.stopPropagation(),je(e,t,n.type),!1)})),!0}}}})}var ze=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function Ue(t){var e=document.createElement("span"),n=ee(t.attrs.info,t.textContent);return e.className="tui-widget",e.appendChild(n),{dom:e}}function Ve(t){return"widget"===t.type.name}var $e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(t){return{info:t.textContent.match(/\$\$(widget\d+)/)[1]}}}]}},enumerable:!1,configurable:!0}),e}(ze),We=function(){function t(t){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=t,this.placeholder={text:""}}return t.prototype.createState=function(){return a.yy.create({schema:this.schema,plugins:this.createPlugins()})},t.prototype.initEvent=function(){var t=this,e=t.eventEmitter,n=t.view,r=t.editorType;n.dom.addEventListener("focus",(function(){return e.emit("focus",r)})),n.dom.addEventListener("blur",(function(){return e.emit("blur",r)}))},t.prototype.emitChangeEvent=function(t){this.eventEmitter.emit("caretChange",this.editorType),t.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(t.prototype,"defaultPlugins",{get:function(){var t,e,n=this.createInputRules(),r=h(h([],this.keymaps),[(0,s.h)(f({"Shift-Enter":l.YR.Enter},l.YR)),(0,c.m8)(),(e=this.placeholder,new a.Sy({props:{decorations:function(t){var n=t.doc;if(e.text&&1===n.childCount&&n.firstChild.isTextblock&&0===n.firstChild.content.size){var r=document.createElement("span");return q(r,"placeholder"),e.className&&q(r,e.className),r.textContent=e.text,o.EH.create(n,[o.p.widget(1,r)])}return null}}})),(t=this.eventEmitter,new a.Sy({key:He,state:{init:function(){return null},apply:function(t){return t.getMeta("widget")}},view:function(e){return new Fe(e,t)}})),_e(this.context)]);return n?r.concat(n):r},enumerable:!1,configurable:!0}),t.prototype.createInputRules=function(){var t=ne().map((function(t){var e=t.rule;return new u.VK(e,(function(t,n,r,o){var i=t.schema,a=t.tr,s=t.doc,l=n.input.match(new RegExp(e,"g")),u=s.resolve(r),c=u.parent,p=0;if(Ve(c)&&(c=u.node(u.depth-1)),c.forEach((function(t){return Ve(t)&&(p+=1)})),l.length>p){var d=wt(l),f=ie(d,i);return a.replaceWith(o-d.length+1,o,f)}return null}))}));return t.length?(0,u.Hw)({rules:t}):null},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.createSchema=function(){return new r.V_({nodes:this.specs.nodes,marks:this.specs.marks})},t.prototype.createKeymaps=function(t){var e=se(),n=e.undo,r=e.redo,o=this.specs.keymaps(t),i={"Mod-z":n(),"Shift-Mod-z":r()};return t?o.concat((0,s.h)(i)):o},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.createPluginProps=function(){var t=this;return this.extraPlugins.map((function(e){return e(t.eventEmitter)}))},t.prototype.focus=function(){var t=this;this.clearTimer(),this.timer=setTimeout((function(){t.view.focus(),t.view.dispatch(t.view.state.tr.scrollIntoView())}))},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.destroy=function(){var t=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach((function(e){delete t[e]}))},t.prototype.moveCursorToStart=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(Ot(e,1)).scrollIntoView()),t&&this.focus()},t.prototype.moveCursorToEnd=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(Ot(e,e.doc.content.size-1)).scrollIntoView()),t&&this.focus()},t.prototype.setScrollTop=function(t){this.view.dom.scrollTop=t},t.prototype.getScrollTop=function(){return this.view.dom.scrollTop},t.prototype.setPlaceholder=function(t){this.placeholder.text=t,this.view.dispatch(this.view.state.tr.scrollIntoView())},t.prototype.setHeight=function(t){M(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){M(this.el,{minHeight:t+"px"})},t.prototype.getElement=function(){return this.el},t}();var Ge=function(t){return t instanceof Function},Ye=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function Xe(t,e,n){return t.focus(),e(n)(t.state,t.dispatch,t)}var Ke=function(){function t(t){this.specs=t}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.specs.filter((function(t){return"node"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return f(f({},t),((n={})[r]=o,n))}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marks",{get:function(){return this.specs.filter((function(t){return"mark"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return f(f({},t),((n={})[r]=o,n))}),{})},enumerable:!1,configurable:!0}),t.prototype.commands=function(t,e){var n=this.specs.filter((function(t){return t.commands})).reduce((function(e,n){var r={},o=n.commands();return Ge(o)?r[n.name]=function(e){return Xe(t,o,e)}:Object.keys(o).forEach((function(e){r[e]=function(n){return Xe(t,o[e],n)}})),f(f({},e),r)}),{}),r=se();return Object.keys(r).forEach((function(e){n[e]=function(n){return Xe(t,r[e],n)}})),e&&Object.keys(e).forEach((function(r){n[r]=function(n){return Xe(t,e[r],n)}})),n},t.prototype.keymaps=function(t){return this.specs.filter((function(t){return t.keymaps})).map((function(t){return t.keymaps()})).map((function(e){return t||Object.keys(e).forEach((function(t){ct(Ye,t)||delete e[t]})),(0,s.h)(e)}))},t.prototype.setContext=function(t){this.specs.forEach((function(e){e.setContext(t)}))},t}();function Ze(t){var e=t.from,n=t.to;return t instanceof a.C1?[e+1,n-1]:[e,n]}function Qe(t){return t.index(0)+1}function Je(t,e,n){void 0===n&&(n=1);var r=0;return t.forEach((function(t,o){Ve(t)&&o+2<e&&(r+=2*n)})),r}function tn(t,e,n){void 0===n&&(n=e);var r=e===n,o=t.resolve(e),i=Qe(o),a=i,s=o.start(1),l=s;if(!r){var u=t.resolve(n===t.content.size?n-1:n);l=u.start(1),a=Qe(u),u.pos===t.content.size&&(n=t.content.size-2)}var c=Math.max(e-s+1,1),p=Math.max(n-l+1,1);return[[i,c+Je(t.child(i-1),c,-1)],[a,p+Je(t.child(a-1),p,-1)]]}function en(t,e){for(var n=[],r=0,o=0;r<e;r+=1){var i=t.child(r);n[r]=o,o+=i.nodeSize}return n}function nn(t,e,n){var r=en(t,n[0]),o=e[0]-1,i=n[0]-1,a=t.child(o),s=t.child(i),l=r[o],u=r[i];return l+=e[1]+Je(a,e[1]-1),u+=n[1]+Je(s,n[1]-1),[l,Math.min(u,t.content.size)]}function rn(t){var e=t.$from,n=t.$to,r=t.from,o=t.to,i=e.doc;return t instanceof a.C1&&(e=i.resolve(r+1),n=i.resolve(o-1)),0===e.depth&&(n=e=i.resolve(r-1)),{startFromOffset:e.start(1),endFromOffset:n.start(1),startToOffset:e.end(1),endToOffset:n.end(1),startIndex:e.index(0),endIndex:n.index(0),from:e.pos,to:n.pos}}function on(t,e){for(var n=1,r=1,o=0,i=0;o<t.childCount;o+=1){var a=t.child(o).nodeSize;if(n=i+1,r=i+a-1,o===e)break;i+=a}return{startOffset:n,endOffset:r}}var an="heading",sn="listItem",ln="link",un="code",cn="meta",pn="delimiter",dn="markedText",fn={strong:2,emph:1,strike:2};function hn(t,e,n,r){return{start:t,end:e,spec:{type:n,attrs:r}}}function mn(t,e,n){var r=t.type,o=$t(e,fn[r]),i=$t(n,-fn[r]);return[hn(o,i,r),hn(e,o,pn),hn(i,n,pn)]}function vn(t,e,n,r){return[hn(t,e,ln),hn(Wt(t,n[1]+1),Wt(e,r),ln,{desc:!0}),hn(Wt(e,r+2),$t(e,-1),ln,{url:!0})]}function gn(t,e,n,r){var o={start:e,end:n,spec:{attrs:{className:r+"-line-background",codeStart:e[0],codeEnd:n[0]}},lineBackground:!0};return"item"!==t.type&&"blockQuote"!==t.type?[f(f({},o),{end:e,spec:{attrs:{className:r+"-line-background start"}}}),f(f({},o),{start:[Math.min(e[0]+1,n[0]),e[1]]})]:null}function yn(t,e){for(var n=[];t;){var r=t.type;"paragraph"!==r&&"codeBlock"!==r||n.push(hn([Bt(t),Ht(t)-1],[Pt(t),Ft(t)+1],e)),t=t.next}return n}var bn={heading:function(t,e,n){var r=t.level,o=t.headingType,i=[hn(e,n,an,{level:r})];return"atx"===o?i.push(hn(e,$t(e,r),pn)):i.push(hn(Wt(n,0),n,an,{seText:!0})),i},strong:mn,emph:mn,strike:mn,link:function(t,e,n){var r=t.lastChild,o=t.extendedAutolink,i=r?Ft(r)+1:2;return o?[hn(e,n,ln,{desc:!0})]:vn(e,n,e,i)},image:function(t,e,n){var r=t.lastChild,o=r?Ft(r)+1:3,i=$t(e,1);return h([hn(e,i,cn)],vn(e,n,i,o))},code:function(t,e,n){var r=t.tickCount,o=$t(e,r),i=$t(n,-r);return[hn(e,n,un),hn(e,o,un,{start:!0}),hn(o,i,un,{marked:!0}),hn(i,n,un,{end:!0})]},codeBlock:function(t,e,n,r){var o=t.fenceOffset,i=t.fenceLength,a=t.fenceChar,s=t.info,l=t.infoPadding,u=t.parent,c=o+i,p=[hn(Wt(e,1),n,"codeBlock")];a&&p.push(hn(e,$t(e,c),pn)),s&&p.push(hn($t(e,i),$t(e,i+l+s.length),cn)),new RegExp("^(\\s{0,4})("+a+"{"+i+",})").test(r)&&p.push(hn(Wt(n,1),n,pn));var d=gn(u,e,n,"code-block");return d?p.concat(d):p},blockQuote:function(t,e,n){var r=t.parent&&"blockQuote"!==t.parent.type?[hn(e,n,"blockQuote")]:[];if(t.firstChild){var o=[];"paragraph"===t.firstChild.type?o=function(t){for(var e=[];t;)e.push(hn([Bt(t),Ht(t)],[Pt(t),Ft(t)+1],dn)),t=t.next;return e}(t.firstChild.firstChild):"list"===t.firstChild.type&&(o=yn(t.firstChild,dn)),r=h(h([],r),o)}return r},item:function(t,e){var n=t.listData,r=n.padding,o=n.task,i=function(t){for(var e=0;t.parent.parent&&"item"===t.parent.parent.type;)t=t.parent.parent,e+=1;return[sn,f(f({},[{odd:!0},{even:!0}][e%2]),{listStyle:!0})]}(t),a=[hn.apply(void 0,h([e,$t(e,r)],i))];return o&&(a.push(hn($t(e,r),$t(e,r+3),"taskDelimiter")),a.push(hn($t(e,r+1),$t(e,r+2),cn))),a.concat(yn(t.firstChild,dn))},customBlock:function(t,e,n){var r=t,o=r.offset,i=r.syntaxLength,a=r.info,s=r.parent,l=o+i,u=[hn(Wt(e,1),n,"customBlock")];u.push(hn(e,$t(e,l),pn)),a&&u.push(hn($t(e,l),$t(e,i+a.length),cn)),u.push(hn(Wt(n,1),n,pn));var c=gn(s,e,n,"custom-block");return c?u.concat(c):u}},wn={thematicBreak:"thematicBreak",table:"table",tableCell:"tableCell",htmlInline:"html"};function kn(t,e,n,r){var o=t.type;return Ge(bn[o])?bn[o](t,e,n,r):wn[o]?[hn(e,n,wn[o])]:null}var xn={};function Cn(t){var e=t.schema,n=t.toastMark;return new a.Sy({appendTransaction:function(t,r,o){var i=t[0],a=o.tr;if(i.docChanged){var s=[];i.getMeta("editResult").forEach((function(t){var e=t.nodes,r=t.removedNodeRange;if(e.length){s=s.concat(function(t,e){var n=t.doc,r=e[0].sourcepos[0],o=wt(e).sourcepos,i=o[1],a=[r[0],r[1]],s=[i[0],i[1]+1],l=[];return function(t,e,n){var r=[];xn={};for(var o=e[0]-1;o<n[0];o+=1){var i=t.child(o),a=i.attrs.codeEnd,s=i.attrs.codeStart;if(s&&a&&!ct(r,s)){r.push(s),a=Math.min(a,t.childCount);for(var l=s-1,u=n[0],c=l;c<u;c+=1)xn[c]=!0}}}(n,r,i),l.push({start:a,end:s}),l}(a,e));for(var o=0,i=e;o<i.length;o++)for(var l=i[o].walker(),u=l.next();u;){var c=u.node;u.entering&&(s=s.concat(En(c,n))),u=l.next()}}else if(r)for(var p=a.doc.childCount-1,d=r.line,f=d[0],h=d[1],m=Math.min(f,p),v=Math.min(h,p),g=m;g<=v;g+=1)xn[g]=!0})),function(t,e,n){var r=t.doc,o=e.nodes.paragraph,i=en(r,r.childCount);n.forEach((function(n){var a=n.start,s=n.end,l=n.spec,u=n.lineBackground,c=Math.min(a[0],r.childCount)-1,p=Math.min(s[0],r.childCount)-1,d=r.child(c),f=r.child(p),h=i[c],m=i[p];(h+=a[1]+Je(d,a[1]-1),m+=s[1]+Je(f,s[1]-1),l)?u?function(t,e,n,r,o){void 0===o&&(o={});for(var i=r.startIndex,a=r.endIndex,s=r.from,l=r.to,u=!1,c=i;c<=a;c+=1)delete xn[c],u=Tn(e,c,o);u&&t.setBlockType(s,l,n,o)}(t,r,o,{from:h,to:m,startIndex:c,endIndex:p},l.attrs):t.addMark(h,m,e.mark(l.type,l.attrs)):t.removeMark(h,m)})),function(t,e,n){Object.keys(xn).forEach((function(r){var o=Number(r),i=Math.min(Number(r)+1,t.doc.childCount-1),a=e[o],s=e[i]-1;o===i&&(s+=2),t.setBlockType(a,s,n)}))}(t,i,o)}(a,e,s)}return a.setMeta("widget",i.getMeta("widget"))}})}function Tn(t,e,n){return Object.keys(n).some((function(r){return n[r]!==t.child(e).attrs[r]}))}function En(t,e){var n=e.getLineTexts(),r=[Bt(t),Ht(t)],o=[Pt(t),Ft(t)+1],i=kn(t,r,o,n[o[0]-1]);return null!=i?i:[]}var Ln=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function Mn(t){var e={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},n=!0;return function(t,e,n){for(void 0===n&&(n=!0),t=n?t:t.parent;t&&"document"!==t.type;)e(t),t=t.parent}(t,(function(t){var r=function(t){var e=t.type;return qt(t)?t.listData.task?"taskList":"ordered"===t.listData.type?"orderedList":"bulletList":-1!==e.indexOf("table")?"table":ct(Ln,e)?e:null}(t);r&&("bulletList"===r||"orderedList"===r?n&&(e[r]={active:!0},e.indent.disabled=!1,e.outdent.disabled=!1,n=!1):e[r]={active:!0})})),e}var Nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(ze),Sn=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function An(t,e){return On(t,e-1)}function On(t,e){return t.child(e).textContent}var Dn=/^\s*> ?/,In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("block-quote")},0]}}},enumerable:!1,configurable:!0}),e.prototype.createBlockQuoteText=function(t,e){return e?t.replace(Dn,"").trim():"> "+t.trim()},e.prototype.extendBlockQuote=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema,s=rn(r),l=s.endFromOffset,u=s.endToOffset,c=s.endIndex,p=s.to,d=On(o,c);if(Dn.test(d)&&p>l&&r.empty){if(!d.replace(Dn,"").trim())i.deleteRange(l,u).split(i.mapping.map(u));else{var f=d.slice(p-l).trim();Rt(i,u,f,At(a,t.createBlockQuoteText(f)))}return n(i),!0}return!1}},e.prototype.commands=function(){var t=this;return function(){return function(e,n){var r=e.selection,o=e.doc,i=rn(r),a=i.startFromOffset,s=i.endToOffset,l=i.startIndex,u=i.endIndex,c=Dn.test(On(o,l)),p=It({state:e,startIndex:l,endIndex:u,from:a,createText:function(e){return t.createBlockQuoteText(e,c)}});return n(p.setSelection(Ot(p,p.mapping.map(s)))),!0}}},e.prototype.keymaps=function(){var t=this.commands()();return{"alt-q":t,"alt-Q":t,Enter:this.extendBlockQuote()}},e}(Sn),Rn=/(^\s*)([-*+] |[\d]+\. )/,Bn=/(^\s*)([\d])+\.( \[[ xX]])? /,Pn=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,Hn=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,Fn=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,jn=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,qn=/(^\s*)([-*+])( \[[ xX]]) /;function _n(t){return Bn.test(t)?"ordered":"bullet"}function zn(t){for(var e=0;t&&"document"!==t.type;)"list"===t.type&&(e+=1),t=t.parent;return e}function Un(t,e,n,r){for(var o=t.getLineTexts().length,i=[],a=e;r?a<o:a>1;){a=r?a+1:a-1;var s=t.findFirstNodeAtLine(a),l=zn(s);if(l===n)i.push({line:a,depth:n,mdNode:s});else if(l<n)break}return i}function Vn(t,e,n,r){void 0===r&&(r=0);var o=Number.MAX_VALUE,i=0,a=e.map((function(e,a){var s=e.line;o=Math.min(s-1,o),i=Math.max(s-1,i);var l=An(t,s);return l="bullet"===n?function(t){if(!Rn.test(t))return"* "+t;var e=_n(t);return"bullet"===e&&Hn.test(t)?t=t.replace(qn,"$1$2 "):"ordered"===e&&(t=t.replace(Bn,"$1* ")),t}(l):function(t,e){if(!Rn.test(t))return e+". "+t;var n=_n(t);if("bullet"===n||"ordered"===n&&Hn.test(t))t=t.replace(Hn,"$1"+e+". ");else if("ordered"===n){var r=Pn.exec(t)[3];Number(r)!==e&&(t=t.replace(Bn,"$1"+e+". "))}return t}(l,a+1+r),{text:l,line:s}}));return{changedResults:a,firstIndex:o,lastIndex:i}}function $n(t,e){var n,r,o,i,a,s,l,u=(r=(n=e).toastMark,o=n.mdNode,i=n.line,a=zn(o),s=Un(r,i,a,!1).reverse(),l=Un(r,i,a,!0),s.concat([{line:i,depth:a,mdNode:o}]).concat(l));return Vn(e.doc,u,t)}var Wn={bullet:function(t){return $n("bullet",t)},ordered:function(t){return $n("ordered",t)},task:function(t){var e=t.mdNode,n=t.doc,r=t.line,o=An(n,r);return e.listData.task?o=o.replace(jn,"$1$2"):qt(e)&&(o=o.replace(Rn,"$1$2[ ] ")),{changedResults:[{text:o,line:r}]}}},Gn={bullet:function(t){var e=t.doc,n=t.line;return{changedResults:[{text:"* "+An(e,n),line:n}]}},ordered:function(t){for(var e=t.toastMark,n=t.doc,r=t.line,o=t.startLine,i=An(n,r),a=1,s=o,l=0,u=o-1;u>0;u-=1){var c=e.findFirstNodeAtLine(u),p=An(n,u)&&!!Vt(c,(function(t){return qt(t)})),d=Pn.exec(An(n,u));if(!d&&!p)break;if(d||!p){var f=d,h=f[1],m=f[3];if(!h){a=Number(m),s=u;break}}else l+=1}return{changedResults:[{text:a+r-s-l+". "+i,line:r}]}},task:function(t){var e=t.doc,n=t.line;return{changedResults:[{text:"* [ ] "+An(e,n),line:n}]}}},Yn={bullet:function(t){var e=t.line,n=An(t.doc,e),r=Fn.exec(n);return{listSyntax:""+r[1]+r[2]}},ordered:function(t){var e=t.toastMark,n=t.line,r=t.mdNode,o=t.doc,i=zn(r),a=An(o,n),s=Pn.exec(a),l=s[1],u=s[3],c=s[4],p=Number(u)+1,d=""+l+p+c,h=Un(e,n,i,!0).filter((function(t){var e=Pn.exec(An(o,t.line));return e&&e[1].length===l.length&&!!Vt(t.mdNode,(function(t){return _t(t)}))}));return f({listSyntax:d},Vn(o,h,"ordered",p))}};function Xn(t,e,n,r,o){for(var i=[],a=An(t,n),s=Pn.exec(a);s;){var l=s[1],u=s[4],c=s[5],p=l.length;if(p===o)i.push(At(e,""+l+r+u+c)),r+=1,n+=1;else if(p>o){var d=Xn(t,e,n,1,p);n=d.line,i=i.concat(d.nodes)}if(p<o||n>t.childCount)break;a=An(t,n),s=Pn.exec(a)}return{nodes:i,line:n}}var Kn=/(^\s{1,4})(.*)/;function Zn(t,e,n){return t<e||Rn.test(n)||Dn.test(n)}function Qn(t,e,n){var r=n.$from;0===r.depth&&(r=t.resolve(r.pos-1));var o=r.node(1),i=r.start(1),a=o.content.size;return o.rangeHasMark(0,a,e.marks.table)&&r.pos-i!==a&&r.pos!==i}function Jn(t,e){var n=e.from,r=e.to;if("indent"===e.type){n+=4,r+=4*(e.lineLen+1)}else{var o=e.spaceLenList;n-=o[0];for(var i=0;i<o.length;i+=1)r-=o[i]}return Ot(t,n,r)}var tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(t){var e=t.attrs;return e.className?["div",{class:Me(e.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),e.prototype.reorderList=function(t,e){for(var n=this.context,r=n.view,o=n.toastMark,i=n.schema,a=r.state,s=a.tr,l=a.selection,u=a.doc,c=o.findFirstNodeAtLine(t),p=c;c&&!zt(c)&&"document"!==c.parent.type;)if(_t(c=c.parent)){p=c;break}p&&(t=p.sourcepos[0][0]);var d=Pn.exec(An(u,t)),f=d[1],h=d[3],m=f.length,v=Xn(u,i,t,Number(h),m),g=v.line,y=v.nodes;e=Math.max(e,g-1);for(var b=on(u,t-1).startOffset,w=t-1;w<=e-1;w+=1){var k=u.child(w),x=k.nodeSize,C=k.content,T=s.mapping.map(b),E=T+C.size;s.replaceWith(T,E,y[w-t+1]),b+=x}var L=Ot(s,l.from,l.to);r.dispatch(s.setSelection(L))},e.prototype.indent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.schema,i=n.selection,a=n.doc,s=rn(i),l=s.from,u=s.to,c=s.startFromOffset,p=s.startIndex,d=s.endIndex;if(t&&Qn(a,o,i))return!1;var f=On(a,p);if(t&&Zn(l,u,f)||!t&&Rn.test(f)){var h=It({state:n,from:c,startIndex:p,endIndex:d,createText:function(t){return"    "+t}}),m={type:"indent",from:l,to:u,lineLen:d-p};r(h.setSelection(Jn(h,m))),Pn.test(f)&&e.reorderList(p+1,d+1)}else t&&r(n.tr.insert(u,At(o,"    ")));return!0}}},e.prototype.outdent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.selection,i=n.doc,a=n.schema,s=rn(o),l=s.from,u=s.to,c=s.startFromOffset,p=s.startIndex,d=s.endIndex;if(t&&Qn(i,a,o))return!1;var f=On(i,p);if(t&&Zn(l,u,f)||!t&&Rn.test(f)){var h=[],m=It({state:n,from:c,startIndex:p,endIndex:d,createText:function(t){var e=Kn.exec(t);return h.push(e?e[1].length:0),t.replace(Kn,"$2")}}),v={type:"outdent",from:l,to:u,spaceLenList:h};r(m.setSelection(Jn(m,v))),Pn.test(f)&&e.reorderList(p+1,d+1)}else if(t){var g=f.slice(0,u-c),y=g.replace(/\s{1,4}$/,""),b=u-(g.length-y.length);r(n.tr.delete(b,u))}return!0}}},e.prototype.deleteLines=function(){var t=this;return function(e,n){var r=t.context.view,o=rn(e.selection),i=o.startFromOffset,a=o.endToOffset;return(0,l.QF)((function(){return n(e.tr.deleteRange(i,a)),!0}),l.Y_)(e,n,r)}},e.prototype.moveDown=function(){return function(t,e){var n=t.doc,r=t.tr,o=t.selection,i=t.schema,a=rn(o),s=a.startFromOffset,l=a.endToOffset,u=a.endIndex;if(u<n.content.childCount-1){var c=n.child(u+1),p=c.nodeSize,d=c.textContent;return r.delete(l,l+p).split(s).insert(r.mapping.map(s)-2,At(i,d)),e(r),!0}return!1}},e.prototype.moveUp=function(){return function(t,e){var n=t.tr,r=t.doc,o=t.selection,i=t.schema,a=rn(o),s=a.startFromOffset,l=a.endToOffset,u=a.startIndex;if(u>0){var c=r.child(u-1),p=c.nodeSize,d=c.textContent;return n.delete(s-p,s).split(n.mapping.map(l)).insert(n.mapping.map(l),At(i,d)),e(n),!0}return!1}},e.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},e.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},e}(ze),er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e}(ze),nr=/^#{1,6}\s/,rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(t){var e=t.attrs,n="heading|heading"+e.level;return e.seText&&(n+="|delimiter|setext"),["span",{class:Me.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.createHeadingText=function(t,e,n){for(var r=e.replace(n,"").trim(),o="";t>0;)o+="#",t-=1;return o+" "+r},e.prototype.commands=function(){var t=this;return function(e){return function(n,r){var o=e.level,i=rn(n.selection),a=i.startFromOffset,s=i.endToOffset,l=It({state:n,from:a,startIndex:i.startIndex,endIndex:i.endIndex,createText:function(e){var n=e.match(nr),r=n?n[0]:"";return t.createHeadingText(o,e,r)}});return r(l.setSelection(Ot(l,l.mapping.map(s)))),!0}}},e}(Sn),or="```",ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("code-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=rn(n),a=i.startFromOffset,s=i.endToOffset,l=At(r,or);return o.insert(a,l).split(a+3),o.split(o.mapping.map(s)).insert(o.mapping.map(s),l),e(o.setSelection(Ot(o,o.mapping.map(s)-5))),!0}}},e.prototype.keepIndentation=function(){var t=this;return function(e,n){var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,l=rn(r),u=l.startFromOffset,c=l.endToOffset,p=l.endIndex,d=l.from,f=l.to,h=On(i,p);if(d===f&&h.trim()){var m=h.match(/^\s+/);if(function(t){return t&&"codeBlock"===t.type}(s.findFirstNodeAtLine(p+1))&&m){var v=m[0],g=h.slice(f-u);return Rt(o,c,g,At(a,v+g)),n(o),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,Enter:this.keepIndentation()}},e}(Sn),ar=/\||\s/g;function sr(t,e){for(var n="|",r=0;r<t;r+=1)n+=e?" --- |":"  |";return n}var lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("table")},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendTable=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema;if(!r.empty)return!1;var s=rn(r),l=s.endFromOffset,u=s.endToOffset,c=s.endIndex,p=s.to,d=On(o,c),f=[c+1,p-l+1],h=Vt(t.context.toastMark.findNodeAtPosition(f),(function(t){return Ut(t)&&("tableDelimRow"===t.parent.type||"tableBody"===t.parent.parent.type)}));if(h){var m=!d.replace(ar,"").trim(),v=sr(h.parent.parent.parent.columns.length);return m?i.deleteRange(l,u).split(i.mapping.map(u)):i.split(u).insert(i.mapping.map(u),At(a,v)).setSelection(Ot(i,i.mapping.map(u)-2)),n(i),!0}return!1}},e.prototype.moveTableCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,a=rn(o),s=a.endFromOffset,l=[a.endIndex+1,a.to-s],u=Vt(e.context.toastMark.findNodeAtPosition(l),(function(t){return Ut(t)}));if(u){var c=u.parent,p=function(t){return t?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}(t),d=p.type,f=p.parentType,h=p.childType,m=Ft(u);if(u[d])m=Ft(u[d])-1;else{var v=c[d]||c.parent.type!==f?c[d]:c.parent[d][h];if("next"===d)m+=(v?Ft(v[h]):0)+2;else"prev"===d&&(m=v?-4:0)}return r(i.setSelection(Ot(i,s+m))),!0}return!1}},e.prototype.addTable=function(){return function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=t,s=a.columnCount,l=a.rowCount,u=rn(r).endToOffset,c=function(t){return[sr(t),sr(t,!0)]}(s),p=function(t,e){for(var n=[],r=0;r<e;r+=1)n.push(sr(t));return n}(s,l-1);return h(h([],c),p).forEach((function(t){o.split(o.mapping.map(u)).insert(o.mapping.map(u),At(i,t))})),n(o.setSelection(Ot(o,u+4))),!0}}},e.prototype.commands=function(){return{addTable:this.addTable()}},e.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},e}(Sn),ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("thematic-break")},0]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=rn(n),a=i.from,s=i.to,l=i.endToOffset,u=At(r,"***");return o.split(a).replaceWith(o.mapping.map(a),o.mapping.map(s),u).split(o.mapping.map(s)).setSelection(Ot(o,o.mapping.map(l))),e(o),!0}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(Sn);function cr(t,e){var n=t.type;return e<=t.sourcepos[0][0]&&("codeBlock"===n||"heading"===n||n.match("table"))}var pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.odd,r=e.even,o="list-item";return e.listStyle&&(o+="|list-item-style"),n&&(o+="|list-item-odd"),r&&(o+="|list-item-even"),["span",{class:Me.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendList=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.schema,a=e.tr,s=t.context.toastMark,l=rn(r),u=l.to,c=l.startFromOffset,p=l.endFromOffset,d=l.endIndex,f=l.endToOffset,h=On(o,d);if(!Rn.test(h)||r.from===c||!r.empty)return!1;if(!h.replace(Hn,"").trim())a.deleteRange(p,f).split(a.mapping.map(f));else{var m=_n(h),v=s.findFirstNodeAtLine(d+1),g=h.slice(u-p),y={toastMark:s,mdNode:v,doc:o,line:d+1},b=Yn[m](y),w=b.listSyntax,k=b.changedResults;if(null==k?void 0:k.length){a.split(u),k.unshift({text:w+g,line:d+1}),t.changeToListPerLine(a,k,{from:u,startLine:k[0].line,endLine:wt(k).line});var x=a.mapping.map(f)-g.length;a.setSelection(Ot(a,x))}else{Rt(a,f,g,At(i,w+g))}}return n(a),!0}},e.prototype.toList=function(t){var e=this;return function(){return function(n,r){for(var o=n.doc,i=n.tr,a=n.selection,s=e.context.toastMark,l=rn(a),u=l.startIndex+1,c=l.endIndex+1,p=l.endToOffset,d=[],f=u;f<=c;f+=1){var h=s.findFirstNodeAtLine(f);if(h&&cr(h,f))break;if(-1===d.indexOf(f)){var m={toastMark:s,mdNode:h,doc:o,line:f,startLine:u},v=(qt(h)?Wn[t](m):Gn[t](m)).changedResults,g=e.changeToListPerLine(i,v,{from:on(o,v[0].line-1).startOffset,startLine:v[0].line,endLine:wt(v).line,indexDiff:1});p=Math.max(g,p),v&&(d=d.concat(v.map((function(t){return t.line}))))}}return r(i.setSelection(Ot(i,i.mapping.map(p)))),!0}}},e.prototype.changeToListPerLine=function(t,e,n){for(var r=n.from,o=n.startLine,i=n.endLine,a=n.indexDiff,s=void 0===a?0:a,l=0,u=function(n){var o=t.doc.child(n),i=o.nodeSize,a=o.content,u=t.mapping.map(r),p=u+a.size,d=e.filter((function(t){return t.line-s===n}))[0];d&&(t.replaceWith(u,p,At(c.context.schema,d.text)),l=Math.max(l,r+a.size)),r+=i},c=this,p=o-s;p<=i-s;p+=1)u(p);return l},e.prototype.toggleTask=function(){var t=this;return function(e,n){for(var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,l=rn(r),u=l.startIndex,c=l.endIndex,p=null,d=u;d<=c;d+=1){var f=s.findFirstNodeAtLine(d+1);if(qt(f)&&f.listData.task){var h=f.listData,m=h.checked,v=h.padding,g=m?" ":"x",y=f.sourcepos[0],b=on(i,y[0]-1).startOffset;b+=y[1]+v,p=o.replaceWith(b,b+1,a.text(g))}}return!!p&&(n(p),!0)}},e.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},e.prototype.keymaps=function(){var t=this.toList("bullet")(),e=this.toList("ordered")(),n=this.toList("task")(),r=this.toggleTask();return{"Mod-u":t,"Mod-U":t,"Mod-o":e,"Mod-O":e,"alt-t":n,"alt-T":n,"Shift-Ctrl-x":r,"Shift-Ctrl-X":r,Enter:this.extendList()}},e}(Sn);function dr(t,e){return function(){return function(n,r){var o=n.tr,i=n.selection,a=Ge(t)?t:function(e){return t.test(e)},s=e.length,l=o.doc,u=Ze(i),c=u[0],p=u[1],d=Math.max(c-s,1),f=Math.min(p+s,l.content.size-1),h=i.content(),m=h.content.textBetween(0,h.content.size,"\n"),v=l.textBetween(d,c,"\n"),g=l.textBetween(p,f,"\n");if(m=""+v+m+g,v&&g&&a(m))o.delete(f-s,f).delete(d,d+s);else{o.insertText(e,p).insertText(e,c);var y=i.empty?Ot(o,c+s):Ot(o,c+s,p+s);o.setSelection(y)}return r(o),!0}}}var fr=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("strong")},0]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return dr(fr,"**")},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Sn),mr=/^(~{2}).*([\s\S]*)\1$/m,vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("strike")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return dr(mr,"~~")},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Sn),gr=/^(\*|_).*([\s\S]*)\1$/m,yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("emph")},0]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return dr(gr,"*")},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Sn),br=/^(`).*([\s\S]*)\1$/m,wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(t){var e=t.attrs,n="code";return e.start&&(n+="|delimiter|start"),e.end&&(n+="|delimiter|end"),e.marked&&(n+="|marked-text"),["span",{class:Me.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return dr(br,"`")},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Sn),kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(t){var e=t.attrs,n="link";return e.url&&(n+="|link-url|marked-text"),e.desc&&(n+="|link-desc|marked-text"),["span",{class:Me.apply(void 0,n.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.addLinkOrImage=function(t){return function(e){return function(n,r){var o=n.selection,i=n.tr,a=n.schema,s=Ze(o),l=s[0],u=s[1],c=e,p=c.linkText,d=c.altText,f=c.linkUrl,h=c.imageUrl,m=p,v=f,g="";return"image"===t&&(m=d,v=h,g="!"),g+="["+(m=mt(m))+"]("+v+")",r(i.replaceWith(l,u,At(a,g))),!0}}},e.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},e}(Sn),xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("delimiter")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("meta")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("marked-text")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("table-cell")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("html")},0]}}},enumerable:!1,configurable:!0}),e}(Sn),Nr="$$",Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:Me("custom-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){var r=e.selection,o=e.schema,i=e.tr,a=rn(r),s=a.startFromOffset,l=a.endToOffset;if(!(null==t?void 0:t.info))return!1;var u="$$"+t.info,c=At(o,u),p=At(o,Nr);return i.insert(s,c).split(s+u.length),i.split(i.mapping.map(l)).insert(i.mapping.map(l),p),n(i.setSelection(Ot(i,i.mapping.map(l)-4))),!0}}},e}(Sn),Ar=/x|backspace/i,Or=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function Dr(t){var e=t.schema,n=t.toastMark;return new a.Sy({props:{handleDOMEvents:{keyup:function(t,r){var o,i=t.state,a=i.doc,s=i.tr,l=i.selection;if(l.empty&&Ar.test(r.key)){var u=rn(l),c=u.startIndex,p=u.startFromOffset,d=[c+1,u.from-p+1],f=Vt(n.findNodeAtPosition(d),(function(t){var e;return"paragraph"===t.type&&"item"===(null===(e=t.parent)||void 0===e?void 0:e.type)}));if(null===(o=null==f?void 0:f.firstChild)||void 0===o?void 0:o.literal){var h=f.firstChild,m=h.literal.match(Or);if(m){var v=h.sourcepos[0],g=m[1],y=m[2],b=m[3],w=g.length+b.length,k=on(a,v[0]-1).startOffset,x=v[1]+k;if(y){var C=w?w+1:0;s.replaceWith(x,C+x,e.text(y)),t.dispatch(s)}else w||(s.insertText(" ",x),t.dispatch(s))}}}return!1}}}})}var Ir="cut",Rr=/\r\n|\n|\r/,Br=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toastMark,i=n.useCommandShortcut,a=void 0===i||i,s=n.mdPlugins,l=void 0===s?[]:s;return r.editorType="markdown",r.el.classList.add("md-mode"),r.toastMark=o,r.extraPlugins=l,r.specs=r.createSpecs(),r.schema=r.createSchema(),r.context=r.createContext(),r.keymaps=r.createKeymaps(a),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.createClipboard(),r.eventEmitter.listen("changePreviewTabWrite",(function(t){return r.toggleActive(!0,t)})),r.eventEmitter.listen("changePreviewTabPreview",(function(){return r.toggleActive(!1)})),r.initEvent(),r}return d(e,t),e.prototype.toggleActive=function(t,e){Ae(this.el,"active",t),t?e||this.focus():this.blur()},e.prototype.createClipboard=function(){var t=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=Le("pseudo-clipboard"),this.clipboard.addEventListener("paste",(function(e){var n=e.clipboardData||window.clipboardData,r=n&&n.items;if(r){var o=Nt(r).some((function(t){return"string"===t.kind&&"text/rtf"===t.type}));if(!o){var i=qe(r);i&&(e.preventDefault(),je(t.eventEmitter,i,e.type))}}})),this.clipboard.addEventListener("input",(function(e){var n=e.target.value;t.replaceSelection(n),e.preventDefault(),e.target.value=""})),this.el.insertBefore(this.clipboard,this.view.dom)},e.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSpecs=function(){return new Ke([new Nn,new tr,new $e,new er,new rr,new In,new ir,new Sr,new lr,new Lr,new ur,new pr,new hr,new vr,new yr,new wr,new kr,new Cr,new xr,new Er,new Tr,new Mr])},e.prototype.createPlugins=function(){return h([Cn(this.context),(t=this.context,e=t.toastMark,n=t.eventEmitter,new a.Sy({view:function(){return{update:function(t,r){var o=t.state,i=o.doc,a=o.selection;if(!(r&&r.doc.eq(i)&&r.selection.eq(a))){var s=a.from,l=o.doc.resolve(s).start(),u=s-l;s===l&&(u+=1);var c=[o.doc.content.findIndex(s).index+1,u],p=e.findNodeAtPosition(c),d=Mn(p);n.emit("changeToolbarState",{cursorPos:c,mdNode:p,toolbarState:d}),n.emit("setFocusedNode",p)}}}}})),Dr(this.context)],this.createPluginProps()).concat(this.defaultPlugins);var t,e,n},e.prototype.createView=function(){var t=this;return new o.tk(this.el,{state:this.createState(),dispatchTransaction:function(e){t.updateMarkdown(e);var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e)},handleKeyDown:function(e,n){return(n.metaKey||n.ctrlKey)&&"V"===n.key.toUpperCase()&&t.clipboard.focus(),t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{copy:function(e,n){return t.captureCopy(n)},cut:function(e,n){return t.captureCopy(n,Ir)},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1}},nodeViews:{widget:Ue}})},e.prototype.createCommands=function(){return this.specs.commands(this.view)},e.prototype.captureCopy=function(t,e){t.preventDefault();var n=this.view.state,r=n.selection,o=n.tr;if(r.empty)return!0;var i=this.getChanged(r.content());return t.clipboardData?t.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i),e===Ir&&this.view.dispatch(o.deleteSelection().scrollIntoView().setMeta("uiEvent",Ir)),!0},e.prototype.updateMarkdown=function(t){var e=this;t.docChanged&&t.steps.forEach((function(n,r){if(n.slice&&!(n instanceof i.FC)){var o=t.docs[r],a=[n.from,n.to],s=tn(o,a[0],a[1]),l=s[0],u=s[1],c=e.getChanged(n.slice);l[0]===u[0]&&l[1]===u[1]&&""===c&&(c="\n");var p=e.toastMark.editMarkdown(l,u,c);e.eventEmitter.emit("updatePreview",p),t.setMeta("editResult",p).scrollIntoView()}}))},e.prototype.getChanged=function(t){var e="",n=t.content.size;return t.content.nodesBetween(0,n,(function(t,r){t.isText?e+=t.text.slice(Math.max(0,r)-r,n-r):t.isBlock&&r>0&&(e+="\n")})),e},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=nn(n.doc,t,e),o=r[0],i=r[1];this.view.dispatch(n.setSelection(Ot(n,o,i)).scrollIntoView())},e.prototype.replaceSelection=function(t,e,n){var o,i=this.view.state,a=i.tr,s=i.schema,l=i.doc,u=t.split(Rr).map((function(t){return St(s,ie(t,s))})),c=new r.p2(r.HY.from(u),1,1);if(this.focus(),e&&n){var p=nn(l,e,n),d=p[0],f=p[1];o=a.replaceRange(d,f,c)}else o=a.replaceSelection(c);this.view.dispatch(o.scrollIntoView())},e.prototype.deleteSelection=function(t,e){var n,r=this.view.state,o=r.tr,i=r.doc;if(t&&e){var a=nn(i,t,e),s=a[0],l=a[1];n=o.deleteRange(s,l)}else n=o.deleteSelection();this.view.dispatch(n.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;if(t&&e){var s=nn(r,t,e);i=s[0],a=s[1]}return r.textBetween(i,a,"\n")},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return tn(this.view.state.tr.doc,e,n)},e.prototype.setMarkdown=function(t,e){void 0===e&&(e=!0);var n=t.split(Rr),r=this.view.state,o=r.tr,i=r.doc,a=r.schema,s=n.map((function(t){return St(a,ie(t,a))}));this.view.dispatch(o.replaceWith(0,i.content.size,s)),e&&this.moveCursorToEnd(!0)},e.prototype.addWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.doc,a=r.selection,s=n?nn(i,n,n)[0]:a.to;this.view.dispatch(o.setMeta("widget",{pos:s,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.schema,a=nn(r.doc,t,e),s=ie(n,i);this.view.dispatch(o.replaceWith(a[0],a[1],s))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t||tn(n,r.from)[0],i=this.toastMark.findNodeAtPosition(o);return"text"===i.type&&"paragraph"!==i.parent.type&&(i=i.parent),i.sourcepos[1][1]+=1,{range:i.sourcepos,type:i.type}},e.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map((function(t){return Jt(t)})).join("\n")},e.prototype.getToastMark=function(){return this.toastMark},e}(We),Pr="_feEventKey";var Hr=function(t,e){var n,r=t[Pr];return r||(r=t[Pr]={}),(n=r[e])||(n=r[e]=[]),n},Fr=y,jr=T,qr=Hr;function _r(t,e,n){var r,o=qr(t,e);n?(jr(o,(function(o,i){return n!==o.handler||(zr(t,e,o.wrappedHandler),r=i,!1)})),o.splice(r,1)):(jr(o,(function(n){zr(t,e,n.wrappedHandler)})),o.splice(0,o.length))}function zr(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}var Ur=function(t,e,n){Fr(e)?jr(e.split(/\s+/g),(function(e){_r(t,e,n)})):jr(e,(function(e,n){_r(t,n,e)}))},Vr=y,$r=T,Wr=Hr;function Gr(t,e,n,r){function o(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),function(t,e,n,r){var o=Wr(t,e),i=!1;$r(o,(function(t){return t.handler!==n||(i=!0,!1)})),i||o.push({handler:n,wrappedHandler:r})}(t,e,n,o)}var Yr=function(t,e,n,r){Vr(e)?$r(e.split(/\s+/g),(function(e){Gr(t,e,n,r)})):$r(e,(function(e,r){Gr(t,r,e,n)}))},Xr=function(t,e){return Xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Xr(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Kr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Xr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Zr=function(){return Zr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Zr.apply(this,arguments)};function Qr(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var Jr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},to={};function eo(t,e,n){var r,o,i,a,s,l="";for("string"!=typeof e&&(n=e,e=eo.defaultChars),void 0===n&&(n=!0),s=function(t){var e,n,r=to[t];if(r)return r;for(r=to[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}(e),r=0,o=t.length;r<o;r++)if(i=t.charCodeAt(r),n&&37===i&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))l+=t.slice(r,r+3),r+=2;else if(i<128)l+=s[i];else if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&r+1<o&&(a=t.charCodeAt(r+1))>=56320&&a<=57343){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(t[r]);return l}eo.defaultChars=";/?:@&=+$,-_.!~*'()#",eo.componentChars="-_.!~*'()";var no=eo,ro={},oo={},io={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""},ao={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""},so={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'},lo={},uo=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});var co=uo({0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),po=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)};lo.default=function(t){return t>=55296&&t<=57343||t>1114111?"":(t in co.default&&(t=co.default[t]),po(t))};var fo=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0}),oo.decodeHTML=oo.decodeHTMLStrict=oo.decodeXML=void 0;var ho=fo(io),mo=fo(ao),vo=fo(so),go=fo(lo),yo=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function bo(t){var e=ko(t);return function(t){return String(t).replace(yo,e)}}oo.decodeXML=bo(vo.default),oo.decodeHTMLStrict=bo(ho.default);var wo=function(t,e){return t<e?1:-1};function ko(t){return function(e){if("#"===e.charAt(1)){var n=e.charAt(2);return"X"===n||"x"===n?go.default(parseInt(e.substr(3),16)):go.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}oo.decodeHTML=function(){for(var t=Object.keys(mo.default).sort(wo),e=Object.keys(ho.default).sort(wo),n=0,r=0;n<e.length;n++)t[r]===e[n]?(e[n]+=";?",r++):e[n]+=";";var o=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),i=ko(ho.default);function a(t){return";"!==t.substr(-1)&&(t+=";"),i(t)}return function(t){return String(t).replace(o,a)}}();var xo={},Co=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xo,"__esModule",{value:!0}),xo.escapeUTF8=xo.escape=xo.encodeNonAsciiHTML=xo.encodeHTML=xo.encodeXML=void 0;var To=Ao(Co(so).default),Eo=Oo(To);xo.encodeXML=Po(To);var Lo,Mo,No=Ao(Co(io).default),So=Oo(No);function Ao(t){return Object.keys(t).sort().reduce((function(e,n){return e[t[n]]="&"+n+";",e}),{})}function Oo(t){for(var e=[],n=[],r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];1===i.length?e.push("\\"+i):n.push(i)}e.sort();for(var a=0;a<e.length-1;a++){for(var s=a;s<e.length-1&&e[s].charCodeAt(1)+1===e[s+1].charCodeAt(1);)s+=1;var l=1+s-a;l<3||e.splice(a,l,e[a]+"-"+e[s])}return n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}xo.encodeHTML=(Lo=No,Mo=So,function(t){return t.replace(Mo,(function(t){return Lo[t]})).replace(Do,Ro)}),xo.encodeNonAsciiHTML=Po(No);var Do=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,Io=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function Ro(t){return"&#x"+(t.length>1?Io(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}var Bo=new RegExp(Eo.source+"|"+Do.source,"g");function Po(t){return function(e){return e.replace(Bo,(function(e){return t[e]||Ro(e)}))}}xo.escape=function(t){return t.replace(Bo,Ro)},xo.escapeUTF8=function(t){return t.replace(Eo,Ro)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var e=oo,n=xo;t.decode=function(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTML)(t)},t.decodeStrict=function(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTMLStrict)(t)},t.encode=function(t,e){return(!e||e<=0?n.encodeXML:n.encodeHTML)(t)};var r=xo;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return r.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return r.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return r.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return r.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return r.encodeHTML}});var o=oo;Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})}(ro);var Ho="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Fo=/[\\&]/,jo="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",qo=new RegExp("\\\\"+jo+"|"+Ho,"gi"),_o=new RegExp('[&<>"]',"g"),zo=function(t){return 92===t.charCodeAt(0)?t.charAt(1):ro.decodeHTML(t)};function Uo(t){return Fo.test(t)?t.replace(qo,zo):t}function Vo(t){try{return no(t)}catch(e){return t}}function $o(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function Wo(t){return _o.test(t)?t.replace(_o,$o):t}function Go(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n.join("")}function Yo(t){return!t||!/[^ \t]+/.test(t)}var Xo=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.next=function(){var t=this.current,e=this.entering;if(null===t)return null;var n=Ko(t);return e&&n?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:null===t.next?(this.current=t.parent,this.entering=!1):(this.current=t.next,this.entering=!0),{entering:e,node:t}},t.prototype.resumeAt=function(t,e){this.current=t,this.entering=!0===e},t}();function Ko(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var Zo=1,Qo={};function Jo(t){delete Qo[t]}var ti=function(){function t(t,e){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,this.id="document"===t?-1:Zo++,this.type=t,this.sourcepos=e,Qo[this.id]=this}return t.prototype.isContainer=function(){return Ko(this)},t.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},t.prototype.replaceWith=function(t){this.insertBefore(t),this.unlink()},t.prototype.insertAfter=function(t){t.unlink(),t.next=this.next,t.next&&(t.next.prev=t),t.prev=this,this.next=t,this.parent&&(t.parent=this.parent,t.next||(t.parent.lastChild=t))},t.prototype.insertBefore=function(t){t.unlink(),t.prev=this.prev,t.prev&&(t.prev.next=t),t.next=this,this.prev=t,t.parent=this.parent,t.prev||(t.parent.firstChild=t)},t.prototype.appendChild=function(t){t.unlink(),t.parent=this,this.lastChild?(this.lastChild.next=t,t.prev=this.lastChild,this.lastChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.prependChild=function(t){t.unlink(),t.parent=this,this.firstChild?(this.firstChild.prev=t,t.next=this.firstChild,this.firstChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.walker=function(){return new Xo(this)},t}(),ei=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.open=!0,r.lineOffsets=null,r.stringContent=null,r.lastLineBlank=!1,r.lastLineChecked=!1,r.type=e,r}return Kr(e,t),e}(ti),ni=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listData=null,e}return Kr(e,t),e}(ei),ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.headingType="atx",e}return Kr(e,t),e}(ei),oi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFenced=!1,e.fenceChar=null,e.fenceLength=0,e.fenceOffset=-1,e.info=null,e.infoPadding=0,e}return Kr(e,t),e}(ei),ii=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columns=[],e}return Kr(e,t),e}(ei),ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startIdx=0,e.endIdx=0,e.paddingLeft=0,e.paddingRight=0,e.ignored=!1,e}return Kr(e,t),e}(ei),si=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="",e.dest="",e.label="",e}return Kr(e,t),e}(ei),li=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syntaxLength=0,e.offset=-1,e.info="",e}return Kr(e,t),e}(ei),ui=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.htmlBlockType=-1,e}return Kr(e,t),e}(ei),ci=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=null,e.title=null,e.extendedAutolink=!1,e}return Kr(e,t),e}(ti),pi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickCount=0,e}return Kr(e,t),e}(ti),di=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info="",e}return Kr(e,t),e}(ti);function fi(t,e){switch(t){case"heading":return new ri(t,e);case"list":case"item":return new ni(t,e);case"link":case"image":return new ci(t,e);case"codeBlock":return new oi(t,e);case"htmlBlock":return new ui(t,e);case"table":return new ii(t,e);case"tableCell":return new ai(t,e);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new ei(t,e);case"code":return new pi(t,e);case"refDef":return new si(t,e);case"customBlock":return new li(t,e);case"customInline":return new di(t,e);default:return new ti(t,e)}}function hi(t){return"codeBlock"===t.type}function mi(t){return"list"===t.type}function vi(t){return"refDef"===t.type}function gi(t){return"customBlock"===t.type}function yi(t,e){var n=fi("text",e);return n.literal=t,n}var bi,wi="[A-Za-z][A-Za-z0-9-]*",ki="<"+wi+"(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>",xi="</"+wi+"\\s*[>]",Ci=new RegExp("^"+("(?:"+ki+"|"+xi+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|[<][?].*?[?][>]|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),"i");if(String.fromCodePoint)bi=function(t){try{return String.fromCodePoint(t)}catch(t){if(t instanceof RangeError)return String.fromCharCode(65533);throw t}};else{var Ti=String.fromCharCode,Ei=Math.floor;bi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=[],i=-1,a=t.length;if(!a)return"";for(var s="";++i<a;){var l=Number(t[i]);if(!isFinite(l)||l<0||l>1114111||Ei(l)!==l)return String.fromCharCode(65533);l<=65535?o.push(l):(n=55296+((l-=65536)>>10),r=l%1024+56320,o.push(n,r)),(i+1===a||o.length>16384)&&(s+=Ti.apply(void 0,o),o.length=0)}return s}}var Li=bi,Mi="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",Ni="[^<\\s]*[^<?!.,:*_?~\\s]",Si="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function Ai(t){var e=/\)+$/.exec(t);if(e){for(var n=0,r=0,o=t;r<o.length;r++){var i=o[r];"("===i?n<0?n=1:n+=1:")"===i&&(n-=1)}if(n<0){var a=Math.min(-n,e[0].length);return t.substring(0,t.length-a)}}return t}function Oi(t){return t.replace(/&[A-Za-z0-9]+;$/,"")}function Di(t){return Qr(Qr([],function(t){for(var e,n=new RegExp("(www|https?://)."+Mi+Ni,"g"),r=[];e=n.exec(t);){var o=Oi(Ai(e[0])),i="www"===e[1]?"http://":"";r.push({text:o,range:[e.index,e.index+o.length-1],url:""+i+o})}return r}(t)),function(t){for(var e,n=new RegExp(Si,"g"),r=[];e=n.exec(t);){var o=e[0];/[_-]+$/.test(o)||r.push({text:o,range:[e.index,e.index+o.length-1],url:"mailto:"+o})}return r}(t)).sort((function(t,e){return t.range[0]-e.range[0]}))}function Ii(t){return t[t.length-1]}function Ri(t){return t.slice(1,t.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function Bi(t,e){Object.keys(t).forEach((function(n){e(n,t[n])}))}function Pi(t){return!Object.keys(t).length}var Hi=126,Fi=39,ji=34,qi=36,_i="\\\\"+jo,zi=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),Ui=new RegExp('^(?:"('+_i+'|[^"\\x00])*"|\'('+_i+"|[^'\\x00])*'|\\(("+_i+"|[^()\\x00])*\\))"),Vi=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,$i=new RegExp("^"+jo),Wi=new RegExp("^"+Ho,"i"),Gi=/`+/,Yi=/^`+/,Xi=/\.\.\./g,Ki=/--+/g,Zi=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Qi=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,Ji=/^ *(?:\n *)?/,ta=/^[ \t\n\x0b\x0c\x0d]/,ea=/^\s/,na=/ *$/,ra=/^ */,oa=/^ *(?:\n|$)/,ia=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,aa=/^[^\n`\[\]\\!<&*_'"~$]+/m,sa=function(){function t(t){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=t}return t.prototype.sourcepos=function(t,e){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],r=this.lineStartNum+this.lineIdx,o=[r,t+n];return"number"==typeof e?[o,[r,e+n]]:o},t.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},t.prototype.match=function(t){var e=t.exec(this.subject.slice(this.pos));return null===e?null:(this.pos+=e.index+e[0].length,e[0])},t.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},t.prototype.spnl=function(){return this.match(Ji),!0},t.prototype.parseBackticks=function(t){var e=this.pos+1,n=this.match(Yi);if(null===n)return!1;for(var r,o=this.pos;null!==(r=this.match(Gi));)if(r===n){var i=this.subject.slice(o,this.pos-n.length),a=this.sourcepos(e,this.pos),s=i.split("\n");if(s.length>1){var l=Ii(s);this.lineIdx+=s.length-1,this.linePosOffset=-(this.pos-l.length-n.length),a[1]=this.sourcepos(this.pos),i=s.join(" ")}var u=fi("code",a);return i.length>0&&null!==i.match(/[^ ]/)&&" "==i[0]&&" "==i[i.length-1]?u.literal=i.slice(1,i.length-1):u.literal=i,u.tickCount=n.length,t.appendChild(u),!0}return this.pos=o,t.appendChild(yi(n,this.sourcepos(e,this.pos-1))),!0},t.prototype.parseBackslash=function(t){var e,n=this.subject;this.pos+=1;var r=this.pos;return 10===this.peek()?(this.pos+=1,e=fi("linebreak",this.sourcepos(this.pos-1,this.pos)),t.appendChild(e),this.nextLine()):$i.test(n.charAt(this.pos))?(t.appendChild(yi(n.charAt(this.pos),this.sourcepos(r,this.pos))),this.pos+=1):t.appendChild(yi("\\",this.sourcepos(r,r))),!0},t.prototype.parseAutolink=function(t){var e,n,r,o=this.pos+1;return(e=this.match(Zi))?(n=e.slice(1,e.length-1),(r=fi("link",this.sourcepos(o,this.pos))).destination=Vo("mailto:"+n),r.title="",r.appendChild(yi(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0):!!(e=this.match(Qi))&&(n=e.slice(1,e.length-1),(r=fi("link",this.sourcepos(o,this.pos))).destination=Vo(n),r.title="",r.appendChild(yi(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0)},t.prototype.parseHtmlTag=function(t){var e=this.pos+1,n=this.match(Ci);if(null===n)return!1;var r=fi("htmlInline",this.sourcepos(e,this.pos));return r.literal=n,t.appendChild(r),!0},t.prototype.scanDelims=function(t){var e=0,n=this.pos;if(t===Fi||t===ji)e++,this.pos++;else for(;this.peek()===t;)e++,this.pos++;if(0===e||e<2&&(t===Hi||t===qi))return this.pos=n,null;var r,o=0===n?"\n":this.subject.charAt(n-1),i=this.peek();r=-1===i?"\n":Li(i);var a,s,l=ea.test(r),u=zi.test(r),c=ea.test(o),p=zi.test(o),d=!l&&(!u||c||p),f=!c&&(!p||l||u);return 95===t?(a=d&&(!f||p),s=f&&(!d||u)):t===Fi||t===ji?(a=d&&!f,s=f):t===qi?(a=!l,s=!c):(a=d,s=f),this.pos=n,{numdelims:e,canOpen:a,canClose:s}},t.prototype.handleDelim=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var r=n.numdelims,o=this.pos+1;this.pos+=r;var i=yi(t===Fi?"":t===ji?"":this.subject.slice(o-1,this.pos),this.sourcepos(o,this.pos));return e.appendChild(i),(n.canOpen||n.canClose)&&(this.options.smart||t!==Fi&&t!==ji)&&(this.delimiters={cc:t,numdelims:r,origdelims:r,node:i,previous:this.delimiters,next:null,canOpen:n.canOpen,canClose:n.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},t.prototype.removeDelimiter=function(t){null!==t.previous&&(t.previous.next=t.next),null===t.next?this.delimiters=t.previous:t.next.previous=t.previous},t.prototype.removeDelimitersBetween=function(t,e){t.next!==e&&(t.next=e,e.previous=t)},t.prototype.processEmphasis=function(t){var e,n,r,o,i,a,s,l=!1,u=((e={})[95]=[t,t,t],e[42]=[t,t,t],e[39]=[t],e[34]=[t],e[126]=[t],e[36]=[t],e);for(r=this.delimiters;null!==r&&r.previous!==t;)r=r.previous;for(;null!==r;){var c=r.cc,p=95===c||42===c;if(r.canClose){for(n=r.previous,s=!1;null!==n&&n!==t&&n!==u[c][p?r.origdelims%3:0];){if(l=p&&(r.canOpen||n.canClose)&&r.origdelims%3!=0&&(n.origdelims+r.origdelims)%3==0,n.cc===r.cc&&n.canOpen&&!l){s=!0;break}n=n.previous}if(o=r,p||c===Hi||c===qi)if(s){if(n){var d=r.numdelims>=2&&n.numdelims>=2?2:1,f=p?0:1;i=n.node,a=r.node;var h=p?1===d?"emph":"strong":"strike";c===qi&&(h="customInline");var m=fi(h),v=i.sourcepos[1],g=a.sourcepos[0];m.sourcepos=[[v[0],v[1]-d+1],[g[0],g[1]+d-1]],i.sourcepos[1][1]-=d,a.sourcepos[0][1]+=d,i.literal=i.literal.slice(d),a.literal=a.literal.slice(d),n.numdelims-=d,r.numdelims-=d;for(var y=i.next,b=void 0;y&&y!==a;)b=y.next,y.unlink(),m.appendChild(y),y=b;if(c===qi){var w=m.firstChild,k=w.literal||"",x=k.split(/\s/)[0];m.info=x,k.length<=x.length?w.unlink():(w.sourcepos[0][1]+=x.length,w.literal=k.replace(x+" ",""))}if(i.insertAfter(m),this.removeDelimitersBetween(n,r),n.numdelims<=f&&(0===n.numdelims&&i.unlink(),this.removeDelimiter(n)),r.numdelims<=f){0===r.numdelims&&a.unlink();var C=r.next;this.removeDelimiter(r),r=C}}}else r=r.next;else c===Fi?(r.node.literal="",s&&(n.node.literal=""),r=r.next):c===ji&&(r.node.literal="",s&&(n.node.literal=""),r=r.next);s||(u[c][p?o.origdelims%3:0]=o.previous,o.canOpen||this.removeDelimiter(o))}else r=r.next}for(;null!==this.delimiters&&this.delimiters!==t;)this.removeDelimiter(this.delimiters)},t.prototype.parseLinkTitle=function(){var t=this.match(Ui);return null===t?null:Uo(t.substr(1,t.length-2))},t.prototype.parseLinkDestination=function(){var t=this.match(Vi);if(null===t){if(60===this.peek())return null;for(var e=this.pos,n=0,r=void 0;-1!==(r=this.peek());)if(92===r&&$i.test(this.subject.charAt(this.pos+1)))this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(40===r)this.pos+=1,n+=1;else if(41===r){if(n<1)break;this.pos+=1,n-=1}else{if(null!==ta.exec(Li(r)))break;this.pos+=1}return this.pos===e&&41!==r||0!==n?null:Vo(Uo(t=this.subject.substr(e,this.pos-e)))}return Vo(Uo(t.substr(1,t.length-2)))},t.prototype.parseLinkLabel=function(){var t=this.match(ia);return null===t||t.length>1001?0:t.length},t.prototype.parseOpenBracket=function(t){var e=this.pos;this.pos+=1;var n=yi("[",this.sourcepos(this.pos,this.pos));return t.appendChild(n),this.addBracket(n,e,!1),!0},t.prototype.parseBang=function(t){var e=this.pos;if(this.pos+=1,91===this.peek()){this.pos+=1;var n=yi("![",this.sourcepos(this.pos-1,this.pos));t.appendChild(n),this.addBracket(n,e+1,!0)}else{n=yi("!",this.sourcepos(this.pos,this.pos));t.appendChild(n)}return!0},t.prototype.parseCloseBracket=function(t){var e=null,n=null,r=!1;this.pos+=1;var o=this.pos,i=this.brackets;if(null===i)return t.appendChild(yi("]",this.sourcepos(o,o))),!0;if(!i.active)return t.appendChild(yi("]",this.sourcepos(o,o))),this.removeBracket(),!0;var a=i.image,s=this.pos;40===this.peek()&&(this.pos++,this.spnl()&&null!==(e=this.parseLinkDestination())&&this.spnl()&&(ta.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle()),1)&&this.spnl()&&41===this.peek()?(this.pos+=1,r=!0):this.pos=s);var l="";if(!r){var u=this.pos,c=this.parseLinkLabel();if(c>2?l=this.subject.slice(u,u+c):i.bracketAfter||(l=this.subject.slice(i.index,o)),0===c&&(this.pos=s),l){l=Ri(l);var p=this.refMap[l];p&&(e=p.destination,n=p.title,r=!0)}}if(r){var d=fi(a?"image":"link");d.destination=e,d.title=n||"",d.sourcepos=[i.startpos,this.sourcepos(this.pos)];for(var f=i.node.next,h=void 0;f;)h=f.next,f.unlink(),d.appendChild(f),f=h;if(t.appendChild(d),this.processEmphasis(i.previousDelimiter),this.removeBracket(),i.node.unlink(),!a)for(i=this.brackets;null!==i;)i.image||(i.active=!1),i=i.previous;return this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:l}),!0}return this.removeBracket(),this.pos=o,t.appendChild(yi("]",this.sourcepos(o,o))),this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:l}),!0},t.prototype.addBracket=function(t,e,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:t,startpos:this.sourcepos(e+(n?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},t.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},t.prototype.parseEntity=function(t){var e,n=this.pos+1;return!!(e=this.match(Wi))&&(t.appendChild(yi(ro.decodeHTML(e),this.sourcepos(n,this.pos))),!0)},t.prototype.parseString=function(t){var e,n=this.pos+1;if(e=this.match(aa)){if(this.options.smart){var r=e.replace(Xi,"").replace(Ki,(function(t){var e=0,n=0;return t.length%3==0?n=t.length/3:t.length%2==0?e=t.length/2:t.length%3==2?(e=1,n=(t.length-2)/3):(e=2,n=(t.length-4)/3),Go("",n)+Go("",e)}));t.appendChild(yi(r,this.sourcepos(n,this.pos)))}else{var o=yi(e,this.sourcepos(n,this.pos));t.appendChild(o)}return!0}return!1},t.prototype.parseNewline=function(t){this.pos+=1;var e=t.lastChild;if(e&&"text"===e.type&&" "===e.literal[e.literal.length-1]){var n=" "===e.literal[e.literal.length-2],r=e.literal.length;e.literal=e.literal.replace(na,"");var o=r-e.literal.length;e.sourcepos[1][1]-=o,t.appendChild(fi(n?"linebreak":"softbreak",this.sourcepos(this.pos-o,this.pos)))}else t.appendChild(fi("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(ra),!0},t.prototype.parseReference=function(t,e){if(!this.options.referenceDefinition)return 0;this.subject=t.stringContent,this.pos=0;var n=null,r=this.pos,o=this.parseLinkLabel();if(0===o)return 0;var i=this.subject.substr(0,o);if(58!==this.peek())return this.pos=r,0;this.pos++,this.spnl();var a=this.parseLinkDestination();if(null===a)return this.pos=r,0;var s=this.pos;this.spnl(),this.pos!==s&&(n=this.parseLinkTitle()),null===n&&(n="",this.pos=s);var l=!0;if(null===this.match(oa)&&(""===n?l=!1:(n="",this.pos=s,l=null!==this.match(oa))),!l)return this.pos=r,0;var u=Ri(i);if(""===u)return this.pos=r,0;var c=this.getReferenceDefSourcepos(t);t.sourcepos[0][0]=c[1][0]+1;var p=fi("refDef",c);return p.title=n,p.dest=a,p.label=u,t.insertBefore(p),e[u]?this.refDefCandidateMap[p.id]=p:e[u]=ns(p),this.pos-r},t.prototype.mergeTextNodes=function(t){for(var e,n=[];e=t.next();){var r=e.entering,o=e.node;if(r&&"text"===o.type)n.push(o);else if(1===n.length)n=[];else if(n.length>1){var i=n[0],a=n[n.length-1];i.sourcepos&&a.sourcepos&&(i.sourcepos[1]=a.sourcepos[1]),i.next=a.next,i.next&&(i.next.prev=i);for(var s=1;s<n.length;s+=1)i.literal+=n[s].literal,n[s].unlink();n=[]}}},t.prototype.getReferenceDefSourcepos=function(t){for(var e=t.stringContent.split(/\n|\r\n/),n=!1,r=0,o={line:0,ch:0},i=0;i<e.length;i+=1){var a=e[i];if(ta.test(a))break;if(/\:/.test(a)&&0===r){if(n)break;var s=a.indexOf(":")===a.length-1?i+1:i;o={line:s,ch:e[s].length},n=!0}var l=a.match(/'|"/g);if(l&&(r+=l.length),2===r){o={line:i,ch:a.length};break}}return[[t.sourcepos[0][0],t.sourcepos[0][1]],[t.sourcepos[0][0]+o.line,o.ch]]},t.prototype.parseInline=function(t){var e,n=!1,r=this.peek();if(-1===r)return!1;switch(r){case 10:n=this.parseNewline(t);break;case 92:n=this.parseBackslash(t);break;case 96:n=this.parseBackticks(t);break;case 42:case 95:case Hi:case qi:n=this.handleDelim(r,t);break;case Fi:case ji:n=!!(null===(e=this.options)||void 0===e?void 0:e.smart)&&this.handleDelim(r,t);break;case 91:n=this.parseOpenBracket(t);break;case 33:n=this.parseBang(t);break;case 93:n=this.parseCloseBracket(t);break;case 60:n=this.parseAutolink(t)||this.parseHtmlTag(t);break;case 38:t.disabledEntityParse||(n=this.parseEntity(t));break;default:n=this.parseString(t)}return n||(this.pos+=1,t.appendChild(yi(Li(r),this.sourcepos(this.pos,this.pos+1)))),!0},t.prototype.parse=function(t){for(this.subject=t.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=t.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=t.sourcepos[0][0],function(t){return"heading"===t.type}(t)&&(this.lineOffsets[0]+=t.level+1);this.parseInline(t););t.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(t.walker());var e=this.options,n=e.extendedAutolinks,r=e.customParser;if(n&&function(t,e){var n;"boolean"==typeof e&&(e=Di);for(var r=function(){var t=n.entering,r=n.node;if(t&&"text"===r.type&&"link"!==r.parent.type){var o=r.literal,i=e(o);if(!i||!i.length)return"continue";for(var a=0,s=r.sourcepos[0],l=s[0],u=s[1],c=function(t,e){return[[l,u+t],[l,u+e]]},p=[],d=0,f=i;d<f.length;d++){var h=f[d],m=h.range,v=h.url,g=h.text;m[0]>a&&p.push(yi(o.substring(a,m[0]),c(a,m[0]-1)));var y=fi("link",c.apply(void 0,m));y.appendChild(yi(g,c.apply(void 0,m))),y.destination=v,y.extendedAutolink=!0,p.push(y),a=m[1]+1}a<o.length&&p.push(yi(o.substring(a),c(a,o.length-1)));for(var b=0,w=p;b<w.length;b++){var k=w[b];r.insertBefore(k)}r.unlink()}};n=t.next();)r()}(t.walker(),n),r&&t.firstChild)for(var o,i=t.firstChild.walker();o=i.next();){var a=o.node,s=o.entering;r[a.type]&&r[a.type](a,{entering:s,options:this.options})}},t}(),la=/^\[([ \txX])\][ \t]+/;var ua=9,ca=32,pa=/[^ \t\f\v\r\n]/,da=/^(?:`{3,}|~{3,})(?= *$)/;function fa(t){for(var e=t;e;){if(e.lastLineBlank)return!0;var n=e.type;if(e.lastLineChecked||"list"!==n&&"item"!==n){e.lastLineChecked=!0;break}e.lastLineChecked=!0,e=e.lastChild}return!1}function ha(t,e){return e<t.length?t.charCodeAt(e):-1}function ma(t){return!pa.test(t)}function va(t){return t===ca||t===ua}var ga=/^\$\$$/,ya={continue:function(t,e){var n=t.currentLine,r=n.match(ga);if(r)return t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2;for(var o=e.offset;o>0&&va(ha(n,t.offset));)t.advanceOffset(1,!0),o--;return 0},finalize:function(t,e){if(null!==e.stringContent){var n=e.stringContent,r=n.indexOf("\n"),o=n.slice(0,r),i=n.slice(r+1),a=o.match(/^(\s*)(.*)/);e.info=Uo(a[2].trim()),e.literal=i,e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},ba={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},wa={continue:function(){return 0},finalize:function(t,e){for(var n=e.firstChild;n;){if(fa(n)&&n.next){e.listData.tight=!1;break}for(var r=n.firstChild;r;){if(fa(r)&&(n.next||r.next)){e.listData.tight=!1;break}r=r.next}n=n.next}},canContain:function(t){return"item"===t},acceptsLines:!1},ka={continue:function(t,e){if(t.blank){if(null===e.firstChild)return 1;t.advanceNextNonspace()}else{if(!(t.indent>=e.listData.markerOffset+e.listData.padding))return 1;t.advanceOffset(e.listData.markerOffset+e.listData.padding,!0)}return 0},finalize:function(t,e){if(e.firstChild&&"paragraph"===e.firstChild.type){var n=e.firstChild,r=n.stringContent.match(la);if(r){var o=r[0].length;n.stringContent=n.stringContent.substring(o-1),n.sourcepos[0][1]+=o,n.lineOffsets[0]+=o,e.listData.task=!0,e.listData.checked=/[xX]/.test(r[1])}}},canContain:function(t){return"item"!==t},acceptsLines:!1},xa={continue:function(t,e){var n=t.currentLine,r=t.indent;if(e.isFenced){var o=r<=3&&n.charAt(t.nextNonspace)===e.fenceChar&&n.slice(t.nextNonspace).match(da);if(o&&o[0].length>=e.fenceLength)return t.lastLineLength=t.offset+r+o[0].length,t.finalize(e,t.lineNumber),2;for(var i=e.fenceOffset;i>0&&va(ha(n,t.offset));)t.advanceOffset(1,!0),i--}else if(r>=4)t.advanceOffset(4,!0);else{if(!t.blank)return 1;t.advanceNextNonspace()}return 0},finalize:function(t,e){var n;if(null!==e.stringContent){if(e.isFenced){var r=e.stringContent,o=r.indexOf("\n"),i=r.slice(0,o),a=r.slice(o+1),s=i.match(/^(\s*)(.*)/);e.infoPadding=s[1].length,e.info=Uo(s[2].trim()),e.literal=a}else e.literal=null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,"\n");e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},Ca={continue:function(t){return t.blank?1:0},finalize:function(t,e){if(null!==e.stringContent){for(var n,r=!1;91===ha(e.stringContent,0)&&(n=t.inlineParser.parseReference(e,t.refMap));)e.stringContent=e.stringContent.slice(n),r=!0;r&&ma(e.stringContent)&&e.unlink()}},canContain:function(){return!1},acceptsLines:!0},Ta={document:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},list:wa,blockQuote:{continue:function(t){var e=t.currentLine;return t.indented||62!==ha(e,t.nextNonspace)?1:(t.advanceNextNonspace(),t.advanceOffset(1,!1),va(ha(e,t.offset))&&t.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},item:ka,heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematicBreak:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},codeBlock:xa,htmlBlock:{continue:function(t,e){return!t.blank||6!==e.htmlBlockType&&7!==e.htmlBlockType?0:1},finalize:function(t,e){var n;e.literal=(null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,""))||null,e.stringContent=null},canContain:function(){return!1},acceptsLines:!0},paragraph:Ca,table:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableHead"===t||"tableBody"===t},acceptsLines:!1},tableBody:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableRow"===t},acceptsLines:!1},tableHead:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableRow"===t||"tableDelimRow"===t},acceptsLines:!1},tableRow:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableCell"===t},acceptsLines:!1},tableCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},tableDelimRow:{continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableDelimCell"===t},acceptsLines:!1},tableDelimCell:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},refDef:ba,customBlock:ya,frontMatter:ba};function Ea(t){for(var e=0,n=0,r=[],o=0;o<t.length;o+=1)if("|"===t[o]&&"\\"!==t[o-1]){var i=t.substring(e,o);0===e&&Yo(i)?n=o+1:r.push(i),e=o+1}e<t.length&&(Yo(i=t.substring(e,t.length))||r.push(i));return[n,r]}function La(t,e,n,r){for(var o=[],i=0,a=e;i<a.length;i++){var s=a[i],l=s.match(/^[ \t]+/),u=l?l[0].length:0,c=void 0,p=void 0;if(u===s.length)u=0,c=0,p="";else{var d=s.match(/[ \t]+$/);c=d?d[0].length:0,p=s.slice(u,s.length-c)}var f=r+u,h=fi(t,[[n,r],[n,r+s.length-1]]);h.stringContent=p.replace(/\\\|/g,"|"),h.startIdx=o.length,h.endIdx=o.length,h.lineOffsets=[f-1],h.paddingLeft=u,h.paddingRight=c,o.push(h),r+=s.length+1}return o}function Ma(t){var e=null,n=t.stringContent,r=n[0];return":"===n[n.length-1]?e=":"===r?"center":"right":":"===r&&(e="left"),{align:e}}var Na=/^(\$\$)(\s*[a-zA-Z])+/,Sa=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,Aa=/^`{3,}(?!.*`)|^~{3,}/,Oa=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+ki+"|"+xi+")\\s*$","i")],Da=/^(?:=+|-+)[ \t]*$/,Ia=/^#{1,6}(?:[ \t]+|$)/,Ra=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,Ba=/^[*+-]/,Pa=/^(\d{1,9})([.)])/;function Ha(t,e){return t.options.disallowDeepHeading&&("blockQuote"===e.type||"item"===e.type)}var Fa=[function(t){return t.indented||62!==ha(t.currentLine,t.nextNonspace)?0:(t.advanceNextNonspace(),t.advanceOffset(1,!1),va(ha(t.currentLine,t.offset))&&t.advanceOffset(1,!0),t.closeUnmatchedBlocks(),t.addChild("blockQuote",t.nextNonspace),1)},function(t,e){var n;if(!t.indented&&!Ha(t,e)&&(n=t.currentLine.slice(t.nextNonspace).match(Ia))){t.advanceNextNonspace(),t.advanceOffset(n[0].length,!1),t.closeUnmatchedBlocks();var r=t.addChild("heading",t.nextNonspace);return r.level=n[0].trim().length,r.headingType="atx",r.stringContent=t.currentLine.slice(t.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),t.advanceOffset(t.currentLine.length-t.offset),2}return 0},function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(Aa))){var n=e[0].length;t.closeUnmatchedBlocks();var r=t.addChild("codeBlock",t.nextNonspace);return r.isFenced=!0,r.fenceLength=n,r.fenceChar=e[0][0],r.fenceOffset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},function(t,e){if(!t.indented&&60===ha(t.currentLine,t.nextNonspace)){var n=t.currentLine.slice(t.nextNonspace),r=t.options.disallowedHtmlBlockTags,o=void 0;for(o=1;o<=7;o++){var i=n.match(Oa[o]);if(i){if(7===o){if("paragraph"===e.type)return 0;if(r.length>0)if(new RegExp("</?(?:"+r.join("|")+")","i").test(i[0]))return 0}return t.closeUnmatchedBlocks(),t.addChild("htmlBlock",t.offset).htmlBlockType=o,2}}}return 0},function(t,e){var n;if(null!==e.stringContent&&!t.indented&&"paragraph"===e.type&&!Ha(t,e.parent)&&(n=t.currentLine.slice(t.nextNonspace).match(Da))){t.closeUnmatchedBlocks();for(var r=void 0;91===ha(e.stringContent,0)&&(r=t.inlineParser.parseReference(e,t.refMap));)e.stringContent=e.stringContent.slice(r);if(e.stringContent.length>0){var o=fi("heading",e.sourcepos);return o.level="="===n[0][0]?1:2,o.headingType="setext",o.stringContent=e.stringContent,e.insertAfter(o),e.unlink(),t.tip=o,t.advanceOffset(t.currentLine.length-t.offset,!1),2}return 0}return 0},function(t){return!t.indented&&Ra.test(t.currentLine.slice(t.nextNonspace))?(t.closeUnmatchedBlocks(),t.addChild("thematicBreak",t.nextNonspace),t.advanceOffset(t.currentLine.length-t.offset,!1),2):0},function(t,e){var n,r,o,i=e;return t.indented&&"list"!==e.type||!(n=function(t,e){var n,r,o=t.currentLine.slice(t.nextNonspace),i={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:t.indent,task:!1,checked:!1};if(t.indent>=4)return null;if(n=o.match(Ba))i.type="bullet",i.bulletChar=n[0][0];else{if(!(n=o.match(Pa))||"paragraph"===e.type&&"1"!==n[1])return null;i.type="ordered",i.start=parseInt(n[1],10),i.delimiter=n[2]}if(-1!==(r=ha(t.currentLine,t.nextNonspace+n[0].length))&&r!==ua&&r!==ca)return null;if("paragraph"===e.type&&!t.currentLine.slice(t.nextNonspace+n[0].length).match(pa))return null;t.advanceNextNonspace(),t.advanceOffset(n[0].length,!0);var a=t.column,s=t.offset;do{t.advanceOffset(1,!0),r=ha(t.currentLine,t.offset)}while(t.column-a<5&&va(r));var l=-1===ha(t.currentLine,t.offset),u=t.column-a;return u>=5||u<1||l?(i.padding=n[0].length+1,t.column=a,t.offset=s,va(ha(t.currentLine,t.offset))&&t.advanceOffset(1,!0)):i.padding=n[0].length+u,i}(t,i))?0:(t.closeUnmatchedBlocks(),"list"===t.tip.type&&(r=i.listData,o=n,r.type===o.type&&r.delimiter===o.delimiter&&r.bulletChar===o.bulletChar)||((i=t.addChild("list",t.nextNonspace)).listData=n),(i=t.addChild("item",t.nextNonspace)).listData=n,1)},function(t){return t.indented&&"paragraph"!==t.tip.type&&!t.blank?(t.advanceOffset(4,!0),t.closeUnmatchedBlocks(),t.addChild("codeBlock",t.offset),2):0},function(t,e){var n=e.stringContent;if("paragraph"===e.type&&!t.indented&&!t.blank){var r=n.length-1,o=n.lastIndexOf("\n",r-1)+1,i=n.slice(o,r),a=t.currentLine.slice(t.nextNonspace),s=Ea(i),l=s[0],u=s[1],c=Ea(a),p=c[0],d=c[1],f=/^[ \t]*:?-+:?[ \t]*$/;if(!u.length||!d.length||d.some((function(t){return!f.test(t)}))||1===d.length&&0!==a.indexOf("|"))return 0;var h=e.lineOffsets,m=t.lineNumber-1,v=Ii(h)+1,g=fi("table",[[m,v],[t.lineNumber,t.offset]]);if(g.columns=d.map((function(){return{align:null}})),e.insertAfter(g),1===h.length)e.unlink();else{e.stringContent=n.slice(0,o);var y=o-(n.lastIndexOf("\n",o-2)+1)-1;t.lastLineLength=h[h.length-2]+y,t.finalize(e,m-1)}t.advanceOffset(t.currentLine.length-t.offset,!1);var b=fi("tableHead",[[m,v],[t.lineNumber,t.offset]]);g.appendChild(b);var w=fi("tableRow",[[m,v],[m,v+i.length-1]]),k=fi("tableDelimRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.offset]]);b.appendChild(w),b.appendChild(k),La("tableCell",u,m,v+l).forEach((function(t){w.appendChild(t)}));var x=La("tableDelimCell",d,t.lineNumber,t.nextNonspace+1+p);return x.forEach((function(t){k.appendChild(t)})),g.columns=x.map(Ma),t.tip=g,2}return 0},function(t,e){if("table"!==e.type&&"tableBody"!==e.type||!t.blank&&-1===t.currentLine.indexOf("|"))return 0;if(t.advanceOffset(t.currentLine.length-t.offset,!1),t.blank){var n=e;return"tableBody"===e.type&&(n=e.parent,t.finalize(e,t.lineNumber-1)),t.finalize(n,t.lineNumber-1),0}var r=e;"table"===e.type&&((r=t.addChild("tableBody",t.nextNonspace)).stringContent=null);var o=fi("tableRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.currentLine.length]]);r.appendChild(o);var i=r.parent,a=Ea(t.currentLine.slice(t.nextNonspace)),s=a[0];return La("tableCell",a[1],t.lineNumber,t.nextNonspace+1+s).forEach((function(t,e){e>=i.columns.length&&(t.ignored=!0),o.appendChild(t)})),2},function(t){var e;if(!t.indented&&!Sa.test(t.currentLine)&&(e=t.currentLine.match(Na))){var n=e[1].length;t.closeUnmatchedBlocks();var r=t.addChild("customBlock",t.nextNonspace);return r.syntaxLength=n,r.offset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0}],ja=/^(-{3}|\+{3}|;{3})$/,qa=function(t,e){var n=t.currentLine,r=t.lineNumber,o=t.indented;return 1===r&&!o&&"document"===e.type&&ja.test(n)?(t.closeUnmatchedBlocks(),t.addChild("frontMatter",t.nextNonspace).stringContent=n,t.advanceNextNonspace(),t.advanceOffset(n.length,!1),2):0},_a={continue:function(t,e){var n=t.currentLine,r=n.match(ja);return"frontMatter"===e.type&&r?(e.stringContent+=n,t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2):0},finalize:function(t,e){null!==e.stringContent&&(e.literal=e.stringContent,e.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},za=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],Ua=/^[#`~*+_=<>0-9-;$]/,Va=/\r\n|\n|\r/;function $a(){return fi("document",[[1,1],[0,0]])}var Wa={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},Ga=function(){function t(t){this.options=Zr(Zr({},Wa),t),this.doc=$a(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(Ta.frontMatter=_a,Fa.unshift(qa)),this.inlineParser=new sa(this.options)}return t.prototype.advanceOffset=function(t,e){void 0===e&&(e=!1);for(var n,r,o,i=this.currentLine;t>0&&(o=i[this.offset]);)"\t"===o?(n=4-this.column%4,e?(this.partiallyConsumedTab=n>t,r=n>t?t:n,this.column+=r,this.offset+=this.partiallyConsumedTab?0:1,t-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},t.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},t.prototype.findNextNonspace=function(){for(var t,e=this.currentLine,n=this.offset,r=this.column;""!==(t=e.charAt(n));)if(" "===t)n++,r++;else{if("\t"!==t)break;n++,r+=4-r%4}this.blank="\n"===t||"\r"===t||""===t,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=4},t.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip.stringContent+=Go(" ",t)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"},t.prototype.addChild=function(t,e){for(;!Ta[this.tip.type].canContain(t);)this.finalize(this.tip,this.lineNumber-1);var n=e+1,r=fi(t,[[this.lineNumber,n],[0,0]]);return r.stringContent="",this.tip.appendChild(r),this.tip=r,r},t.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var t=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},t.prototype.finalize=function(t,e){var n=t.parent;t.open=!1,t.sourcepos[1]=[e,this.lastLineLength],Ta[t.type].finalize(this,t),this.tip=n},t.prototype.processInlines=function(t){var e,n=this.options.customParser,r=t.walker();for(this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;e=r.next();){var o=e.node,i=e.entering,a=o.type;n&&n[a]&&n[a](o,{entering:i,options:this.options}),i||"paragraph"!==a&&"heading"!==a&&("tableCell"!==a||o.ignored)||this.inlineParser.parse(o)}},t.prototype.incorporateLine=function(t){var e=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==t.indexOf("\0")&&(t=t.replace(/\0/g,"")),this.currentLine=t;for(var n,r=!0;(n=e.lastChild)&&n.open;){switch(e=n,this.findNextNonspace(),Ta[e.type].continue(this,e)){case 0:break;case 1:r=!1;break;case 2:return void(this.lastLineLength=t.length);default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){e=e.parent;break}}this.allClosed=e===this.oldtip,this.lastMatchedContainer=e;for(var o="paragraph"!==e.type&&Ta[e.type].acceptsLines,i=Fa.length;!o;){if(this.findNextNonspace(),"table"!==e.type&&"tableBody"!==e.type&&"paragraph"!==e.type&&!this.indented&&!Ua.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var a=0;a<i;){var s=Fa[a](this,e);if(1===s){e=this.tip;break}if(2===s){e=this.tip,o=!0;break}a++}if(a===i){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&e.lastChild&&(e.lastChild.lastLineBlank=!0);for(var l=e.type,u=this.blank&&!("blockQuote"===l||hi(e)&&e.isFenced||"item"===l&&!e.firstChild&&e.sourcepos[0][0]===this.lineNumber),c=e;c;)c.lastLineBlank=u,c=c.parent;Ta[l].acceptsLines?(this.addLine(),"htmlBlock"===e.type&&e.htmlBlockType>=1&&e.htmlBlockType<=5&&za[e.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=t.length,this.finalize(e,this.lineNumber))):this.offset<t.length&&!this.blank&&(e=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=t.length},t.prototype.parse=function(t,e){this.doc=$a(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=t.split(Va),r=n.length;this.lines=e||n,this.options.referenceDefinition&&this.clearRefMaps(),10===t.charCodeAt(t.length-1)&&(r-=1);for(var o=0;o<r;o++)this.incorporateLine(n[o]);for(;this.tip;)this.finalize(this.tip,r);return this.processInlines(this.doc),this.doc},t.prototype.partialParseStart=function(t,e){this.doc=$a(),this.tip=this.doc,this.lineNumber=t-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=e.length,r=0;r<n;r++)this.incorporateLine(e[r]);return this.doc},t.prototype.partialParseExtends=function(t){for(var e=0;e<t.length;e++)this.incorporateLine(t[e])},t.prototype.partialParseFinish=function(){for(;this.tip;)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},t.prototype.setRefMaps=function(t,e,n){this.refMap=t,this.refLinkCandidateMap=e,this.refDefCandidateMap=n},t.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){var e;e=t,Object.keys(e).forEach((function(t){delete e[t]}))}))},t}();function Ya(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:t[1]<e[1]?1:t[1]>e[1]?-1:0}function Xa(t,e){var n=t[0];return 1===Ya(t[1],e)?1:-1===Ya(n,e)?-1:0}function Ka(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n];t.insertBefore(o)}}function Za(t,e){var n=t[0];return t[1][0]<e?1:n[0]>e?-1:0}function Qa(t,e){for(var n=t.firstChild;n;){var r=Za(n.sourcepos,e);if(0===r)return n;if(-1===r)return n.prev||n;n=n.next}return t.lastChild}function Ja(t){return function(t){return Qo[t]}(t)||null}function ts(t,e,n){if(void 0===n&&(n=null),e)for(var r=e.walker();e&&e!==n;){t(e);var o=r.next();if(!o)break;e=o.node}}var es=/\r\n|\n|\r/;function ns(t){return{id:t.id,title:t.title,sourcepos:t.sourcepos,unlinked:!1,destination:t.dest}}var rs=function(){function t(t,e){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(null==e?void 0:e.referenceDefinition),this.parser=new Ga(e),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},t=t||"",this.lineTexts=t.split(es),this.root=this.parser.parse(t,this.lineTexts)}return t.prototype.updateLineTexts=function(t,e,n){var r,o=t[0],i=t[1],a=e[0],s=e[1],l=n.split(es),u=l.length,c=this.lineTexts[o-1],p=this.lineTexts[a-1];l[0]=c.slice(0,i-1)+l[0],l[u-1]=l[u-1]+p.slice(s-1);var d=a-o+1;return(r=this.lineTexts).splice.apply(r,Qr([o-1,d],l)),u-d},t.prototype.updateRootNodeState=function(){if(1===this.lineTexts.length&&""===this.lineTexts[0])return this.root.lastLineBlank=!0,void(this.root.sourcepos=[[1,1],[1,0]]);this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);for(var t=this.lineTexts,e=t.length-1;""===t[e];)e-=1;t.length-2>e&&(e+=1),this.root.sourcepos[1]=[e+1,t[e].length]},t.prototype.replaceRangeNodes=function(t,e,n){t?(Ka(t,n),function(t,e){if(t.parent===e.parent&&t!==e){for(var n=t.next;n&&n!==e;){for(var r=n.next,o=0,i=["parent","prev","next"];o<i.length;o++){var a=i[o];n[a]&&(Jo(n[a].id),n[a]=null)}n=r}t.next=e.next,e.next?e.next.prev=t:t.parent.lastChild=t}}(t,e),[t.id,e.id].forEach((function(t){return Jo(t)})),t.unlink()):e?(Ka(e,n),Jo(e.id),e.unlink()):function(t,e){for(var n=e.length-1;n>=0;n-=1)t.prependChild(e[n])}(this.root,n)},t.prototype.getNodeRange=function(t,e){var n=Qa(this.root,t[0]),r=Qa(this.root,e[0]);return r&&r.next&&e[0]+1===r.next.sourcepos[0][0]&&(r=r.next),[n,r]},t.prototype.trigger=function(t,e){this.eventHandlerMap[t].forEach((function(t){t(e)}))},t.prototype.extendEndLine=function(t){for(;""===this.lineTexts[t];)t+=1;return t},t.prototype.parseRange=function(t,e,n,r){var o;t&&t.prev&&(mi(t.prev)&&function(t){var e=t.match(/^[ \t]+/);if(e&&(e[0].length>=2||/\t/.test(e[0])))return!0;var n=e?t.slice(e.length):t;return Ba.test(n)||Pa.test(n)}(this.lineTexts[n-1])||"table"===t.prev.type&&(!ma(o=this.lineTexts[n-1])&&-1!==o.indexOf("|")))&&(n=(t=t.prev).sourcepos[0][0]);for(var i=this.lineTexts.slice(n-1,r),a=this.parser.partialParseStart(n,i),s=e?e.next:this.root.firstChild,l=a.lastChild,u=l&&hi(l)&&l.open,c=l&&gi(l)&&l.open,p=l&&mi(l);(u||c)&&s||p&&s&&("list"===s.type||s.sourcepos[0][1]>=2);){var d=this.extendEndLine(s.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(r,d)),t||(t=e),e=s,r=d,s=s.next}return this.parser.partialParseFinish(),{newNodes:function(t){for(var e=[],n=t.firstChild;n;)e.push(n),n=n.next;return e}(a),extStartNode:t,extEndNode:e}},t.prototype.getRemovedNodeRange=function(t,e){return!t||t&&vi(t)||e&&vi(e)?null:{id:[t.id,e.id],line:[t.sourcepos[0][0]-1,e.sourcepos[1][0]-1]}},t.prototype.markDeletedRefMap=function(t,e){var n=this;if(!Pi(this.refMap)){var r=function(t){if(vi(t)){var e=n.refMap[t.label];e&&t.id===e.id&&(e.unlinked=!0)}};t&&ts(r,t.parent,e),e&&ts(r,e)}},t.prototype.replaceWithNewRefDefState=function(t){var e=this;if(!Pi(this.refMap)){var n=function(t){if(vi(t)){var n=t.label,r=e.refMap[n];r&&!r.unlinked||(e.refMap[n]=ns(t))}};t.forEach((function(t){ts(n,t)}))}},t.prototype.replaceWithRefDefCandidate=function(){var t=this;Pi(this.refDefCandidateMap)||Bi(this.refDefCandidateMap,(function(e,n){var r=n.label,o=n.sourcepos,i=t.refMap[r];(!i||i.unlinked||i.sourcepos[0][0]>o[0][0])&&(t.refMap[r]=ns(n))}))},t.prototype.getRangeWithRefDef=function(t,e,n,r,o){if(this.referenceDefinition&&!Pi(this.refMap)){var i=Qa(this.root,t-1),a=Qa(this.root,e+1);i&&vi(i)&&i!==n&&i!==r&&(t=(n=i).sourcepos[0][0]),a&&vi(a)&&a!==n&&a!==r&&(r=a,e=this.extendEndLine(r.sourcepos[1][0]+o))}return[n,r,t,e]},t.prototype.parse=function(t,e,n){void 0===n&&(n=0);var r=this.getNodeRange(t,e),o=r[0],i=r[1],a=o?Math.min(o.sourcepos[0][0],t[0]):t[0],s=this.extendEndLine((i?Math.max(i.sourcepos[1][0],e[0]):e[0])+n),l=this.parseRange.apply(this,this.getRangeWithRefDef(a,s,o,i,n)),u=l.newNodes,c=l.extStartNode,p=l.extEndNode,d=this.getRemovedNodeRange(c,p),f=p?p.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(c,p),this.replaceRangeNodes(c,p,u),this.replaceWithNewRefDefState(u)):this.replaceRangeNodes(c,p,u),{nodes:u,removedNodeRange:d,nextNode:f}},t.prototype.parseRefLink=function(){var t=this,e=[];return Pi(this.refMap)||Bi(this.refMap,(function(n,r){r.unlinked&&delete t.refMap[n],Bi(t.refLinkCandidateMap,(function(r,o){var i=o.node;o.refLabel===n&&e.push(t.parse(i.sourcepos[0],i.sourcepos[1]))}))})),e},t.prototype.removeUnlinkedCandidate=function(){Pi(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){Bi(t,(function(e){(function(t){var e=Ja(t);if(!e)return!0;for(;e&&"document"!==e.type;){if(!e.parent&&!e.prev&&!e.next)return!0;e=e.parent}return!1})(e)&&delete t[e]}))}))},t.prototype.editMarkdown=function(t,e,n){var r=this.updateLineTexts(t,e,n),o=this.parse(t,e,r),i=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Zr({},t);return e.forEach((function(t){delete r[t]})),r}(o,"nextNode");!function(t,e){if(t&&t.parent&&0!==e){var n,r=t.parent.walker();for(r.resumeAt(t,!0);n=r.next();){var o=n.node;n.entering&&(o.sourcepos[0][0]+=e,o.sourcepos[1][0]+=e)}}}(o.nextNode,r),this.updateRootNodeState();var a=[i];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),a=a.concat(this.parseRefLink())),this.trigger("change",a),a},t.prototype.getLineTexts=function(){return this.lineTexts},t.prototype.getRootNode=function(){return this.root},t.prototype.findNodeAtPosition=function(t){var e=function(t,e){for(var n=t,r=null;n;){var o=Xa(n.sourcepos,e);if(0===o){if(!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)return r;if(!n.next)return r;n=n.next}}return n}(this.root,t);return e&&e!==this.root?e:null},t.prototype.findFirstNodeAtLine=function(t){return function(t,e){for(var n=t.firstChild,r=null;n;){var o=Za(n.sourcepos,e);if(0===o){if(n.sourcepos[0][0]===e||!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)break;r=n,n=n.next}}return r?function(t){for(;t.parent&&"document"!==t.parent.type&&t.parent.sourcepos[0][0]===t.sourcepos[0][0];)t=t.parent;return t}(function(t){for(;t.lastChild;)t=t.lastChild;return t}(r)):null}(this.root,t)},t.prototype.on=function(t,e){this.eventHandlerMap[t].push(e)},t.prototype.off=function(t,e){var n=this.eventHandlerMap[t],r=n.indexOf(e);n.splice(r,1)},t.prototype.findNodeById=function(t){return Ja(t)},t.prototype.removeAllNode=function(){Qo={}},t}(),os=new RegExp("<(/?(?:"+["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"].join("|")+")[^>]*>)","ig");function is(t){return os.test(t)?t.replace(os,(function(t,e){return"&lt;"+e})):t}var as={heading:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"h"+t.level,outerNewLine:!0}},text:function(t){return{type:"text",content:t.literal}},softbreak:function(t,e){return{type:"html",content:e.options.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"em"}},strong:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"strong"}},paragraph:function(t,e){var n,r=e.entering,o=null===(n=t.parent)||void 0===n?void 0:n.parent;return o&&"list"===o.type&&o.listData.tight?null:{type:r?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(t,e){var n=e.entering,r=t.listData,o=r.type,i=r.start,a="bullet"===o?"ul":"ol",s={};return"ol"===a&&null!==i&&1!==i&&(s.start=i.toString()),{type:n?"openTag":"closeTag",tagName:a,attributes:s,outerNewLine:!0}},item:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(t,e){return{type:"html",content:e.options.tagFilter?is(t.literal):t.literal}},htmlBlock:function(t,e){var n=e.options,r=n.tagFilter?is(t.literal):t.literal;return n.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:r},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:r,outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code"},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t.info,n=e?e.split(/\s+/):[],r=[];return n.length>0&&n[0].length>0&&r.push("language-"+Wo(n[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:r},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(t,e){if(e.entering){var n=t,r=n.title,o=n.destination;return{type:"openTag",tagName:"a",attributes:Zr({href:Wo(o)},r&&{title:Wo(r)})}}return{type:"closeTag",tagName:"a"}},image:function(t,e){var n=e.getChildrenText,r=e.skipChildren,o=t,i=o.title,a=o.destination;return r(),{type:"openTag",tagName:"img",selfClose:!0,attributes:Zr({src:Wo(a),alt:n(t)},i&&{title:Wo(i)})}},customBlock:function(t,e,n){var r=t.info.trim().toLowerCase(),o=n[r];if(o)try{return o(t,e)}catch(t){console.warn("[@toast-ui/editor] - The error occurred when "+r+" block node was parsed in markdown renderer: "+t)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(t){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(t,e,n){var r=t,o=r.info,i=r.firstChild,a=o.trim().toLowerCase(),s=n[a],l=e.entering;if(s)try{return s(t,e)}catch(t){console.warn("[@toast-ui/editor] - The error occurred when "+a+" inline node was parsed in markdown renderer: "+t)}return l?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+o+(i?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},ss={strike:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"del"}},item:function(t,e){var n=e.entering,r=t.listData,o=r.checked,i=r.task;if(n){var a={type:"openTag",tagName:"li",outerNewLine:!0};return i?[a,{type:"openTag",tagName:"input",selfClose:!0,attributes:Zr(Zr({},o&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:a}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(t,e){return{type:e.entering?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(t,e){if(e.entering)return{type:"openTag",tagName:"tr",outerNewLine:!0};var n=[];if(t.lastChild)for(var r=t.parent.parent.columns.length,o=t.lastChild.endIdx+1;o<r;o+=1)n.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return n.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),n},tableCell:function(t,e){var n=e.entering;if(t.ignored)return{type:"text",content:""};var r=t.parent.parent,o="tableHead"===r.type?"th":"td",i=r.parent.columns[t.startIdx],a=(null==i?void 0:i.align)?{align:i.align}:null;return n?Zr({type:"openTag",tagName:o,outerNewLine:!0},a&&{attributes:a}):{type:"closeTag",tagName:o,outerNewLine:!0}}},ls={softbreak:"\n",gfm:!1,tagFilter:!1,nodeId:!1};function us(t){for(var e=[],n=t.walker(),r=null;r=n.next();){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var cs=function(){function t(t){this.buffer=[],this.options=Zr(Zr({},ls),t),this.convertors=this.createConvertors(),delete this.options.convertors}return t.prototype.createConvertors=function(){var t=Zr({},as);if(this.options.gfm&&(t=Zr(Zr({},t),ss)),this.options.convertors){var e=this.options.convertors,n=Object.keys(e),r=Zr(Zr({},as),ss);n.forEach((function(n){var o=t[n],i=e[n],a=-1===Object.keys(r).indexOf(n)?n.toLowerCase():n;t[a]=o?function(t,e,n){return e.origin=function(){return o(t,e,n)},i(t,e)}:i}))}return t},t.prototype.getConvertors=function(){return this.convertors},t.prototype.getOptions=function(){return this.options},t.prototype.render=function(t){var e=this;this.buffer=[];for(var n=t.walker(),r=null,o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type];if(!a)return"continue";var s=!1,l={entering:o,leaf:!Ko(t),options:i.options,getChildrenText:us,skipChildren:function(){s=!0}},u=gi(t)||function(t){return"customInline"===t.type}(t)?a(t,l,i.convertors):a(t,l);u&&((Array.isArray(u)?u:[u]).forEach((function(n,r){"openTag"===n.type&&e.options.nodeId&&0===r&&(n.attributes||(n.attributes={}),n.attributes["data-nodeid"]=String(t.id)),e.renderHTMLNode(n)})),s&&(n.resumeAt(t,!1),n.next()))},i=this;r=n.next();)o();return this.addNewLine(),this.buffer.join("")},t.prototype.renderHTMLNode=function(t){switch(t.type){case"openTag":case"closeTag":this.renderElementNode(t);break;case"text":this.renderTextNode(t);break;case"html":this.renderRawHtmlNode(t)}},t.prototype.generateOpenTagString=function(t){var e=this,n=t.tagName,r=t.classNames,o=t.attributes;this.buffer.push("<"+n),r&&r.length>0&&this.buffer.push(' class="'+r.join(" ")+'"'),o&&Object.keys(o).forEach((function(t){var n=o[t];e.buffer.push(" "+t+'="'+n+'"')})),t.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},t.prototype.generateCloseTagString=function(t){var e=t.tagName;this.buffer.push("</"+e+">")},t.prototype.addNewLine=function(){this.buffer.length&&"\n"!==Ii(Ii(this.buffer))&&this.buffer.push("\n")},t.prototype.addOuterNewLine=function(t){t.outerNewLine&&this.addNewLine()},t.prototype.addInnerNewLine=function(t){t.innerNewLine&&this.addNewLine()},t.prototype.renderTextNode=function(t){this.buffer.push(Wo(t.content))},t.prototype.renderRawHtmlNode=function(t){this.addOuterNewLine(t),this.buffer.push(t.content),this.addOuterNewLine(t)},t.prototype.renderElementNode=function(t){"openTag"===t.type?(this.addOuterNewLine(t),this.generateOpenTagString(t),t.selfClose?this.addOuterNewLine(t):this.addInnerNewLine(t)):(this.addInnerNewLine(t),this.generateCloseTagString(t),this.addOuterNewLine(t))},t}();
/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */var ps=Object.hasOwnProperty,ds=Object.setPrototypeOf,fs=Object.isFrozen,hs=Object.getPrototypeOf,ms=Object.getOwnPropertyDescriptor,vs=Object.freeze,gs=Object.seal,ys=Object.create,bs="undefined"!=typeof Reflect&&Reflect,ws=bs.apply,ks=bs.construct;ws||(ws=function(t,e,n){return t.apply(e,n)}),vs||(vs=function(t){return t}),gs||(gs=function(t){return t}),ks||(ks=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))))});var xs,Cs=Is(Array.prototype.forEach),Ts=Is(Array.prototype.pop),Es=Is(Array.prototype.push),Ls=Is(String.prototype.toLowerCase),Ms=Is(String.prototype.match),Ns=Is(String.prototype.replace),Ss=Is(String.prototype.indexOf),As=Is(String.prototype.trim),Os=Is(RegExp.prototype.test),Ds=(xs=TypeError,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return ks(xs,e)});function Is(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return ws(t,e,r)}}function Rs(t,e){ds&&ds(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=Ls(r);o!==r&&(fs(e)||(e[n]=o),r=o)}t[r]=!0}return t}function Bs(t){var e=ys(null),n=void 0;for(n in t)ws(ps,t,[n])&&(e[n]=t[n]);return e}function Ps(t,e){for(;null!==t;){var n=ms(t,e);if(n){if(n.get)return Is(n.get);if("function"==typeof n.value)return Is(n.value)}t=hs(t)}return function(t){return console.warn("fallback value for",t),null}}var Hs=vs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Fs=vs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),js=vs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qs=vs(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_s=vs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),zs=vs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Us=vs(["#text"]),Vs=vs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$s=vs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ws=vs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gs=vs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ys=gs(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Xs=gs(/<%[\s\S]*|[\s\S]*%>/gm),Ks=gs(/^data-[\-\w.\u00B7-\uFFFF]/),Zs=gs(/^aria-[\-\w]+$/),Qs=gs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Js=gs(/^(?:\w+script|data):/i),tl=gs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function nl(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var rl=function(){return"undefined"==typeof window?null:window};var ol=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rl(),n=function(e){return t(e)};if(n.version="2.3.3",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,i=e.DocumentFragment,a=e.HTMLTemplateElement,s=e.Node,l=e.Element,u=e.NodeFilter,c=e.NamedNodeMap,p=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,d=e.Text,f=e.Comment,h=e.DOMParser,m=e.trustedTypes,v=l.prototype,g=Ps(v,"cloneNode"),y=Ps(v,"nextSibling"),b=Ps(v,"childNodes"),w=Ps(v,"parentNode");if("function"==typeof a){var k=o.createElement("template");k.content&&k.content.ownerDocument&&(o=k.content.ownerDocument)}var x=function(t,e){if("object"!==(void 0===t?"undefined":el(t))||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(m,r),C=x&&et?x.createHTML(""):"",T=o,E=T.implementation,L=T.createNodeIterator,M=T.createDocumentFragment,N=T.getElementsByTagName,S=r.importNode,A={};try{A=Bs(o).documentMode?o.documentMode:{}}catch(t){}var O={};n.isSupported="function"==typeof w&&E&&void 0!==E.createHTMLDocument&&9!==A;var D=Ys,I=Xs,R=Ks,B=Zs,P=Js,H=tl,F=Qs,j=null,q=Rs({},[].concat(nl(Hs),nl(Fs),nl(js),nl(_s),nl(Us))),_=null,z=Rs({},[].concat(nl(Vs),nl($s),nl(Ws),nl(Gs))),U=null,V=null,$=!0,W=!0,G=!1,Y=!1,X=!1,K=!1,Z=!1,Q=!1,J=!1,tt=!0,et=!1,nt=!0,rt=!0,ot=!1,it={},at=null,st=Rs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),lt=null,ut=Rs({},["audio","video","img","source","image","track"]),ct=null,pt=Rs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dt="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",ht="http://www.w3.org/1999/xhtml",mt=ht,vt=!1,gt=void 0,yt=["application/xhtml+xml","text/html"],bt=void 0,wt=null,kt=o.createElement("form"),xt=function(t){wt&&wt===t||(t&&"object"===(void 0===t?"undefined":el(t))||(t={}),t=Bs(t),j="ALLOWED_TAGS"in t?Rs({},t.ALLOWED_TAGS):q,_="ALLOWED_ATTR"in t?Rs({},t.ALLOWED_ATTR):z,ct="ADD_URI_SAFE_ATTR"in t?Rs(Bs(pt),t.ADD_URI_SAFE_ATTR):pt,lt="ADD_DATA_URI_TAGS"in t?Rs(Bs(ut),t.ADD_DATA_URI_TAGS):ut,at="FORBID_CONTENTS"in t?Rs({},t.FORBID_CONTENTS):st,U="FORBID_TAGS"in t?Rs({},t.FORBID_TAGS):{},V="FORBID_ATTR"in t?Rs({},t.FORBID_ATTR):{},it="USE_PROFILES"in t&&t.USE_PROFILES,$=!1!==t.ALLOW_ARIA_ATTR,W=!1!==t.ALLOW_DATA_ATTR,G=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=t.SAFE_FOR_TEMPLATES||!1,X=t.WHOLE_DOCUMENT||!1,Q=t.RETURN_DOM||!1,J=t.RETURN_DOM_FRAGMENT||!1,tt=!1!==t.RETURN_DOM_IMPORT,et=t.RETURN_TRUSTED_TYPE||!1,Z=t.FORCE_BODY||!1,nt=!1!==t.SANITIZE_DOM,rt=!1!==t.KEEP_CONTENT,ot=t.IN_PLACE||!1,F=t.ALLOWED_URI_REGEXP||F,mt=t.NAMESPACE||ht,gt=gt=-1===yt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,bt="application/xhtml+xml"===gt?function(t){return t}:Ls,Y&&(W=!1),J&&(Q=!0),it&&(j=Rs({},[].concat(nl(Us))),_=[],!0===it.html&&(Rs(j,Hs),Rs(_,Vs)),!0===it.svg&&(Rs(j,Fs),Rs(_,$s),Rs(_,Gs)),!0===it.svgFilters&&(Rs(j,js),Rs(_,$s),Rs(_,Gs)),!0===it.mathMl&&(Rs(j,_s),Rs(_,Ws),Rs(_,Gs))),t.ADD_TAGS&&(j===q&&(j=Bs(j)),Rs(j,t.ADD_TAGS)),t.ADD_ATTR&&(_===z&&(_=Bs(_)),Rs(_,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&Rs(ct,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(at===st&&(at=Bs(at)),Rs(at,t.FORBID_CONTENTS)),rt&&(j["#text"]=!0),X&&Rs(j,["html","head","body"]),j.table&&(Rs(j,["tbody"]),delete U.tbody),vs&&vs(t),wt=t)},Ct=Rs({},["mi","mo","mn","ms","mtext"]),Tt=Rs({},["foreignobject","desc","title","annotation-xml"]),Et=Rs({},Fs);Rs(Et,js),Rs(Et,qs);var Lt=Rs({},_s);Rs(Lt,zs);var Mt=function(t){Es(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=C}catch(e){t.remove()}}},Nt=function(t,e){try{Es(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Es(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!_[t])if(Q||J)try{Mt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},St=function(t){var e=void 0,n=void 0;if(Z)t="<remove></remove>"+t;else{var r=Ms(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var i=x?x.createHTML(t):t;if(mt===ht)try{e=(new h).parseFromString(i,gt)}catch(t){}if(!e||!e.documentElement){e=E.createDocument(mt,"template",null);try{e.documentElement.innerHTML=vt?"":i}catch(t){}}var a=e.body||e.documentElement;return t&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),mt===ht?N.call(e,X?"html":"body")[0]:X?e.documentElement:a},At=function(t){return L.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Ot=function(t){return"object"===(void 0===s?"undefined":el(s))?t instanceof s:t&&"object"===(void 0===t?"undefined":el(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Dt=function(t,e,r){O[t]&&Cs(O[t],(function(t){t.call(n,e,r,wt)}))},It=function(t){var e,r=void 0;if(Dt("beforeSanitizeElements",t,null),!((e=t)instanceof d||e instanceof f||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof p&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore))return Mt(t),!0;if(Ms(t.nodeName,/[\u0080-\uFFFF]/))return Mt(t),!0;var o=bt(t.nodeName);if(Dt("uponSanitizeElement",t,{tagName:o,allowedTags:j}),!Ot(t.firstElementChild)&&(!Ot(t.content)||!Ot(t.content.firstElementChild))&&Os(/<[/\w]/g,t.innerHTML)&&Os(/<[/\w]/g,t.textContent))return Mt(t),!0;if("select"===o&&Os(/<template/i,t.innerHTML))return Mt(t),!0;if(!j[o]||U[o]){if(rt&&!at[o]){var i=w(t)||t.parentNode,a=b(t)||t.childNodes;if(a&&i)for(var s=a.length-1;s>=0;--s)i.insertBefore(g(a[s],!0),y(t))}return Mt(t),!0}return t instanceof l&&!function(t){var e=w(t);e&&e.tagName||(e={namespaceURI:ht,tagName:"template"});var n=Ls(t.tagName),r=Ls(e.tagName);if(t.namespaceURI===ft)return e.namespaceURI===ht?"svg"===n:e.namespaceURI===dt?"svg"===n&&("annotation-xml"===r||Ct[r]):Boolean(Et[n]);if(t.namespaceURI===dt)return e.namespaceURI===ht?"math"===n:e.namespaceURI===ft?"math"===n&&Tt[r]:Boolean(Lt[n]);if(t.namespaceURI===ht){if(e.namespaceURI===ft&&!Tt[r])return!1;if(e.namespaceURI===dt&&!Ct[r])return!1;var o=Rs({},["title","style","font","a","script"]);return!Lt[n]&&(o[n]||!Et[n])}return!1}(t)?(Mt(t),!0):"noscript"!==o&&"noembed"!==o||!Os(/<\/no(script|embed)/i,t.innerHTML)?(Y&&3===t.nodeType&&(r=t.textContent,r=Ns(r,D," "),r=Ns(r,I," "),t.textContent!==r&&(Es(n.removed,{element:t.cloneNode()}),t.textContent=r)),Dt("afterSanitizeElements",t,null),!1):(Mt(t),!0)},Rt=function(t,e,n){if(nt&&("id"===e||"name"===e)&&(n in o||n in kt))return!1;if(W&&!V[e]&&Os(R,e));else if($&&Os(B,e));else{if(!_[e]||V[e])return!1;if(ct[e]);else if(Os(F,Ns(n,H,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Ss(n,"data:")||!lt[t]){if(G&&!Os(P,Ns(n,H,"")));else if(n)return!1}else;}return!0},Bt=function(t){var e=void 0,r=void 0,o=void 0,i=void 0;Dt("beforeSanitizeAttributes",t,null);var a=t.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_};for(i=a.length;i--;){var l=e=a[i],u=l.name,c=l.namespaceURI;if(r=As(e.value),o=bt(u),s.attrName=o,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,Dt("uponSanitizeAttribute",t,s),r=s.attrValue,!s.forceKeepAttr&&(Nt(u,t),s.keepAttr))if(Os(/\/>/i,r))Nt(u,t);else{Y&&(r=Ns(r,D," "),r=Ns(r,I," "));var p=bt(t.nodeName);if(Rt(p,o,r))try{c?t.setAttributeNS(c,u,r):t.setAttribute(u,r),Ts(n.removed)}catch(t){}}}Dt("afterSanitizeAttributes",t,null)}},Pt=function t(e){var n=void 0,r=At(e);for(Dt("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)Dt("uponSanitizeShadowNode",n,null),It(n)||(n.content instanceof i&&t(n.content),Bt(n));Dt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t,o){var a=void 0,l=void 0,u=void 0,c=void 0,p=void 0;if((vt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ot(t)){if("function"!=typeof t.toString)throw Ds("toString is not a function");if("string"!=typeof(t=t.toString()))throw Ds("dirty is not a string, aborting")}if(!n.isSupported){if("object"===el(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(Ot(t))return e.toStaticHTML(t.outerHTML)}return t}if(K||xt(o),n.removed=[],"string"==typeof t&&(ot=!1),ot);else if(t instanceof s)1===(l=(a=St("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Q&&!Y&&!X&&-1===t.indexOf("<"))return x&&et?x.createHTML(t):t;if(!(a=St(t)))return Q?null:C}a&&Z&&Mt(a.firstChild);for(var d=At(ot?t:a);u=d.nextNode();)3===u.nodeType&&u===c||It(u)||(u.content instanceof i&&Pt(u.content),Bt(u),c=u);if(c=null,ot)return t;if(Q){if(J)for(p=M.call(a.ownerDocument);a.firstChild;)p.appendChild(a.firstChild);else p=a;return tt&&(p=S.call(r,p,!0)),p}var f=X?a.outerHTML:a.innerHTML;return Y&&(f=Ns(f,D," "),f=Ns(f,I," ")),x&&et?x.createHTML(f):f},n.setConfig=function(t){xt(t),K=!0},n.clearConfig=function(){wt=null,K=!1},n.isValidAttribute=function(t,e,n){wt||xt({});var r=bt(t),o=bt(e);return Rt(r,o,n)},n.addHook=function(t,e){"function"==typeof e&&(O[t]=O[t]||[],Es(O[t],e))},n.removeHook=function(t){O[t]&&Ts(O[t])},n.removeHooks=function(t){O[t]&&(O[t]=[])},n.removeAllHooks=function(){O={}},n}(),il=["iframe","embed"],al=[];function sl(t){ct(il,t)&&al.push(t.toLowerCase())}function ll(t,e){return ol.sanitize(t,f({ADD_TAGS:al,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},e))}function ul(t,e){return t.literal.replace(new RegExp("(<\\s*"+e+"[^>]*>)|(</"+e+"\\s*[>])","ig"),"").trim()}function cl(t){var e=(t=t.match(we)[0]).match(new RegExp(ge,"g"));return e?e.reduce((function(t,e){var n=e.trim().split("="),r=n[0],o=n.slice(1);return o.length&&(t[r]=o.join("=").replace(/'|"/g,"").trim()),t}),{}):{}}function pl(t){return Nt(t.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{})}function dl(t,e,n,r){var o=r.getToDOMNode(e)(t),i=n(o.outerHTML),a=document.createElement("div");return a.innerHTML=i,{dom:o=a.firstChild,htmlAttrs:pl(o)}}var fl={htmlBlock:function(t,e,n){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:pl(t),childrenHTML:t.innerHTML}}}],toDOM:function(r){var o=dl(r,t,e,n),i=o.dom,a=o.htmlAttrs;return a.class=a.class?a.class+" html-block":"html-block",h([t,a],Nt(i.childNodes))}}},htmlInline:function(t,e,n){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:pl(t)}}}],toDOM:function(r){var o=dl(r,t,e,n).htmlAttrs;return[t,o,0]}}}};var hl=/^\s*<\s*\//,ml={paragraph:function(t,e){var n=e.entering,r=e.origin;return e.options.nodeId?{type:n?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:r()},softbreak:function(t){return{type:"html",content:t.prev&&"htmlInline"===t.prev.type&&/<br ?\/?>/.test(t.prev.literal)?"\n":"<br>\n"}},item:function(t,e){if(e.entering){var n={},r=[];return t.listData.task&&(n["data-task"]="",r.push("task-list-item"),t.listData.checked&&(r.push("checked"),n["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:r,attributes:n,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code",attributes:{"data-backticks":String(t.tickCount)}},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t,n=e.fenceLength,r=e.info,o=r?r.split(/\s+/):[],i=[],a={};if(n>3&&(a["data-backticks"]=n),o.length>0&&o[0].length>0){var s=o[0];i.push("lang-"+s),a["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:i},{type:"openTag",tagName:"code",attributes:a},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(t,e){var n=e.origin,r=e.entering,o=e.skipChildren,i=t.info;return-1!==i.indexOf("widget")&&r?(o(),[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:ee(i,ae(t)).outerHTML},{type:"closeTag",tagName:"span"}]):n()}};function vl(t,e){var n=f({},ml);return t&&(n.link=function(e,n){var r=n.entering,o=(0,n.origin)();return r&&(o.attributes=f(f({},o.attributes),t)),o}),e&&Object.keys(e).forEach((function(t){var r=n[t],o=e[t];r&&Ge(o)?n[t]=function(t,e){var n=f({},e);return n.origin=function(){return r(t,e)},o(t,n)}:ct(["htmlBlock","htmlInline"],t)&&!Ge(o)?n[t]=function(t,e){var n=t.literal.match(we);if(n){var r=n[0],i=n[1],a=n[3],s=(i||a).toLowerCase(),l=o[s],u=ul(t,s);if(l){var c=f({},t);return c.attrs=cl(r),c.childrenHTML=u,c.type=s,e.entering=!hl.test(t.literal),l(c,e)}}return e.origin()}:n[t]=o})),n}var gl=["list","item","blockQuote"],yl=["UL","OL","BLOCKQUOTE"];function bl(t,e){var n,r=t.child(e);return!r.childCount||1===r.childCount&&!(null===(n=r.firstChild.text)||void 0===n?void 0:n.trim())}function wl(t,e,n){var r=Bt(e)-1,o=Pt(e)-1,i=n[r].getBoundingClientRect(),a=n[o].offsetTop-n[r].offsetTop+n[o].clientHeight;return{height:a<=0?n[r].clientHeight:a+kl(t,n,Math.min(o+1,t.childCount-1)),rect:i}}function kl(t,e,n){for(var r=t.childCount-1,o=0;n<=r&&bl(t,n);)o+=e[n].clientHeight,n+=1;return o}function xl(t,e){for(var n=0;t&&t!==e&&(ct(yl,t.tagName)||(n+=t.offsetTop),t.offsetParent!==e.offsetParent);)t=t.parentElement;return n}function Cl(t,e,n){return t&&e>n+t.offsetTop?Cl(t.nextElementSibling,e,n)||t:null}function Tl(t,e){for(var n=t.querySelector('[data-nodeid="'+e.id+'"]');!n||jt(e);)e=e.parent,n=t.querySelector('[data-nodeid="'+e.id+'"]');return function(t){var e=t.mdNode,n=t.el;for(;(ct(gl,e.type)||"table"===e.type)&&e.firstChild;)e=e.firstChild,n=n.firstElementChild;return{mdNode:e,el:n}}({mdNode:e,el:n})}var El={};function Ll(t){t&&(delete El[Number(t.getAttribute("data-nodeid"))],Nt(t.children).forEach((function(t){Ll(t)})))}function Ml(t,e,n){var r,o=El[r=n]&&El[r].height,i=function(t){return El[t]&&El[t].offsetTop}(n),a=o||t.clientHeight,s=i||xl(t,e)||t.offsetTop;return o||function(t,e){El[t]=El[t]||{},El[t].height=e}(n,a),i||function(t,e){El[t]=El[t]||{},El[t].offsetTop=e}(n,s),{nodeHeight:a,offsetTop:s}}var Nl=Le("md-preview-highlight");var Sl=function(){function t(t,e){var n=document.createElement("div");this.el=n,this.eventEmitter=t,this.isViewer=!!e.isViewer,this.el.className=Le("md-preview");var r=e.linkAttributes,o=e.customHTMLRenderer,i=e.sanitizer,a=e.highlight,s=void 0!==a&&a;this.renderer=new cs({gfm:!0,nodeId:!0,convertors:vl(r,o)}),this.cursorNodeId=null,this.sanitizer=i,this.initEvent(s),this.initContentSection(),this.isViewer&&(this.previewContent.style.overflowWrap="break-word")}return t.prototype.initContentSection=function(){this.previewContent=Oe('<div class="'+Le("contents")+'"></div>'),this.isViewer||this.el.appendChild(this.previewContent)},t.prototype.toggleActive=function(t){Ae(this.el,"active",t)},t.prototype.initEvent=function(t){var e=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),this.isViewer||(t&&(this.eventEmitter.listen("changeToolbarState",(function(t){var n=t.mdNode,r=t.cursorPos;e.updateCursorNode(n,r)})),this.eventEmitter.listen("blur",(function(){e.removeHighlight()}))),Yr(this.el,"scroll",(function(t){e.eventEmitter.emit("scroll","preview",function(t,e){for(var n=e,r=null;n;){var o=n.firstElementChild;if(!o)break;r=n,n=Cl(o,t,xl(n,e))}var i=n||r;return i===e?null:i}(t.target.scrollTop,e.previewContent))})),this.eventEmitter.listen("changePreviewTabPreview",(function(){return e.toggleActive(!0)})),this.eventEmitter.listen("changePreviewTabWrite",(function(){return e.toggleActive(!1)})))},t.prototype.removeHighlight=function(){if(this.cursorNodeId){var t=this.getElementByNodeId(this.cursorNodeId);t&&$(t,Nl)}},t.prototype.updateCursorNode=function(t,e){t&&("tableRow"===(t=Vt(t,(function(t){return!function(t){switch(t.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}(t)}))).type?t=function(t,e){for(var n=t.firstChild;n&&n.next&&!(Ht(n.next)>e+1);)n=n.next;return n}(t,e[1]):"tableBody"===t.type&&(t=null));var n=t?t.id:null;if(this.cursorNodeId!==n){var r=this.getElementByNodeId(this.cursorNodeId),o=this.getElementByNodeId(n);r&&$(r,Nl),o&&q(o,Nl),this.cursorNodeId=n}},t.prototype.getElementByNodeId=function(t){return t?this.previewContent.querySelector('[data-nodeid="'+t+'"]'):null},t.prototype.update=function(t){var e=this;t.forEach((function(t){return e.replaceRangeNodes(t)})),this.eventEmitter.emit("afterPreviewRender",this)},t.prototype.replaceRangeNodes=function(t){var e=this,n=t.nodes,r=t.removedNodeRange,o=this.previewContent,i=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map((function(t){return e.renderer.render(t)})).join("")));if(r){var a=r.id,s=a[0],l=a[1],u=this.getElementByNodeId(s),c=this.getElementByNodeId(l);if(u){u.insertAdjacentHTML("beforebegin",i);for(var p=u;p&&p!==c;){var d=p.nextElementSibling;Se(p),Ll(p),p=d}(null==p?void 0:p.parentNode)&&(Se(p),Ll(p))}}else o.insertAdjacentHTML("afterbegin",i)},t.prototype.getRenderer=function(){return this.renderer},t.prototype.destroy=function(){Ur(this.el,"scroll"),this.el=null},t.prototype.getElement=function(){return this.el},t.prototype.getHTML=function(){return Pe(this.previewContent.innerHTML)},t.prototype.setHTML=function(t){this.previewContent.innerHTML=t},t.prototype.setHeight=function(t){M(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){M(this.el,{minHeight:t+"px"})},t}();function Al(t,e){for(var n=t.depth;n;){var r=t.node(n);if(e(r,n))return{node:r,depth:n,offset:n>0?t.before(n):0};n-=1}return null}function Ol(t){return!!Al(t,(function(t){var e=t.type;return"listItem"===e.name||"bulletList"===e.name||"orderedList"===e.name}))}function Dl(t){return!!Al(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function Il(t){return Al(t,(function(t){return"listItem"===t.type.name}))}function Rl(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}function Bl(t){return Object.keys(t).reduce((function(e,n){return"rawHTML"!==n&&t[n]&&(e[n="className"===n?"class":n]=t[n]),e}),{})}function Pl(t){return{tag:t,getAttrs:function(t){return["rawHTML","colspan","rowspan","extended"].reduce((function(e,n){var r="rawHTML"===n?"data-raw-html":n,o=t.getAttribute(r);return o&&(e[n]=ct(["rawHTML","extended"],n)?o:Number(o)),e}),{})}}}function Hl(t){var e=t.htmlAttrs,n=t.classNames;return f(f({},e),{class:n?n.join(" "):null})}function Fl(t,e,n,o){var a=e.$from,s=e.$to,l=e.depth,u=e,c=!1;if(l>=2&&a.node(l-1).type.compatibleContent(n)&&0===e.startIndex&&a.index(l-1)){var p=t.doc.resolve(e.start-2);u=new r.Ts(p,p,l),e.endIndex<e.parent.childCount&&(e=new r.Ts(a,t.doc.resolve(s.end(l)),l)),c=!0}var d=function(t,e,n,r){var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(i){var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}return null}(t,n),i=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(a){for(var s=(a.length?a[a.length-1]:e).contentMatch,l=r;s&&l<o;l+=1)s=s.matchType(n.child(l).type);if(s&&s.validEnd)return a}return null}(e,n);if(o&&i){var a=o.map((function(t){return{type:t}})),s=i.map((function(t){return{type:t,attrs:r}}));return a.concat({type:n}).concat(s)}return null}(u,e,n,o);return d?function(t,e,n,o,a){for(var s=e.start,l=e.end,u=e.startIndex,c=e.endIndex,p=e.parent,d=r.HY.empty,f=n.length-1;f>=0;f-=1)d=r.HY.from(n[f].type.create(n[f].attrs,d));t.step(new i.FC(s-(o?2:0),l,s,l,new r.p2(d,0,0),n.length,!0));var h=0;for(f=0;f<n.length;f+=1)if(n[f].type===a){h=f+1;break}for(var m=n.length-h,v=s+n.length-(o?2:0),g=(f=u,c);f<g;f+=1)!(f===u)&&(0,i.Ax)(t.doc,v,m)&&(t.split(v,m),v+=2*m),v+=p.child(f).nodeSize;return t}(t,e,d,c,n):t}function jl(t,e){for(var n=t.resolve(e);"paragraph"!==n.node().type.name;)e-=2,n=t.resolve(e);return Il(n)}function ql(t){return function(e,n){var r=e.selection,o=e.tr,i=r.$from,a=r.$to,s=i.blockRange(a);if(s){var l=Ol(i)?function(t,e,n){var r=e.$from,o=e.$to,i=Il(r),a=Il(o);if(i&&a)for(;a;){var s=a.offset,l=a.node,u=a.depth;l.attrs.task&&t.setNodeMarkup(s,null,{task:!1,checked:!1});var c=t.doc.resolve(s);if(c.parent.type!==n){var p=c.before(u-1);t.setNodeMarkup(p,n)}if(s===i.offset)break;a=jl(t.doc,s)}return t}(o,s,t):Fl(o,s,t);return n(l),!0}return!1}}function _l(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.$to,s=i.blockRange(a);if(s){var l=Ol(i)?function(t,e){var n=e.$from,r=e.$to,o=Il(n),i=Il(r);if(o&&i)for(;i;){var a=i.offset,s={task:!i.node.attrs.task,checked:!1};if(t.setNodeMarkup(a,null,s),a===o.offset)break;i=jl(t.doc,a)}return t}(r,s):Fl(r,s,o.nodes.bulletList,{task:!0});return e(l),!0}return!1}}function zl(t){return function(e,n){var o=e.tr,a=e.selection,s=a.$from,l=a.$to,u=s.blockRange(l,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(u){var c=s.node(u.depth-1).type===t?function(t,e,n){var o=e.$from,a=e.$to,s=e.end,l=e.depth,u=e.parent,c=a.end(l);return s<c&&(t.step(new i.FC(s-1,c,s,c,new r.p2(r.HY.from(n.create(null,u.copy())),1,0),1,!0)),e=new r.Ts(t.doc.resolve(o.pos),t.doc.resolve(c),l)),t.lift(e,(0,i.k9)(e)),t}(o,u,t):function(t,e){for(var n=e.parent,o=e.end,a=e.endIndex-1,s=e.startIndex;a>s;a-=1)o-=n.child(a).nodeSize,t.delete(o-1,o+1);var l=t.doc.resolve(e.start),u=l.nodeAfter,c=0===e.startIndex,p=e.endIndex===n.childCount,d=l.node(-1),f=l.index(-1),h=d.canReplace(f+(c?0:1),f+1,null==u?void 0:u.content.append(p?r.HY.empty:r.HY.from(n)));if(u&&h){var m=l.pos,v=m+u.nodeSize;t.step(new i.FC(m-(c?1:0),v+(p?1:0),m+1,v-1,new r.p2((c?r.HY.empty:r.HY.from(n.copy(r.HY.empty))).append(p?r.HY.empty:r.HY.from(n.copy(r.HY.empty))),c?0:1,p?0:1),c?0:1))}return t}(o,u);return n(c),!0}return!1}}function Ul(){return function(){return function(t,e){var n=t.selection,o=t.schema,a=n.$from,s=n.$to;return!(!a.blockRange(s)||!Ol(a))&&function(t){return function(e,n){var o=e.tr,a=e.selection,s=a.$from,l=a.$to,u=s.blockRange(l,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(u&&u.startIndex>0){var c=u.parent,p=c.child(u.startIndex-1);if(p.type!==t)return!1;var d=p.lastChild&&p.lastChild.type===c.type,f=d?r.HY.from(t.create()):null,h=new r.p2(r.HY.from(t.create(null,r.HY.from(c.type.create(null,f)))),d?3:1,0),m=u.start,v=u.end;return o.step(new i.FC(m-(d?3:1),v,m,v,h,1,!0)),n(o),!0}return!1}}(o.nodes.listItem)(t,e)}}}function Vl(){return{indent:Ul(),outdent:function(){return function(t,e){var n=t.selection,r=t.schema,o=n.$from,i=n.$to;return!(!o.blockRange(i)||!Ol(o))&&zl(r.nodes.listItem)(t,e)}}}}var $l=new Map,Wl=function(){function t(t,e,n,r){this.table=t,this.tableRows=e,this.tableStartPos=n,this.rowInfo=r}return t.create=function(e){var n=Al(e,(function(t){return"table"===t.type.name}));if(n){var r=n.node,o=n.depth,i=n.offset,a=$l.get(r);if((null==a?void 0:a.tableStartPos)===i+1)return a;var s=[],l=e.start(o),u=r.child(0),c=r.child(1),p=Gl(u,l),d=Gl(c,l+u.nodeSize);u.forEach((function(t){return s.push(t)})),c.forEach((function(t){return s.push(t)}));var f=new t(r,s,l,p.concat(d));return $l.set(r,f),f}return null},Object.defineProperty(t.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),t.prototype.getCellInfo=function(t,e){return this.rowInfo[t][e]},t.prototype.posAt=function(t,e){for(var n=0,r=this.tableStartPos;;n+=1){var o=r+this.tableRows[n].nodeSize;if(n===t){for(var i=e;i<this.totalColumnCount&&this.rowInfo[n][i].offset<r;)i+=1;return i===this.totalColumnCount?o:this.rowInfo[n][i].offset}r=o}},t.prototype.getNodeAndPos=function(t,e){var n=this.rowInfo[t][e];return{node:this.table.nodeAt(n.offset-this.tableStartOffset),pos:n.offset}},t.prototype.extendedRowspan=function(t,e){return!1},t.prototype.extendedColspan=function(t,e){return!1},t.prototype.getRowspanCount=function(t,e){return 0},t.prototype.getColspanCount=function(t,e){return 0},t.prototype.decreaseColspanCount=function(t,e){return 0},t.prototype.decreaseRowspanCount=function(t,e){return 0},t.prototype.getColspanStartInfo=function(t,e){return null},t.prototype.getRowspanStartInfo=function(t,e){return null},t.prototype.getCellStartOffset=function(t,e){var n=this.rowInfo[t][e].offset;return this.extendedRowspan(t,e)?this.posAt(t,e):n},t.prototype.getCellEndOffset=function(t,e){var n=this.rowInfo[t][e],r=n.offset,o=n.nodeSize;return this.extendedRowspan(t,e)?this.posAt(t,e):r+o},t.prototype.getCellIndex=function(t){for(var e=0;e<this.totalRowCount;e+=1)for(var n=this.rowInfo[e],r=0;r<this.totalColumnCount;r+=1)if(n[r].offset+1>t.pos)return[e,r];return[0,0]},t.prototype.getRectOffsets=function(t,e){var n,r,o;void 0===e&&(e=t),t.pos>e.pos&&(t=(n=[e,t])[0],e=n[1]);var i=this.getCellIndex(t),a=i[0],s=i[1],l=this.getCellIndex(e),u=l[0],c=l[1];return a=(r=Lt(a,u))[0],u=r[1],s=(o=Lt(s,c))[0],c=o[1],this.getSpannedOffsets({startRowIdx:a,startColIdx:s,endRowIdx:u,endColIdx:c})},t.prototype.getSpannedOffsets=function(t){return t},t}(),Gl=function(t,e){var n=[];return t.forEach((function(t,r){var o={rowspanMap:{},colspanMap:{},length:0};t.forEach((function(t,n){for(var i=t.nodeSize,a=0;o[a];)a+=1;o[a]={offset:e+r+n+2,nodeSize:i},o.length+=1})),n.push(o)})),n};function Yl(t,e){return Et(Wl.prototype,t),Gl=e,Wl}var Xl=function(t){function e(e,n){void 0===n&&(n=e);var r=this,o=e.node(0),i=Wl.create(e),s=i.getRectOffsets(e,n),l=function(t,e,n){for(var r=n.startRowIdx,o=n.startColIdx,i=n.endRowIdx,s=n.endColIdx,l=[],u=r;u<=i;u+=1)for(var c=o;c<=s;c+=1){var p=e.getCellInfo(u,c),d=p.offset,f=p.nodeSize;l.push(new a.xm(t.resolve(d+1),t.resolve(d+f-1)))}return l}(o,i,s);return(r=t.call(this,l[0].$from,l[0].$to,l)||this).startCell=e,r.endCell=n,r.offsetMap=i,r.isCellSelection=!0,r.visible=!1,r}return d(e,t),e.prototype.map=function(t,n){var r=this.startCell.pos,o=this.endCell.pos,i=t.resolve(n.map(r)),s=t.resolve(n.map(o)),l=Wl.create(i);if(this.offsetMap.totalColumnCount>l.totalColumnCount||this.offsetMap.totalRowCount>l.totalRowCount){var u={tableBody:1,tableRow:2,tableCell:3,paragraph:4}[s.parent.type.name],c=s.end(s.depth-u),p=Math.min(c-4,s.pos);return a.Bs.create(t,p)}return new e(i,s)},e.prototype.eq=function(t){return t instanceof e&&t.startCell.pos===this.startCell.pos&&t.endCell.pos===this.endCell.pos},e.prototype.content=function(){for(var t=this.startCell.node(-2),e=this.startCell.start(-2),n=t.child(1).firstChild,o=t.child(0).type.create(),i=t.child(1).type.create(),a=Wl.create(this.startCell),s=a.getRectOffsets(this.startCell,this.endCell),l=s.startRowIdx,u=s.startColIdx,c=s.endRowIdx,p=s.endColIdx,d=!1,f=l;f<=c;f+=1){for(var h=[],m=u;m<=p;m+=1){var v=a.getCellInfo(f,m).offset,g=t.nodeAt(v-e);g&&(d="tableHeadCell"===g.type.name,a.extendedRowspan(f,m)||a.extendedColspan(f,m)?h.push(g.type.create({extended:!0})):h.push(g.copy(g.content)))}var y=n.copy(r.HY.from(h)),b=d?o:i;b.content=b.content.append(r.HY.from(y))}return new r.p2(function(t,e){var n=[];return t.childCount&&n.push(t),e.childCount&&n.push(e),r.HY.from(n)}(o,i),1,1)},e.prototype.toJSON=function(){return JSON.stringify(this)},e}(a.Y1);function Kl(t,e,n,r){for(var o=n.nodes,i=o.tableRow,a=o.tableBodyCell,s=o.paragraph,l=[],u=0;u<t;u+=1){for(var c=[],p=0;p<e;p+=1){var d=r&&r[u*e+p],f=s.create(null,d?n.text(d):[]);c.push(a.create(null,f))}l.push(i.create(null,c))}return l}function Zl(t,e,n,r){void 0===r&&(r=null);for(var o=n.nodes,i=o.tableHeadCell,a=o.tableBodyCell,s=o.paragraph,l=0===e?i:a,u=[],c=0;c<t;c+=1)u.push(l.create(r,s.create()));return u}function Ql(t,e){for(;t&&t!==e;){if("TD"===t.nodeName||"TH"===t.nodeName)return t;t=t.parentNode}return null}function Jl(t){return Al(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function tu(t){if(t instanceof a.Bs){var e=t.$anchor,n=Jl(e);if(n){var r=e.node(0).resolve(e.before(n.depth));return{anchor:r,head:r}}}var o=t;return{anchor:o.startCell,head:o.endCell}}function eu(t){var e;if(t.size){var n=t.content,r=t.openStart,o=t.openEnd;if(1!==n.childCount)return null;for(;1===n.childCount&&(r>0&&o>0||"table"===(null===(e=n.firstChild)||void 0===e?void 0:e.type.name));)r-=1,o-=1,n=n.firstChild.content;if("tableHead"===n.firstChild.type.name||"tableBody"===n.firstChild.type.name)return n}return null}function nu(t){var e=t.startRowIdx,n=t.startColIdx;return{rowCount:t.endRowIdx-e+1,columnCount:t.endColIdx-n+1}}function ru(t,e){return f(f({},t.attrs),e)}var ou=new a.H$("cellSelection"),iu=function(){function t(t){this.view=t,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return t.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},t.prototype.handleMousedown=function(t){var e=Ql(t.target,this.view.dom);if(2!==t.button){if(e){var n=this.getCellPos(t);n&&(this.startCellPos=n),this.bindEvent()}}else t.preventDefault()},t.prototype.handleMousemove=function(t){var e,n=ou.getState(this.view.state),r=this.getCellPos(t),o=this.startCellPos;n?e=this.view.state.doc.resolve(n):o!==r&&(e=o),e&&o&&r&&this.setCellSelection(o,r)},t.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),null!==ou.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(ou,-1))},t.prototype.bindEvent=function(){var t=this.view.dom;t.addEventListener("mousemove",this.handlers.mousemove),t.addEventListener("mouseup",this.handlers.mouseup)},t.prototype.unbindEvent=function(){var t=this.view.dom;t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mouseup",this.handlers.mouseup)},t.prototype.getCellPos=function(t){var e=t.clientX,n=t.clientY,r=this.view.posAtCoords({left:e,top:n});if(r){var o=this.view.state.doc,i=o.resolve(r.pos),a=Jl(i);if(a){var s=i.before(a.depth);return o.resolve(s)}}return null},t.prototype.setCellSelection=function(t,e){var n=this.view.state,r=n.selection,o=n.tr,i=null===ou.getState(this.view.state),a=new Xl(t,e);if(i||!r.eq(a)){var s=o.setSelection(a);i&&s.setMeta(ou,e.pos),this.view.dispatch(s)}},t.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},t}(),au=Le("cell-selected");function su(t){var e=t.selection,n=t.doc;if(e instanceof Xl){var r=[];return e.ranges.forEach((function(t){var e=t.$from,n=t.$to;r.push(o.p.node(e.pos-1,n.pos+1,{class:au}))})),o.EH.create(n,r)}return null}var lu=function(){function t(){this.keys=[],this.values=[]}return t.prototype.getKeyIndex=function(t){return S(t,this.keys)},t.prototype.get=function(t){return this.values[this.getKeyIndex(t)]},t.prototype.set=function(t,e){var n=this.getKeyIndex(t);return n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e)),this},t.prototype.has=function(t){return this.getKeyIndex(t)>-1},t.prototype.delete=function(t){var e=this.getKeyIndex(t);return e>-1&&(this.keys.splice(e,1),this.values.splice(e,1),!0)},t.prototype.forEach=function(t,e){var n=this;void 0===e&&(e=this),this.values.forEach((function(r,o){r&&n.keys[o]&&t.call(e,r,n.keys[o],n)}))},t.prototype.clear=function(){this.keys=[],this.values=[]},t}(),uu="en-US",cu=function(){function t(){this.code=uu,this.langs=new lu}return t.prototype.setCode=function(t){this.code=t||uu},t.prototype.setLanguage=function(t,e){var n=this;(t=[].concat(t)).forEach((function(t){if(n.langs.has(t)){var r=n.langs.get(t);n.langs.set(t,g(r,e))}else n.langs.set(t,e)}))},t.prototype.get=function(t,e){e||(e=this.code);var n=this.langs.get(e);n||(n=this.langs.get(uu));var r=n[t];if(!r)throw new Error('There is no text key "'+t+'" in '+e);return r},t}(),pu=new cu,du=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function fu(t,e){return du.map((function(n){return n.map((function(n){var r=n.action,o=n.command,i=n.payload,a=n.disableInThead,s=n.className;return{label:pu.get(r),onClick:function(){t.emit("command",o,i)},disabled:e&&!!a,className:s}}))})).concat()}var hu=["image","link","customBlock","frontMatter"],mu=["strong","strike","emph","code"],vu=["bulletList","orderedList","taskList"];function gu(t,e,n){var r=t.$from,o=t.$to,i=t.from,a=t.to,s={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}};return e.nodesBetween(i,a,(function(t,e,i){var a=function(t,e){var n=t.type.name;return"listItem"===n?t.attrs.task?"taskList":e.type.name:-1!==n.indexOf("table")?"table":n}(t,i);ct(hu,a)||(ct(vu,a)?(!function(t,e){e[t]={active:!0},vu.filter((function(e){return e!==t})).forEach((function(t){e[t]&&delete e[t]}))}(a,s),s.indent.disabled=!1,s.outdent.disabled=!1):"paragraph"===a||"text"===a?function(t,e,n,r){mu.forEach((function(o){var i=n.marks[o],a=t.marksAcross(e)||[];i.isInSet(a)&&(r[o]={active:!0})}))}(r,o,n,s):s[a]={active:!0})})),s}function yu(t){return new a.Sy({view:function(){return{update:function(e){var n=e.state,r=n.selection,o=n.doc,i=n.schema;t.emit("changeToolbarState",{toolbarState:gu(r,o,i)})}}}})}var bu=function(){function t(t,e,n,r){var i=this;this.openEditor=function(){if(i.innerEditorView)throw new Error("The editor is already opened.");i.dom.draggable=!1,i.wrapper.style.display="none",i.innerViewContainer.style.display="block",i.innerEditorView=new o.tk(i.innerViewContainer,{state:a.yy.create({doc:i.node,plugins:[(0,s.h)({"Mod-z":function(){return(0,c.Yw)(i.innerEditorView.state,i.innerEditorView.dispatch)},"Shift-Mod-z":function(){return(0,c.KX)(i.innerEditorView.state,i.innerEditorView.dispatch)},Tab:function(t,e){return e(t.tr.insertText("\t")),!0},Enter:l.QK,Escape:function(){return i.cancelEditing(),!0},"Ctrl-Enter":function(){return i.saveAndFinishEditing(),!0}}),(0,c.m8)()]}),dispatchTransaction:function(t){return i.dispatchInner(t)},handleDOMEvents:{mousedown:function(){return i.editorView.hasFocus()&&i.innerEditorView.focus(),!0},blur:function(){return i.saveAndFinishEditing(),!0}}}),i.innerEditorView.focus()},this.node=t,this.editorView=e,this.getPos=n,this.toDOMAdaptor=r,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=Le("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=Le("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return t.prototype.renderToolArea=function(){var t=this,e=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");e.className="tool",n.textContent=this.node.attrs.info,n.className="info",r.type="button",r.addEventListener("click",(function(){return t.openEditor()})),e.appendChild(n),e.appendChild(r),this.wrapper.appendChild(e)},t.prototype.renderCustomBlock=function(){var t=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(t){for(var e=t(this.node);this.wrapper.hasChildNodes();)this.wrapper.removeChild(this.wrapper.lastChild);e&&this.wrapper.appendChild(e),this.renderToolArea()}},t.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=Le("custom-block-editor"),this.innerViewContainer.style.display="none"},t.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},t.prototype.saveAndFinishEditing=function(){var t=this.editorView.state.selection.to,e=this.editorView.state;this.editorView.dispatch(e.tr.setSelection(Ot(e.tr,t))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},t.prototype.cancelEditing=function(){var t=(0,c.of)(this.innerEditorView.state);for(this.canceled=!0;t--;)(0,c.Yw)(this.innerEditorView.state,this.innerEditorView.dispatch),(0,c.Yw)(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var e=this.editorView.state.selection.to,n=this.editorView.state;this.editorView.dispatch(n.tr.setSelection(a.Bs.create(n.doc,e))),this.editorView.focus(),this.closeEditor()},t.prototype.dispatchInner=function(t){var e=this.innerEditorView.state.applyTransaction(t),n=e.state,r=e.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&Ge(this.getPos)){for(var o=this.editorView.state.tr,a=i.KS.offset(this.getPos()+1),s=0;s<r.length;s+=1)for(var l=r[s].steps,u=0;u<l.length;u+=1)o.step(l[u].map(a));o.docChanged&&this.editorView.dispatch(o)}},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,this.innerEditorView||this.renderCustomBlock(),!0)},t.prototype.stopEvent=function(t){return!!this.innerEditorView&&!!t.target&&this.innerEditorView.dom.contains(t.target)},t.prototype.ignoreMutation=function(){return!0},t.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},t}(),wu="image-link",ku=function(){function t(t,e,n,r){var o,i=this;this.handleMousedown=function(t){t.preventDefault();var e=t.target,n=t.offsetX,r=t.offsetY;if(i.imageLink&&Ge(i.getPos)&&ce(e,wu)){var o=getComputedStyle(e,":before");if(t.stopPropagation(),Te(o,n,r)){var a=i.view.state.tr,s=i.getPos();a.setSelection(Ot(a,s,s+1)),i.view.dispatch(a),i.eventEmitter.emit("openPopup","link",i.imageLink.attrs)}}},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.imageLink=null!==(o=t.marks.filter((function(t){return"link"===t.type.name}))[0])&&void 0!==o?o:null,this.dom=this.createElement(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.createImageElement(this.node);if(this.imageLink){var e=document.createElement("span");return e.className=wu,e.appendChild(t),e}return t},t.prototype.createImageElement=function(t){var e=document.createElement("img"),n=t.attrs,r=n.imageUrl,o=n.altText,i=Hl(t.attrs);return e.src=r,o&&(e.alt=o),Be(i,e),e},t.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},t.prototype.stopEvent=function(){return!0},t.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},t}(),xu=function(){function t(t,e,n,r){var o=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(t){var e=t.target;if("none"!==getComputedStyle(e,":after").backgroundImage&&Ge(o.getPos)){var n=o.view.coordsAtPos(o.getPos()),r=n.top,i=n.right;o.createLanguageEditor({top:r,right:i})}},this.handleKeydown=function(t){"Enter"===t.key&&o.input&&(t.preventDefault(),o.changeLanguage())},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),e.className="toastui-editor-ww-code-block";var n=this.createCodeBlockElement(),r=n.firstChild;e.appendChild(n),this.dom=e,this.contentDOM=r},t.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,r=Hl(this.node.attrs);return n&&e.setAttribute("data-language",n),Be(r,t),t.appendChild(e),t},t.prototype.createLanguageEditor=function(t){var e=this,n=t.top,r=t.right,o=document.createElement("span");o.className="toastui-editor-ww-code-block-language";var i=document.createElement("input");i.type="text",i.value=this.node.attrs.language,o.appendChild(i),this.view.dom.parentElement.appendChild(o);var a=o.clientWidth;M(o,{top:n+10+"px",left:r-a-10+"px",width:a+"px"}),this.input=i,this.input.addEventListener("blur",(function(){return e.changeLanguage()})),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout((function(){e.input.focus()}))},t.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},t.prototype.bindEvent=function(){var t=this;this.eventEmitter.listen("scroll",(function(){t.input&&t.reset()}))},t.prototype.changeLanguage=function(){if(this.input&&Ge(this.getPos)){var t=this.input.value;this.reset();var e=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(e,null,{language:t}),this.view.dispatch(n)}},t.prototype.reset=function(){var t;if(null===(t=this.input)||void 0===t?void 0:t.parentElement){var e=this.input.parentElement;this.input=null,Se(e)}},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.stopEvent=function(){return!0},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,!0)},t.prototype.destroy=function(){this.reset(),this.clearTimer(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},t}(),Cu=/MsoListParagraph/,Tu=/style=(.|\n)*mso-/,Eu=/mso-list:(.*)/,Lu=/O:P/,Mu=/^(n|u|l)/,Nu="p.MsoListParagraph";function Su(t){for(var e=[],n=document.createTreeWalker(t,1,null,!1);n.nextNode();){var r=n.currentNode;if(Ne(r)){var o=r,i=o.outerHTML,a=o.textContent,s=Tu.test(i),l=Eu.test(i);s&&!l&&a?e.push([r,!0]):(Lu.test(r.nodeName)||s&&!a||l)&&e.push([r,!1])}}return e.forEach((function(t){var e=t[0];t[1]?function(t){for(var e=[];t.firstChild;)e.push(t.firstChild),t.parentNode&&t.parentNode.insertBefore(t.firstChild,t);Se(t)}(e):Se(e)})),t.innerHTML.trim()}function Au(t){var e=[];return t.forEach((function(t,n){var r=e[n-1],o=function(t,e){var n=t.getAttribute("style");if(n){var r=n.match(Eu)[1].trim().split(" ")[1];return{id:e,level:parseInt(r.replace("level",""),10),prev:null,parent:null,children:[],unordered:Mu.test(t.textContent||""),contents:Su(t)}}return null}(t,n);o&&(r&&function(t,e){if(e.level<t.level)e.children.push(t),t.parent=e;else{for(;e&&e.level!==t.level;)e=e.parent;e&&(t.prev=e,t.parent=e.parent,t.parent&&t.parent.children.push(t))}}(o,r),e.push(o))})),e}function Ou(t){var e=t[0].unordered?"ul":"ol",n=document.createElement(e);return t.forEach((function(t){var e=t.children,r=t.contents,o=document.createElement("li");o.innerHTML=r,n.appendChild(o),e.length&&n.appendChild(Ou(e))})),n}function Du(t){return Ou(Au(t).filter((function(t){return!t.parent})))}function Iu(t){var e=document.createElement("div");e.innerHTML=t;var n,r,o=[],i=(n=Nu,(r=Nt(e.querySelectorAll(n))).length?r:[]);return i.forEach((function(t){var n,r,i=function(t){for(;t&&!Ne(t);)t=t.nextSibling;return!t||!Cu.test(t.className)}(t.nextSibling);if(o.push(t),i){var a=Du(o),s=t.nextSibling;s?(n=a,(r=s).parentNode&&r.parentNode.insertBefore(n,r)):function(t,e){(e=b(e)?Nt(e):[e]).forEach((function(e){t.appendChild(e)}))}(e,a),o=[]}Se(t)})),""+(i.length?"<p></p>":"")+e.innerHTML}var Ru="\x3c!--StartFragment--\x3e",Bu="\x3c!--EndFragment--\x3e";function Pu(t){return function(t){return Tu.test(t)}(t=function(t){return/<\/td>((?!<\/tr>)[\s\S])*$/i.test(t)&&(t="<tr>"+t+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(t)&&(t="<table>"+t+"</table>"),t}(t=function(t){var e=t.indexOf(Ru),n=t.lastIndexOf(Bu);return e>-1&&n>-1&&(t=t.slice(e+Ru.length,n)),t.replace(/<br[^>]*>/g,Ce)}(t)))&&(t=Iu(t)),t}function Hu(t,e,n){for(var r=[],o=t.childCount,i=0;i<o;i+=1)if(!t.child(i).attrs.extended){var a=i<o?n.create(t.child(i).attrs,t.child(i).content):n.createAndFill();r.push(a)}return r}function Fu(t,e,n){var r=n.nodes,o=r.tableRow,i=Hu(t,0,r.tableHeadCell);return o.create(null,i)}function ju(t,e,n){var r=n.nodes,o=r.tableRow,i=Hu(t,0,r.tableBodyCell);return o.create(null,i)}function qu(t){var e=[],n=[];"tableHead"===t.firstChild.type.name&&t.firstChild.forEach((function(t){return e.push(t)}));"tableBody"===t.lastChild.type.name&&t.lastChild.forEach((function(t){return n.push(t)}));return h(h([],e),n)}function _u(t,e,n){var r=Fu(t,0,n);return n.nodes.tableHead.create(null,r)}function zu(t,e,n){var r=t.map((function(t){return ju(t,0,n)}));if(!t.length){var o=function(t,e){for(var n=e.nodes,r=n.tableRow,o=n.tableBodyCell,i=[],a=0;a<t;a+=1){var s=o.createAndFill();i.push(s)}return r.create({dummyRowForPasting:!0},i)}(e,n);r.push(o)}return n.nodes.tableBody.create(null,r)}function Uu(t,e,n){var o=[],i=t.content,a=t.openStart,s=t.openEnd;return i.forEach((function(t){if("table"===t.type.name){var i=eu(new r.p2(r.HY.from(t),0,0));if(i){var a=qu(i),s="tableBody"===i.firstChild.type.name,l=function(t,e,n,r){var o=function(t){return t.reduce((function(t,e){return t.childCount>e.childCount?t:e})).childCount}(t);if(n&&r)return e.nodes.table.create(null,[zu(t,o,e)]);var i=t[0],a=t.slice(1),s=[_u(i,0,e)];return a.length&&s.push(zu(a,o,e)),e.nodes.table.create(null,s)}(a,e,s,n);o.push(l)}}else o.push(t)})),new r.p2(r.HY.from(o),a,s)}var Vu=4,$u=2;function Wu(t){return t*Vu}function Gu(t,e){var n=t.state,o=n.selection,i=n.schema,a=n.tr,s=tu(o),l=s.anchor,u=s.head;if(l&&u){var c=eu(e);if(!c)return!1;var p=Wl.create(l),d=p.getRectOffsets(l,u),f=function(t,e,n){var r=[],o=qu(t),i=(o[0].childCount,o.length),a=0===e.startRowIdx,s=o.slice(0,i);if(a){var l=s.shift();if(l){var u=Fu(l,0,n).content;r.push(u)}}return s.forEach((function(t){if(!t.attrs.dummyRowForPasting){var e=ju(t,0,n).content;r.push(e)}})),r}(c,d,i),h=function(t,e,n){for(var r=e.startRowIdx,o=e.startColIdx,i=n.length,a=0,s=function(t){var e=n[t].childCount;n[t].forEach((function(t){var n=t.attrs.colspan;n>1&&(e+=n-1)})),a=Math.max(a,e)},l=0;l<i;l+=1)s(l);var u=r+i-1,c=o+a-1;return{startRowIdx:r,startColIdx:o,endRowIdx:u,endColIdx:c,addedRowCount:Math.max(u+1-t.totalRowCount,0),addedColumnCount:Math.max(c+1-t.totalColumnCount,0)}}(p,d,f),m=[];return function(t,e){var n=t.getSpannedOffsets(e),r=nu(n),o=r.rowCount,i=r.columnCount,a=nu(e),s=a.rowCount,l=a.columnCount;return o===s&&i===l}(p,h)&&(function(t,e){for(var n=t.startRowIdx,r=t.startColIdx,o=t.endRowIdx,i=t.endColIdx,a=t.addedRowCount,s=t.addedColumnCount,l=n;l<=o-a;l+=1)e.push({rowIdx:l,startColIdx:r,endColIdx:i-s})}(h,m),h.addedColumnCount&&function(t,e,n,r,o){for(var i=r.startRowIdx,a=r.startColIdx,s=r.endRowIdx,l=r.endColIdx,u=r.addedRowCount,c=r.addedColumnCount,p=n.totalRowCount,d=0,f=0;f<p;f+=1){var h=n.getCellInfo(f,l-c),m=h.offset,v=h.nodeSize,g=t.mapping.map(m+v),y=Zl(c,f,e);if(t.insert(g,y),f>=i&&f<=s-u){var b=n.getCellInfo(f,l-c),w=t.mapping.map(b.offset),k=g+Wu(c);o[d]={rowIdx:f,startColIdx:a,endColIdx:l,dummyOffsets:[w,k]},d+=1}}}(a,i,p,h,m),h.addedRowCount&&function(t,e,n,r,o){var i=r.addedRowCount,a=r.addedColumnCount,s=r.startColIdx,l=r.endColIdx,u=t.mapping.maps.length,c=n.tableEndOffset-2,p=Kl(i,n.totalColumnCount+a,e),d=c;t.insert(t.mapping.slice(u).map(d),p);for(var f=0;f<i;f+=1){var h=d+Wu(s)+1,m=d+Wu(l+1)+1,v=d+Wu(n.totalColumnCount+a)+$u;o.push({rowIdx:f+n.totalRowCount,startColIdx:s,endColIdx:l,dummyOffsets:[h,m]}),d=v}}(a,i,p,h,m),function(t,e,n,o){var i=t.mapping.maps.length;n.forEach((function(n,a){var s=n.rowIdx,l=n.startColIdx,u=n.endColIdx,c=n.dummyOffsets,p=t.mapping.slice(i),d=new r.p2(e[a],0,0),f=c?c[0]:o.getCellStartOffset(s,l),h=c?c[1]:o.getCellEndOffset(s,u);t.replace(p.map(f),p.map(h),d)}))}(a,f,m,p),t.dispatch(a),function(t,e,n){var r=t.state,o=r.tr,i=r.doc,a=Wl.create(i.resolve(n)),s=e[0],l=s.rowIdx,u=s.startColIdx,c=wt(e),p=c.rowIdx,d=c.endColIdx,f=a.getCellInfo(l,u).offset,h=a.getCellInfo(p,d).offset;t.dispatch(o.setSelection(new Xl(i.resolve(f),i.resolve(h))))}(t,m,p.getCellInfo(0,0).offset)),!0}return!1}var Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(ze),Xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:f({},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"p"}],toDOM:function(t){return["p",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(ze),Ku=/\s{1,4}$/,Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e.prototype.addSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to;return!(!o.blockRange(i)||Ol(o)||Dl(o))&&(e(r.insertText("    ",o.pos,i.pos)),!0)}},e.prototype.removeSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to,a=n.from;if(o.blockRange(i)&&!Ol(o)&&!Dl(o)){var s=o.nodeBefore;if(s&&s.isText){var l=s.text,u=l.replace(Ku,""),c=l.length-u.length;return e(r.delete(a-c,a)),!0}}return!1}},e.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},e}(ze),Qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this.levels.map((function(t){return{tag:"h"+t,getAttrs:function(e){var n=e.getAttribute("data-raw-html");return f({level:t},n&&{rawHTML:n})}}}));return{attrs:f({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),content:"inline*",group:"block",defining:!0,parseDOM:t,toDOM:function(t){var e=t.attrs;return["h"+e.level,Hl(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){var r=e.schema.nodes[t.level?"heading":"paragraph"];return(0,l.uJ)(r,t)(e,n)}}},e}(ze),Ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:f({language:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){var e=t.getAttribute("data-raw-html"),n=t.firstElementChild;return f({language:(null==n?void 0:n.getAttribute("data-language"))||null},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"pre",["code",f({"data-language":e.language},Hl(e)),0]]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return(0,l.uJ)(t.schema.nodes.codeBlock)(t,e)}}},e.prototype.moveCursor=function(t){var e=this;return function(n,r){var o,i,a=n.tr,s=n.doc,l=n.schema,u=n.selection.$from;if(e.context.view.endOfTextblock(t)&&"codeBlock"===u.node().type.name){var c=u.parent.textContent.split("\n"),p="up"===t?u.start():u.end(),d="up"===t?[p,c[0].length+p]:[p-wt(c).length,p],f=s.resolve("up"===t?u.before():u.after()),h="up"===t?f.nodeBefore:f.nodeAfter;if(o=u.pos,i=d[1],o>=d[0]&&o<=i&&!h){var m=Dt(a,f,l);if(m)return r(m),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},e}(ze),tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[Rl("ul")],toDOM:function(t){return["ul",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.changeList=function(){return function(t,e){return ql(t.schema.nodes.bulletList)(t,e)}},e.prototype.commands=function(){return{bulletList:this.changeList,taskList:_l}},e.prototype.keymaps=function(){var t=this.changeList(),e=Vl(),n=e.indent,r=e.outdent;return{"Mod-u":t,"Mod-U":t,Tab:n(),"Shift-Tab":r()}},e}(ze),ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({order:{default:1},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"ol",getAttrs:function(t){var e=t.getAttribute("start"),n=t.getAttribute("data-raw-html");return f({order:t.hasAttribute("start")?Number(e):1},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"ol",f({start:1===e.order?null:e.order},Hl(e)),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return ql(t.schema.nodes.orderedList)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()(),e=Vl(),n=e.indent,r=e.outdent;return{"Mod-o":t,"Mod-O":t,Tab:n(),"Shift-Tab":r()}},e}(ze),nc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({task:t.hasAttribute("data-task"),checked:t.hasAttribute("data-task-checked")},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs,n=e.task,r=e.checked;if(!n)return[e.rawHTML||"li",0];var o=["task-list-item"];return r&&o.push("checked"),[e.rawHTML||"li",f({class:o.join(" "),"data-task":n},r&&{"data-task-checked":r}),0]}}},enumerable:!1,configurable:!0}),e.prototype.liftToPrevListItem=function(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.empty,s=o.nodes.listItem,l=i.parent,u=i.node(-1);if(a&&!l.childCount&&u.type===s){if(i.index(-2)>=1)return r.delete(i.start(-1)-1,i.end(-1)),e(r),!0;if(i.node(-3).type===s)return r.delete(i.start(-2)-1,i.end(-1)),e(r),!0}return!1}},e.prototype.keymaps=function(){return{Backspace:this.liftToPrevListItem(),Enter:function(t,e){return function(t){return function(e,n){var o=e.tr,s=e.selection,l=s.$from,u=s.$to;if(l.depth<2||!l.sameParent(u))return!1;var c=l.node(-1);if(c.type!==t)return!1;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==t||l.index(-2)!==l.node(-2).childCount-1)return!1;for(var p=l.index(-1)>0,d=r.HY.empty,f=l.depth-(p?1:2);f>=l.depth-3;f-=1)d=r.HY.from(l.node(f).copy(d));return d=d.append(r.HY.from(t.createAndFill())),o.replace(p?l.before():l.before(-1),l.after(-3),new r.p2(d,p?3:2,2)),o.setSelection(a.Y1.near(o.doc.resolve(l.pos+(p?3:2)))),n(o),!0}var h=u.pos===l.end()?c.contentMatchAt(0).defaultType:null,m=h&&[null,{type:h}];return o.delete(l.pos,u.pos),!!(0,i.Ax)(o.doc,l.pos,2,m)&&(o.split(l.pos,2,m),n(o),!0)}}(t.schema.nodes.listItem)(t,e)}}},e}(ze),rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),content:"block+",group:"block",parseDOM:[Rl("blockquote")],toDOM:function(t){return["blockquote",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return(0,l.ym)(t.schema.nodes.blockQuote)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Alt-q":t,"Alt-Q":t}},e}(ze),oc={left:function(t,e){var n=t[0],r=t[1],o=e.totalColumnCount,i=0===r;if(0!==n||!i){r-=1,i&&(n-=1,r=o-1);var a=e.getCellInfo(n,r);return a.offset+a.nodeSize-2}return null},right:function(t,e){var n=t[0],r=t[1],o=e.totalRowCount,i=e.totalColumnCount,a=r===i-1;if(n!==o-1||!a){var s=r+1,l=e.getColspanStartInfo(n,r);return(null==l?void 0:l.count)>1&&(s+=l.count-1),(a||s===i)&&(n+=1,s=0),e.getCellInfo(n,s).offset+2}return null},up:function(t,e){var n=t[0],r=t[1];if(n>0){var o=e.getCellInfo(n-1,r);return o.offset+o.nodeSize-2}return null},down:function(t,e){var n=t[0],r=t[1],o=e.totalRowCount;if(n<o-1){var i=n+1,a=e.getRowspanStartInfo(n,r);return(null==a?void 0:a.count)>1&&(i+=a.count-1),e.getCellInfo(i,r).offset+2}return null}};function ic(t,e,n){var r=n[0],o=n[1],i=e.getRowspanStartInfo(r,o),a="up"===t&&0===r,s="down"===t&&((null==i?void 0:i.count)>1?r+i.count-1:r)===e.totalRowCount-1;return a||s}function ac(t,e,n,r){void 0===r&&(r=!1);var o=t.doc.resolve(e.tableEndOffset);return r||!o.nodeAfter?Dt(t,o,n):t.setSelection(a.Y1.near(o,1))}function sc(t,e,n,r){var o=(0,oc[t])(n,r);if(o){var i="right"===t||"down"===t?1:-1;return e.setSelection(a.Y1.near(e.doc.resolve(o),i))}return null}function lc(t,e,n){var r=t.getCellInfo(e,0).offset,o=t.getCellInfo(e,n-1);return{from:r,to:o.offset+o.nodeSize}}var uc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[Rl("table")],toDOM:function(t){return["table",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e.prototype.addTable=function(){return function(t){return void 0===t&&(t={rowCount:2,columnCount:1,data:[]}),function(e,n){var r=t.rowCount,o=t.columnCount,i=t.data,a=e.schema,s=e.selection,l=e.tr,u=s.from,c=s.to,p=s.$from;if(u===c&&!Dl(p)){var d=a.nodes,f=d.tableHead,h=d.tableBody,m=null==i?void 0:i.slice(0,o),v=null==i?void 0:i.slice(o,i.length),g=function(t,e,n){for(var r=e.nodes,o=r.tableRow,i=r.tableHeadCell,a=r.paragraph,s=[],l=0;l<t;l+=1){var u=n&&n[l],c=a.create(null,u?e.text(u):[]);s.push(i.create(null,c))}return[o.create(null,s)]}(o,a,m),y=Kl(r-1,o,a,v),b=a.nodes.table.create(null,[f.create(null,g),h.create(null,y)]);return n(l.replaceSelectionWith(b)),!0}return!1}}},e.prototype.removeTable=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=Wl.create(n.$anchor);if(o){var i=o.tableStartOffset,a=o.tableEndOffset,s=i-1,l=Ot(r.delete(s,a),s);return e(r.setSelection(l)),!0}return!1}}},e.prototype.addColumn=function(t){return function(){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=tu(r),s=a.anchor,l=a.head;if(s&&l){for(var u=Wl.create(s),c=u.getRectOffsets(s,l),p="left"===t?c.startColIdx:c.endColIdx+1,d=nu(c).columnCount,f=u.totalRowCount,h=0;h<f;h+=1){var m=Zl(d,h,i);o.insert(o.mapping.map(u.posAt(h,p)),m)}return n(o),!0}return!1}}},e.prototype.removeColumn=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=tu(n),i=o.anchor,a=o.head;if(i&&a){var s=Wl.create(i),l=s.getRectOffsets(i,a),u=s.totalColumnCount,c=s.totalRowCount;if(nu(l).columnCount===u)return!1;for(var p=l.startColIdx,d=l.endColIdx,f=r.mapping.maps.length,h=0;h<c;h+=1)for(var m=d;m>=p;m-=1){var v=s.getCellInfo(h,m),g=v.offset,y=v.nodeSize,b=r.mapping.slice(f).map(g),w=b+y;r.delete(b,w)}return e(r),!0}return!1}}},e.prototype.addRow=function(t){return function(){return function(e,n){var r=e.selection,o=e.schema,i=e.tr,a=tu(r),s=a.anchor,l=a.head;if(s&&l){var u=Wl.create(s),c=u.totalColumnCount,p=u.getRectOffsets(s,l),d=nu(p).rowCount,f=function(t,e,n){var r,o,i;return"up"===t?(r=n.startRowIdx,o=0,i=-1):(r=n.endRowIdx,o=e.totalColumnCount-1,i=e.getCellInfo(r,o).nodeSize+1),{targetRowIdx:r,insertColIdx:o,nodeSize:i}}(t,u,p),h=f.targetRowIdx,m=f.insertColIdx,v=f.nodeSize;if(!(0===h)){for(var g=[],y=i.mapping.map(u.posAt(h,m))+v,b=[],w=0;w<c;w+=1)b=b.concat(Zl(1,h,o));for(var k=0;k<d;k+=1)g.push(o.nodes.tableRow.create(null,b));return n(i.insert(y,g)),!0}}return!1}}},e.prototype.removeRow=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=tu(n),i=o.anchor,a=o.head;if(i&&a){var s=Wl.create(i),l=s.totalRowCount,u=s.totalColumnCount,c=s.getRectOffsets(i,a),p=nu(c).rowCount,d=c.startRowIdx,f=c.endRowIdx;if(p===l-1||0===d)return!1;for(var h=f;h>=d;h-=1){var m=lc(s,h,u),v=m.from,g=m.to;r.delete(v-1,g+1)}return e(r),!0}return!1}}},e.prototype.alignColumn=function(){return function(t){return void 0===t&&(t={align:"center"}),function(e,n){var r=t.align,o=e.selection,i=e.tr,a=tu(o),s=a.anchor,l=a.head;if(s&&l){for(var u=Wl.create(s),c=u.totalRowCount,p=u.getRectOffsets(s,l),d=p.startColIdx,f=p.endColIdx,h=0;h<c;h+=1)for(var m=d;m<=f;m+=1)if(!u.extendedRowspan(h,m)&&!u.extendedColspan(h,m)){var v=u.getNodeAndPos(h,m),g=v.node,y=v.pos,b=ru(g,{align:r});i.setNodeMarkup(y,null,b)}return n(i),!0}return!1}}},e.prototype.moveToCell=function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=tu(r),s=a.anchor,l=a.head;if(s&&l){var u=Wl.create(s),c=u.getCellIndex(s),p=void 0;if(p=ic(t,u,c)?ac(o,u,i):sc(t,o,c,u))return n(p),!0}return!1}},e.prototype.moveInCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,s=n.doc,l=n.schema,u=o.$from;if(!e.context.view.endOfTextblock(t))return!1;var c=Al(u,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}));if(c){var p=Al(u,(function(t){return"paragraph"===t.type.name})),d=c.depth;if(p&&function(t,e,n,r){var o=e[0],i=e[1],a=o+3,s=i>=a,l=s?o+1:i,u=function(t,e,n,r,o){var i=e[0],a=e[1],s=e[2];if("left"===t||"up"===t){if(o&&!function(t,e,n){var r=n[0],o=n[1],i=e.resolve(t.before(r-1));return o===r&&!i.nodeBefore}(n,r,[i,a]))return!1;var l=n.before(s);if(r.resolve(l).nodeBefore)return!1}return!0}(t,[i,a,l],n,r,s),c=function(t,e,n,r,o){if("right"===t||"down"===t){if(o&&!function(t){for(var e,n,r=t.depth;r&&"tableBodyCell"!==(n=t.node(r)).type.name;){if("listItem"===n.type.name){var o=t.node(r-1).lastChild===n,i="paragraph"!==(null===(e=n.lastChild)||void 0===e?void 0:e.type.name);return!!o&&!i}r-=1}return!1}(n))return!1;var i=n.after(e);if(r.resolve(i).nodeAfter)return!1}return!0}(t,l,n,r,s);return u&&c}(t,[d,p.depth],u,s)){var f=tu(o).anchor,h=Wl.create(f),m=h.getCellIndex(f),v=void 0;if(!function(t,e,n){var r=n[0],o=n[1];if("up"===t||"down"===t)return!1;var i=e.tableStartOffset,a=e.tableEndOffset,s=e.getCellInfo(r,o),l=s.offset,u=s.nodeSize;return("left"===t?i:a)===("left"===t?l-2:l+u+3)}(t,h,m)?ic(t,h,m)?"up"===t?v=function(t,e,n){var r=t.doc.resolve(e.tableStartOffset-1);return r.nodeBefore?t.setSelection(a.Y1.near(r,-1)):Dt(t,r,n)}(i,h,l):"down"===t&&(v=ac(i,h,l)):v=sc(t,i,m,h):v=function(t,e,n){var r=t.doc.resolve(e.before(n-3));return t.setSelection(new a.qv(r))}(i,u,d),v)return r(v),!0}}return!1}},e.prototype.deleteCells=function(){return function(t,e){var n=t.schema,r=t.selection,o=t.tr,i=tu(r),s=i.anchor,l=i.head,u=r instanceof a.Bs;if(s&&l&&!u){for(var c=Wl.create(s),p=c.getRectOffsets(s,l),d=p.startRowIdx,f=p.startColIdx,h=p.endRowIdx,m=p.endColIdx,v=d;v<=h;v+=1)for(var g=f;g<=m;g+=1)if(!c.extendedRowspan(v,g)&&!c.extendedColspan(v,g)){var y=c.getNodeAndPos(v,g),b=y.node,w=y.pos,k=Zl(1,v,n,b.attrs);o.replaceWith(o.mapping.map(w),o.mapping.map(w+b.nodeSize),k)}return e(o),!0}return!1}},e.prototype.exitTable=function(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from;if(Al(i,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))&&Al(i,(function(t){return"paragraph"===t.type.name}))){var a=tu(n).anchor;return e(ac(r,Wl.create(a),o,!0)),!0}return!1}},e.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},e.prototype.keymaps=function(){var t=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:t,"Mod-Backspace":t,Delete:t,"Mod-Delete":t,"Mod-Enter":this.exitTable()}},e}(ze),cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[Rl("thead")],toDOM:function(t){return["thead",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(ze),pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"tbody",getAttrs:function(t){var e=t.querySelectorAll("tr")[0].children.length,n=t.getAttribute("data-raw-html");return!!e&&f({},n&&{rawHTML:n})}}],toDOM:function(t){return["tbody",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(ze),dc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"tr",getAttrs:function(t){var e=t.children.length,n=t.getAttribute("data-raw-html");return!!e&&f({},n&&{rawHTML:n})}}],toDOM:function(t){return["tr",Hl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(ze),fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:f({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),isolating:!0,parseDOM:[Pl("th")],toDOM:function(t){var e=t.attrs,n=Bl(e);return["th",f(f({},n),Hl(e)),0]}}},enumerable:!1,configurable:!0}),e}(ze),hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[Pl("td")],toDOM:function(t){return["td",Bl(t.attrs),0]}}},enumerable:!1,configurable:!0}),e}(ze),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{inline:!0,attrs:f({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=ll(t,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=e.getAttribute("src")||"",r=e.getAttribute("data-raw-html"),o=e.getAttribute("alt");return f({imageUrl:n,altText:o},r&&{rawHTML:r})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"img",f(f({src:ut(e.imageUrl)},e.altText&&{alt:e.altText}),Hl(e))]}}},enumerable:!1,configurable:!0}),e.prototype.addImage=function(){return function(t){return function(e,n){var r=e.schema,o=e.tr,i=t,a=i.imageUrl,s=i.altText;if(!a)return!1;var l=r.nodes.image.createAndFill(f({imageUrl:a},s&&{altText:s}));return n(o.replaceSelectionWith(l).scrollIntoView()),!0}}},e.prototype.commands=function(){return{addImage:this.addImage()}},e}(ze),vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(t){var e=t.attrs;return["div",Hl(e),[e.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){var t=this;return function(){return function(e,n){var r,o=e.selection,i=o.$from;if(i===o.$to){var a=e.doc,s=e.schema.nodes,l=s.thematicBreak,u=s.paragraph,c=[l.create()],p=i.node(1),d=a.child(a.childCount-1)===p,f=a.resolve(i.after(1)),h=(null===(r=i.nodeAfter)||void 0===r?void 0:r.type.name)===t.name;return(d||h)&&c.push(u.create()),n(e.tr.insert(f.pos,c).scrollIntoView()),!0}return!1}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(ze),gc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["b","strong"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"strong",Hl(e)]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return function(){return function(t,e){return(0,l.w9)(t.schema.marks.strong)(t,e)}}},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Sn),yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["i","em"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"em",Hl(e)]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return function(){return function(t,e){return(0,l.w9)(t.schema.marks.emph)(t,e)}}},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Sn),bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["s","del"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"del",Hl(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return(0,l.w9)(t.schema.marks.strike)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Sn),wc=function(t){function e(e){var n=t.call(this)||this;return n.linkAttributes=e,n}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:f({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=ll(t,{RETURN_DOM_FRAGMENT:!0}).firstChild,n=e.getAttribute("href")||"",r=e.getAttribute("title")||"",o=e.getAttribute("data-raw-html");return f({linkUrl:n,title:r},o&&{rawHTML:o})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"a",f(f({href:ut(n.linkUrl)},t.linkAttributes),Hl(n))]}}},enumerable:!1,configurable:!0}),e.prototype.addLink=function(){return function(t){return function(e,n){var r=t,o=r.linkUrl,i=r.linkText,a=void 0===i?"":i,s=e.schema,l=e.tr,u=e.selection,c=u.empty,p=u.from,d=u.to;if(p&&d&&o){var f={linkUrl:o},h=s.mark("link",f);if(c&&a){var m=At(s,a,h);l.replaceRangeWith(p,d,m)}else l.addMark(p,d,h);return n(l.scrollIntoView()),!0}return!1}}},e.prototype.toggleLink=function(){return function(t){return function(e,n){return(0,l.w9)(e.schema.marks.link,t)(e,n)}}},e.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},e}(Sn),kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},{htmlAttrs:{default:null},classNames:{default:null}}),parseDOM:[{tag:"code",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"code",Hl(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return(0,l.w9)(t.schema.marks.code)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Sn),xc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(t){return{info:t.getAttribute("data-custom-info")}}}],toDOM:function(t){return["div",{"data-custom-info":t.attrs.info||null},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){return!!(null==t?void 0:t.info)&&(0,l.uJ)(e.schema.nodes.customBlock,t)(e,n)}}},e}(ze),Cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"frontMatter"!==r.node().type.name)&&(0,l.uo)(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(ze),Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"htmlComment"!==r.node().type.name)&&(0,l.uo)(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(ze);var Ec=Le("contents"),Lc=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toDOMAdaptor,i=n.htmlSchemaMap,a=void 0===i?{}:i,s=n.linkAttributes,l=void 0===s?{}:s,u=n.useCommandShortcut,c=void 0===u||u,p=n.wwPlugins,d=void 0===p?[]:p,h=n.wwNodeViews,m=void 0===h?{}:h;return r.editorType="wysiwyg",r.el.classList.add("ww-mode"),r.toDOMAdaptor=o,r.linkAttributes=l,r.extraPlugins=d,r.pluginNodeViews=m,r.specs=r.createSpecs(),r.schema=r.createSchema(a),r.context=r.createContext(),r.keymaps=r.createKeymaps(c),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.initEvent(),r}return d(e,t),e.prototype.createSpecs=function(){return t=this.linkAttributes,new Ke([new Yu,new Xu,new Zu,new Qu,new Ju,new tc,new ec,new nc,new rc,new uc,new cc,new pc,new dc,new fc,new hc,new mc,new vc,new gc,new yc,new bc,new wc(t),new kc,new xc,new Cc,new $e,new Tc]);var t},e.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSchema=function(t){return new r.V_({nodes:f(f({},this.specs.nodes),t.nodes),marks:f(f({},this.specs.marks),t.marks)})},e.prototype.createPlugins=function(){return h([new a.Sy({key:ou,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(ou);if(n)return-1===n?null:n;if(G(e)||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:su,createSelectionBetween:function(t){var e=t.state;return G(ou.getState(e))?null:e.selection}},view:function(t){return new iu(t)}}),(t=this.eventEmitter,new a.Sy({props:{handleDOMEvents:{contextmenu:function(e,n){var r=Ql(n.target,e.dom);if(r){n.preventDefault();var o=n,i=o.clientX,a=o.clientY,s=e.dom.parentNode.getBoundingClientRect(),l=s.left,u=s.top,c="TH"===r.nodeName;return t.emit("contextmenu",{pos:{left:i-l+10+"px",top:a-u+30+"px"},menuGroups:fu(t,c),tableCell:r}),!0}return!1}}}})),new a.Sy({props:{handleDOMEvents:{mousedown:function(t,e){var n=e,r=n.clientX,o=n.clientY,i=t.posAtCoords({left:r,top:o});if(i){var a=t.state,s=a.doc,l=a.tr,u=s.resolve(i.pos),c=Il(u),p=e.target,d=getComputedStyle(p,":before"),h=e,m=h.offsetX,v=h.offsetY;if(!c||!Te(d,m,v))return!1;e.preventDefault();var g=u.before(c.depth),y=c.node.attrs;return l.setNodeMarkup(g,null,f(f({},y),{checked:!y.checked})),t.dispatch(l),!0}return!1}}}}),yu(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins);var t},e.prototype.createPluginNodeViews=function(){var t=this.eventEmitter,e=this.pluginNodeViews,n={};return e&&Object.keys(e).forEach((function(r){n[r]=function(n,o,i){return e[r](n,o,i,t)}})),n},e.prototype.createView=function(){var t=this,e=this.toDOMAdaptor,n=this.eventEmitter;return new o.tk(this.el,{state:this.createState(),attributes:{class:Ec},nodeViews:f({customBlock:function(t,n,r){return new bu(t,n,r,e)},image:function(t,e,r){return new ku(t,e,r,n)},codeBlock:function(t,e,r){return new xu(t,e,r,n)},widget:Ue},this.createPluginNodeViews()),dispatchTransaction:function(e){var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e.scrollIntoView()),t.eventEmitter.emit("setFocusedNode",n.selection.$from.node(1))},transformPastedHTML:Pu,transformPasted:function(e){return Uu(e,t.schema,Dl(t.view.state.selection.$from))},handlePaste:function(t,e,n){return Gu(t,n)},handleKeyDown:function(e,n){return t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{paste:function(e,n){var r=n.clipboardData||window.clipboardData,o=null==r?void 0:r.items;if(o){var i=Nt(o).some((function(t){return"string"===t.kind&&"text/rtf"===t.type}));if(!i){var a=qe(o);a&&(n.preventDefault(),je(t.eventEmitter,a,n.type))}}return!1},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0}}})},e.prototype.createCommands=function(){return this.specs.commands(this.view,Vl())},e.prototype.getHTML=function(){return Pe(this.view.dom.innerHTML)},e.prototype.getModel=function(){return this.view.state.doc},e.prototype.getSelection=function(){var t=this.view.state.selection;return[t.from,t.to]},e.prototype.getSchema=function(){return this.view.state.schema},e.prototype.replaceSelection=function(t,e,n){var o=this.view.state,i=o.schema,a=o.tr,s=t.split("\n").map((function(t){return St(i,ie(t,i))})),l=new r.p2(r.HY.from(s),1,1),u=W(e)&&W(n)?a.replaceRange(e,n,l):a.replaceSelection(l);this.view.dispatch(u),this.focus()},e.prototype.deleteSelection=function(t,e){var n=this.view.state.tr,r=W(t)&&W(e)?n.deleteRange(t,e):n.deleteSelection();this.view.dispatch(r.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;return W(t)&&W(e)&&(i=t,a=e),r.textBetween(i,a,"\n")},e.prototype.setModel=function(t,e){void 0===e&&(e=!1);var n=this.view.state,r=n.tr,o=n.doc;this.view.dispatch(r.replaceWith(0,o.content.size,t)),e&&this.moveCursorToEnd(!0)},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=Ot(n,t,e);this.view.dispatch(n.setSelection(r).scrollIntoView())},e.prototype.addWidget=function(t,e,n){var r=this.view,o=r.dispatch,i=r.state;o(i.tr.setMeta("widget",{pos:null!=n?n:i.selection.to,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=ie(n,r.schema);this.view.dispatch(o.replaceWith(t,e,i))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t?n.resolve(t):r.$from,i=o.marks(),a=o.node(),s=o.start(),l=o.end(),u=a.type.name;if(i.length||"paragraph"===u){var c=i[i.length-1];u=c?c.type.name:"text",a.forEach((function(t,e){var n=t.isText,r=t.nodeSize,i=t.marks,a=o.pos-s;n&&e<=a&&e+r>=a&&function(t){return!t.length||ct(t,c)}(i)&&(l=(s+=e)+r)}))}return{range:[s,l],type:u}},e}(We),Mc=A,Nc=G;var Sc=function(t){return!Mc(t)&&!Nc(t)};var Ac=function(t){return Sc(t)&&!1!==t};var Oc=function(t){return!Ac(t)},Dc=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],Ic=function(){function t(){var t=this;this.events=new lu,this.eventTypes=Dc.reduce((function(t,e){return f(f({},t),{type:e})}),{}),this.hold=!1,Dc.forEach((function(e){t.addEventType(e)}))}return t.prototype.listen=function(t,e){var n=this.getTypeInfo(t),r=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(e.namespace=n.namespace),r.push(e),this.events.set(n.type,r)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getTypeInfo(t),o=this.events.get(r.type),i=[];return!this.hold&&o&&o.forEach((function(t){var n=t.apply(void 0,e);A(n)||i.push(n)})),i},t.prototype.emitReduce=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this.events.get(t);return!this.hold&&o&&o.forEach((function(t){var r=t.apply(void 0,h([e],n));Oc(r)||(e=r)})),e},t.prototype.getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},t.prototype.hasEventType=function(t){return!A(this.eventTypes[this.getTypeInfo(t).type])},t.prototype.addEventType=function(t){if(this.hasEventType(t))throw new Error("There is already have event type "+t);this.eventTypes[t]=t},t.prototype.removeEventHandler=function(t,e){var n=this,r=this.getTypeInfo(t),o=r.type,i=r.namespace;o&&e?this.removeEventHandlerWithHandler(o,e):o&&!i?this.events.delete(o):!o&&i?this.events.forEach((function(t,e){n.removeEventHandlerWithTypeInfo(e,i)})):o&&i&&this.removeEventHandlerWithTypeInfo(o,i)},t.prototype.removeEventHandlerWithHandler=function(t,e){var n=this.events.get(t);if(n){var r=n.indexOf(e);n.indexOf(e)>=0&&n.splice(r,1)}},t.prototype.removeEventHandlerWithTypeInfo=function(t,e){var n=[],r=this.events.get(t);r&&(r.map((function(t){return t.namespace!==e&&n.push(t),null})),this.events.set(t,n))},t.prototype.getEvents=function(){return this.events},t.prototype.holdEventInvoke=function(t){this.hold=!0,t(),this.hold=!1},t}(),Rc=function(){function t(t,e,n,r){this.eventEmitter=t,this.mdCommands=e,this.wwCommands=n,this.getEditorType=r,this.initEvent()}return t.prototype.initEvent=function(){var t=this;this.eventEmitter.listen("command",(function(e,n){t.exec(e,n)}))},t.prototype.addCommand=function(t,e,n){"markdown"===t?this.mdCommands[e]=n:this.wwCommands[e]=n},t.prototype.deleteCommand=function(t,e){"markdown"===t?delete this.mdCommands[e]:delete this.wwCommands[e]},t.prototype.exec=function(t,e){"markdown"===this.getEditorType()?this.mdCommands[t](e):this.wwCommands[t](e)},t}();function Bc(t){return"\n"===t[t.length-1]?t.slice(0,t.length-1):t}function Pc(t,e){var n=t.schema,r=e.literal.match(we);if(r){var o=r[1],i=r[3],a=(o||i).toLowerCase();return"htmlInline"===e.type&&!(!n.marks[a]&&!n.nodes[a])}return!1}function Hc(t){return ct(["text","strong","emph","strike","image","link","code"],t.type)}function Fc(t){return"softbreak"===(null==t?void 0:t.type)}function jc(t){var e=t.type,n=t.literal,r="htmlInline"===e&&n.match(we);if(r){var o=r[1],i=r[3],a=o||i;if(a)return ct(["ul","ol","li"],a.toLowerCase())}return!1}function qc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=document.createElement("div");r.innerHTML=ll(t);var o=r.firstChild;return e.map((function(t){return o.getAttribute(t)||""}))}var _c={"b, strong":function(t,e,n){var r=t.schema.marks.strong;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"i, em":function(t,e,n){var r=t.schema.marks.emph;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"s, del":function(t,e,n){var r=t.schema.marks.strike;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},code:function(t,e,n){var r=t.schema.marks.code;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},a:function(t,e,n){var r=e.literal,o=t.schema.marks.link;if(n){var i=qc(r,"href")[0];t.openMark(o.create({linkUrl:i,rawHTML:n}))}else t.closeMark(o)},img:function(t,e,n){var r=e.literal;if(n){var o=qc(r,"src","alt"),i=o[0],a=o[1],s=t.schema.nodes.image;t.addNode(s,f({rawHTML:n,imageUrl:i},a&&{altText:a}))}},hr:function(t,e,n){t.addNode(t.schema.nodes.thematicBreak,{rawHTML:n})},br:function(t,e){var n=t.schema.nodes.paragraph,r=e.parent,o=e.prev,i=e.next;"paragraph"===(null==r?void 0:r.type)?(Fc(o)&&t.openNode(n),Fc(i)?t.closeNode():i&&(t.closeNode(),t.openNode(n))):"tableCell"===(null==r?void 0:r.type)&&(o&&(Hc(o)||Pc(t,o))&&t.closeNode(),i&&(Hc(i)||Pc(t,i))&&t.openNode(n))},pre:function(t,e,n){var r,o,i=document.createElement("div");i.innerHTML=e.literal;var a=null===(o=null===(r=i.firstChild)||void 0===r?void 0:r.firstChild)||void 0===o?void 0:o.textContent;t.openNode(t.schema.nodes.codeBlock,{rawHTML:n}),t.addText(Bc(a)),t.closeNode()},"ul, ol":function(t,e,n){if("tableCell"===e.parent.type){var r=t.schema.nodes,o=r.bulletList,i=r.orderedList,a=r.paragraph,s="ul"===n?o:i;n?(e.prev&&!jc(e.prev)&&t.closeNode(),t.openNode(s,{rawHTML:n})):(t.closeNode(),e.next&&!jc(e.next)&&t.openNode(a))}},li:function(t,e,n){var r;if("tableCell"===(null===(r=e.parent)||void 0===r?void 0:r.type)){var o=t.schema.nodes,i=o.listItem,a=o.paragraph;if(n){var s=function(t){var e=t.literal;return{task:/data-task/.test(e),checked:/data-task-checked/.test(e)}}(e);e.prev&&!jc(e.prev)&&t.closeNode(),t.openNode(i,f({rawHTML:n},s)),e.next&&!jc(e.next)&&t.openNode(a)}else e.prev&&!jc(e.prev)&&t.closeNode(),t.closeNode()}}},zc=function(t){var e={};return Object.keys(t).forEach((function(n){n.split(", ").forEach((function(r){var o=r.toLowerCase();e[o]=t[n]}))})),e}(_c);function Uc(t){return"htmlInline"===t.type&&ke.test(t.literal)}function Vc(t){Nt(t.childNodes).forEach((function(t){if(Ne(t)){var e=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",e),t.childNodes&&Vc(t)}}))}var $c={text:function(t,e){t.addText(e.literal||"")},paragraph:function(t,e,n,r){var o;if(n.entering){var i=t.schema.nodes.paragraph;"paragraph"===(null===(o=e.prev)||void 0===o?void 0:o.type)&&(t.openNode(i,r),t.closeNode()),t.openNode(i,r)}else t.closeNode()},heading:function(t,e,n,r){if(n.entering){var o=e,i=o.level,a=o.headingType;t.openNode(t.schema.nodes.heading,f({level:i,headingType:a},r))}else t.closeNode()},codeBlock:function(t,e,n){var r=t.schema.nodes.codeBlock,o=e,i=o.info,a=o.literal;t.openNode(r,f({language:i},n)),t.addText(Bc(a||"")),t.closeNode()},list:function(t,e,n,r){if(n.entering){var o=t.schema.nodes,i=o.bulletList,a=o.orderedList,s=e.listData,l=s.type,u=s.start;"bullet"===l?t.openNode(i,r):t.openNode(a,f({order:u},r))}else t.closeNode()},item:function(t,e,n,r){var o=n.entering,i=t.schema.nodes.listItem,a=e.listData,s=a.task,l=a.checked;if(o){var u=f(f(f({},s&&{task:s}),l&&{checked:l}),r);t.openNode(i,u)}else t.closeNode()},blockQuote:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.blockQuote,r):t.closeNode()},image:function(t,e,n,r){var o=n.entering,i=n.skipChildren,a=t.schema.nodes.image,s=e,l=s.destination,u=s.firstChild;o&&i&&i(),t.addNode(a,f(f({imageUrl:l},u&&{altText:u.literal}),r))},thematicBreak:function(t,e,n,r){t.addNode(t.schema.nodes.thematicBreak,r)},strong:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strong;o?t.openMark(i.create(r)):t.closeMark(i)},emph:function(t,e,n,r){var o=n.entering,i=t.schema.marks.emph;o?t.openMark(i.create(r)):t.closeMark(i)},link:function(t,e,n,r){var o=n.entering,i=t.schema.marks.link,a=e,s=a.destination,l=a.title;if(o){var u=f({linkUrl:s,title:l},r);t.openMark(i.create(u))}else t.closeMark(i)},softbreak:function(t,e){if("paragraph"===e.parent.type){var n=e.prev,r=e.next;n&&!Uc(n)&&t.closeNode(),r&&!Uc(r)&&t.openNode(t.schema.nodes.paragraph)}},table:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.table,r):t.closeNode()},tableHead:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableHead,r):t.closeNode()},tableBody:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableBody,r):t.closeNode()},tableRow:function(t,e,n,r){n.entering?t.openNode(t.schema.nodes.tableRow,r):t.closeNode()},tableCell:function(t,e,n){var r=n.entering;if(!e.ignored){var o=function(e){return e&&(Hc(e)||Pc(t,e))};if(r){var i=t.schema.nodes,a=i.tableHeadCell,s=i.tableBodyCell,l=i.paragraph,u=e.parent.parent,c="tableHead"===u.type?a:s,p=(u.parent.columns[e.startIdx]||{}).align,d=f({},e.attrs);p&&(d.align=p),t.openNode(c,d),o(e.firstChild)&&t.openNode(l)}else o(e.lastChild)&&t.closeNode(),t.closeNode()}},strike:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strike;o?t.openMark(i.create(r)):t.closeMark(i)},code:function(t,e,n,r){var o=t.schema.marks.code;t.openMark(o.create(r)),t.addText(Bc(e.literal||"")),t.closeMark(o)},customBlock:function(t,e){var n=t.schema.nodes,r=n.customBlock,o=n.paragraph,i=e,a=i.info,s=i.literal;t.openNode(r,{info:a}),t.addText(Bc(s||"")),t.closeNode(),e.next||(t.openNode(o),t.closeNode())},frontMatter:function(t,e){t.openNode(t.schema.nodes.frontMatter),t.addText(e.literal),t.closeNode()},htmlInline:function(t,e){var n=e.literal,r=n.match(we),o=r[1],i=r[3],a=(o||i).toLowerCase(),s=t.schema.marks[a],l=ll(n);if(null==s?void 0:s.spec.attrs.htmlInline)if(o){var u=cl(l);t.openMark(s.create({htmlAttrs:u}))}else t.closeMark(s);else{var c=zc[a];c&&c(t,e,o)}},htmlBlock:function(t,e){var n=e.literal,r=document.createElement("div");if(xe.test(n))t.openNode(t.schema.nodes.htmlComment),t.addText(e.literal),t.closeNode();else{var o=n.match(we),i=o[1],a=o[3],s=(i||a).toLowerCase(),l=t.schema.nodes[s],u=ll(n);if(null==l?void 0:l.spec.attrs.htmlBlock){var c=cl(u),p=ul(e,s);t.addNode(l,{htmlAttrs:c,childrenHTML:p})}else r.innerHTML=u,Vc(r),t.convertByDOMParser(r)}},customInline:function(t,e,n){var r=n.entering,o=n.skipChildren,i=e,a=i.info,s=i.firstChild,l=t.schema;if(-1!==a.indexOf("widget")&&r){var u=ae(e);o(),t.addNode(l.nodes.widget,{info:a},[l.text(te(a,u))])}else{var c="$$";r&&(c+=s?a+" ":a),t.addText(c)}}};var Wc=function(){function t(t,e){this.schema=t,this.convertors=e,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=r.vc.none}return t.prototype.top=function(){return wt(this.stack)},t.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},t.prototype.addText=function(t){if(t){var e=this.top().content,n=wt(e),o=this.schema.text(t,this.marks),i=n&&(s=o,!!((a=n).isText&&s.isText&&r.vc.sameSet(a.marks,s.marks))&&a.withText(a.text+s.text));i?e[e.length-1]=i:e.push(o)}var a,s},t.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},t.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},t.prototype.addNode=function(t,e,n){var r=t.createAndFill(e,n,this.marks);return r?(this.push(r),r):null},t.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},t.prototype.closeNode=function(){this.marks.length&&(this.marks=r.vc.none);var t=this.stack.pop(),e=t.type,n=t.attrs,o=t.content;return this.addNode(e,n,o)},t.prototype.convertByDOMParser=function(t){var e=this;r.aw.fromSchema(this.schema).parse(t).content.forEach((function(t){return e.push(t)}))},t.prototype.closeUnmatchedHTMLInline=function(t,e){var n;if(!e&&"htmlInline"!==t.type)for(var r=this.stack.length-1;r>=0;r-=1){var o=this.stack[r];if(!(null===(n=o.attrs)||void 0===n?void 0:n.rawHTML))break;o.content.length?this.closeNode():this.stack.pop()}},t.prototype.convert=function(t,e){for(var n=t.walker(),r=n.next(),o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type],s=!1;if(a){var l={entering:o,leaf:!Yt(t),getChildrenText:Xt,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:"\n"},skipChildren:function(){s=!0}};if(i.closeUnmatchedHTMLInline(t,o),a(i,t,l),(null==e?void 0:e.node)===t){var u=i.stack.reduce((function(t,e){return t+e.content.reduce((function(t,e){return t+e.nodeSize}),0)}),0)+1;e.setMappedPos(u)}}s&&(n.resumeAt(t,!1),n.next()),r=n.next()},i=this;r;)o()},t.prototype.convertNode=function(t,e){return this.convert(t,e),this.stack.length?this.closeNode():null},t}();var Gc={text:function(t,e){var n,r=e.node,o=null!==(n=r.text)&&void 0!==n?n:"";(r.marks||[]).some((function(t){return"link"===t.type.name}))?t.text(mt(o),!1):t.text(o)},paragraph:function(t,e){var n=e.node,r=e.parent,o=e.index,i=void 0===o?0:o;if(t.stopNewline)t.convertInline(n);else{var a=0===i,s=!a&&r.child(i-1),l=s&&0===s.childCount,u=i<r.childCount-1&&r.child(i+1),c=u&&"paragraph"===u.type.name,p=0===n.childCount;if(p&&l)t.write("<br>\n");else if(!p||l||a)t.convertInline(n),c?t.write("\n"):t.closeBlock(n);else{if("listItem"===(null==r?void 0:r.type.name)){var d=t.getDelim();t.setDelim(""),t.write("<br>"),t.setDelim(d)}t.write("\n")}}},heading:function(t,e,n){var r=e.node,o=n.delim;"atx"===r.attrs.headingType?(t.write(o+" "),t.convertInline(r),t.closeBlock(r)):(t.convertInline(r),t.ensureNewLine(),t.write(o),t.closeBlock(r))},codeBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],l=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(l),t.closeBlock(r)},blockQuote:function(t,e,n){var r=e.node,o=e.parent,i=n.delim;(null==o?void 0:o.type.name)===r.type.name&&t.flushClose(1),t.wrapBlock(i,null,r,(function(){return t.convertNode(r)}))},bulletList:function(t,e,n){var r=e.node,o=n.delim;t.convertList(r,ht(" ",4),(function(){return o+" "}))},orderedList:function(t,e){var n=e.node,r=n.attrs.order||1;t.convertList(n,ht(" ",4),(function(t){return String(r+t)+". "}))},listItem:function(t,e){var n=e.node,r=n.attrs,o=r.task,i=r.checked;o&&t.write("["+(i?"x":" ")+"] "),t.convertNode(n)},image:function(t,e,n){var r=n.attrs;t.write("!["+(null==r?void 0:r.altText)+"]("+(null==r?void 0:r.imageUrl)+")")},thematicBreak:function(t,e,n){var r=e.node,o=n.delim;t.write(o),t.closeBlock(r)},table:function(t,e){var n=e.node;t.convertNode(n),t.closeBlock(n)},tableHead:function(t,e,n){var r=e.node,o=n.delim,i=r.firstChild;t.convertNode(r);var a=null!=o?o:"";!o&&i&&i.forEach((function(t){var e=function(t,e){var n=t.length,r="",o="";return"left"===e?(r=":",n-=1):"right"===e?(o=":",n-=1):"center"===e&&(r=":",o=":",n-=2),""+r+ht("-",Math.max(n,3))+o}(t.textContent,t.attrs.align);a+="| "+e+" "})),t.write(a+"|"),t.ensureNewLine()},tableBody:function(t,e){var n=e.node;t.convertNode(n)},tableRow:function(t,e){var n=e.node;t.convertNode(n),t.write("|"),t.ensureNewLine()},tableHeadCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},tableBodyCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},customBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],l=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(l),t.closeBlock(r)},frontMatter:function(t,e,n){var r=e.node,o=n.text;t.text(o,!1),t.closeBlock(r)},widget:function(t,e,n){var r=n.text;t.write(r)},html:function(t,e,n){var r=e.node,o=n.text;t.write(o),r.attrs.htmlBlock&&t.closeBlock(r)},htmlComment:function(t,e,n){var r=e.node,o=n.text;t.write(o),t.closeBlock(r)}};function Yc(t,e){var n=t.text,r=/`+/g,o=0;if(t.isText&&n)for(var i=r.exec(n);i;)o=Math.max(o,i[0].length),i=r.exec(n);for(var a=o>0&&e>0?" `":"`",s=0;s<o;s+=1)a+="`";return o>0&&e<0&&(a+=" "),a}function Xc(t){return t?["<"+t+">","</"+t+">"]:null}function Kc(t){return t?"<"+t+">":null}function Zc(t){return t?"</"+t+">":null}var Qc={heading:function(t){var e=t.node.attrs,n=e.level,r=ht("#",n);return"setext"===e.headingType&&(r=1===n?"===":"---"),{delim:r,rawHTML:Xc(e.rawHTML)}},codeBlock:function(t){var e=t.node,n=e.attrs,r=e.textContent;return{delim:["```"+(n.language||""),"```"],rawHTML:Xc(n.rawHTML),text:r}},blockQuote:function(t){return{delim:"> ",rawHTML:Xc(t.node.attrs.rawHTML)}},bulletList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ul"),{delim:"*",rawHTML:Xc(o)}},orderedList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ol"),{rawHTML:Xc(o)}},listItem:function(t,e){var n=t.node,r=e.inTable,o=n.attrs,i=o.task,a=o.checked,s=n.attrs.rawHTML;return r&&(s=s||"li"),{rawHTML:s?["<"+s+(i?' class="task-list-item'+(a?" checked":"")+'"':"")+(i?" data-task"+(a?" data-task-checked":""):"")+">","</"+s+">"]:null}},table:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},tableHead:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},tableBody:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},tableRow:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},tableHeadCell:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},tableBodyCell:function(t){return{rawHTML:Xc(t.node.attrs.rawHTML)}},image:function(t){var e=t.node.attrs,n=e.rawHTML,r=e.altText,o=e.imageUrl.replace(/&amp;/g,"&"),i=r?' alt="'+ut(r)+'"':"";return{rawHTML:n?"<"+n+' src="'+ut(o)+'"'+i+">":null,attrs:{altText:mt(r||""),imageUrl:o}}},thematicBreak:function(t){return{delim:"***",rawHTML:Kc(t.node.attrs.rawHTML)}},customBlock:function(t){var e=t.node,n=e.attrs,r=e.textContent;return{delim:["$$"+n.info,"$$"],text:r}},frontMatter:function(t){return{text:t.node.textContent}},widget:function(t){return{text:t.node.textContent}},strong:function(t,e,n){var r=t.node,o=e.entering,i=r.attrs.rawHTML,a="**";return n||(a=o?"<strong>":"</strong>"),{delim:a,rawHTML:o?Kc(i):Zc(i)}},emph:function(t,e,n){var r=t.node,o=e.entering,i=r.attrs.rawHTML,a="*";return n||(a=o?"<em>":"</em>"),{delim:a,rawHTML:o?Kc(i):Zc(i)}},strike:function(t,e,n){var r=t.node,o=e.entering,i=r.attrs.rawHTML,a="~~";return n||(a=o?"<del>":"</del>"),{delim:a,rawHTML:o?Kc(i):Zc(i)}},link:function(t,e){var n=t.node,r=e.entering,o=n.attrs,i=o.title,a=o.rawHTML,s=o.linkUrl.replace(/&amp;/g,"&"),l=i?' title="'+ut(i)+'"':"";return r?{delim:"[",rawHTML:a?"<"+a+' href="'+ut(s)+'"'+l+">":null}:{delim:"]("+s+(i?" "+gt(mt(i)):"")+")",rawHTML:Zc(a)}},code:function(t,e){var n=t.node,r=t.parent,o=t.index,i=void 0===o?0:o,a=e.entering;return{delim:a?Yc(r.child(i),-1):Yc(r.child(i-1),1),rawHTML:a?Kc(n.attrs.rawHTML):Zc(n.attrs.rawHTML)}},htmlComment:function(t){return{text:t.node.textContent}},html:function(t,e){var n=t.node,r=e.entering,o=n.type.name,i=n.attrs.htmlAttrs,a="<"+o,s="</"+o+">";return Object.keys(i).forEach((function(t){a+=" "+t+'="'+i[t].replace(/"/g,"'")+'"'})),a+=">",n.attrs.htmlInline?{rawHTML:r?a:s}:{text:""+a+n.attrs.childrenHTML+s}}},Jc={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function tp(t){var e={};return Object.keys(Gc).forEach((function(n){e[n]=function(e,r){if(Gc[n]){var o=t[n],i=o?o(r,{inTable:e.inTable}):{};!function(t,e){var n=e.state,r=e.nodeInfo,o=e.params,i=o.rawHTML;i?S(t,["heading","codeBlock"])>-1?function(t,e,n){var r=n[0],o=n[1];t.write(r),t.convertInline(e),t.write(o)}(n,r.node,i):S(t,["image","thematicBreak"])>-1?n.write(i):function(t,e,n){var r=e.node,o=e.parent,i=n[0],a=n[1];t.stopNewline=!0,t.write(i),t.convertNode(r),t.write(a),"doc"===(null==o?void 0:o.type.name)&&(t.closeBlock(r),t.stopNewline=!1)}(n,r,i):Gc[t](n,r,o)}(n,{state:e,nodeInfo:r,params:i})}}})),e}function ep(t){Object.keys(t).forEach((function(e){var n=Qc[e],r=t[e];Qc[e]=n?function(t,e){return e.origin=function(){return n(t,e)},r(t,e)}:r,delete t[e]}));var e=tp(Qc),n=function(t){var e={};return Object.keys(Jc).forEach((function(n){e[n]=function(e,r,o){var i=Jc[n],a=t[n],s=a&&e&&!A(r)?a(e,{entering:r},o):{};return f(f({},s),i)}})),e}(Qc);return{nodeTypeConvertors:e,markTypeConvertors:n}}var np=function(){function t(t){var e=t.nodeTypeConvertors,n=t.markTypeConvertors;this.nodeTypeConvertors=e,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return t.prototype.getMarkConvertor=function(t){var e=t.attrs.htmlInline?"html":t.type.name;return this.markTypeConvertors[e]},t.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},t.prototype.isBetweenSpaces=function(t,e){var n,r,o=t.content,i=0===e||function(t){return/(\S*)\s$/g.test(t)}(null!==(n=o.child(e-1).text)&&void 0!==n?n:"a"),a=e>=o.childCount-1||function(t){return/^\s(\S*)/g.test(t)}(null!==(r=o.child(e+1).text)&&void 0!==r?r:"a");return i&&a},t.prototype.markText=function(t,e,n,r){var o=this.getMarkConvertor(t);if(o){var i=o({node:t,parent:n,index:r},e,this.isBetweenSpaces(n,e?r:r-1)),a=i.delim;return i.rawHTML||a}return""},t.prototype.setDelim=function(t){this.delim=t},t.prototype.getDelim=function(){return this.delim},t.prototype.flushClose=function(t){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+="\n"),t||(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r+=1)this.result+=e+"\n"}this.closed=!1}},t.prototype.wrapBlock=function(t,e,n,r){var o=this.getDelim();this.write(e||t),this.setDelim(this.getDelim()+t),r(),this.setDelim(o),this.closeBlock(n)},t.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")},t.prototype.write=function(t){void 0===t&&(t=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),t&&(this.result+=t)},t.prototype.closeBlock=function(t){this.closed=t},t.prototype.text=function(t,e){void 0===e&&(e=!0);for(var n=t.split("\n"),r=0;r<n.length;r+=1)this.write(),this.result+=e?vt(n[r]):n[r],r!==n.length-1&&(this.result+="\n")},t.prototype.convertBlock=function(t,e,n){var r=t.type.name,o=this.nodeTypeConvertors[r],i={node:t,parent:e,index:n};t.attrs.htmlBlock?this.nodeTypeConvertors.html(this,i):o&&o(this,i)},t.prototype.convertInline=function(t){var e=this,n=[],r="",o=function(o,i,a){var s=o?o.marks:[],l=r;r="";var u=o&&o.isText&&s.some((function(t){var n=e.getMarkConvertor(t),r=n&&n();return r&&r.removedEnclosingWhitespace}));if(u&&o&&o.text){var c=/^(\s*)(.*?)(\s*)$/m.exec(o.text),p=c[1],d=c[2],f=c[3];l+=p,r=f,(p||f)&&((o=d?o.withText(d):null)||(s=n))}for(var h=s.length&&wt(s),m=h&&e.getMarkConvertor(h),v=m&&m(),g=v&&!1===v.escape,y=s.length-(g?1:0),b=0;b<y;b+=1){d=s[b];if(v&&!v.mixable)break;for(var w=0;w<n.length;w+=1){var k=n[w];if(v&&!v.mixable)break;if(d.eq(k)){b>w?s=s.slice(0,w).concat(d).concat(s.slice(w,b)).concat(s.slice(b+1,y)):w>b&&(s=s.slice(0,b).concat(s.slice(b+1,w)).concat(d).concat(s.slice(w,y)));break}}}for(var x=0;x<Math.min(n.length,y)&&s[x].eq(n[x]);)x+=1;for(;x<n.length;){var C=n.pop();C&&e.text(e.markText(C,!1,t,a),!1)}if(l&&e.text(l),o){for(;n.length<y;){d=s[n.length];n.push(d),e.text(e.markText(d,!0,t,a),!1)}g&&o.isText?e.text(e.markText(h,!0,t,a)+o.text+e.markText(h,!1,t,a+1),!1):e.convertBlock(o,t,a)}};t.forEach(o),o(null,0,t.childCount)},t.prototype.convertList=function(t,e,n){var r,o=this;this.closed&&this.closed.type===t.type?this.flushClose(3):this.tightList&&this.flushClose(1);var i=null===(r=t.attrs.tight)||void 0===r||r,a=this.tightList;this.tightList=i,t.forEach((function(r,a,s){s&&i&&o.flushClose(1),o.wrapBlock(e,n(s),t,(function(){return o.convertBlock(r,t,s)}))})),this.tightList=a},t.prototype.convertTableCell=function(t){var e=this;this.stopNewline=!0,this.inTable=!0,t.forEach((function(n,r,o){ct(["bulletList","orderedList"],n.type.name)?(e.convertBlock(n,t,o),e.closed=!1):(e.convertInline(n),o<t.childCount-1&&"paragraph"===t.child(o+1).type.name&&e.write("<br>"))})),this.stopNewline=!1,this.inTable=!1},t.prototype.convertNode=function(t,e){var n=this;return t.forEach((function(r,o,i){if(n.convertBlock(r,t,i),(null==e?void 0:e.node)===r){var a=n.result.split("\n");e.setMappedPos([a.length,wt(a).length+1])}})),this.result},t}(),rp=function(){function t(t,e,n,r){var o=this;this.setMappedPos=function(t){o.mappedPosWhenConverting=t},this.schema=t,this.eventEmitter=r,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=function(t){var e=Object.keys(t),n=f({},$c),r=new cs({gfm:!0,nodeId:!0,convertors:t}).getConvertors();return e.forEach((function(e){var o=$c[e];o&&!ct(["htmlBlock","htmlInline"],e)&&(n[e]=function(n,i,a){a.origin=function(){return r[e](i,a,r)};var s,l=t[e](i,a);if(l){var u=Array.isArray(l)?l[0]:l;s={htmlAttrs:u.attributes,classNames:u.classNames}}o(n,i,a,s)})})),n}(n),this.toMdConvertors=ep(e||{}),this.eventEmitter.listen("setFocusedNode",(function(t){return o.focusedNode=t}))}return t.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},t.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},t.prototype.toWysiwygModel=function(t){return new Wc(this.schema,this.toWwConvertors).convertNode(t,this.getInfoForPosSync())},t.prototype.toMarkdownText=function(t){var e=new np(this.toMdConvertors).convertNode(t,this.getInfoForPosSync());return e=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",e)},t}();function op(t){var e=t.plugins,n=t.eventEmitter,i=t.usageStatistics,l=t.instance;return n.listen("mixinTableOffsetMapPrototype",Yl),(null!=e?e:[]).reduce((function(t,e){var c=function(t){var e=t.plugin,n={eventEmitter:t.eventEmitter,usageStatistics:t.usageStatistics,instance:t.instance,pmState:{Plugin:a.Sy,PluginKey:a.H$,Selection:a.Y1,TextSelection:a.Bs},pmView:{Decoration:o.p,DecorationSet:o.EH},pmModel:{Fragment:r.HY},pmRules:{InputRule:u.VK,inputRules:u.Hw,undoInputRule:u.dU},pmKeymap:{keymap:s.h},i18n:pu};if(b(e)){var i=e[0],l=e[1];return i(n,void 0===l?{}:l)}return e(n)}({plugin:e,eventEmitter:n,usageStatistics:i,instance:l});if(!c)throw new Error("The return value of the executed plugin is empty.");var p=c.markdownParsers,d=c.toHTMLRenderers,h=c.toMarkdownRenderers,m=c.markdownPlugins,v=c.wysiwygPlugins,g=c.wysiwygNodeViews,y=c.markdownCommands,w=c.wysiwygCommands,k=c.toolbarItems;return d&&(t.toHTMLRenderers=xt(t.toHTMLRenderers,d)),h&&(t.toMarkdownRenderers=xt(t.toMarkdownRenderers,h)),m&&(t.mdPlugins=t.mdPlugins.concat(m)),v&&(t.wwPlugins=t.wwPlugins.concat(v)),g&&(t.wwNodeViews=f(f({},t.wwNodeViews),g)),y&&(t.mdCommands=f(f({},t.mdCommands),y)),w&&(t.wwCommands=f(f({},t.wwCommands),w)),k&&(t.toolbarItems=t.toolbarItems.concat(k)),p&&(t.markdownParsers=f(f({},t.markdownParsers),p)),t}),{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var ip=function(){function t(t){var e=this;this.options=g({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},t),this.eventEmitter=new Ic;var n,r=ft(this.options.linkAttributes),o=op({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},i=o.toHTMLRenderers,a=o.markdownParsers,s=this.options,l=s.customHTMLRenderer,u=s.extendedAutolinks,c=s.referenceDefinition,p=s.frontMatter,d=s.customHTMLSanitizer,h={linkAttributes:r,customHTMLRenderer:f(f({},i),l),extendedAutolinks:u,referenceDefinition:c,frontMatter:p,sanitizer:d||ll};n=h.customHTMLRenderer,["htmlBlock","htmlInline"].forEach((function(t){n[t]&&Object.keys(n[t]).forEach((function(t){return sl(t)}))})),this.options.events&&v(this.options.events,(function(t,n){e.on(n,t)}));var m=this.options,y=m.el,b=m.initialValue,w=m.theme,k=y.innerHTML;"light"!==w&&y.classList.add(Le(w)),y.innerHTML="",this.toastMark=new rs("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:u,referenceDefinition:c,disallowDeepHeading:!0,frontMatter:p,customParser:a}),this.preview=new Sl(this.eventEmitter,f(f({},h),{isViewer:!0})),Yr(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),b?this.setMarkdown(b):k&&this.preview.setHTML(k),y.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return t.prototype.toggleTask=function(t){var e=t.target,n=getComputedStyle(e,":before");!e.hasAttribute("data-task-disabled")&&e.hasAttribute("data-task")&&Te(n,t.offsetX,t.offsetY)&&(Ae(e,"checked"),this.eventEmitter.emit("change",{source:"viewer",date:t}))},t.prototype.setMarkdown=function(t){var e=this.toastMark.getLineTexts(),n=[e.length,wt(e).length+1],r=this.toastMark.editMarkdown([1,1],n,t||"");this.eventEmitter.emit("updatePreview",r)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.destroy=function(){Ur(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},t.prototype.isViewer=function(){return!0},t.prototype.isMarkdownMode=function(){return!1},t.prototype.isWysiwygMode=function(){return!1},t}();function ap(t){return t instanceof r.NB}function sp(t){return ct(["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"],t)}var lp={openTag:function(t,e){var n=t,r=n.tagName,o=n.classNames,i=n.attributes,a=document.createElement(r),s={};o&&(a.className=o.join(" ")),i&&(s=f(f({},s),i)),Be(s,a),e.push(a)},closeTag:function(t,e){if(e.length>1){var n=e.pop();wt(e).appendChild(n)}},html:function(t,e){wt(e).insertAdjacentHTML("beforeend",t.content)},text:function(t,e){var n=document.createTextNode(t.content);wt(e).appendChild(n)}},up=function(){function t(t,e){var n=vl(t,e),r=f(f({},e.htmlBlock),e.htmlInline);this.customConvertorKeys=Object.keys(e).concat(Object.keys(r)),this.renderer=new cs({gfm:!0,convertors:f(f({},n),r)}),this.convertors=this.renderer.getConvertors()}return t.prototype.generateTokens=function(t){var e=function(t){var e=t.attrs,n=t.type.name,r={type:n,wysiwygNode:!0,literal:!sp(n)&&ap(t)?t.textContent:null},o={heading:{level:e.level},link:{destination:e.linkUrl,title:e.title},image:{destination:e.imageUrl},codeBlock:{info:e.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:e.order}},listItem:{type:"item",listData:{task:e.task,checked:e.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:e.align},tableBodyCell:{type:"tableCell",cellType:"body",align:e.align},customBlock:{info:e.info}}[n],i=f(f({},r),o),a=t.attrs,s=a.htmlAttrs,l=a.childrenHTML;return s?f(f({},i),{attrs:s,childrenHTML:l}):i}(t),n={entering:!0,leaf:!!ap(t)&&t.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return ap(t)?t.textContent:""},skipChildren:function(){return!1}},r=this.convertors[t.type.name],o=r(e,n,this.convertors),i=b(o)?o:[o];return(sp(t.type.name)||t.attrs.htmlInline)&&(n.entering=!1,i.push({type:"text",content:ap(t)?t.textContent:""}),i=i.concat(r(e,n,this.convertors))),i},t.prototype.toDOMNode=function(t){var e=this.generateTokens(t),n=[];return e.forEach((function(t){return lp[t.type](t,n)})),n[0]},t.prototype.getToDOMNode=function(t){return ct(this.customConvertorKeys,t)?this.toDOMNode.bind(this):null},t}(),cp=15,pp=null,dp=null;function fp(t,e){var n=e.syncScrollTop,r=e.releaseEventBlock;dp&&clearTimeout(dp),n(t),dp=setTimeout((function(){r()}),cp)}var hp=function(){function t(t,e,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var r=e.previewContent,o=e.el;this.previewRoot=r,this.previewEl=o,this.mdEditor=t,this.editorView=t.view,this.toastMark=t.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return t.prototype.addScrollSyncEvent=function(){var t=this;this.eventEmitter.listen("afterPreviewRender",(function(){t.clearTimer(),t.timer=setTimeout((function(){t.syncPreviewScrollTop(!0)}),200)})),this.eventEmitter.listen("scroll",(function(e,n){t.active&&("editor"===e&&"editor"!==t.blockedScroll?t.syncPreviewScrollTop():"preview"===e&&"preview"!==t.blockedScroll&&t.syncEditorScrollTop(n))})),this.eventEmitter.listen("toggleScrollSync",(function(e){t.active=e}))},t.prototype.getMdNodeAtPos=function(t,e){var n=t.content.findIndex(e.pos).index;return this.toastMark.findFirstNodeAtLine(n+1)},t.prototype.getScrollTopByCaretPos=function(){var t=this.mdEditor.getSelection(),e=this.toastMark.findFirstNodeAtLine(t[0][0]),n=this.previewEl.clientHeight,r=Tl(this.previewRoot,e).el,o=(xl(r,this.previewRoot)||r.offsetTop)+r.clientHeight-.5*n;return this.latestEditorScrollTop=null,r.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top<n?null:o},t.prototype.syncPreviewScrollTop=function(t){void 0===t&&(t=!1);var e=this,n=e.editorView,r=e.previewEl,o=e.previewRoot,i=n.dom.getBoundingClientRect(),a=i.left,s=i.top,l=n.posAtCoords({left:a,top:s}),u=n.state.doc,c=this.getMdNodeAtPos(u,l);if(c&&!function(t){var e=t.type;return"htmlBlock"===e||"htmlInline"===e}(c)){var p=r.scrollTop,d=n.dom,f=d.scrollTop,h=d.scrollHeight,m=d.clientHeight,v=d.children,g=h-f<=m+18,y=g?r.scrollHeight:0;if(f&&!g){if(t){var b=this.getScrollTopByCaretPos();if(!b)return;y=b}else{var w=Tl(this.previewRoot,c),k=w.el,x=wl(u,w.mdNode,v),C=x.height,T=x.rect;y=(xl(k,o)||k.offsetTop)+k.clientHeight*(s>T.top?Math.min((s-T.top)/C,1):0)}y=this.getResolvedScrollTop("editor",f,y,p),this.latestEditorScrollTop=f}y!==p&&this.run("editor",y,p)}},t.prototype.syncEditorScrollTop=function(t){var e=this,n=e.toastMark,r=e.editorView,o=e.previewRoot,i=e.previewEl,a=r.dom,s=r.state,l=i.scrollTop,u=i.clientHeight,c=i.scrollHeight-l<=u,p=a.scrollTop,d=c?a.scrollHeight:0;if(l&&t&&!c){if(t=function(t,e){for(;!t.getAttribute("data-nodeid")&&t.parentElement!==e;)t=t.parentElement;return t}(t,o),!t.getAttribute("data-nodeid"))return;var f=a.children,h=Number(t.getAttribute("data-nodeid")),m=Tl(this.previewRoot,n.findNodeById(h)),v=m.mdNode,g=m.el;d=f[Bt(v)-1].offsetTop;var y=wl(s.doc,v,f).height,b=Ml(g,o,h),w=b.nodeHeight;d+=function(t,e,n,r){return Math.min((t-e)/n,1)*r}(l,b.offsetTop,w,y),d=this.getResolvedScrollTop("preview",l,d,p),this.latestPreviewScrollTop=l}d!==p&&this.run("preview",d,p)},t.prototype.getResolvedScrollTop=function(t,e,n,r){var o="editor"===t?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===o?n:o<e?Math.max(n,r):Math.min(n,r)},t.prototype.run=function(t,e,n){var r,o=this;"editor"===t?(r=this.previewEl,this.blockedScroll="preview"):(r=this.editorView.dom,this.blockedScroll="editor"),function(t,e,n){var r=e-t,o=Date.now(),i=function(){var a,s=(Date.now()-o)/100;pp&&clearTimeout(pp),s<1?(a=t+r*Math.cos((1-s)*Math.PI/2),fp(Math.ceil(a),n),pp=setTimeout(i,1)):(fp(e,n),pp=null)};i()}(n,e,{syncScrollTop:function(t){return r.scrollTop=t},releaseEventBlock:function(){return o.blockedScroll=null}})},t.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},t}(),mp={getPopupInitialValues:function(t,e){return"link"===e.popupName?{linkText:t.getSelectedText()}:{}}};var vp=function(){function t(t){var e=this;this.initialHTML=t.el.innerHTML,t.el.innerHTML="",this.options=g({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},t);var n=this.options,r=n.customHTMLRenderer,o=n.extendedAutolinks,i=n.referenceDefinition,a=n.frontMatter,s=n.customMarkdownRenderer,l=n.useCommandShortcut,u=n.initialEditType,c=n.widgetRules,p=n.customHTMLSanitizer;this.mode=u||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=pu,this.i18n.setCode(this.options.language),this.eventEmitter=new Ic,re(c);var d=ft(this.options.linkAttributes);this.pluginInfo=op({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var h,m=this.pluginInfo,y=m.toHTMLRenderers,b=m.toMarkdownRenderers,w=m.mdPlugins,k=m.wwPlugins,x=m.wwNodeViews,C=m.mdCommands,T=m.wwCommands,E=m.markdownParsers,L={linkAttributes:d,customHTMLRenderer:xt(y,r),extendedAutolinks:o,referenceDefinition:i,frontMatter:a,sanitizer:p||ll},M=new up(d,L.customHTMLRenderer),N=function(t,e,n){var r={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach((function(o){t[o]&&Object.keys(t[o]).forEach((function(t){var i="htmlBlock"===o?"nodes":"marks";sl(t),r[i][t]=fl[o](t,e,n)}))})),r}(L.customHTMLRenderer,L.sanitizer,M);this.toastMark=new rs("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:o,referenceDefinition:i,disallowDeepHeading:!0,frontMatter:a,customParser:E}),this.mdEditor=new Br(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:l,mdPlugins:w}),this.preview=new Sl(this.eventEmitter,f(f({},L),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new Lc(this.eventEmitter,{toDOMAdaptor:M,useCommandShortcut:l,htmlSchemaMap:N,linkAttributes:d,wwPlugins:k,wwNodeViews:x}),this.convertor=new rp(this.wwEditor.getSchema(),f(f({},b),s),vl(d,L.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHTML,!1),this.commandManager=new Rc(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,(function(){return e.mode})),this.options.usageStatistics&&Q("editor","UA-129966929-1"),this.scrollSync=new hp(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(C,T),(h=this).eventEmitter.listen("query",(function(t,e){return mp[t](h,e)})),this.options.hooks&&v(this.options.hooks,(function(t,n){return e.addHook(n,t)})),this.options.events&&v(this.options.events,(function(t,n){return e.on(n,t)})),this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return t.prototype.addInitEvent=function(){var t=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",(function(){if("auto"!==t.height){var e=Math.min(parseInt(t.minHeight,10),parseInt(t.height,10)-75)+"px";t.setMinHeight(e)}})),this.eventEmitter.listen("addImageBlobHook",(function(t,e){var n=new FileReader;n.onload=function(t){var n=t.target;return e(n.result)},n.readAsDataURL(t)}))},t.prototype.addInitCommand=function(t,e){var n=this,r=function(t,e){Object.keys(e).forEach((function(r){n.addCommand(t,r,e[r])}))};this.addCommand("markdown","toggleScrollSync",(function(t){return n.eventEmitter.emit("toggleScrollSync",t.active),!0})),r("markdown",t),r("wysiwyg",e)},t.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},t.factory=function(e){return e.viewer?new ip(e):new t(e)},t.setLanguage=function(t,e){pu.setLanguage(t,e)},t.prototype.changePreviewStyle=function(t){this.mdPreviewStyle!==t&&(this.mdPreviewStyle=t,this.eventEmitter.emit("changePreviewStyle",t))},t.prototype.exec=function(t,e){this.commandManager.exec(t,e)},t.prototype.addCommand=function(t,e,n){var r=this;this.commandManager.addCommand(t,e,(function(e){void 0===e&&(e={});var o=("markdown"===t?r.mdEditor:r.wwEditor).view;n(e,o.state,o.dispatch,o)}))},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.removeHook=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.focus=function(){this.getCurrentModeEditor().focus()},t.prototype.blur=function(){this.getCurrentModeEditor().blur()},t.prototype.moveCursorToEnd=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToEnd(t)},t.prototype.moveCursorToStart=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToStart(t)},t.prototype.setMarkdown=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=!0),this.mdEditor.setMarkdown(t,e),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r,e)}},t.prototype.setHTML=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=document.createElement("div");n.innerHTML=function(t){var e=t.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),n=new RegExp(be,"ig"),r=e.match(n);return null==r||r.forEach((function(t,n){if(ke.test(t)){var o=Ce;if(n){var i=r[n-1].match(ye);if(i&&!/br/i.test(i[1])){var a=i[1];o="</"+a+"><"+a+">"}}e=e.replace(ke,o)}})),e}(t);var o=r.aw.fromSchema(this.wwEditor.schema).parse(n);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(o),e):this.wwEditor.setModel(o,e)},t.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},t.prototype.getHTML=function(){var t=this;this.eventEmitter.holdEventInvoke((function(){if(t.isMarkdownMode()){var e=t.toastMark.getRootNode(),n=t.convertor.toWysiwygModel(e);t.wwEditor.setModel(n)}}));var e=Pe(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var n=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return e.replace(n,"")}return e},t.prototype.insertText=function(t){this.getCurrentModeEditor().replaceSelection(t)},t.prototype.setSelection=function(t,e){this.getCurrentModeEditor().setSelection(t,e)},t.prototype.replaceSelection=function(t,e,n){this.getCurrentModeEditor().replaceSelection(t,e,n)},t.prototype.deleteSelection=function(t,e){this.getCurrentModeEditor().deleteSelection(t,e)},t.prototype.getSelectedText=function(t,e){return this.getCurrentModeEditor().getSelectedText(t,e)},t.prototype.getRangeInfoOfNode=function(t){return this.getCurrentModeEditor().getRangeInfoOfNode(t)},t.prototype.addWidget=function(t,e,n){this.getCurrentModeEditor().addWidget(t,e,n)},t.prototype.replaceWithWidget=function(t,e,n){this.getCurrentModeEditor().replaceWithWidget(t,e,n)},t.prototype.setHeight=function(t){var e=this.options.el;y(t)&&("auto"===t?q(e,"auto-height"):$(e,"auto-height"),this.setMinHeight(this.getMinHeight())),M(e,{height:t}),this.height=t},t.prototype.getHeight=function(){return this.height},t.prototype.setMinHeight=function(t){if(t!==this.minHeight){var e=this.height||this.options.height;"auto"!==e&&this.options.el.querySelector("."+Le("main"))&&(t=Math.min(parseInt(t,10),parseInt(e,10)-75)+"px");var n=parseInt(t,10);this.minHeight=t,this.wwEditor.setMinHeight(n),this.mdEditor.setMinHeight(n),this.preview.setMinHeight(n)}},t.prototype.getMinHeight=function(){return this.minHeight},t.prototype.isMarkdownMode=function(){return"markdown"===this.mode},t.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode},t.prototype.isViewer=function(){return!1},t.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},t.prototype.changeMode=function(t,e){if(this.mode!==t){if(this.mode=t,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r)}else{r=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),!e)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",t),!e){var o=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&W(o)?this.wwEditor.setSelection(o):Array.isArray(o)&&this.mdEditor.setSelection(o)}}},t.prototype.destroy=function(){var t=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach((function(e,n){return t.off(n)}))},t.prototype.hide=function(){this.eventEmitter.emit("hide")},t.prototype.show=function(){this.eventEmitter.emit("show")},t.prototype.setScrollTop=function(t){this.getCurrentModeEditor().setScrollTop(t)},t.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},t.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},t.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},t.prototype.setPlaceholder=function(t){this.placeholder=t,this.mdEditor.setPlaceholder(t),this.wwEditor.setPlaceholder(t)},t.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},t.prototype.convertPosToMatchEditorMode=function(t,e,n){var r,o;void 0===e&&(e=t),void 0===n&&(n=this.mode);var i=this.mdEditor.view.state.doc,a=Array.isArray(t),s=Array.isArray(e),l=t,u=e;if(a!==s)throw new Error("Types of arguments must be same");return"markdown"!==n||a||s?"wysiwyg"===n&&a&&s&&(l=(o=nn(i,t,e))[0],u=o[1]):(l=(r=tn(i,t,e))[0],u=r[1]),[l,u]},t}();var gp=function(t){return"boolean"==typeof t||t instanceof Boolean},yp=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.walk=function(){var t=this.entering,e=this.current;return e?(t?e.firstChild?(this.current=e.firstChild,this.entering=!0):this.entering=!1:e===this.root?this.current=null:e.next?(this.current=e.next,this.entering=!0):(this.current=e.parent,this.entering=!1),{vnode:e,entering:t}):null},t}(),bp=function(){function t(t,e,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=t,this.props=e,this.children=n,this.props.children=n,e.ref&&(this.ref=e.ref,delete e.ref),e.key&&(this.key=e.key,delete e.key)}return t.prototype.walker=function(){return new yp(this)},t.removalNodes=[],t}();function wp(t,e){var n=t;gp(t)||null==t?n=null:(y(t)||W(t))&&(n=function(t){return new bp("TEXT_NODE",{nodeValue:t},[])}(String(t))),n&&e.push(n)}var kp=function(t){for(var e,n,r=arguments,o=1,i="",a="",s=[0],l=function(t){1===o&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t?r[t]:i):3===o&&(t||i)?(s[1]=t?r[t]:i,o=2):2===o&&"..."===i&&t?s[2]=Et(s[2]||{},r[t]):2===o&&i&&!t?(s[2]=s[2]||{})[i]=!0:o>=5&&(5===o?((s[2]=s[2]||{})[n]=t?i?i+r[t]:r[t]:i,o=6):(t||i)&&(s[2][n]+=t?i+r[t]:i)),i=""},u=0;u<t.length;u++){u&&(1===o&&l(),l(u));for(let r=0;r<t[u].length;r++)e=t[u][r],1===o?"<"===e?(l(),s=[s,"",null],o=3):i+=e:4===o?"--"===i&&">"===e?(o=1,i=""):i=e+i[0]:a?e===a?a="":i+=e:'"'===e||"'"===e?a=e:">"===e?(l(),o=1):o&&("="===e?(o=5,n=i,i=""):"/"===e&&(o<5||">"===t[u][r+1])?(l(),3===o&&(s=s[0]),o=s,(s=s[0]).push(this.apply(null,o.slice(1))),o=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),o=2):i+=e),3===o&&"!--"===i&&(o=4,s=s[0])}return l(),s.length>2?s.slice(1):s[1]}.bind((function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[];return n.forEach((function(t){Array.isArray(t)?t.forEach((function(t){wp(t,o)})):wp(t,o)})),new bp(t,e||{},o)}));var xp=function(t){return t===Object(t)};function Cp(t){var e;return"TEXT_NODE"===t.type?e=document.createTextNode(t.props.nodeValue):Mp(e=document.createElement(t.type),{},t.props),e}function Tp(t,e){t.node?e.removeChild(t.node):Tp(t.firstChild,e)}function Ep(t,e,n){Object.keys(e).forEach((function(r){if(/^on/.test(r)){if(!n[r]||e[r]!==n[r]){var o=r.slice(2).toLowerCase();t.removeEventListener(o,e[r])}}else"children"===r||n[r]||function(t){return(null==t?void 0:t.nodeType)===Node.TEXT_NODE}(t)||t.removeAttribute(r)})),Mp(t,e,n,(function(t){return!bt(e[t],n[t])}))}var Lp=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Mp(t,e,n,r){Object.keys(n).forEach((function(o){if(!r||r(o))if(/^on/.test(o)){var i=o.slice(2).toLowerCase();t.addEventListener(i,n[o])}else"nodeValue"===o?t[o]=n[o]:"style"===o&&xp(n[o])?function(t,e,n){e&&Object.keys(e).forEach((function(e){t.style[e]=""}));Object.keys(n).forEach((function(e){var r=n[e];t.style[e]=W(r)&&!Lp.test(e)?r+"px":r}))}(t,e[o],n[o]):"children"!==o&&(!1===n[o]?t.removeAttribute(o):t.setAttribute(o,n[o]))}))}function Np(t){if(bp.removalNodes.forEach((function(t){return Ap(t)})),t)for(var e=void 0,n=t.walker();e=n.walk();)if(t=e.vnode,e.entering)Ap(t);else if(Ge(t.type)){var r=t.component;if(!t.old&&r.mounted&&r.mounted(),t.old&&r.updated){var o=r.prevProps||{};r.updated(o)}}}function Sp(t){for(var e=t.parent;!e.node;)e=e.parent;return e.node}function Ap(t){if(t&&t.parent){if(t.node){var e=Sp(t);"A"===t.effect?e.appendChild(t.node):"U"===t.effect&&Ep(t.node,t.old.props,t.props)}if("D"===t.effect)for(var n=void 0,r=t.walker();n=r.walk();)if(t=n.vnode,!n.entering)if(Ge(t.type)){var o=t.component;o.beforeDestroy&&o.beforeDestroy()}else{Tp(t,e=Sp(t))}t.ref&&(t.component?t.ref(t.component):t.node&&t.ref(t.node))}}function Op(t,e){var n=e.props,r=e.component;return r?(r.prevProps=r.props,r.props=e.props,r):new t(n)}function Dp(t){for(var e=t;t&&!t.skip;){if(Ge(t.type)){var n=Op(t.type,t);n.vnode=t,t.component=n,t.props.children=t.children=[n.render()],Ip(t)}else t.node||(t.node=Cp(t)),Ip(t);if(t.firstChild)t=t.firstChild;else{for(;t&&t.parent&&!t.next&&(t=t.parent)!==e;);t=t.next}}}function Ip(t){var e=t.children,n=t.old?t.old.firstChild:null,r=null;e.forEach((function(e,o){var i=function(t,e){return t&&e&&e.type===t.type&&(!e.key||e.key===t.key)}(n,e);i&&(e.old=n,e.parent=t,e.node=n.node,e.component=n.component,e.effect="U"),e&&!i&&(e.old=null,e.parent=t,e.node=null,e.effect="A"),n&&!i&&(bp.removalNodes.push(n),n.effect="D"),n&&(n=n.next),0===o?t.firstChild=e:e&&(r.next=e),r=e}));var o=wt(e);if(!e.length)for(;n;)bp.removalNodes.push(n),n.effect="D",n=n.next;for(;n&&o;)n&&o.old!==n&&(bp.removalNodes.push(n),n.effect="D",n=n.next)}function Rp(t,e){var n=new bp(t.tagName.toLowerCase(),{},[e]);return n.node=t,bp.removalNodes=[],Dp(n),Np(n),function(){return function(t){t.effect="D",bp.removalNodes=[t],Np(),bp.removalNodes=[]}(n.firstChild)}}var Bp,Pp=function(){function t(t){this.props=t,this.state={},this.refs={}}return t.prototype.setState=function(t){var e=f(f({},this.state),t);bt(this.state,e)||(this.state=e,function(t){var e=t.vnode;e.effect="U",e.old=e,e.next&&(e.next.skip=!0),bp.removalNodes=[],Dp(e),Np(e),e.next&&(e.next.skip=!1)}(this))},t}(),Hp=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hide:!1},n}return d(e,t),e.prototype.show=function(){this.setState({hide:!1})},e.prototype.hide=function(){this.setState({hide:!0})},e.prototype.render=function(){var t=this.props,e=t.editorType,n=t.eventEmitter;return kp(Bp||(Bp=m(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),Le("mode-switch"),this.state.hide?"none":"block","markdown"===e?" active":"",(function(){n.emit("needChangeMode","markdown")}),pu.get("Markdown"),"wysiwyg"===e?" active":"",(function(){n.emit("needChangeMode","wysiwyg")}),pu.get("WYSIWYG"))},e}(Pp);var Fp=function(t,e){var n,r;return e=e||0,function(){r=Array.prototype.slice.call(arguments),window.clearTimeout(n),n=window.setTimeout((function(){t.apply(null,r)}),e)}};var jp=function(t,e){var n,r,o,i,a=!0,s=function(e){t.apply(null,e),n=null};function l(){if(i=Array.prototype.slice.call(arguments),a)return s(i),void(a=!1);o=Number(new Date),n=n||o,r(i),o-n>=e&&s(i)}return r=Fp(s,e=e||0),l.reset=function(){a=!0,n=null},l},qp=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),_p="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,zp=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Up="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(zp):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Vp=["top","right","bottom","left","width","height","size","weight"],$p="undefined"!=typeof MutationObserver,Wp=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function i(){n&&(n=!1,t()),r&&s()}function a(){Up(i)}function s(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,e);o=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){_p&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),$p?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){_p&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Vp.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Gp=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},Yp=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||zp},Xp=ed(0,0,0,0);function Kp(t){return parseFloat(t)||0}function Zp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Kp(t["border-"+n+"-width"])}),0)}function Qp(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Xp;var r=Yp(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=t["padding-"+o];e[o]=Kp(i)}return e}(r),i=o.left+o.right,a=o.top+o.bottom,s=Kp(r.width),l=Kp(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==e&&(s-=Zp(r,"left","right")+i),Math.round(l+a)!==n&&(l-=Zp(r,"top","bottom")+a)),!function(t){return t===Yp(t).document.documentElement}(t)){var u=Math.round(s+i)-e,c=Math.round(l+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return ed(o.left,o.top,s,l)}var Jp="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Yp(t).SVGGraphicsElement}:function(t){return t instanceof Yp(t).SVGElement&&"function"==typeof t.getBBox};function td(t){return _p?Jp(t)?function(t){var e=t.getBBox();return ed(0,0,e.width,e.height)}(t):Qp(t):Xp}function ed(t,e,n,r){return{x:t,y:e,width:n,height:r}}var nd=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ed(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=td(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),rd=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return Gp(a,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),a}(e);Gp(this,{target:t,contentRect:n})},od=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new qp,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Yp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new nd(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Yp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new rd(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),id="undefined"!=typeof WeakMap?new WeakMap:new qp,ad=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Wp.getInstance(),r=new od(e,n,this);id.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){ad.prototype[t]=function(){var e;return(e=id.get(this))[t].apply(e,arguments)}}));var sd,ld,ud,cd,pd,dd,fd,hd,md,vd,gd,yd,bd,wd,kd,xd,Cd=void 0!==zp.ResizeObserver?zp.ResizeObserver:ad,Td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.execCommand=function(t){var e=Ie(t.target,"li");this.props.execCommand("heading",{level:Number(e.getAttribute("data-level"))})},e.prototype.render=function(){var t=this;return kp(ld||(ld=m(["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "],["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "])),(function(e){return t.execCommand(e)}),pu.get("Headings"),[1,2,3,4,5,6].map((function(t){return kp(sd||(sd=m(['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "])),t,"h"+t,pu.get("Heading"),t)})),pu.get("Paragraph"))},e}(Pp),Ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.toggleTab=function(t,e){this.props.onClick(t,e)},e.prototype.render=function(){var t=this;return kp(cd||(cd=m(['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "],['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "])),Le("tabs"),this.props.tabs.map((function(e){var n=e.name,r=e.text,o=t.props.activeTab===n;return kp(ud||(ud=m(['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "])),o?" active":"",(function(e){return t.toggleTab(e,n)}),pu.get(r),o?"true":"false",o?"0":"-1",pu.get(r))})))},e}(Pp),Ld=function(t){function e(e){var n=t.call(this,e)||this;return n.initialize=function(t){void 0===t&&(t="file");var e=n.refs.url;e.value="",n.refs.altText.value="",n.refs.file.value="",$(e,"wrong"),n.setState({activeTab:t,file:null,fileNameElClassName:""})},n.execCommand=function(){"file"===n.state.activeTab?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(t,e){e!==n.state.activeTab&&n.initialize(e)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(t){var e=t.target.files;(null==e?void 0:e.length)&&n.setState({file:e[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return d(e,t),e.prototype.emitAddImageBlob=function(){var t=this,e=this.refs.file.files,n=this.refs.altText,r=" wrong";if(null==e?void 0:e.length){r="";var o=e.item(0);this.props.eventEmitter.emit("addImageBlobHook",o,(function(e,r){return t.props.execCommand("addImage",{imageUrl:e,altText:r||n.value})}),"ui")}this.setState({fileNameElClassName:r})},e.prototype.emitAddImage=function(){var t=this.refs.url,e=this.refs.altText,n=t.value,r=e.value||"image";$(t,"wrong"),n.length?n&&this.props.execCommand("addImage",{imageUrl:n,altText:r}):q(t,"wrong")},e.prototype.preventSelectStart=function(t){t.preventDefault()},e.prototype.updated=function(){this.props.show||this.initialize()},e.prototype.render=function(){var t=this,e=this.state,n=e.activeTab,r=e.file,o=e.fileNameElClassName;return kp(pd||(pd=m(['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),pu.get("Insert image"),Ed,this.tabs,n,this.toggleTab,"url"===n?"block":"none",pu.get("Image URL"),(function(e){return t.refs.url=e}),"file"===n?"block":"none",pu.get("Select image file"),Le("file-name"),r?" has-file":o,this.showFileSelectBox,this.preventSelectStart,r?r.name:pu.get("No file"),Le("file-select-button"),this.showFileSelectBox,pu.get("Choose a file"),this.changeFile,(function(e){return t.refs.file=e}),pu.get("Description"),(function(e){return t.refs.altText=e}),Le("button-container"),Le("close-button"),this.props.hidePopup,pu.get("Cancel"),Le("ok-button"),this.execCommand,pu.get("OK"))},e}(Pp),Md=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.execCommand=function(){var t=e.refs.url,n=e.refs.text;($(t,"wrong"),$(n,"wrong"),t.value.length<1)?q(t,"wrong"):A(e.props.initialValues.linkUrl)&&n.value.length<1?q(n,"wrong"):e.props.execCommand("addLink",{linkUrl:t.value,linkText:n.value})},e}return d(e,t),e.prototype.initialize=function(){var t=this.props.initialValues,e=t.linkUrl,n=t.linkText,r=this.refs.url,o=this.refs.text;$(r,"wrong"),$(o,"wrong","disabled"),o.removeAttribute("disabled"),e&&(q(o,"disabled"),o.setAttribute("disabled","disabled")),r.value=e||"",o.value=n||""},e.prototype.mounted=function(){this.initialize()},e.prototype.updated=function(t){!t.show&&this.props.show&&this.initialize()},e.prototype.render=function(){var t=this;return kp(dd||(dd=m(['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),pu.get("Insert link"),pu.get("URL"),(function(e){return t.refs.url=e}),pu.get("Link text"),(function(e){return t.refs.text=e}),Le("button-container"),Le("close-button"),this.props.hidePopup,pu.get("Cancel"),Le("ok-button"),this.execCommand,pu.get("OK"))},e}(Pp),Nd=function(t){function e(e){var n=t.call(this,e)||this;return n.extendSelectionRange=function(t){var e=t.pageX,r=t.pageY,o=e-n.offsetRect.left,i=r-n.offsetRect.top,a=n.getSelectionRangeByOffset(o,i);n.setState(f({},a))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return d(e,t),e.prototype.getDescription=function(){return-1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},e.prototype.getBoundByRange=function(t,e){return{width:20*(t+1),height:20*(e+1)}},e.prototype.getRangeByOffset=function(t,e){return{colIdx:Math.floor(t/20),rowIdx:Math.floor(e/20)}},e.prototype.getTableRange=function(){var t=this.state,e=t.colIdx,n=t.rowIdx,r=Math.max(e,5),o=Math.max(n,5);return e>=5&&r<9&&(r+=1),n>=5&&o<14&&(o+=1),{colIdx:r+1,rowIdx:o+1}},e.prototype.getSelectionAreaBound=function(){var t=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),e=t.width,n=t.height;return e||n?{width:e-1,height:n-1,display:"block"}:{display:"none"}},e.prototype.getSelectionRangeByOffset=function(t,e){var n=this.getRangeByOffset(t,e);return n.rowIdx=Math.min(Math.max(n.rowIdx,1),14),n.colIdx=Math.min(Math.max(n.colIdx,1),9),n},e.prototype.updated=function(){if(this.props.show){if(-1===this.state.colIdx&&-1===this.state.rowIdx){var t=this.refs.tableEl.getBoundingClientRect(),e=t.left,n=t.top;this.offsetRect={left:window.pageXOffset+e,top:window.pageYOffset+n}}}else this.setState({colIdx:-1,rowIdx:-1})},e.prototype.createTableArea=function(t){for(var e=t.colIdx,n=t.rowIdx,r=[],o=0;o<n;o+=1){for(var i=[],a=0;a<e;a+=1){var s=Le("table-cell")+(o>0?"":" header");i.push(kp(fd||(fd=m(['<div class="','"></div>'],['<div class="','"></div>'])),s))}r.push(kp(hd||(hd=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),Le("table-row"),i))}return kp(md||(md=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),Le("table"),r)},e.prototype.render=function(){var t=this,e=this.getTableRange(),n=this.getSelectionAreaBound();return kp(vd||(vd=m(['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),pu.get("Insert table"),Le("table-selection"),(function(e){return t.refs.tableEl=e}),this.extendSelectionRange,this.execCommand,this.createTableArea(e),Le("table-selection-layer"),n,Le("table-description"),this.getDescription())},e}(Pp),Sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},e.prototype.updated=function(t){this.refs.el.replaceChild(this.props.body,t.body)},e.prototype.render=function(){var t=this;return kp(gd||(gd=m(["<div ref=","></div>"],["<div ref=","></div>"])),(function(e){return t.refs.el=e}))},e}(Pp);function Ad(t){return y(t)?function(t){var e;switch(t){case"heading":e={name:"heading",className:"heading",tooltip:pu.get("Headings"),state:"heading"};break;case"bold":e={name:"bold",className:"bold",command:"bold",tooltip:pu.get("Bold"),state:"strong"};break;case"italic":e={name:"italic",className:"italic",command:"italic",tooltip:pu.get("Italic"),state:"emph"};break;case"strike":e={name:"strike",className:"strike",command:"strike",tooltip:pu.get("Strike"),state:"strike"};break;case"hr":e={name:"hr",className:"hrline",command:"hr",tooltip:pu.get("Line"),state:"thematicBreak"};break;case"quote":e={name:"quote",className:"quote",command:"blockQuote",tooltip:pu.get("Blockquote"),state:"blockQuote"};break;case"ul":e={name:"ul",className:"bullet-list",command:"bulletList",tooltip:pu.get("Unordered list"),state:"bulletList"};break;case"ol":e={name:"ol",className:"ordered-list",command:"orderedList",tooltip:pu.get("Ordered list"),state:"orderedList"};break;case"task":e={name:"task",className:"task-list",command:"taskList",tooltip:pu.get("Task"),state:"taskList"};break;case"table":e={name:"table",className:"table",tooltip:pu.get("Insert table"),state:"table"};break;case"image":e={name:"image",className:"image",tooltip:pu.get("Insert image")};break;case"link":e={name:"link",className:"link",tooltip:pu.get("Insert link")};break;case"code":e={name:"code",className:"code",command:"code",tooltip:pu.get("Code"),state:"code"};break;case"codeblock":e={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:pu.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":e={name:"indent",className:"indent",command:"indent",tooltip:pu.get("Indent"),state:"indent"};break;case"outdent":e={name:"outdent",className:"outdent",command:"outdent",tooltip:pu.get("Outdent"),state:"outdent"};break;case"scrollSync":e=function(){var t=document.createElement("label"),e=document.createElement("input"),n=document.createElement("span");t.className="scroll-sync active",e.type="checkbox",e.checked=!0,n.className="switch";var r=function(n){return e.addEventListener("change",(function(e){var r=e.target.checked;r?q(t,"active"):$(t,"active"),n("toggleScrollSync",{active:r})}))};return t.appendChild(e),t.appendChild(n),{name:"scrollSync",el:t,onMounted:r}}();break;case"more":e={name:"more",className:"more",tooltip:pu.get("More")}}"scrollSync"!==e.name&&(e.className+=" "+Le("toolbar-icons"));return e}(t):t}function Od(t,e){var n=e.el,r=e.pos,o=e.popup,i=e.initialValues;switch(t){case"heading":return{render:function(t){return kp(yd||(yd=m(["<"," ..."," />"],["<"," ..."," />"])),Td,t)},className:Le("popup-add-heading"),fromEl:n,pos:r};case"link":return{render:function(t){return kp(bd||(bd=m(["<"," ..."," />"],["<"," ..."," />"])),Md,t)},className:Le("popup-add-link"),fromEl:n,pos:r,initialValues:i};case"image":return{render:function(t){return kp(wd||(wd=m(["<"," ..."," />"],["<"," ..."," />"])),Ld,t)},className:Le("popup-add-image"),fromEl:n,pos:r};case"table":return{render:function(t){return kp(kd||(kd=m(["<"," ..."," />"],["<"," ..."," />"])),Nd,t)},className:Le("popup-add-table"),fromEl:n,pos:r};case"customPopupBody":return o?f({render:function(t){return kp(xd||(xd=m(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),Sd,t,o.body)},fromEl:n,pos:r},o):null;default:return null}}function Dd(t){t.hidden=t.length===t.filter((function(t){return t.hidden})).length}function Id(t,e){return t.reduce((function(t,n){t.push(n.map((function(t){return function(t){return t.hidden="scrollSync"===t.name&&e,t}(Ad(t))})));var r=t[(t.length||1)-1];return r&&Dd(r),t}),[])}var Rd,Bd,Pd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){Ie(t.target,"."+Le("popup"))||Ie(t.target,e.props.info.fromEl)||e.props.hidePopup()},e}return d(e,t),e.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},e.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},e.prototype.updated=function(t){var e=this.props,n=e.show,r=e.info;if(n&&r.pos&&t.show!==n){var o=f({},r.pos),i=this.refs.el.offsetWidth,a=Ie(this.refs.el,"."+Le("toolbar")).offsetWidth;o.left+i>=a&&(o.left=a-i-20),bt(this.state.popupPos,o)||this.setState({popupPos:o})}},e.prototype.render=function(){var t=this,e=this.props,n=e.info,r=e.show,o=e.hidePopup,i=e.eventEmitter,a=e.execCommand,s=n||{},l=s.className,u=void 0===l?"":l,c=s.style,p=s.render,d=s.initialValues,h=void 0===d?{}:d,v=f(f({display:r?"block":"none"},c),this.state.popupPos);return kp(Rd||(Rd=m(['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),Le("popup"),u,v,(function(e){return t.refs.el=e}),Le("popup-body"),p&&p({eventEmitter:i,show:r,hidePopup:o,execCommand:a,initialValues:h}))},e}(Pp);function Hd(t){return function(e){function n(t){var n=e.call(this,t)||this;return n.showTooltip=function(t){var e=n.props.item.tooltip;if(!n.props.disabled&&e){var r=n.getBound(t),o=r.left+6+"px",i=r.top+6+"px";M(n.props.tooltipRef.current,{display:"block",left:o,top:i}),n.props.tooltipRef.current.querySelector(".text").textContent=e}},n.hideTooltip=function(){M(n.props.tooltipRef.current,"display","none")},n.state={active:!1,disabled:t.disabled},n.addEvent(),n}return d(n,e),n.prototype.addEvent=function(){var t=this,e=this.props,n=e.item,r=e.eventEmitter;n.state&&r.listen("changeToolbarState",(function(e){var r,o=null!==(r=e.toolbarState[n.state])&&void 0!==r?r:{},i=o.active,a=o.disabled;t.setState({active:!!i,disabled:null!=a?a:t.props.disabled})}))},n.prototype.getBound=function(t){var e=Re(t,Ie(t,"."+Le("toolbar"))),n=e.offsetLeft,r=e.offsetTop;return{left:n,top:t.offsetHeight+r}},n.prototype.render=function(){return kp(Bd||(Bd=m(["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "],["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n          disabled=","\n        />\n      "])),t,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},n}(Pp)}var Fd,jd,qd,_d,zd,Ud,Vd,$d,Wd,Gd,Yd,Xd,Kd,Zd,Qd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.execCommand=function(){var t=e.props,n=t.item,r=t.execCommand,o=t.setPopupInfo,i=t.getBound,a=t.eventEmitter,s=n.command,l=n.name,u=n.popup;if(s)r(s);else{var c=u?"customPopupBody":l,p=a.emit("query","getPopupInitialValues",{popupName:c})[0],d=Od(c,{el:e.refs.el,pos:i(e.refs.el),popup:u,initialValues:p});d&&o(d)}},e}return d(e,t),e.prototype.mounted=function(){this.setItemWidth()},e.prototype.updated=function(t){t.item.name!==this.props.item.name&&this.setItemWidth()},e.prototype.setItemWidth=function(){var t=this.props,e=t.setItemWidth,n=t.item;e&&e(n.name,De(this.refs.el)+(n.hidden?80:0))},e.prototype.render=function(){var t=this,e=this.props,n=e.hideTooltip,r=e.disabled,o=e.item,i=e.active,a=f({display:o.hidden?"none":null},o.style),s=(o.className||"")+(i?" active":"");return kp(Fd||(Fd=m(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "])),(function(e){return t.refs.el=e}),a,s,this.execCommand,this.showTooltip,n,!!r,o.text||o.tooltip||"",o.text||"")},e}(Pp),Jd=Hd(Qd),tf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.showPopup=function(){var t=Od("customPopupBody",{el:e.refs.el,pos:e.props.getBound(e.refs.el),popup:e.props.item.popup});t&&e.props.setPopupInfo(t)},e}return d(e,t),e.prototype.mounted=function(){var t=this.props,e=t.setItemWidth,n=t.item;this.refs.el.appendChild(n.el),e&&e(n.name,De(this.refs.el)),n.onMounted&&n.onMounted(this.props.execCommand)},e.prototype.updated=function(t){var e,n=this.props,r=n.item,o=n.active,i=n.disabled;t.active===o&&t.disabled===i||null===(e=r.onUpdated)||void 0===e||e.call(r,{active:o,disabled:i})},e.prototype.render=function(){var t=this,e=this.props,n=e.disabled,r={display:e.item.hidden?"none":"inline-block"},o=function(t){return n?null:t};return kp(jd||(jd=m(["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),(function(e){return t.refs.el=e}),r,Le("toolbar-item-wrapper"),o(this.showPopup),o(this.showTooltip),o(this.props.hideTooltip))},e}(Pp),ef=Hd(tf),nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.group,r=e.hiddenDivider,o=n.hidden?{display:"none"}:null,i=r?{display:"none"}:null;return kp(_d||(_d=m(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),Le("toolbar-group"),o,n.map((function(e){var n=e.el?ef:Jd;return kp(qd||(qd=m(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),n,e.name,t.props,e)})),Le("toolbar-divider"),i)},e}(Pp),rf=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){var e=t.target;Ie(e,"."+Le("dropdown-toolbar"))||Ie(e,".more")||n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return d(e,t),e.prototype.getBound=function(){var t=this.props.getBound(this.refs.el);return t.top+=4,f(f({},t),{left:null,right:10})},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.render=function(){var t=this,e=this.state,n=e.showDropdown,r=e.dropdownPos,o=this.props,i=o.disabled,a=o.item,s=o.items,l=o.hideTooltip,u=s.filter((function(t){return!t.hidden})),c=u.length?null:{display:"none"},p=n?null:{display:"none"};return kp(Ud||(Ud=m(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),Le("toolbar-group"),c,(function(e){return t.refs.el=e}),a.className,(function(){return t.setState({showDropdown:!0})}),this.showTooltip,l,i,Le("dropdown-toolbar"),f(f({},p),r),(function(e){return t.refs.dropdownEl=e}),u.length?u.map((function(e,n){var r;return kp(zd||(zd=m(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),nf,e,n===u.length-1||(null===(r=u[n+1])||void 0===r?void 0:r.hidden),t.props)})):null)},e}(Pp),of=Hd(rf),af=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleTab=function(t,e){var r=n.props.eventEmitter;if(n.state.activeTab!==e){var o="write"===e?"changePreviewTabWrite":"changePreviewTabPreview";r.emit(o),n.setState({activeTab:e})}},n.setItemWidth=function(t,e){n.itemWidthMap[t]=e},n.setPopupInfo=function(t){n.setState({showPopup:!0,popupInfo:t})},n.openPopup=function(t,e){void 0===e&&(e={});var r=n.refs.el.querySelector("."+Le("toolbar-group")+" ."+t);if(r){var o=Re(r,Ie(r,"."+Le("toolbar"))),i=o.offsetLeft,a=o.offsetTop,s=Od(t,{el:r,pos:{left:i,top:r.offsetHeight+a},initialValues:e});s&&n.setPopupInfo(s)}},n.hidePopup=function(){n.state.showPopup&&n.setState({showPopup:!1})},n.execCommand=function(t,e){n.props.eventEmitter.emit("command",t,e),n.hidePopup()},n.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],n.itemWidthMap={},n.initialItems=Id(e.toolbarItems||[],n.hiddenScrollSync()),n.state={items:n.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},n.tooltipRef={current:null},n.resizeObserver=new Cd((function(){return n.handleResize()})),n.addEvent(),n}return d(e,t),e.prototype.insertToolbarItem=function(t,e){var n=t.groupIndex,r=t.itemIndex,o=this.initialItems[n];e=Ad(e),o?o.splice(r,0,e):this.initialItems.push([e]),this.setState(this.classifyToolbarItems())},e.prototype.removeToolbarItem=function(t){var e=this;w(this.initialItems,(function(n){var r=!1;return w(n,(function(o,i){return o.name!==t||(r=!0,n.splice(i,1),e.setState(e.classifyToolbarItems()),!1)})),!r}))},e.prototype.addEvent=function(){var t=this,e=this.props.eventEmitter;this.handleResize=jp((function(){t.setState({items:t.initialItems,dropdownItems:[]}),t.setState(t.classifyToolbarItems())}),200),e.listen("openPopup",this.openPopup)},e.prototype.appendTooltipToRoot=function(){var t='<div class="'+Le("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=Oe(t,this.refs.el)},e.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle},e.prototype.movePrevItemToDropdownToolbar=function(t,e,n,r){var o=function(t){var e=t.pop();e&&r.push(e)};if(t>1)o(n);else{var i=wt(e);i&&o(i)}},e.prototype.classifyToolbarItems=function(){var t=this,e=0,n=this.refs.el.clientWidth,r=this.refs.el.querySelector("."+Le("toolbar-divider")),o=r?De(r):0,i=[],a=[],s=!1;return this.initialItems.forEach((function(r,l){var u=[],c=[];r.forEach((function(r,o){r.hidden||((e+=t.itemWidthMap[r.name])>n-50?(s||(t.movePrevItemToDropdownToolbar(o,i,u,c),s=!0),c.push(r)):u.push(r))})),u.length&&(Dd(u),i.push(u)),c.length&&(Dd(c),a.push(c)),l<t.state.items.length-1&&(e+=o)})),{items:i,dropdownItems:a}},e.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite",!0),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},e.prototype.updated=function(t){var e,n,r=this.props,o=r.editorType,i=r.previewStyle,a=r.eventEmitter,s=i!==t.previewStyle,l=o!==t.editorType;if(s||l){e=this.initialItems,n=this.hiddenScrollSync(),e.forEach((function(t){t.forEach((function(t){return t.hidden="scrollSync"===t.name&&n})),Dd(t)}));var u=this.classifyToolbarItems();(s||"tab"===i&&"markdown"===o)&&(a.emit("changePreviewTabWrite"),u.activeTab="write"),this.setState(u)}},e.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),Se(this.tooltipRef.current)},e.prototype.render=function(){var t=this,e=this.props,n=e.previewStyle,r=e.eventEmitter,o=e.editorType,i=this.state,a=i.popupInfo,s=i.showPopup,l=i.activeTab,u=i.items,c=i.dropdownItems,p={eventEmitter:r,tooltipRef:this.tooltipRef,disabled:"markdown"===o&&"tab"===n&&"preview"===l,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},d="tab"===n?{borderTopLeftRadius:0}:null;return kp($d||($d=m(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),Le("toolbar"),Le("md-tab-container"),"wysiwyg"===o||"vertical"===n?"none":"block",Ed,this.tabs,l,this.toggleTab,Le("defaultUI-toolbar"),(function(e){return t.refs.el=e}),d,u.map((function(e,n){var r;return kp(Vd||(Vd=m(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),nf,e,n===u.length-1||(null===(r=u[n+1])||void 0===r?void 0:r.hidden),t.setItemWidth,p)})),of,Ad("more"),c,p,Pd,a,s,r,this.hidePopup,this.execCommand)},e}(Pp),sf=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){Ie(t.target,"."+Le("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return d(e,t),e.prototype.addEvent=function(){var t=this;this.props.eventEmitter.listen("contextmenu",(function(e){var n=e.pos,r=e.menuGroups;t.setState({pos:n,menuGroups:r})}))},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.getMenuGroupElements=function(){var t=this,e=this.state,n=e.pos,r=e.menuGroups;return n?r.reduce((function(e,n){var r=[];return n.forEach((function(e){var n=e.label,o=e.className,i=void 0!==o&&o,a=e.disabled,s=e.onClick;r.push(kp(Wd||(Wd=m(["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "])),(function(){a||(s(),t.setState({pos:null}))}),a?" disabled":"",i,n))})),e.push(kp(Gd||(Gd=m(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),r)),e}),[]):[]},e.prototype.render=function(){var t=f({display:this.state.pos?"block":"none"},this.state.pos);return kp(Yd||(Yd=m(['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"],['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"])),Le("context-menu"),t,this.getMenuGroupElements())},e}(Pp),lf=function(t){function e(e){var n=t.call(this,e)||this;n.changeMode=function(t){t!==n.state.editorType&&n.setState({editorType:t})},n.changePreviewStyle=function(t){t!==n.state.previewStyle&&n.setState({previewStyle:t})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})};var r=e.editorType,o=e.previewStyle;return n.state={editorType:r,previewStyle:o,hide:!1},n.addEvent(),n}return d(e,t),e.prototype.mounted=function(){var t=this.props.slots,e=t.wwEditor,n=t.mdEditor,r=t.mdPreview;this.refs.wwContainer.appendChild(e),this.refs.mdContainer.insertAdjacentElement("afterbegin",n),this.refs.mdContainer.appendChild(r)},e.prototype.insertToolbarItem=function(t,e){this.toolbar.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.toolbar.removeToolbarItem(t)},e.prototype.render=function(){var t=this,e=this.props,n=e.eventEmitter,r=e.hideModeSwitch,o=e.toolbarItems,i=e.theme,a=this.state,s=a.hide,l=a.previewStyle,u=a.editorType,c=s?" hidden":"",p=Le("markdown"===u?"md-mode":"ww-mode"),d=Le("md")+"-"+l+"-style",f=Le(["light"!==i,i+" "]);return kp(Kd||(Kd=m(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),f,Le("defaultUI"),c,(function(e){return t.refs.el=e}),af,(function(e){return t.toolbar=e}),n,l,o,u,Le("main"),p,(function(e){return t.refs.editorSection=e}),Le("main-container"),Le("md-container"),d,(function(e){return t.refs.mdContainer=e}),Le("md-splitter"),Le("ww-container"),(function(e){return t.refs.wwContainer=e}),!r&&kp(Xd||(Xd=m(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),Hp,n,u),sf,n)},e.prototype.addEvent=function(){var t=this.props.eventEmitter;t.listen("hide",this.hide),t.listen("show",this.show),t.listen("changeMode",this.changeMode),t.listen("changePreviewStyle",this.changePreviewStyle)},e}(Pp),uf=function(t){function e(e){var n,r,o=t.call(this,e)||this,i=Rp(o.options.el,kp(Zd||(Zd=m(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),lf,(function(t){return r=t}),o.eventEmitter,o.getEditorElements(),o.options.hideModeSwitch,o.options.toolbarItems,o.options.previewStyle,o.options.initialEditType,o.options.theme));return o.setMinHeight(o.options.minHeight),o.setHeight(o.options.height),o.defaultUI={insertToolbarItem:r.insertToolbarItem.bind(r),removeToolbarItem:r.removeToolbarItem.bind(r),destroy:i},null===(n=o.pluginInfo.toolbarItems)||void 0===n||n.forEach((function(t){var e=t.groupIndex,n=t.itemIndex,r=t.item;o.defaultUI.insertToolbarItem({groupIndex:e,itemIndex:n},r)})),o.eventEmitter.emit("loadUI",o),o}return d(e,t),e.factory=function(t){return t.viewer?new ip(t):new e(t)},e.prototype.insertToolbarItem=function(t,e){this.defaultUI.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.defaultUI.removeToolbarItem(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.defaultUI.destroy()},e}(vp);vp.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"})}}]);