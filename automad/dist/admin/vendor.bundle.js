(self.webpackChunkautomad=self.webpackChunkautomad||[]).push([[736],{4511:(e,t,n)=>{"use strict";function i(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o(e){return e instanceof i(e).Element||e instanceof Element}function r(e){return e instanceof i(e).HTMLElement||e instanceof HTMLElement}function s(e){return"undefined"!=typeof ShadowRoot&&(e instanceof i(e).ShadowRoot||e instanceof ShadowRoot)}n.d(t,{fi:()=>me});var a=Math.max,l=Math.min,c=Math.round;function d(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function h(){return!/^((?!chrome|android).)*safari/i.test(d())}function u(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),a=1,l=1;t&&r(e)&&(a=e.offsetWidth>0&&c(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&c(s.height)/e.offsetHeight||1);var d=(o(e)?i(e):window).visualViewport,u=!h()&&n,p=(s.left+(u&&d?d.offsetLeft:0))/a,f=(s.top+(u&&d?d.offsetTop:0))/l,g=s.width/a,m=s.height/l;return{width:g,height:m,top:f,right:p+g,bottom:f+m,left:p,x:p,y:f}}function p(e){var t=i(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function f(e){return e?(e.nodeName||"").toLowerCase():null}function g(e){return((o(e)?e.ownerDocument:e.document)||window.document).documentElement}function m(e){return u(g(e)).left+p(e).scrollLeft}function v(e){return i(e).getComputedStyle(e)}function b(e){var t=v(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function y(e,t,n){void 0===n&&(n=!1);var o,s,a=r(t),l=r(t)&&function(e){var t=e.getBoundingClientRect(),n=c(t.width)/e.offsetWidth||1,i=c(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),d=g(t),h=u(e,l,n),v={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(a||!a&&!n)&&(("body"!==f(t)||b(d))&&(v=(o=t)!==i(o)&&r(o)?{scrollLeft:(s=o).scrollLeft,scrollTop:s.scrollTop}:p(o)),r(t)?((y=u(t,!0)).x+=t.clientLeft,y.y+=t.clientTop):d&&(y.x=m(d))),{x:h.left+v.scrollLeft-y.x,y:h.top+v.scrollTop-y.y,width:h.width,height:h.height}}function w(e){var t=u(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function k(e){return"html"===f(e)?e:e.assignedSlot||e.parentNode||(s(e)?e.host:null)||g(e)}function x(e){return["html","body","#document"].indexOf(f(e))>=0?e.ownerDocument.body:r(e)&&b(e)?e:x(k(e))}function S(e,t){var n;void 0===t&&(t=[]);var o=x(e),r=o===(null==(n=e.ownerDocument)?void 0:n.body),s=i(o),a=r?[s].concat(s.visualViewport||[],b(o)?o:[]):o,l=t.concat(a);return r?l:l.concat(S(k(a)))}function C(e){return["table","td","th"].indexOf(f(e))>=0}function E(e){return r(e)&&"fixed"!==v(e).position?e.offsetParent:null}function T(e){for(var t=i(e),n=E(e);n&&C(n)&&"static"===v(n).position;)n=E(n);return n&&("html"===f(n)||"body"===f(n)&&"static"===v(n).position)?t:n||function(e){var t=/firefox/i.test(d());if(/Trident/i.test(d())&&r(e)&&"fixed"===v(e).position)return null;var n=k(e);for(s(n)&&(n=n.host);r(n)&&["html","body"].indexOf(f(n))<0;){var i=v(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var _="top",A="bottom",O="right",M="left",I="auto",D=[_,A,O,M],N="start",R="end",B="clippingParents",L="viewport",P="popper",F="reference",z=D.reduce((function(e,t){return e.concat([t+"-"+N,t+"-"+R])}),[]),H=[].concat(D,[I]).reduce((function(e,t){return e.concat([t,t+"-"+N,t+"-"+R])}),[]),j=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function G(e){var t=new Map,n=new Set,i=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&o(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),i}var U={placement:"bottom",modifiers:[],strategy:"absolute"};function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function W(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,s=void 0===r?U:r;return function(e,t,n){void 0===n&&(n=s);var r,a,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},U,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],d=!1,h={state:l,setOptions:function(n){var r="function"==typeof n?n(l.options):n;u(),l.options=Object.assign({},s,l.options,r),l.scrollParents={reference:o(e)?S(e):e.contextElement?S(e.contextElement):[],popper:S(t)};var a,d,p=function(e){var t=G(e);return j.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((a=[].concat(i,l.options.modifiers),d=a.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return l.orderedModifiers=p.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var r=o({state:l,name:t,instance:h,options:i}),s=function(){};c.push(r||s)}})),h.update()},forceUpdate:function(){if(!d){var e=l.elements,t=e.reference,n=e.popper;if($(t,n)){l.rects={reference:y(t,T(n),"fixed"===l.options.strategy),popper:w(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<l.orderedModifiers.length;i++)if(!0!==l.reset){var o=l.orderedModifiers[i],r=o.fn,s=o.options,a=void 0===s?{}:s,c=o.name;"function"==typeof r&&(l=r({state:l,options:a,name:c,instance:h})||l)}else l.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(e){h.forceUpdate(),e(l)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(r())}))}))),a}),destroy:function(){u(),d=!0}};if(!$(e,t))return h;function u(){c.forEach((function(e){return e()})),c=[]}return h.setOptions(n).then((function(e){!d&&n.onFirstUpdate&&n.onFirstUpdate(e)})),h}}var V={passive:!0};function q(e){return e.split("-")[0]}function Y(e){return e.split("-")[1]}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Z(e){var t,n=e.reference,i=e.element,o=e.placement,r=o?q(o):null,s=o?Y(o):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(r){case _:t={x:a,y:n.y-i.height};break;case A:t={x:a,y:n.y+n.height};break;case O:t={x:n.x+n.width,y:l};break;case M:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=r?K(r):null;if(null!=c){var d="y"===c?"height":"width";switch(s){case N:t[c]=t[c]-(n[d]/2-i[d]/2);break;case R:t[c]=t[c]+(n[d]/2-i[d]/2)}}return t}var X={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(e){var t,n=e.popper,o=e.popperRect,r=e.placement,s=e.variation,a=e.offsets,l=e.position,d=e.gpuAcceleration,h=e.adaptive,u=e.roundOffsets,p=e.isFixed,f=a.x,m=void 0===f?0:f,b=a.y,y=void 0===b?0:b,w="function"==typeof u?u({x:m,y}):{x:m,y};m=w.x,y=w.y;var k=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),S=M,C=_,E=window;if(h){var I=T(n),D="clientHeight",N="clientWidth";if(I===i(n)&&"static"!==v(I=g(n)).position&&"absolute"===l&&(D="scrollHeight",N="scrollWidth"),r===_||(r===M||r===O)&&s===R)C=A,y-=(p&&I===E&&E.visualViewport?E.visualViewport.height:I[D])-o.height,y*=d?1:-1;if(r===M||(r===_||r===A)&&s===R)S=O,m-=(p&&I===E&&E.visualViewport?E.visualViewport.width:I[N])-o.width,m*=d?1:-1}var B,L=Object.assign({position:l},h&&X),P=!0===u?function(e,t){var n=e.x,i=e.y,o=t.devicePixelRatio||1;return{x:c(n*o)/o||0,y:c(i*o)/o||0}}({x:m,y},i(n)):{x:m,y};return m=P.x,y=P.y,d?Object.assign({},L,((B={})[C]=x?"0":"",B[S]=k?"0":"",B.transform=(E.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",B)):Object.assign({},L,((t={})[C]=x?y+"px":"",t[S]=k?m+"px":"",t.transform="",t))}const Q={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,o=n.offset,r=void 0===o?[0,0]:o,s=H.reduce((function(e,n){return e[n]=function(e,t,n){var i=q(e),o=[M,_].indexOf(i)>=0?-1:1,r="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[M,O].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,r),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}};var ee={left:"right",right:"left",bottom:"top",top:"bottom"};function te(e){return e.replace(/left|right|bottom|top/g,(function(e){return ee[e]}))}var ne={start:"end",end:"start"};function ie(e){return e.replace(/start|end/g,(function(e){return ne[e]}))}function oe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&s(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function re(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function se(e,t,n){return t===L?re(function(e,t){var n=i(e),o=g(e),r=n.visualViewport,s=o.clientWidth,a=o.clientHeight,l=0,c=0;if(r){s=r.width,a=r.height;var d=h();(d||!d&&"fixed"===t)&&(l=r.offsetLeft,c=r.offsetTop)}return{width:s,height:a,x:l+m(e),y:c}}(e,n)):o(t)?function(e,t){var n=u(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):re(function(e){var t,n=g(e),i=p(e),o=null==(t=e.ownerDocument)?void 0:t.body,r=a(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=a(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-i.scrollLeft+m(e),c=-i.scrollTop;return"rtl"===v(o||n).direction&&(l+=a(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:l,y:c}}(g(e)))}function ae(e,t,n,i){var s="clippingParents"===t?function(e){var t=S(k(e)),n=["absolute","fixed"].indexOf(v(e).position)>=0&&r(e)?T(e):e;return o(n)?t.filter((function(e){return o(e)&&oe(e,n)&&"body"!==f(e)})):[]}(e):[].concat(t),c=[].concat(s,[n]),d=c[0],h=c.reduce((function(t,n){var o=se(e,n,i);return t.top=a(o.top,t.top),t.right=l(o.right,t.right),t.bottom=l(o.bottom,t.bottom),t.left=a(o.left,t.left),t}),se(e,d,i));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function le(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ce(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function de(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,s=n.strategy,a=void 0===s?e.strategy:s,l=n.boundary,c=void 0===l?B:l,d=n.rootBoundary,h=void 0===d?L:d,p=n.elementContext,f=void 0===p?P:p,m=n.altBoundary,v=void 0!==m&&m,b=n.padding,y=void 0===b?0:b,w=le("number"!=typeof y?y:ce(y,D)),k=f===P?F:P,x=e.rects.popper,S=e.elements[v?k:f],C=ae(o(S)?S:S.contextElement||g(e.elements.popper),c,h,a),E=u(e.elements.reference),T=Z({reference:E,element:x,strategy:"absolute",placement:r}),M=re(Object.assign({},x,T)),I=f===P?M:E,N={top:C.top-I.top+w.top,bottom:I.bottom-C.bottom+w.bottom,left:C.left-I.left+w.left,right:I.right-C.right+w.right},R=e.modifiersData.offset;if(f===P&&R){var z=R[r];Object.keys(N).forEach((function(e){var t=[O,A].indexOf(e)>=0?1:-1,n=[_,A].indexOf(e)>=0?"y":"x";N[e]+=z[n]*t}))}return N}function he(e,t,n){return a(e,l(t,n))}const ue={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,r=void 0===o||o,s=n.altAxis,c=void 0!==s&&s,d=n.boundary,h=n.rootBoundary,u=n.altBoundary,p=n.padding,f=n.tether,g=void 0===f||f,m=n.tetherOffset,v=void 0===m?0:m,b=de(t,{boundary:d,rootBoundary:h,padding:p,altBoundary:u}),y=q(t.placement),k=Y(t.placement),x=!k,S=K(y),C="x"===S?"y":"x",E=t.modifiersData.popperOffsets,I=t.rects.reference,D=t.rects.popper,R="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,B="number"==typeof R?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(E){if(r){var F,z="y"===S?_:M,H="y"===S?A:O,j="y"===S?"height":"width",G=E[S],U=G+b[z],$=G-b[H],W=g?-D[j]/2:0,V=k===N?I[j]:D[j],Z=k===N?-D[j]:-I[j],X=t.elements.arrow,J=g&&X?w(X):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=Q[z],te=Q[H],ne=he(0,I[j],J[j]),ie=x?I[j]/2-W-ne-ee-B.mainAxis:V-ne-ee-B.mainAxis,oe=x?-I[j]/2+W+ne+te+B.mainAxis:Z+ne+te+B.mainAxis,re=t.elements.arrow&&T(t.elements.arrow),se=re?"y"===S?re.clientTop||0:re.clientLeft||0:0,ae=null!=(F=null==L?void 0:L[S])?F:0,le=G+oe-ae,ce=he(g?l(U,G+ie-ae-se):U,G,g?a($,le):$);E[S]=ce,P[S]=ce-G}if(c){var ue,pe="x"===S?_:M,fe="x"===S?A:O,ge=E[C],me="y"===C?"height":"width",ve=ge+b[pe],be=ge-b[fe],ye=-1!==[_,M].indexOf(y),we=null!=(ue=null==L?void 0:L[C])?ue:0,ke=ye?ve:ge-I[me]-D[me]-we+B.altAxis,xe=ye?ge+I[me]+D[me]-we-B.altAxis:be,Se=g&&ye?function(e,t,n){var i=he(e,t,n);return i>n?n:i}(ke,ge,xe):he(g?ke:ve,ge,g?xe:be);E[C]=Se,P[C]=Se-ge}t.modifiersData[i]=P}},requiresIfExists:["offset"]};const pe={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,o=e.options,r=n.elements.arrow,s=n.modifiersData.popperOffsets,a=q(n.placement),l=K(a),c=[M,O].indexOf(a)>=0?"height":"width";if(r&&s){var d=function(e,t){return le("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ce(e,D))}(o.padding,n),h=w(r),u="y"===l?_:M,p="y"===l?A:O,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],g=s[l]-n.rects.reference[l],m=T(r),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,b=f/2-g/2,y=d[u],k=v-h[c]-d[p],x=v/2-h[c]/2+b,S=he(y,x,k),C=l;n.modifiersData[i]=((t={})[C]=S,t.centerOffset=S-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&oe(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ge(e){return[_,O,A,M].some((function(t){return e[t]>=0}))}var me=W({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,s=void 0===r||r,a=o.resize,l=void 0===a||a,c=i(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach((function(e){e.addEventListener("scroll",n.update,V)})),l&&c.addEventListener("resize",n.update,V),function(){s&&d.forEach((function(e){e.removeEventListener("scroll",n.update,V)})),l&&c.removeEventListener("resize",n.update,V)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Z({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,o=void 0===i||i,r=n.adaptive,s=void 0===r||r,a=n.roundOffsets,l=void 0===a||a,c={placement:q(t.placement),variation:Y(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,J(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,J(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},o=t.elements[e];r(o)&&f(o)&&(Object.assign(o.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});r(i)&&f(i)&&(Object.assign(i.style,s),Object.keys(o).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},Q,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=n.mainAxis,r=void 0===o||o,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,d=n.boundary,h=n.rootBoundary,u=n.altBoundary,p=n.flipVariations,f=void 0===p||p,g=n.allowedAutoPlacements,m=t.options.placement,v=q(m),b=l||(v===m||!f?[te(m)]:function(e){if(q(e)===I)return[];var t=te(e);return[ie(e),t,ie(t)]}(m)),y=[m].concat(b).reduce((function(e,n){return e.concat(q(n)===I?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,o=n.boundary,r=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?H:l,d=Y(i),h=d?a?z:z.filter((function(e){return Y(e)===d})):D,u=h.filter((function(e){return c.indexOf(e)>=0}));0===u.length&&(u=h);var p=u.reduce((function(t,n){return t[n]=de(e,{placement:n,boundary:o,rootBoundary:r,padding:s})[q(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),w=t.rects.reference,k=t.rects.popper,x=new Map,S=!0,C=y[0],E=0;E<y.length;E++){var T=y[E],R=q(T),B=Y(T)===N,L=[_,A].indexOf(R)>=0,P=L?"width":"height",F=de(t,{placement:T,boundary:d,rootBoundary:h,altBoundary:u,padding:c}),j=L?B?O:M:B?A:_;w[P]>k[P]&&(j=te(j));var G=te(j),U=[];if(r&&U.push(F[R]<=0),a&&U.push(F[j]<=0,F[G]<=0),U.every((function(e){return e}))){C=T,S=!1;break}x.set(T,U)}if(S)for(var $=function(e){var t=y.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},W=f?3:1;W>0;W--){if("break"===$(W))break}t.placement!==C&&(t.modifiersData[i]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ue,pe,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,s=de(t,{elementContext:"reference"}),a=de(t,{altBoundary:!0}),l=fe(s,i),c=fe(a,o,r),d=ge(l),h=ge(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}}]})},8634:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function t(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=(e,t,n,i)=>(e=""+e,t=""+t,i&&(e=e.trim(),t=t.trim()),n?e==t:e.toLowerCase()==t.toLowerCase()),o=(e,t)=>e&&Array.isArray(e)&&e.map((e=>r(e,t)));function r(e,t){var n,i={};for(n in e)t.indexOf(n)<0&&(i[n]=e[n]);return i}function s(e){var t=document.createElement("div");return e.replace(/\&#?[0-9a-z]+;/gi,(function(e){return t.innerHTML=e,t.innerText}))}function a(e){return(new DOMParser).parseFromString(e.trim(),"text/html").body.firstElementChild}function l(e,t){for(t=t||"previous";e=e[t+"Sibling"];)if(3==e.nodeType)return e}function c(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):e}function d(e){var t=Object.prototype.toString.call(e).split(" ")[1].slice(0,-1);return e===Object(e)&&"Array"!=t&&"Function"!=t&&"RegExp"!=t&&"HTMLUnknownElement"!=t}function h(e,t,n){function i(e,t){for(var n in t)if(t.hasOwnProperty(n)){if(d(t[n])){d(e[n])?i(e[n],t[n]):e[n]=Object.assign({},t[n]);continue}if(Array.isArray(t[n])){e[n]=Object.assign([],t[n]);continue}e[n]=t[n]}}return e instanceof Object||(e={}),i(e,t),n&&i(e,n),e}function u(){const e=[],t={};for(let n of arguments)for(let i of n)d(i)?t[i.value]||(e.push(i),t[i.value]=1):e.includes(i)||e.push(i);return e}function p(e){return String.prototype.normalize?"string"==typeof e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:e}var f=()=>/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent);function g(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function m(e){return e&&e.classList&&e.classList.contains(this.settings.classNames.tag)}function v(e,t){var n=window.getSelection();return t=t||n.getRangeAt(0),"string"==typeof e&&(e=document.createTextNode(e)),t&&(t.deleteContents(),t.insertNode(e)),e}function b(e,t,n){return e?(t&&(e.__tagifyTagData=n?t:h({},e.__tagifyTagData||{},t)),e.__tagifyTagData):(console.warn("tag element doesn't exist",e,t),t)}var y={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:()=>{},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:" "},autoComplete:{enabled:!0,rightKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,highlightFirst:!1,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:()=>Promise.resolve(),beforePaste:()=>Promise.resolve(),suggestionClick:()=>Promise.resolve()}};function w(){this.dropdown={};for(let e in this._dropdown)this.dropdown[e]="function"==typeof this._dropdown[e]?this._dropdown[e].bind(this):this._dropdown[e];this.dropdown.refs()}var k={refs(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs(){return[...this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector)]},show(e){var t,n,o,r=this.settings,s="mix"==r.mode&&!r.enforceWhitelist,a=!r.whitelist||!r.whitelist.length,l="manual"==r.dropdown.position;if(e=void 0===e?this.state.inputText:e,!(a&&!s&&!r.templates.dropdownItemNoMatch||!1===r.dropdown.enable||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(e),e&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",e),r.templates.dropdownItemNoMatch&&(o=r.templates.dropdownItemNoMatch.call(this,{value:e}))),!o){if(this.suggestedListItems.length)e&&s&&!this.state.editing.scope&&!i(this.suggestedListItems[0].value,e)&&this.suggestedListItems.unshift({value:e});else{if(!e||!s||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:e}]}n=""+(d(t=this.suggestedListItems[0])?t.value:t),r.autoComplete&&n&&0==n.indexOf(e)&&this.input.autocomplete.suggest.call(this,t)}this.dropdown.fill(o),r.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(r.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=e||!0,this.state.dropdown.query=e,this.setStateSelection(),l||setTimeout((()=>{this.dropdown.position(),this.dropdown.render()})),setTimeout((()=>{this.trigger("dropdown:show",this.DOM.dropdown)}))}},hide(e){var t=this.DOM,n=t.scope,i=t.dropdown,o="manual"==this.settings.dropdown.position&&!e;if(i&&document.body.contains(i)&&!o)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),n.setAttribute("aria-expanded",!1),i.parentNode.removeChild(i),setTimeout((()=>{this.state.dropdown.visible=!1}),100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",i),this},toggle(e){this.dropdown[this.state.dropdown.visible&&!e?"hide":"show"]()},render(){var e,t,n=((t=this.DOM.dropdown.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(t),e=t.clientHeight,t.parentNode.removeChild(t),e),i=this.settings;return"number"==typeof i.dropdown.enabled&&i.dropdown.enabled>=0?(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(i.classNames.dropdownInital),this.dropdown.position(n),i.dropdown.appendTarget.appendChild(this.DOM.dropdown),setTimeout((()=>this.DOM.dropdown.classList.remove(i.classNames.dropdownInital)))),this):this},fill(e){e="string"==typeof e?e:this.dropdown.createListHTML(e||this.suggestedListItems);var t,n=this.settings.templates.dropdownContent.call(this,e);this.DOM.dropdown.content.innerHTML=(t=n)?t.replace(/\>[\r\n ]+\</g,"><").replace(/(<.*?>)|\s+/g,((e,t)=>t||" ")):""},fillHeaderFooter(){var e=this.dropdown.filterListItems(this.state.dropdown.query),t=this.parseTemplate("dropdownHeader",[e]),n=this.parseTemplate("dropdownFooter",[e]),i=this.dropdown.getHeaderRef(),o=this.dropdown.getFooterRef();t&&i?.parentNode.replaceChild(t,i),n&&o?.parentNode.replaceChild(n,o)},refilter(e){e=e||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(e),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},position(e){var t=this.settings.dropdown;if("manual"!=t.position){var n,i,o,r,s,a,l=this.DOM.dropdown,c=t.placeAbove,d=t.appendTarget===document.body,h=d?window.pageYOffset:t.appendTarget.scrollTop,u=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,p=u.clientHeight,f=Math.max(u.clientWidth||0,window.innerWidth||0)>480?t.position:"all",g=this.DOM["input"==f?"input":"scope"];if(e=e||l.clientHeight,this.state.dropdown.visible){if("text"==f?(o=(n=function(){const e=document.getSelection();if(e.rangeCount){const t=e.getRangeAt(0),n=t.startContainer,i=t.startOffset;let o,r;if(i>0)return r=document.createRange(),r.setStart(n,i-1),r.setEnd(n,i),o=r.getBoundingClientRect(),{left:o.right,top:o.top,bottom:o.bottom};if(n.getBoundingClientRect)return n.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,i=n.top,r=n.left,s="auto"):(a=function(e){for(var t=0,n=0;e&&e!=u;)t+=e.offsetLeft||0,n+=e.offsetTop||0,e=e.parentNode;return{left:t,top:n}}(t.appendTarget),i=(n=g.getBoundingClientRect()).top-a.top,o=n.bottom-1-a.top,r=n.left-a.left,s=n.width+"px"),!d){let e=function(){for(var e=0,n=t.appendTarget.parentNode;n;)e+=n.scrollTop||0,n=n.parentNode;return e}();i+=e,o+=e}i=Math.floor(i),o=Math.ceil(o),c=void 0===c?p-n.bottom<e:c,l.style.cssText="left:"+(r+window.pageXOffset)+"px; width:"+s+";"+(c?"top: "+(i+h)+"px":"top: "+(o+h)+"px"),l.setAttribute("placement",c?"top":"bottom"),l.setAttribute("position",f)}}},events:{binding(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:t.onKeyDown.bind(this),onMouseOver:t.onMouseOver.bind(this),onMouseLeave:t.onMouseLeave.bind(this),onClick:t.onClick.bind(this),onScroll:t.onScroll.bind(this)},i=e?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(document[i]("scroll",n.position,!0),window[i]("resize",n.position),window[i]("keydown",n.onKeyDown)),this.DOM.dropdown[i]("mouseover",n.onMouseOver),this.DOM.dropdown[i]("mouseleave",n.onMouseLeave),this.DOM.dropdown[i]("mousedown",n.onClick),this.DOM.dropdown.content[i]("scroll",n.onScroll)},callbacks:{onKeyDown(e){if(this.state.hasFocus&&!this.state.composing){var t=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownItemActiveSelector),n=this.dropdown.getSuggestionDataByNode(t);switch(e.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":e.preventDefault();var i=this.dropdown.getAllSuggestionsRefs(),o="ArrowUp"==e.key||"Up"==e.key;t&&(t=this.dropdown.getNextOrPrevOption(t,!o)),t&&t.matches(this.settings.classNames.dropdownItemSelector)||(t=i[o?i.length-1:0]),this.dropdown.highlightOption(t,!0);break;case"Escape":case"Esc":this.dropdown.hide();break;case"ArrowRight":if(this.state.actions.ArrowLeft)return;case"Tab":if("mix"!=this.settings.mode&&t&&!this.settings.autoComplete.rightKey&&!this.state.editing){e.preventDefault();var r=this.dropdown.getMappedValue(n);return this.input.autocomplete.set.call(this,r),!1}return!0;case"Enter":e.preventDefault(),this.settings.hooks.suggestionClick(e,{tagify:this,tagData:n,suggestionElm:t}).then((()=>{if(t)return this.dropdown.selectOption(t),t=this.dropdown.getNextOrPrevOption(t,!o),void this.dropdown.highlightOption(t);this.dropdown.hide(),"mix"!=this.settings.mode&&this.addTags(this.state.inputText.trim(),!0)})).catch((e=>e));break;case"Backspace":{if("mix"==this.settings.mode||this.state.editing.scope)return;const e=this.input.raw.call(this);""!=e&&8203!=e.charCodeAt(0)||(!0===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}}}},onMouseOver(e){var t=e.target.closest(this.settings.classNames.dropdownItemSelector);t&&this.dropdown.highlightOption(t)},onMouseLeave(e){this.dropdown.highlightOption()},onClick(e){if(0==e.button&&e.target!=this.DOM.dropdown&&e.target!=this.DOM.dropdown.content){var t=e.target.closest(this.settings.classNames.dropdownItemSelector),n=this.dropdown.getSuggestionDataByNode(t);this.state.actions.selectOption=!0,setTimeout((()=>this.state.actions.selectOption=!1),50),this.settings.hooks.suggestionClick(e,{tagify:this,tagData:n,suggestionElm:t}).then((()=>{t?this.dropdown.selectOption(t,e):this.dropdown.hide()})).catch((e=>console.warn(e)))}},onScroll(e){var t=e.target,n=t.scrollTop/(t.scrollHeight-t.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(n)})}}},getSuggestionDataByNode(e){var t=e&&e.getAttribute("value");return this.suggestedListItems.find((e=>e.value==t))||null},getNextOrPrevOption(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=this.dropdown.getAllSuggestionsRefs(),i=n.findIndex((t=>t===e));return t?n[i+1]:n[i-1]},highlightOption(e,t){var n,i=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(i),this.state.ddItemElm.removeAttribute("aria-selected")),!e)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.dropdown.getSuggestionDataByNode(e),this.state.ddItemData=n,this.state.ddItemElm=e,e.classList.add(i),e.setAttribute("aria-selected",!0),t&&(e.parentNode.scrollTop=e.clientHeight+e.offsetTop-e.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption(e,t){var n=this.settings.dropdown,i=n.clearOnSelect,o=n.closeOnSelect;if(!e)return this.addTags(this.state.inputText,!0),void(o&&this.dropdown.hide());t=t||{};var r=e.getAttribute("value"),s="noMatch"==r,a=this.suggestedListItems.find((e=>(e.value||e)==r));this.trigger("dropdown:select",{data:a,elm:e,event:t}),r&&(a||s)?(this.state.editing?this.onEditTagDone(null,h({__isValid:!0},this.normalizeTags([a])[0])):this["mix"==this.settings.mode?"addMixTags":"addTags"]([a||this.input.raw.call(this)],i),this.DOM.input.parentNode&&(setTimeout((()=>{this.DOM.input.focus(),this.toggleFocusClass(!0),this.setRangeAtStartEnd(!1,this.DOM.input)})),o&&setTimeout(this.dropdown.hide.bind(this)),e.addEventListener("transitionend",(()=>{this.dropdown.fillHeaderFooter(),setTimeout((()=>e.remove()),100)}),{once:!0}),e.classList.add(this.settings.classNames.dropdownItemHidden))):o&&setTimeout(this.dropdown.hide.bind(this))},selectAll(e){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var t=this.dropdown.filterListItems("");return e||(t=this.state.dropdown.suggestions),this.addTags(t,!0),this},filterListItems(e,t){var n,i,o,r,s,a=this.settings,l=a.dropdown,c=(t=t||{},[]),h=[],u=a.whitelist,f=l.maxItems>=0?l.maxItems:1/0,g=l.searchKeys,m=0;if(!(e="select"==a.mode&&this.value.length&&this.value[0][a.tagTextProp]==e?"":e)||!g.length)return c=l.includeSelectedTags?u:u.filter((e=>!this.isTagDuplicate(d(e)?e.value:e))),this.state.dropdown.suggestions=c,c.slice(0,f);function v(e,t){return t.toLowerCase().split(" ").every((t=>e.includes(t.toLowerCase())))}for(s=l.caseSensitive?""+e:(""+e).toLowerCase();m<u.length;m++){let e,a;n=u[m]instanceof Object?u[m]:{value:u[m]};let f=Object.keys(n).some((e=>g.includes(e)))?g:["value"];l.fuzzySearch&&!t.exact?(o=f.reduce(((e,t)=>e+" "+(n[t]||"")),"").toLowerCase().trim(),l.accentedSearch&&(o=p(o),s=p(s)),e=0==o.indexOf(s),a=o===s,i=v(o,s)):(e=!0,i=f.some((e=>{var i=""+(n[e]||"");return l.accentedSearch&&(i=p(i),s=p(s)),l.caseSensitive||(i=i.toLowerCase()),a=i===s,t.exact?i===s:0==i.indexOf(s)}))),r=!l.includeSelectedTags&&this.isTagDuplicate(d(n)?n.value:n),i&&!r&&(a&&e?h.push(n):"startsWith"==l.sortby&&e?c.unshift(n):c.push(n))}return this.state.dropdown.suggestions=h.concat(c),"function"==typeof l.sortby?l.sortby(h.concat(c),s):h.concat(c).slice(0,f)},getMappedValue(e){var t=this.settings.dropdown.mapValueTo;return t?"function"==typeof t?t(e):e[t]||e.value:e.value},createListHTML(e){return h([],e).map(((e,n)=>{"string"!=typeof e&&"number"!=typeof e||(e={value:e});var i=this.dropdown.getMappedValue(e);return i="string"==typeof i?c(i):i,this.settings.templates.dropdownItem.apply(this,[t(t({},e),{},{mappedValue:i}),this])})).join("")}};const x="@yaireo/tagify/";var S,C={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},E={wrapper:(e,t)=>`<tags class="${t.classNames.namespace} ${t.mode?`${t.classNames[t.mode+"Mode"]}`:""} ${e.className}"\n                    ${t.readonly?"readonly":""}\n                    ${t.disabled?"disabled":""}\n                    ${t.required?"required":""}\n                    ${"select"===t.mode?"spellcheck='false'":""}\n                    tabIndex="-1">\n            <span ${!t.readonly&&t.userInput?"contenteditable":""} tabIndex="0" data-placeholder="${t.placeholder||"&#8203;"}" aria-placeholder="${t.placeholder||""}"\n                class="${t.classNames.input}"\n                role="textbox"\n                aria-autocomplete="both"\n                aria-multiline="${"mix"==t.mode}"></span>\n                &#8203;\n        </tags>`,tag(e,t){let n=t.settings;return`<tag title="${e.title||e.value}"\n                    contenteditable='false'\n                    spellcheck='false'\n                    tabIndex="${n.a11y.focusableTags?0:-1}"\n                    class="${n.classNames.tag} ${e.class||""}"\n                    ${this.getAttributes(e)}>\n            <x title='' class="${n.classNames.tagX}" role='button' aria-label='remove tag'></x>\n            <div>\n                <span class="${n.classNames.tagText}">${e[n.tagTextProp]||e.value}</span>\n            </div>\n        </tag>`},dropdown(e){var t=e.dropdown,n="manual"==t.position,i=`${e.classNames.dropdown}`;return`<div class="${n?"":i} ${t.classname}" role="listbox" aria-labelledby="dropdown">\n                    <div data-selector='tagify-suggestions-wrapper' class="${e.classNames.dropdownWrapper}"></div>\n                </div>`},dropdownContent(e){var t=this.settings,n=this.state.dropdown.suggestions;return`\n            ${t.templates.dropdownHeader.call(this,n)}\n            ${e}\n            ${t.templates.dropdownFooter.call(this,n)}\n        `},dropdownItem(e){return`<div ${this.getAttributes(e)}\n                    class='${this.settings.classNames.dropdownItem} ${e.class?e.class:""}'\n                    tabindex="0"\n                    role="option">${e.mappedValue||e.value}</div>`},dropdownHeader(e){return`<header data-selector='tagify-suggestions-header' class="${this.settings.classNames.dropdownHeader}"></header>`},dropdownFooter(e){var t=e.length-this.settings.dropdown.maxItems;return t>0?`<footer data-selector='tagify-suggestions-footer' class="${this.settings.classNames.dropdownFooter}">\n                ${t} more items. Refine your search.\n            </footer>`:""},dropdownItemNoMatch:null},T={customBinding(){this.customEventsList.forEach((e=>{this.on(e,this.settings.callbacks[e])}))},binding(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,n=this.events.callbacks,i=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var o in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),t=this.listeners.main=this.listeners.main||{focus:["input",n.onFocusBlur.bind(this)],keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)],dblclick:["scope",n.onDoubleClickScope.bind(this)],paste:["input",n.onPaste.bind(this)],drop:["input",n.onDrop.bind(this)],compositionstart:["input",n.onCompositionStart.bind(this)],compositionend:["input",n.onCompositionEnd.bind(this)]})this.DOM[t[o][0]][i](o,t[o][1]);clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(n.observeOriginalInputValue.bind(this),500);var r=this.listeners.main.inputMutationObserver||new MutationObserver(n.onInputDOMChange.bind(this));r.disconnect(),"mix"==this.settings.mode&&r.observe(this.DOM.input,{childList:!0})}},bindGlobal(e){var t,n=this.events.callbacks,i=e?"removeEventListener":"addEventListener";if(e||!this.listeners.global)for(t of(this.listeners.global=this.listeners&&this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"blur",target:this.DOM.input,cb:n.onFocusBlur.bind(this)}],this.listeners.global))t.target[i](t.type,t.cb)},unbindGlobal(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur(e){var t=this.settings,n=e.target?this.trim(e.target.textContent):"",i=this.value?.[0]?.[t.tagTextProp],o=e.type,r=t.dropdown.enabled>=0,s={relatedTarget:e.relatedTarget},a=this.state.actions.selectOption&&(r||!t.dropdown.closeOnSelect),l=this.state.actions.addNew&&r,c=e.relatedTarget&&m.call(this,e.relatedTarget)&&this.DOM.scope.contains(e.relatedTarget);if("blur"==o){if(e.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),t.onChangeAfterBlur&&this.triggerChangeEvent()}if(!a&&!l)if(this.state.hasFocus="focus"==o&&+new Date,this.toggleFocusClass(this.state.hasFocus),"mix"!=t.mode){if("focus"==o)return this.trigger("focus",s),void(0!==t.dropdown.enabled&&t.userInput||this.dropdown.show(this.value.length?"":void 0));"blur"==o&&(this.trigger("blur",s),this.loading(!1),"select"==t.mode&&(c&&(this.removeTags(),n=""),i===n&&(n="")),n&&!this.state.actions.selectOption&&t.addTagOnBlur&&this.addTags(n,!0)),this.DOM.input.removeAttribute("style"),this.dropdown.hide()}else"focus"==o?this.trigger("focus",s):"blur"==e.type&&(this.trigger("blur",s),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart(e){this.state.composing=!0},onCompositionEnd(e){this.state.composing=!1},onWindowKeyDown(e){var t,n=document.activeElement;if(m.call(this,n)&&this.DOM.scope.contains(document.activeElement))switch(t=n.nextElementSibling,e.key){case"Backspace":this.settings.readonly||(this.removeTags(n),(t||this.DOM.input).focus());break;case"Enter":setTimeout(this.editTag.bind(this),0,n)}},onKeydown(e){var t=this.settings;if(!this.state.composing&&t.userInput){"select"==t.mode&&t.enforceWhitelist&&this.value.length&&"Tab"!=e.key&&e.preventDefault();var n=this.trim(e.target.textContent);if(this.trigger("keydown",{event:e}),"mix"==t.mode){switch(e.key){case"Left":case"ArrowLeft":this.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(this.state.editing)return;var i=document.getSelection(),o="Delete"==e.key&&i.anchorOffset==(i.anchorNode.length||0),r=i.anchorNode.previousSibling,a=1==i.anchorNode.nodeType||!i.anchorOffset&&r&&1==r.nodeType&&i.anchorNode.previousSibling;s(this.DOM.input.innerHTML);var c,d,h,u=this.getTagElms();if("edit"==t.backspace&&a)return c=1==i.anchorNode.nodeType?null:i.anchorNode.previousElementSibling,setTimeout(this.editTag.bind(this),0,c),void e.preventDefault();if(f()&&a instanceof Element)return h=l(a),a.hasAttribute("readonly")||a.remove(),this.DOM.input.focus(),void setTimeout((()=>{this.placeCaretAfterNode(h),this.DOM.input.click()}));if("BR"==i.anchorNode.nodeName)return;if((o||a)&&1==i.anchorNode.nodeType?d=0==i.anchorOffset?o?u[0]:null:u[Math.min(u.length,i.anchorOffset)-1]:o?d=i.anchorNode.nextElementSibling:a instanceof Element&&(d=a),3==i.anchorNode.nodeType&&!i.anchorNode.nodeValue&&i.anchorNode.previousElementSibling&&e.preventDefault(),(a||o)&&!t.backspace)return void e.preventDefault();if("Range"!=i.type&&!i.anchorOffset&&i.anchorNode==this.DOM.input&&"Delete"!=e.key)return void e.preventDefault();if("Range"!=i.type&&d&&d.hasAttribute("readonly"))return void this.placeCaretAfterNode(l(d));clearTimeout(S),S=setTimeout((()=>{var e=document.getSelection();s(this.DOM.input.innerHTML),!o&&e.anchorNode.previousSibling,this.value=[].map.call(u,((e,t)=>{var n=b(e);if(e.parentNode||n.readonly)return n;this.trigger("remove",{tag:e,index:t,data:n})})).filter((e=>e))}),20)}return!0}switch(e.key){case"Backspace":"select"==t.mode&&t.enforceWhitelist&&this.value.length?this.removeTags():this.state.dropdown.visible&&"manual"!=t.dropdown.position||""!=e.target.textContent&&8203!=n.charCodeAt(0)||(!0===t.backspace?this.removeTags():"edit"==t.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":if(this.state.dropdown.visible)return;e.target.blur();break;case"Down":case"ArrowDown":this.state.dropdown.visible||this.dropdown.show();break;case"ArrowRight":{let e=this.state.inputSuggestion||this.state.ddItemData;if(e&&t.autoComplete.rightKey)return void this.addTags([e],!0);break}case"Tab":{let i="select"==t.mode;if(!n||i)return!0;e.preventDefault()}case"Enter":if(this.state.dropdown.visible&&"manual"!=t.dropdown.position)return;e.preventDefault(),setTimeout((()=>{this.state.dropdown.visible||this.state.actions.selectOption||this.addTags(n,!0)}))}}},onInput(e){this.postUpdate();var t=this.settings;if("mix"==t.mode)return this.events.callbacks.onMixTagsInput.call(this,e);var n=this.input.normalize.call(this),i=n.length>=t.dropdown.enabled,o={value:n,inputElm:this.DOM.input},r=this.validateTag({value:n});"select"==t.mode&&this.toggleScopeValidation(r),o.isValid=r,this.state.inputText!=n&&(this.input.set.call(this,n,!1),-1!=n.search(t.delimiters)?this.addTags(n)&&this.input.set.call(this):t.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](n),this.trigger("input",o))},onMixTagsInput(e){var t,n,i,o,r,s,a,l,c=this.settings,d=this.value.length,u=this.getTagElms(),p=document.createDocumentFragment(),g=window.getSelection().getRangeAt(0),m=[].map.call(u,(e=>b(e).value));if("deleteContentBackward"==e.inputType&&f()&&this.events.callbacks.onKeydown.call(this,{target:e.target,key:"Backspace"}),this.value.slice().forEach((e=>{e.readonly&&!m.includes(e.value)&&p.appendChild(this.createTagElem(e))})),p.childNodes.length&&(g.insertNode(p),this.setRangeAtStartEnd(!1,p.lastChild)),u.length!=d)return this.value=[].map.call(this.getTagElms(),(e=>b(e))),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(s=window.getSelection()).rangeCount>0&&3==s.anchorNode.nodeType){if((g=s.getRangeAt(0).cloneRange()).collapse(!0),g.setStart(s.focusNode,0),i=(t=g.toString().slice(0,g.endOffset)).split(c.pattern).length-1,(n=t.match(c.pattern))&&(o=t.slice(t.lastIndexOf(n[n.length-1]))),o){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:o.match(c.pattern)[0],value:o.replace(c.pattern,"")},this.state.tag.baseOffset=s.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(c.delimiters))return this.state.tag.value=this.state.tag.value.replace(c.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,c.dropdown.clearOnSelect),void this.dropdown.hide();r=this.state.tag.value.length>=c.dropdown.enabled;try{a=(a=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&a.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch(e){}(a||i<this.state.mixMode.matchedPatternCount)&&(r=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=i}setTimeout((()=>{this.update({withoutChangeEvent:!0}),this.trigger("input",h({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[r?"show":"hide"](this.state.tag.value)}),10)},onInputIE(e){var t=this;setTimeout((function(){t.events.callbacks.onInput.call(t,e)}))},observeOriginalInputValue(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickScope(e){var t=this.settings,n=e.target.closest("."+t.classNames.tag),i=+new Date-this.state.hasFocus;if(e.target!=this.DOM.scope){if(!e.target.classList.contains(t.classNames.tagX))return n?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:b(n),event:e}),void(1!==t.editTags&&1!==t.editTags.clicks||this.events.callbacks.onDoubleClickScope.call(this,e))):void(e.target==this.DOM.input&&("mix"==t.mode&&this.fixFirefoxLastTagNoCaret(),i>500)?this.state.dropdown.visible?this.dropdown.hide():0===t.dropdown.enabled&&"mix"!=t.mode&&this.dropdown.show(this.value.length?"":void 0):"select"!=t.mode||0!==t.dropdown.enabled||this.state.dropdown.visible||this.dropdown.show());this.removeTags(e.target.parentNode)}else this.state.hasFocus||this.DOM.input.focus()},onPaste(e){e.preventDefault();var t,n,i=this.settings;if("select"==i.mode&&i.enforceWhitelist||!i.userInput)return!1;i.readonly||(t=e.clipboardData||window.clipboardData,n=t.getData("Text"),i.hooks.beforePaste(e,{tagify:this,pastedText:n,clipboardData:t}).then((t=>{void 0===t&&(t=n),t&&(this.injectAtCaret(t,window.getSelection().getRangeAt(0)),"mix"==this.settings.mode?this.events.callbacks.onMixTagsInput.call(this,e):this.settings.pasteAsTags?this.addTags(this.state.inputText+t,!0):this.state.inputText=t)})).catch((e=>e)))},onDrop(e){e.preventDefault()},onEditTagInput(e,t){var n=e.closest("."+this.settings.classNames.tag),i=this.getNodeIndex(n),o=b(n),r=this.input.normalize.call(this,e),s={[this.settings.tagTextProp]:r,__tagId:o.__tagId},a=this.validateTag(s);this.editTagChangeDetected(h(o,s))||!0!==e.originalIsValid||(a=!0),n.classList.toggle(this.settings.classNames.tagInvalid,!0!==a),o.__isValid=a,n.title=!0===a?o.title||o.value:a,r.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=r),this.dropdown.show(r)),this.trigger("edit:input",{tag:n,index:i,data:h({},this.value[i],{newValue:r}),event:t})},onEditTagPaste(e,t){var n=(t.clipboardData||window.clipboardData).getData("Text");t.preventDefault();var i=v(n);this.setRangeAtStartEnd(!1,i)},onEditTagFocus(e){this.state.editing={scope:e,input:e.querySelector("[contenteditable]")}},onEditTagBlur(e){if(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(e)){var t,n,i=this.settings,o=e.closest("."+i.classNames.tag),r=this.input.normalize.call(this,e),s=b(o),a=s.__originalData,l=this.editTagChangeDetected(s),c=this.validateTag({[i.tagTextProp]:r,__tagId:s.__tagId});if(r)if(l){if(t=this.hasMaxTags(),n=h({},a,{[i.tagTextProp]:this.trim(r),__isValid:c}),i.transformTag.call(this,n,a),!0!==(c=(!t||!0===a.__isValid)&&this.validateTag(n))){if(this.trigger("invalid",{data:n,tag:o,message:c}),i.editTags.keepInvalid)return;i.keepInvalidTags?n.__isValid=c:n=a}else i.keepInvalidTags&&(delete n.title,delete n["aria-invalid"],delete n.class);this.onEditTagDone(o,n)}else this.onEditTagDone(o,a);else this.onEditTagDone(o)}},onEditTagkeydown(e,t){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:e}),e.key){case"Esc":case"Escape":t.parentNode.replaceChild(t.__tagifyTagData.__originalHTML,t),this.state.editing=!1;case"Enter":case"Tab":e.preventDefault(),e.target.blur()}},onDoubleClickScope(e){var t,n,i=e.target.closest("."+this.settings.classNames.tag),o=b(i),r=this.settings;i&&r.userInput&&!1!==o.editable&&(t=i.classList.contains(this.settings.classNames.tagEditing),n=i.hasAttribute("readonly"),"select"==r.mode||r.readonly||t||n||!this.settings.editTags||this.editTag(i),this.toggleFocusClass(!0),this.trigger("dblclick",{tag:i,index:this.getNodeIndex(i),data:b(i)}))},onInputDOMChange(e){e.forEach((e=>{e.addedNodes.forEach((e=>{if("<div><br></div>"==e.outerHTML)e.replaceWith(document.createElement("br"));else if(1==e.nodeType&&e.querySelector(this.settings.classNames.tagSelector)){let t=document.createTextNode("");3==e.childNodes[0].nodeType&&"BR"!=e.previousSibling.nodeName&&(t=document.createTextNode("\n")),e.replaceWith(t,...[...e.childNodes].slice(0,-1)),this.placeCaretAfterNode(t)}else if(m.call(this,e)&&(3!=e.previousSibling?.nodeType||e.previousSibling.textContent||e.previousSibling.remove(),e.previousSibling&&"BR"==e.previousSibling.nodeName)){e.previousSibling.replaceWith("\n​");let t=e.nextSibling,n="";for(;t;)n+=t.textContent,t=t.nextSibling;n.trim()&&this.placeCaretAfterNode(e.previousSibling)}})),e.removedNodes.forEach((e=>{e&&"BR"==e.nodeName&&m.call(this,t)&&(this.removeTags(t),this.fixFirefoxLastTagNoCaret())}))}));var t=this.DOM.input.lastChild;t&&""==t.nodeValue&&t.remove(),t&&"BR"==t.nodeName||this.DOM.input.appendChild(document.createElement("br"))}}};function _(e,t){if(!e){console.warn("Tagify:","input element not found",e);const t=new Proxy(this,{get:()=>()=>t});return t}if(e.__tagify)return console.warn("Tagify: ","input element is already Tagified - Same instance is returned.",e),e.__tagify;var n;h(this,function(e){var t=document.createTextNode("");function n(e,n,i){i&&n.split(/\s+/g).forEach((n=>t[e+"EventListener"].call(t,n,i)))}return{off(e,t){return n("remove",e,t),this},on(e,t){return t&&"function"==typeof t&&n("add",e,t),this},trigger(n,i,o){var r;if(o=o||{cloneData:!0},n)if(e.settings.isJQueryPlugin)"remove"==n&&(n="removeTag"),jQuery(e.DOM.originalInput).triggerHandler(n,[i]);else{try{var s="object"==typeof i?i:{value:i};if((s=o.cloneData?h({},s):s).tagify=this,i.event&&(s.event=this.cloneEvent(i.event)),i instanceof Object)for(var a in i)i[a]instanceof HTMLElement&&(s[a]=i[a]);r=new CustomEvent(n,{detail:s})}catch(e){console.warn(e)}t.dispatchEvent(r)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,t=t||{},this.getPersistedData=(n=t.id,e=>{let t,i="/"+e;if(1==localStorage.getItem(x+n+"/v",1))try{t=JSON.parse(localStorage[x+n+i])}catch(e){}return t}),this.setPersistedData=(e=>e?(localStorage.setItem(x+e+"/v",1),(t,n)=>{let i="/"+n,o=JSON.stringify(t);t&&n&&(localStorage.setItem(x+e+i,o),dispatchEvent(new Event("storage")))}):()=>{})(t.id),this.clearPersistedData=(e=>t=>{const n=x+"/"+e+"/";if(t)localStorage.removeItem(n+t);else for(let e in localStorage)e.includes(n)&&localStorage.removeItem(e)})(t.id),this.applySettings(e,t),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(e),w.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),e.autofocus&&this.DOM.input.focus(),e.__tagify=this}return _.prototype={_dropdown:k,helpers:{sameStr:i,removeCollectionProp:o,omit:r,isObject:d,parseHTML:a,escapeHTML:c,extend:h,concatWithoutDups:u,getUID:g,isNodeTag:m},customEventsList:["change","add","remove","invalid","input","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim(e){return this.settings.trim&&e&&"string"==typeof e?e.trim():e},parseHTML:a,templates:E,parseTemplate(e,t){return a((e=this.settings.templates[e]||e).apply(this,t))},set whitelist(e){const t=e&&Array.isArray(e);this.settings.whitelist=t?e:[],this.setPersistedData(t?e:[],"whitelist")},get whitelist(){return this.settings.whitelist},generateClassSelectors(e){for(let t in e){let n=t;Object.defineProperty(e,n+"Selector",{get(){return"."+this[n].split(" ")[0]}})}},applySettings(e,n){y.templates=this.templates;var i=h({},y,"mix"==n.mode?{dropdown:{position:"text"}}:{}),o=this.settings=h({},i,n);if(o.disabled=e.hasAttribute("disabled"),o.readonly=o.readonly||e.hasAttribute("readonly"),o.placeholder=c(e.getAttribute("placeholder")||o.placeholder||""),o.required=e.hasAttribute("required"),this.generateClassSelectors(o.classNames),void 0===o.dropdown.includeSelectedTags&&(o.dropdown.includeSelectedTags=o.duplicates),this.isIE&&(o.autoComplete=!1),["whitelist","blacklist"].forEach((t=>{var n=e.getAttribute("data-"+t);n&&(n=n.split(o.delimiters))instanceof Array&&(o[t]=n)})),"autoComplete"in n&&!d(n.autoComplete)&&(o.autoComplete=y.autoComplete,o.autoComplete.enabled=n.autoComplete),"mix"==o.mode&&(o.pattern=o.pattern||/@/,o.autoComplete.rightKey=!0,o.delimiters=n.delimiters||null,o.tagTextProp&&!o.dropdown.searchKeys.includes(o.tagTextProp)&&o.dropdown.searchKeys.push(o.tagTextProp)),e.pattern)try{o.pattern=new RegExp(e.pattern)}catch(e){}if(o.delimiters){o._delimiters=o.delimiters;try{o.delimiters=new RegExp(this.settings.delimiters,"g")}catch(e){}}o.disabled&&(o.userInput=!1),this.TEXTS=t(t({},C),o.texts||{}),("select"!=o.mode||n.dropdown?.enabled)&&o.userInput||(o.dropdown.enabled=0),o.dropdown.appendTarget=n.dropdown?.appendTarget||document.body;let r=this.getPersistedData("whitelist");Array.isArray(r)&&(this.whitelist=Array.isArray(o.whitelist)?u(o.whitelist,r):r)},getAttributes(e){var t,n=this.getCustomAttributes(e),i="";for(t in n)i+=" "+t+(void 0!==e[t]?`="${n[t]}"`:"");return i},getCustomAttributes(e){if(!d(e))return"";var t,n={};for(t in e)"__"!=t.slice(0,2)&&"class"!=t&&e.hasOwnProperty(t)&&void 0!==e[t]&&(n[t]=c(e[t]));return n},setStateSelection(){var e=window.getSelection(),t={anchorOffset:e.anchorOffset,anchorNode:e.anchorNode,range:e.getRangeAt&&e.rangeCount&&e.getRangeAt(0)};return this.state.selection=t,t},getCSSVars(){var e,t=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(e=>{let t=e.value;return"s"==e.unit?1e3*t:t})(function(e){if(!e)return{};var t=(e=e.trim().split(" ")[0]).split(/\d+/g).filter((e=>e)).pop().trim();return{value:+e.split(t).filter((e=>e))[0].trim(),unit:t}}((e="tag-hide-transition",t.getPropertyValue("--"+e))))}},build(e){var t=this.DOM;this.settings.mixMode.integrated?(t.originalInput=null,t.scope=e,t.input=e):(t.originalInput=e,t.originalInput_tabIndex=e.tabIndex,t.scope=this.parseTemplate("wrapper",[e,this.settings]),t.input=t.scope.querySelector(this.settings.classNames.inputSelector),e.parentNode.insertBefore(t.scope,e),e.tabIndex=-1)},destroy(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues(e){var t,n=this.settings;if(this.state.blockChangeEvent=!0,void 0===e){const t=this.getPersistedData("value");e=t&&!this.DOM.originalInput.value?t:n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),e)if("mix"==n.mode)this.parseMixTags(e),(t=this.DOM.input.lastChild)&&"BR"==t.tagName||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{JSON.parse(e)instanceof Array&&(e=JSON.parse(e))}catch(e){}this.addTags(e,!0).forEach((e=>e&&e.classList.add(n.classNames.tagNoAnimation)))}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value,this.state.blockChangeEvent=!1},cloneEvent(e){var t={};for(var n in e)"path"!=n&&(t[n]=e[n]);return t},loading(e){return this.state.isLoading=e,this.DOM.scope.classList[e?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading(e,t){return e&&e.classList[t?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass(e,t){"string"==typeof e&&this.DOM.scope.classList.toggle(e,t)},toggleScopeValidation(e){var t=!0===e||void 0===e;!this.settings.required&&e&&e===this.TEXTS.empty&&(t=!0),this.toggleClass(this.settings.classNames.tagInvalid,!t),this.DOM.scope.title=t?"":e},toggleFocusClass(e){this.toggleClass(this.settings.classNames.focus,!!e)},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var e=this.DOM.originalInput,t=this.state.lastOriginalValueReported!==e.value,n=new CustomEvent("change",{bubbles:!0});t&&(this.state.lastOriginalValueReported=e.value,n.simulated=!0,e._valueTracker&&e._valueTracker.setValue(Math.random()),e.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),e.value=this.state.lastOriginalValueReported)}},events:T,fixFirefoxLastTagNoCaret(){},setRangeAtStartEnd(e,t){if(t){e="number"==typeof e?e:!!e,t=t.lastChild||t;var n=document.getSelection();if(n.focusNode instanceof Element&&!this.DOM.input.contains(n.focusNode))return!0;try{n.rangeCount>=1&&["Start","End"].forEach((i=>n.getRangeAt(0)["set"+i](t,e||t.length)))}catch(e){}}},placeCaretAfterNode(e){if(e&&e.parentNode){var t=e,n=window.getSelection(),i=n.getRangeAt(0);n.rangeCount&&(i.setStartAfter(t),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}},insertAfterTag(e,t){if(t=t||this.settings.mixMode.insertAfterTag,e&&e.parentNode&&t)return t="string"==typeof t?document.createTextNode(t):t,e.parentNode.insertBefore(t,e.nextSibling),t},editTagChangeDetected(e){var t=e.__originalData;for(var n in t)if(!this.dataProps.includes(n)&&e[n]!=t[n])return!0;return!1},getTagTextNode(e){return e.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode(e,t){this.getTagTextNode(e).innerHTML=c(t)},editTag(e,t){e=e||this.getLastTag(),t=t||{},this.dropdown.hide();var n=this.settings,i=this.getTagTextNode(e),o=this.getNodeIndex(e),r=b(e),s=this.events.callbacks,a=this,l=!0;if(i){if(!(r instanceof Object&&"editable"in r)||r.editable)return r=b(e,{__originalData:h({},r),__originalHTML:e.cloneNode(!0)}),b(r.__originalHTML,r.__originalData),i.setAttribute("contenteditable",!0),e.classList.add(n.classNames.tagEditing),i.addEventListener("focus",s.onEditTagFocus.bind(this,e)),i.addEventListener("blur",(function(){setTimeout((()=>s.onEditTagBlur.call(a,a.getTagTextNode(e))))})),i.addEventListener("input",s.onEditTagInput.bind(this,i)),i.addEventListener("paste",s.onEditTagPaste.bind(this,i)),i.addEventListener("keydown",(t=>s.onEditTagkeydown.call(this,t,e))),i.addEventListener("compositionstart",s.onCompositionStart.bind(this)),i.addEventListener("compositionend",s.onCompositionEnd.bind(this)),t.skipValidation||(l=this.editTagToggleValidity(e)),i.originalIsValid=l,this.trigger("edit:start",{tag:e,index:o,data:r,isValid:l}),i.focus(),this.setRangeAtStartEnd(!1,i),this}else console.warn("Cannot find element in Tag template: .",n.classNames.tagTextSelector)},editTagToggleValidity(e,t){var n;if(t=t||b(e))return(n=!("__isValid"in t)||!0===t.__isValid)||this.removeTagsFromValue(e),this.update(),e.classList.toggle(this.settings.classNames.tagNotAllowed,!n),t.__isValid;console.warn("tag has no data: ",e,t)},onEditTagDone(e,t){t=t||{};var n={tag:e=e||this.state.editing.scope,index:this.getNodeIndex(e),previousData:b(e),data:t};this.trigger("edit:beforeUpdate",n,{cloneData:!1}),this.state.editing=!1,delete t.__originalData,delete t.__originalHTML,e&&t[this.settings.tagTextProp]?(e=this.replaceTag(e,t),this.editTagToggleValidity(e,t),this.settings.a11y.focusableTags?e.focus():this.placeCaretAfterNode(e)):e&&this.removeTags(e),this.trigger("edit:updated",n),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag(e,t){t&&t.value||(t=e.__tagifyTagData),t.__isValid&&1!=t.__isValid&&h(t,this.getInvalidTagAttrs(t,t.__isValid));var n=this.createTagElem(t);return e.parentNode.replaceChild(n,e),this.updateValueByDOMTags(),n},updateValueByDOMTags(){this.value.length=0,[].forEach.call(this.getTagElms(),(e=>{e.classList.contains(this.settings.classNames.tagNotAllowed.split(" ")[0])||this.value.push(b(e))})),this.update()},injectAtCaret(e,t){return!(t=t||this.state.selection?.range)&&e?(this.appendMixTags(e),this):(v(e,t),this.setRangeAtStartEnd(!1,e),this.updateValueByDOMTags(),this.update(),this)},input:{set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=this.settings.dropdown.closeOnSelect;this.state.inputText=e,t&&(this.DOM.input.innerHTML=c(""+e)),!e&&n&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw(){return this.DOM.input.textContent},validate(){var e=!this.state.inputText||!0===this.validateTag({value:this.state.inputText});return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!e),e},normalize(e){var t=e||this.DOM.input,n=[];t.childNodes.forEach((e=>3==e.nodeType&&n.push(e.nodeValue))),n=n.join("\n");try{n=n.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch(e){}return n=n.replace(/\s/g," "),this.trim(n)},autocomplete:{suggest(e){if(this.settings.autoComplete.enabled){"string"==typeof(e=e||{value:""})&&(e={value:e});var t=this.dropdown.getMappedValue(e);if("number"!=typeof t){var n=t.substr(0,this.state.inputText.length).toLowerCase(),i=t.substring(this.state.inputText.length);t&&this.state.inputText&&n==this.state.inputText.toLowerCase()?(this.DOM.input.setAttribute("data-suggest",i),this.state.inputSuggestion=e):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set(e){var t=this.DOM.input.getAttribute("data-suggest"),n=e||(t?this.state.inputText+t:null);return!!n&&("mix"==this.settings.mode?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx(e){return this.value.findIndex((t=>t.__tagId==(e||{}).__tagId))},getNodeIndex(e){var t=0;if(e)for(;e=e.previousElementSibling;)t++;return t},getTagElms(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i="."+[...this.settings.classNames.tag.split(" "),...t].join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag(){var e=this.DOM.scope.querySelectorAll(`${this.settings.classNames.tagSelector}:not(.${this.settings.classNames.tagHide}):not([readonly])`);return e[e.length-1]},isTagDuplicate(e,t,n){var o=0;if("select"==this.settings.mode)return!1;for(let r of this.value)i(this.trim(""+e),r.value,t)&&n!=r.__tagId&&o++;return o},getTagIndexByValue(e){var t=[];return this.getTagElms().forEach(((n,o)=>{i(this.trim(n.textContent),e,this.settings.dropdown.caseSensitive)&&t.push(o)})),t},getTagElmByValue(e){var t=this.getTagIndexByValue(e)[0];return this.getTagElms()[t]},flashTag(e){e&&(e.classList.add(this.settings.classNames.tagFlash),setTimeout((()=>{e.classList.remove(this.settings.classNames.tagFlash)}),100))},isTagBlacklisted(e){return e=this.trim(e.toLowerCase()),this.settings.blacklist.filter((t=>(""+t).toLowerCase()==e)).length},isTagWhitelisted(e){return!!this.getWhitelistItem(e)},getWhitelistItem(e,t,n){t=t||"value";var o,r=this.settings;return(n=n||r.whitelist).some((n=>{var s="string"==typeof n?n:n[t]||n.value;if(i(s,e,r.dropdown.caseSensitive,r.trim))return o="string"==typeof n?{value:n}:n,!0})),o||"value"!=t||"value"==r.tagTextProp||(o=this.getWhitelistItem(e,r.tagTextProp,n)),o},validateTag(e){var t=this.settings,n="value"in e?"value":t.tagTextProp,i=this.trim(e[n]+"");return(e[n]+"").trim()?t.pattern&&t.pattern instanceof RegExp&&!t.pattern.test(i)?this.TEXTS.pattern:!t.duplicates&&this.isTagDuplicate(i,t.dropdown.caseSensitive,e.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(i)||t.enforceWhitelist&&!this.isTagWhitelisted(i)?this.TEXTS.notAllowed:!t.validate||t.validate(e):this.TEXTS.empty},getInvalidTagAttrs(e,t){return{"aria-invalid":!0,class:`${e.class||""} ${this.settings.classNames.tagNotAllowed}`.trim(),title:t}},hasMaxTags(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly(e,t){var n=this.settings;document.activeElement.blur(),n[t||"readonly"]=e,this.DOM.scope[(e?"set":"remove")+"Attribute"](t||"readonly",!0),this.setContentEditable(!e)},setContentEditable(e){this.settings.userInput&&(this.DOM.input.contentEditable=e,this.DOM.input.tabIndex=e?0:-1)},setDisabled(e){this.setReadonly(e,"disabled")},normalizeTags(e){var t=this.settings,n=t.whitelist,i=t.delimiters,o=t.mode,r=t.tagTextProp,s=[],a=!!n&&n[0]instanceof Object,l=Array.isArray(e),c=l&&e[0].value,d=e=>(e+"").split(i).filter((e=>e)).map((e=>({[r]:this.trim(e),value:this.trim(e)})));if("number"==typeof e&&(e=e.toString()),"string"==typeof e){if(!e.trim())return[];e=d(e)}else l&&(e=[].concat(...e.map((e=>e.value?e:d(e)))));return a&&!c&&(e.forEach((e=>{var t=s.map((e=>e.value)),n=this.dropdown.filterListItems.call(this,e[r],{exact:!0});this.settings.duplicates||(n=n.filter((e=>!t.includes(e.value))));var i=n.length>1?this.getWhitelistItem(e[r],r,n):n[0];i&&i instanceof Object?s.push(i):"mix"!=o&&(null==e.value&&(e.value=e[r]),s.push(e))})),s.length&&(e=s)),e},parseMixTags(e){var t=this.settings,n=t.mixTagsInterpolator,i=t.duplicates,o=t.transformTag,r=t.enforceWhitelist,s=t.maxTags,a=t.tagTextProp,l=[];return e=e.split(n[0]).map(((e,t)=>{var c,d,h,u=e.split(n[1]),p=u[0],f=l.length==s;try{if(p==+p)throw Error;d=JSON.parse(p)}catch(e){d=this.normalizeTags(p)[0]||{value:p}}if(o.call(this,d),f||!(u.length>1)||r&&!this.isTagWhitelisted(d.value)||!i&&this.isTagDuplicate(d.value)){if(e)return t?n[0]+e:e}else d[c=d[a]?a:"value"]=this.trim(d[c]),h=this.createTagElem(d),l.push(d),h.classList.add(this.settings.classNames.tagNoAnimation),u[0]=h.outerHTML,this.value.push(d);return u.join("")})).join(""),this.DOM.input.innerHTML=e,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize(),this.getTagElms().forEach(((e,t)=>b(e,l[t]))),this.update({withoutChangeEvent:!0}),e},replaceTextWithNode(e,t){if(this.state.tag||t){t=t||this.state.tag.prefix+this.state.tag.value;var n,i,o=this.state.selection||window.getSelection(),r=o.anchorNode,s=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return r.splitText(o.anchorOffset-s),-1==(n=r.nodeValue.lastIndexOf(t))||(i=r.splitText(n),e&&r.parentNode.replaceChild(e,i)),!0}},selectTag(e,t){var n=this.settings;if(!n.enforceWhitelist||this.isTagWhitelisted(t.value)){this.input.set.call(this,t[n.tagTextProp]||t.value,!0),this.state.actions.selectOption&&setTimeout((()=>this.setRangeAtStartEnd(!1,this.DOM.input)));var i=this.getLastTag();return i?this.replaceTag(i,t):this.appendTag(e),this.value[0]=t,this.update(),this.trigger("add",{tag:e,data:t}),[e]}},addEmptyTag(e){var t=h({value:""},e||{}),n=this.createTagElem(t);b(n,t),this.appendTag(n),this.editTag(n,{skipValidation:!0})},addTags(e,t,n){var i=[],o=this.settings,r=[],s=document.createDocumentFragment();if(n=n||o.skipInvalid,!e||0==e.length)return i;switch(e=this.normalizeTags(e),o.mode){case"mix":return this.addMixTags(e);case"select":t=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),e.forEach((e=>{var t,a={},l=Object.assign({},e,{value:e.value+""});if(e=Object.assign({},l),o.transformTag.call(this,e),e.__isValid=this.hasMaxTags()||this.validateTag(e),!0!==e.__isValid){if(n)return;if(h(a,this.getInvalidTagAttrs(e,e.__isValid),{__preInvalidData:l}),e.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(e.value)),!o.createInvalidTags)return void r.push(e.value)}if("readonly"in e&&(e.readonly?a["aria-readonly"]=!0:delete e.readonly),t=this.createTagElem(e,a),i.push(t),"select"==o.mode)return this.selectTag(t,e);s.appendChild(t),e.__isValid&&!0===e.__isValid?(this.value.push(e),this.trigger("add",{tag:t,index:this.value.length-1,data:e})):(this.trigger("invalid",{data:e,index:this.value.length,tag:t,message:e.__isValid}),o.keepInvalidTags||setTimeout((()=>this.removeTags(t,!0)),1e3)),this.dropdown.position()})),this.appendTag(s),this.update(),e.length&&t&&(this.input.set.call(this,o.createInvalidTags?"":r.join(o._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),o.dropdown.enabled&&this.dropdown.refilter(),i},addMixTags(e){if((e=this.normalizeTags(e))[0].prefix||this.state.tag)return this.prefixedTextToTag(e[0]);"string"==typeof e&&(e=[{value:e}]);var t=document.createDocumentFragment();return e.forEach((e=>{var n=this.createTagElem(e);t.appendChild(n),this.insertAfterTag(n)})),this.appendMixTags(t),t},appendMixTags(e){var t=!!this.state.selection;t?this.injectAtCaret(e):(this.DOM.input.focus(),(t=this.setStateSelection()).range.setStart(this.DOM.input,t.range.endOffset),t.range.setEnd(this.DOM.input,t.range.endOffset),this.DOM.input.appendChild(e),this.updateValueByDOMTags(),this.update())},prefixedTextToTag(e){var t,n=this.settings,i=this.state.tag.delimiters;if(n.transformTag.call(this,e),e.prefix=e.prefix||this.state.tag?this.state.tag.prefix:(n.pattern.source||n.pattern)[0],t=this.createTagElem(e),this.replaceTextWithNode(t)||this.DOM.input.appendChild(t),setTimeout((()=>t.classList.add(this.settings.classNames.tagNoAnimation)),300),this.value.push(e),this.update(),!i){var o=this.insertAfterTag(t)||t;this.placeCaretAfterNode(o)}return this.state.tag=null,this.trigger("add",h({},{tag:t},{data:e})),t},appendTag(e){var t=this.DOM,n=t.input;t.scope.insertBefore(e,n)},createTagElem(e,n){e.__tagId=g();var i,o=h({},e,t({value:c(e.value+"")},n));return function(e){for(var t,n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);t=n.nextNode();)t.textContent.trim()||t.parentNode.removeChild(t)}(i=this.parseTemplate("tag",[o,this])),b(i,e),i},reCheckInvalidTags(){var e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(((t,n)=>{var i=b(t),o=this.hasMaxTags(),r=this.validateTag(i),s=!0===r&&!o;if("select"==e.mode&&this.toggleScopeValidation(r),s)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},this.replaceTag(t,i);t.title=o||r}))},removeTags(e,t,n){var i,o=this.settings;if(e=e&&e instanceof HTMLElement?[e]:e instanceof Array?e:e?[e]:[this.getLastTag()],i=e.reduce(((e,t)=>{t&&"string"==typeof t&&(t=this.getTagElmByValue(t));var n=b(t);return t&&n&&!n.readonly&&e.push({node:t,idx:this.getTagIdx(n),data:b(t,{__removed:!0})}),e}),[]),n="number"==typeof n?n:this.CSSVars.tagHideTransition,"select"==o.mode&&(n=0,this.input.set.call(this)),1==i.length&&"select"!=o.mode&&i[0].node.classList.contains(o.classNames.tagNotAllowed)&&(t=!0),i.length)return o.hooks.beforeRemoveTag(i,{tagify:this}).then((()=>{function e(e){e.node.parentNode&&(e.node.parentNode.removeChild(e.node),t?o.keepInvalidTags&&this.trigger("remove",{tag:e.node,index:e.idx}):(this.trigger("remove",{tag:e.node,index:e.idx,data:e.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),o.keepInvalidTags&&this.reCheckInvalidTags()))}n&&n>10&&1==i.length?function(t){t.node.style.width=parseFloat(window.getComputedStyle(t.node).width)+"px",document.body.clientTop,t.node.classList.add(o.classNames.tagHide),setTimeout(e.bind(this),n,t)}.call(this,i[0]):i.forEach(e.bind(this)),t||(this.removeTagsFromValue(i.map((e=>e.node))),this.update(),"select"==o.mode&&this.setContentEditable(!0))})).catch((e=>{}))},removeTagsFromDOM(){[].slice.call(this.getTagElms()).forEach((e=>e.parentNode.removeChild(e)))},removeTagsFromValue(e){(e=Array.isArray(e)?e:[e]).forEach((e=>{var t=b(e),n=this.getTagIdx(t);n>-1&&this.value.splice(n,1)}))},removeAllTags(e){e=e||{},this.value=[],"mix"==this.settings.mode?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout((()=>{this.DOM.input.focus()})),"select"==this.settings.mode&&(this.input.set.call(this),this.setContentEditable(!0)),this.update(e)},postUpdate(){var e=this.settings,t=e.classNames,n="mix"==e.mode?e.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(t.hasMaxTags,this.value.length>=e.maxTags),this.toggleClass(t.hasNoTags,!this.value.length),this.toggleClass(t.empty,!n),"select"==e.mode&&this.toggleScopeValidation(this.value?.[0]?.__isValid)},setOriginalInputValue(e){var t=this.DOM.originalInput;this.settings.mixMode.integrated||(t.value=e,t.tagifyValue=t.value,this.setPersistedData(e,"value"))},update(e){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var t=this.getInputValue();this.setOriginalInputValue(t),this.postUpdate(),this.settings.onChangeAfterBlur&&(e||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent()}.bind(this),100)},getInputValue(){var e=this.getCleanValue();return"mix"==this.settings.mode?this.getMixedTagsAsString(e):e.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(e):JSON.stringify(e):""},getCleanValue(e){return o(e||this.value,this.dataProps)},getMixedTagsAsString(){var e="",t=this,n=this.settings,i=n.originalInputValueFormat||JSON.stringify,o=n.mixTagsInterpolator;return function n(s){s.childNodes.forEach((s=>{if(1==s.nodeType){const a=b(s);if("BR"==s.tagName&&(e+="\r\n"),a&&m.call(t,s)){if(a.__removed)return;e+=o[0]+i(r(a,t.dataProps))+o[1]}else s.getAttribute("style")||["B","I","U"].includes(s.tagName)?e+=s.textContent:"DIV"!=s.tagName&&"P"!=s.tagName||(e+="\r\n",n(s))}else e+=s.textContent}))}(this.DOM.input),e}},_.prototype.removeTag=_.prototype.removeTags,_}()},9931:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i="#fff",o="20px";var r,s,a='"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace',l="40px",c="\n  .codeflask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .codeflask, .codeflask * {\n    box-sizing: border-box;\n  }\n\n  .codeflask__pre {\n    pointer-events: none;\n    z-index: 3;\n    overflow: hidden;\n  }\n\n  .codeflask__textarea {\n    background: none;\n    border: none;\n    color: "+(r="caret-color",s="#000",("undefined"!=typeof CSS?CSS.supports(r,s):"undefined"!=typeof document&&function(e){return(e=e.split("-").filter((function(e){return!!e})).map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(""))[0].toLowerCase()+e.substr(1)}(r)in document.body.style)?i:"#ccc")+";\n    z-index: 1;\n    resize: none;\n    font-family: "+a+";\n    -webkit-appearance: pre;\n    caret-color: #111;\n    z-index: 2;\n    width: 100%;\n    height: 100%;\n  }\n\n  .codeflask--has-line-numbers .codeflask__textarea {\n    width: calc(100% - "+l+");\n  }\n\n  .codeflask__code {\n    display: block;\n    font-family: "+a+";\n    overflow: hidden;\n  }\n\n  .codeflask__flatten {\n    padding: 10px;\n    font-size: 13px;\n    line-height: "+o+";\n    white-space: pre;\n    position: absolute;\n    top: 0;\n    left: 0;\n    overflow: auto;\n    margin: 0 !important;\n    outline: none;\n    text-align: left;\n  }\n\n  .codeflask--has-line-numbers .codeflask__flatten {\n    width: calc(100% - "+l+");\n    left: "+l+";\n  }\n\n  .codeflask__line-highlight {\n    position: absolute;\n    top: 10px;\n    left: 0;\n    width: 100%;\n    height: "+o+";\n    background: rgba(0,0,0,0.1);\n    z-index: 1;\n  }\n\n  .codeflask__lines {\n    padding: 10px 4px;\n    font-size: 12px;\n    line-height: "+o+";\n    font-family: 'Cousine', monospace;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: "+l+";\n    height: 100%;\n    text-align: right;\n    color: #999;\n    z-index: 2;\n  }\n\n  .codeflask__lines__line {\n    display: block;\n  }\n\n  .codeflask.codeflask--has-line-numbers {\n    padding-left: "+l+";\n  }\n\n  .codeflask.codeflask--has-line-numbers:before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: "+l+";\n    height: 100%;\n    background: #eee;\n    z-index: 1;\n  }\n";function d(e,t,n){var i=t||"codeflask-style",o=n||document.head;if(!e)return!1;if(document.getElementById(i))return!0;var r=document.createElement("style");return r.innerHTML=e,r.id=i,o.appendChild(r),!0}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function u(e){return String(e).replace(/[&<>"'`=/]/g,(function(e){return h[e]}))}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};var f=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,n=0,i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):Array.isArray(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,r,s=i.util.type(t);switch(n=n||{},s){case"Object":if(r=i.util.objId(t),n[r])return n[r];for(var a in o={},n[r]=o,t)t.hasOwnProperty(a)&&(o[a]=e(t[a],n));return o;case"Array":return r=i.util.objId(t),n[r]?n[r]:(o=[],n[r]=o,t.forEach((function(t,i){o[i]=e(t,n)})),o);default:return t}}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var r=(o=o||i.languages)[e],s={};for(var a in r)if(r.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=r[a])}var c=o[e];return o[e]=s,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,o,r){r=r||{};var s=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],o||a);var l=t[a],c=i.util.type(l);"Object"!==c||r[s(l)]?"Array"!==c||r[s(l)]||(r[s(l)]=!0,e(l,n,a,r)):(r[s(l)]=!0,e(l,n,null,r))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",o);for(var r,s=o.elements||e.querySelectorAll(o.selector),a=0;r=s[a++];)i.highlightElement(r,!0===t,o.callback)},highlightElement:function(n,o,r){for(var s,a,l=n;l&&!t.test(l.className);)l=l.parentNode;l&&(s=(l.className.match(t)||[,""])[1].toLowerCase(),a=i.languages[s]),n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+s,n.parentNode&&(l=n.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+s));var c={element:n,language:s,grammar:a,code:n.textContent},d=function(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),r&&r.call(c.element)};if(i.hooks.run("before-sanity-check",c),c.code)if(i.hooks.run("before-highlight",c),c.grammar)if(o&&e.Worker){var h=new Worker(i.filename);h.onmessage=function(e){d(e.data)},h.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else d(i.highlight(c.code,c.grammar,c.language));else d(i.util.encode(c.code));else i.hooks.run("complete",c)},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};return i.hooks.run("before-tokenize",r),r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},matchGrammar:function(e,t,n,r,s,a,l){for(var c in n)if(n.hasOwnProperty(c)&&n[c]){if(c==l)return;var d=n[c];d="Array"===i.util.type(d)?d:[d];for(var h=0;h<d.length;++h){var u=d[h],p=u.inside,f=!!u.lookbehind,g=!!u.greedy,m=0,v=u.alias;if(g&&!u.pattern.global){var b=u.pattern.toString().match(/[imuy]*$/)[0];u.pattern=RegExp(u.pattern.source,b+"g")}u=u.pattern||u;for(var y=r,w=s;y<t.length;w+=t[y].length,++y){var k=t[y];if(t.length>e.length)return;if(!(k instanceof o)){if(g&&y!=t.length-1){if(u.lastIndex=w,!(_=u.exec(e)))break;for(var x=_.index+(f?_[1].length:0),S=_.index+_[0].length,C=y,E=w,T=t.length;C<T&&(E<S||!t[C].type&&!t[C-1].greedy);++C)x>=(E+=t[C].length)&&(++y,w=E);if(t[y]instanceof o)continue;A=C-y,k=e.slice(w,E),_.index-=w}else{u.lastIndex=0;var _=u.exec(k),A=1}if(_){f&&(m=_[1]?_[1].length:0),S=(x=_.index+m)+(_=_[0].slice(m)).length;var O=k.slice(0,x),M=k.slice(S),I=[y,A];O&&(++y,w+=O.length,I.push(O));var D=new o(c,p?i.tokenize(_,p):_,v,_,g);if(I.push(D),M&&I.push(M),Array.prototype.splice.apply(t,I),1!=A&&i.matchGrammar(e,t,n,y,w,!0,c),a)break}else if(a)break}}}}},tokenize:function(e,t){var n=[e],o=t.rest;if(o){for(var r in o)t[r]=o[r];delete t.rest}return i.matchGrammar(e,n,t,0,0,!1),n},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}},Token:o};function o(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length,this.greedy=!!o}if(e.Prism=i,o.stringify=function(e,t,n){if("string"==typeof e)return e;if(Array.isArray(e))return e.map((function(n){return o.stringify(n,t,e)})).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if(e.alias){var s=Array.isArray(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a=Object.keys(r.attributes).map((function(e){return e+'="'+(r.attributes[e]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+(a?" "+a:"")+">"+r.content+"</"+r.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,r=n.code,s=n.immediateClose;e.postMessage(i.highlight(r,i.languages[o],o)),s&&e.close()}),!1),i):i;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,i.manual||r.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(i.highlightAll):window.setTimeout(i.highlightAll,16):document.addEventListener("DOMContentLoaded",i.highlightAll))),i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=t),void 0!==p&&(p.Prism=t),t.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(e,n){var i={};i["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[n]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+n]={pattern:/[\s\S]+/,inside:t.languages[n]};var r={};r[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",r)}}),t.languages.xml=t.languages.extend("markup",{}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?[\s\S]*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:RegExp("url\\((?:"+t.source+"|.*?)\\)","i"),selector:RegExp("[^{}\\s](?:[^{};\"']|"+t.source+")*?(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:e.languages.css}},alias:"language-css"}},n.tag))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+)n?|\d+n|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&t.languages.markup.tag.addInlined("script","javascript"),t.languages.js=t.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(e){e=e||document;var n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(e.querySelectorAll("pre[data-src]")).forEach((function(e){if(!e.hasAttribute("data-src-loaded")){for(var i,o=e.getAttribute("data-src"),r=e,s=/\blang(?:uage)?-([\w-]+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(i=(e.className.match(s)||[,""])[1]),!i){var a=(o.match(/\.(\w+)$/)||[,""])[1];i=n[a]||a}var l=document.createElement("code");l.className="language-"+i,e.textContent="",l.textContent="Loading…",e.appendChild(l);var c=new XMLHttpRequest;c.open("GET",o,!0),c.onreadystatechange=function(){4==c.readyState&&(c.status<400&&c.responseText?(l.textContent=c.responseText,t.highlightElement(l),e.setAttribute("data-src-loaded","")):c.status>=400?l.textContent="✖ Error "+c.status+" while fetching file: "+c.statusText:l.textContent="✖ Error: File does not exist or is empty")},c.send(null)}})),t.plugins.toolbar&&t.plugins.toolbar.registerButton("download-file",(function(e){var t=e.element.parentNode;if(t&&/pre/i.test(t.nodeName)&&t.hasAttribute("data-src")&&t.hasAttribute("data-download-link")){var n=t.getAttribute("data-src"),i=document.createElement("a");return i.textContent=t.getAttribute("data-download-link-label")||"Download",i.setAttribute("download",""),i.href=n,i}}))},document.addEventListener("DOMContentLoaded",(function(){self.Prism.fileHighlight()})))})),g=function(e,t){if(!e)throw Error("CodeFlask expects a parameter which is Element or a String selector");if(!t)throw Error("CodeFlask expects an object containing options as second parameter");if(e.nodeType)this.editorRoot=e;else{var n=document.querySelector(e);n&&(this.editorRoot=n)}this.opts=t,this.startEditor()};g.prototype.startEditor=function(){if(!d(c,null,this.opts.styleParent))throw Error("Failed to inject CodeFlask CSS.");this.createWrapper(),this.createTextarea(),this.createPre(),this.createCode(),this.runOptions(),this.listenTextarea(),this.populateDefault(),this.updateCode(this.code)},g.prototype.createWrapper=function(){this.code=this.editorRoot.innerHTML,this.editorRoot.innerHTML="",this.elWrapper=this.createElement("div",this.editorRoot),this.elWrapper.classList.add("codeflask")},g.prototype.createTextarea=function(){this.elTextarea=this.createElement("textarea",this.elWrapper),this.elTextarea.classList.add("codeflask__textarea","codeflask__flatten")},g.prototype.createPre=function(){this.elPre=this.createElement("pre",this.elWrapper),this.elPre.classList.add("codeflask__pre","codeflask__flatten")},g.prototype.createCode=function(){this.elCode=this.createElement("code",this.elPre),this.elCode.classList.add("codeflask__code","language-"+(this.opts.language||"html"))},g.prototype.createLineNumbers=function(){this.elLineNumbers=this.createElement("div",this.elWrapper),this.elLineNumbers.classList.add("codeflask__lines"),this.setLineNumber()},g.prototype.createElement=function(e,t){var n=document.createElement(e);return t.appendChild(n),n},g.prototype.runOptions=function(){this.opts.rtl=this.opts.rtl||!1,this.opts.tabSize=this.opts.tabSize||2,this.opts.enableAutocorrect=this.opts.enableAutocorrect||!1,this.opts.lineNumbers=this.opts.lineNumbers||!1,this.opts.defaultTheme=!1!==this.opts.defaultTheme,this.opts.areaId=this.opts.areaId||null,this.opts.ariaLabelledby=this.opts.ariaLabelledby||null,this.opts.readonly=this.opts.readonly||null,"boolean"!=typeof this.opts.handleTabs&&(this.opts.handleTabs=!0),"boolean"!=typeof this.opts.handleSelfClosingCharacters&&(this.opts.handleSelfClosingCharacters=!0),"boolean"!=typeof this.opts.handleNewLineIndentation&&(this.opts.handleNewLineIndentation=!0),!0===this.opts.rtl&&(this.elTextarea.setAttribute("dir","rtl"),this.elPre.setAttribute("dir","rtl")),!1===this.opts.enableAutocorrect&&(this.elTextarea.setAttribute("spellcheck","false"),this.elTextarea.setAttribute("autocapitalize","off"),this.elTextarea.setAttribute("autocomplete","off"),this.elTextarea.setAttribute("autocorrect","off")),this.opts.lineNumbers&&(this.elWrapper.classList.add("codeflask--has-line-numbers"),this.createLineNumbers()),this.opts.defaultTheme&&d("\n.codeflask {\n  background: #fff;\n  color: #4f559c;\n}\n\n.codeflask .token.punctuation {\n  color: #4a4a4a;\n}\n\n.codeflask .token.keyword {\n  color: #8500ff;\n}\n\n.codeflask .token.operator {\n  color: #ff5598;\n}\n\n.codeflask .token.string {\n  color: #41ad8f;\n}\n\n.codeflask .token.comment {\n  color: #9badb7;\n}\n\n.codeflask .token.function {\n  color: #8500ff;\n}\n\n.codeflask .token.boolean {\n  color: #8500ff;\n}\n\n.codeflask .token.number {\n  color: #8500ff;\n}\n\n.codeflask .token.selector {\n  color: #8500ff;\n}\n\n.codeflask .token.property {\n  color: #8500ff;\n}\n\n.codeflask .token.tag {\n  color: #8500ff;\n}\n\n.codeflask .token.attr-value {\n  color: #8500ff;\n}\n","theme-default",this.opts.styleParent),this.opts.areaId&&this.elTextarea.setAttribute("id",this.opts.areaId),this.opts.ariaLabelledby&&this.elTextarea.setAttribute("aria-labelledby",this.opts.ariaLabelledby),this.opts.readonly&&this.enableReadonlyMode()},g.prototype.updateLineNumbersCount=function(){for(var e="",t=1;t<=this.lineNumber;t++)e=e+'<span class="codeflask__lines__line">'+t+"</span>";this.elLineNumbers.innerHTML=e},g.prototype.listenTextarea=function(){var e=this;this.elTextarea.addEventListener("input",(function(t){e.code=t.target.value,e.elCode.innerHTML=u(t.target.value),e.highlight(),setTimeout((function(){e.runUpdate(),e.setLineNumber()}),1)})),this.elTextarea.addEventListener("keydown",(function(t){e.handleTabs(t),e.handleSelfClosingCharacters(t),e.handleNewLineIndentation(t)})),this.elTextarea.addEventListener("scroll",(function(t){e.elPre.style.transform="translate3d(-"+t.target.scrollLeft+"px, -"+t.target.scrollTop+"px, 0)",e.elLineNumbers&&(e.elLineNumbers.style.transform="translate3d(0, -"+t.target.scrollTop+"px, 0)")}))},g.prototype.handleTabs=function(e){if(this.opts.handleTabs){if(9!==e.keyCode)return;e.preventDefault();var t=this.elTextarea,n=t.selectionDirection,i=t.selectionStart,o=t.selectionEnd,r=t.value,s=r.substr(0,i),a=r.substring(i,o),l=r.substring(o),c=" ".repeat(this.opts.tabSize);if(i!==o&&a.length>=c.length){var d=i-s.split("\n").pop().length,h=c.length,u=c.length;e.shiftKey?(r.substr(d,c.length)===c?(h=-h,d>i?(a=a.substring(0,d)+a.substring(d+c.length),u=0):d===i?(h=0,u=0,a=a.substring(c.length)):(u=-u,s=s.substring(0,d)+s.substring(d+c.length))):(h=0,u=0),a=a.replace(new RegExp("\n"+c.split("").join("\\"),"g"),"\n")):(s=s.substr(0,d)+c+s.substring(d,i),a=a.replace(/\n/g,"\n"+c)),t.value=s+a+l,t.selectionStart=i+h,t.selectionEnd=i+a.length+u,t.selectionDirection=n}else t.value=s+c+l,t.selectionStart=i+c.length,t.selectionEnd=i+c.length;var p=t.value;this.updateCode(p),this.elTextarea.selectionEnd=o+this.opts.tabSize}},g.prototype.handleSelfClosingCharacters=function(e){if(this.opts.handleSelfClosingCharacters){var t=e.key;if(["(","[","{","<","'",'"'].includes(t)||[")","]","}",">","'",'"'].includes(t))switch(t){case"(":case")":case"[":case"]":case"{":case"}":case"<":case">":case"'":case'"':this.closeCharacter(t)}}},g.prototype.setLineNumber=function(){this.lineNumber=this.code.split("\n").length,this.opts.lineNumbers&&this.updateLineNumbersCount()},g.prototype.handleNewLineIndentation=function(e){if(this.opts.handleNewLineIndentation&&13===e.keyCode){e.preventDefault();var t=this.elTextarea,n=t.selectionStart,i=t.selectionEnd,o=t.value,r=o.substr(0,n),s=o.substring(i),a=o.lastIndexOf("\n",n-1),l=a+o.slice(a+1).search(/[^ ]|$/),c=l>a?l-a:0,d=r+"\n"+" ".repeat(c)+s;t.value=d,t.selectionStart=n+c+1,t.selectionEnd=n+c+1,this.updateCode(t.value)}},g.prototype.closeCharacter=function(e){var t=this.elTextarea.selectionStart,n=this.elTextarea.selectionEnd;if(this.skipCloseChar(e)){var i=this.code.substr(n,1)===e,o=i?n+1:n,r=!i&&["'",'"'].includes(e)?e:"",s=""+this.code.substring(0,t)+r+this.code.substring(o);this.updateCode(s),this.elTextarea.selectionEnd=++this.elTextarea.selectionStart}else{var a=e;switch(e){case"(":a=String.fromCharCode(e.charCodeAt()+1);break;case"<":case"{":case"[":a=String.fromCharCode(e.charCodeAt()+2)}var l=this.code.substring(t,n),c=""+this.code.substring(0,t)+l+a+this.code.substring(n);this.updateCode(c)}this.elTextarea.selectionEnd=t},g.prototype.skipCloseChar=function(e){var t=this.elTextarea.selectionStart,n=this.elTextarea.selectionEnd,i=Math.abs(n-t)>0;return[")","}","]",">"].includes(e)||["'",'"'].includes(e)&&!i},g.prototype.updateCode=function(e){this.code=e,this.elTextarea.value=e,this.elCode.innerHTML=u(e),this.highlight(),this.setLineNumber(),setTimeout(this.runUpdate.bind(this),1)},g.prototype.updateLanguage=function(e){var t=this.opts.language;this.elCode.classList.remove("language-"+t),this.elCode.classList.add("language-"+e),this.opts.language=e,this.highlight()},g.prototype.addLanguage=function(e,t){f.languages[e]=t},g.prototype.populateDefault=function(){this.updateCode(this.code)},g.prototype.highlight=function(){f.highlightElement(this.elCode,!1)},g.prototype.onUpdate=function(e){if(e&&"[object Function]"!=={}.toString.call(e))throw Error("CodeFlask expects callback of type Function");this.updateCallBack=e},g.prototype.getCode=function(){return this.code},g.prototype.runUpdate=function(){this.updateCallBack&&this.updateCallBack(this.code)},g.prototype.enableReadonlyMode=function(){this.elTextarea.setAttribute("readonly",!0)},g.prototype.disableReadonlyMode=function(){this.elTextarea.removeAttribute("readonly")};const m=g},7856:function(e){
/*! @license DOMPurify 3.0.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.4/LICENSE */
e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:i,getOwnPropertyDescriptor:o}=Object;let{freeze:r,seal:s,create:a}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;l||(l=function(e,t,n){return e.apply(t,n)}),r||(r=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t){return new e(...t)});const d=k(Array.prototype.forEach),h=k(Array.prototype.pop),u=k(Array.prototype.push),p=k(String.prototype.toLowerCase),f=k(String.prototype.toString),g=k(String.prototype.match),m=k(String.prototype.replace),v=k(String.prototype.indexOf),b=k(String.prototype.trim),y=k(RegExp.prototype.test),w=x(TypeError);function k(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return l(e,t,i)}}function x(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return c(e,n)}}function S(e,i,o){var r;o=null!==(r=o)&&void 0!==r?r:p,t&&t(e,null);let s=i.length;for(;s--;){let t=i[s];if("string"==typeof t){const e=o(t);e!==t&&(n(i)||(i[s]=e),t=e)}e[t]=!0}return e}function C(t){const n=a(null);for(const[i,o]of e(t))n[i]=o;return n}function E(e,t){for(;null!==e;){const n=o(e,t);if(n){if(n.get)return k(n.get);if("function"==typeof n.value)return k(n.value)}e=i(e)}function n(e){return console.warn("fallback value for",e),null}return n}const T=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=r(["#text"]),N=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=s(/<%[\w\W]*|[\w\W]*%>/gm),z=s(/\${[\w\W]*}/gm),H=s(/^data-[\-\w.\u00B7-\uFFFF]/),j=s(/^aria-[\-\w]+$/),G=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=s(/^(?:\w+script|data):/i),$=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W=s(/^html$/i);var V=Object.freeze({__proto__:null,MUSTACHE_EXPR:P,ERB_EXPR:F,TMPLIT_EXPR:z,DATA_ATTR:H,ARIA_ATTR:j,IS_ALLOWED_URI:G,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:$,DOCTYPE_NAME:W});const q=()=>"undefined"==typeof window?null:window,Y=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function K(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q();const n=e=>K(e);if(n.version="3.0.4",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const i=t.document,o=i.currentScript;let{document:s}=t;const{DocumentFragment:a,HTMLTemplateElement:l,Node:c,Element:k,NodeFilter:x,NamedNodeMap:P=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:F,DOMParser:z,trustedTypes:H}=t,j=k.prototype,U=E(j,"cloneNode"),$=E(j,"nextSibling"),Z=E(j,"childNodes"),X=E(j,"parentNode");if("function"==typeof l){const e=s.createElement("template");e.content&&e.content.ownerDocument&&(s=e.content.ownerDocument)}let J,Q="";const{implementation:ee,createNodeIterator:te,createDocumentFragment:ne,getElementsByTagName:ie}=s,{importNode:oe}=i;let re={};n.isSupported="function"==typeof e&&"function"==typeof X&&ee&&void 0!==ee.createHTMLDocument;const{MUSTACHE_EXPR:se,ERB_EXPR:ae,TMPLIT_EXPR:le,DATA_ATTR:ce,ARIA_ATTR:de,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:ue}=V;let{IS_ALLOWED_URI:pe}=V,fe=null;const ge=S({},[...T,..._,...A,...M,...D]);let me=null;const ve=S({},[...N,...R,...B,...L]);let be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ye=null,we=null,ke=!0,xe=!0,Se=!1,Ce=!0,Ee=!1,Te=!1,_e=!1,Ae=!1,Oe=!1,Me=!1,Ie=!1,De=!0,Ne=!1;const Re="user-content-";let Be=!0,Le=!1,Pe={},Fe=null;const ze=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let He=null;const je=S({},["audio","video","img","source","image","track"]);let Ge=null;const Ue=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$e="http://www.w3.org/1998/Math/MathML",We="http://www.w3.org/2000/svg",Ve="http://www.w3.org/1999/xhtml";let qe=Ve,Ye=!1,Ke=null;const Ze=S({},[$e,We,Ve],f);let Xe;const Je=["application/xhtml+xml","text/html"],Qe="text/html";let et,tt=null;const nt=s.createElement("form"),it=function(e){return e instanceof RegExp||e instanceof Function},ot=function(e){if(!tt||tt!==e){if(e&&"object"==typeof e||(e={}),e=C(e),Xe=Xe=-1===Je.indexOf(e.PARSER_MEDIA_TYPE)?Qe:e.PARSER_MEDIA_TYPE,et="application/xhtml+xml"===Xe?f:p,fe="ALLOWED_TAGS"in e?S({},e.ALLOWED_TAGS,et):ge,me="ALLOWED_ATTR"in e?S({},e.ALLOWED_ATTR,et):ve,Ke="ALLOWED_NAMESPACES"in e?S({},e.ALLOWED_NAMESPACES,f):Ze,Ge="ADD_URI_SAFE_ATTR"in e?S(C(Ue),e.ADD_URI_SAFE_ATTR,et):Ue,He="ADD_DATA_URI_TAGS"in e?S(C(je),e.ADD_DATA_URI_TAGS,et):je,Fe="FORBID_CONTENTS"in e?S({},e.FORBID_CONTENTS,et):ze,ye="FORBID_TAGS"in e?S({},e.FORBID_TAGS,et):{},we="FORBID_ATTR"in e?S({},e.FORBID_ATTR,et):{},Pe="USE_PROFILES"in e&&e.USE_PROFILES,ke=!1!==e.ALLOW_ARIA_ATTR,xe=!1!==e.ALLOW_DATA_ATTR,Se=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ee=e.SAFE_FOR_TEMPLATES||!1,Te=e.WHOLE_DOCUMENT||!1,Oe=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,Ie=e.RETURN_TRUSTED_TYPE||!1,Ae=e.FORCE_BODY||!1,De=!1!==e.SANITIZE_DOM,Ne=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,Le=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||G,qe=e.NAMESPACE||Ve,be=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(be.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(be.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(be.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ee&&(xe=!1),Me&&(Oe=!0),Pe&&(fe=S({},[...D]),me=[],!0===Pe.html&&(S(fe,T),S(me,N)),!0===Pe.svg&&(S(fe,_),S(me,R),S(me,L)),!0===Pe.svgFilters&&(S(fe,A),S(me,R),S(me,L)),!0===Pe.mathMl&&(S(fe,M),S(me,B),S(me,L))),e.ADD_TAGS&&(fe===ge&&(fe=C(fe)),S(fe,e.ADD_TAGS,et)),e.ADD_ATTR&&(me===ve&&(me=C(me)),S(me,e.ADD_ATTR,et)),e.ADD_URI_SAFE_ATTR&&S(Ge,e.ADD_URI_SAFE_ATTR,et),e.FORBID_CONTENTS&&(Fe===ze&&(Fe=C(Fe)),S(Fe,e.FORBID_CONTENTS,et)),Be&&(fe["#text"]=!0),Te&&S(fe,["html","head","body"]),fe.table&&(S(fe,["tbody"]),delete ye.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=e.TRUSTED_TYPES_POLICY,Q=J.createHTML("")}else void 0===J&&(J=Y(H,o)),null!==J&&"string"==typeof Q&&(Q=J.createHTML(""));r&&r(e),tt=e}},rt=S({},["mi","mo","mn","ms","mtext"]),st=S({},["foreignobject","desc","title","annotation-xml"]),at=S({},["title","style","font","a","script"]),lt=S({},_);S(lt,A),S(lt,O);const ct=S({},M);S(ct,I);const dt=function(e){let t=X(e);t&&t.tagName||(t={namespaceURI:qe,tagName:"template"});const n=p(e.tagName),i=p(t.tagName);return!!Ke[e.namespaceURI]&&(e.namespaceURI===We?t.namespaceURI===Ve?"svg"===n:t.namespaceURI===$e?"svg"===n&&("annotation-xml"===i||rt[i]):Boolean(lt[n]):e.namespaceURI===$e?t.namespaceURI===Ve?"math"===n:t.namespaceURI===We?"math"===n&&st[i]:Boolean(ct[n]):e.namespaceURI===Ve?!(t.namespaceURI===We&&!st[i])&&!(t.namespaceURI===$e&&!rt[i])&&!ct[n]&&(at[n]||!lt[n]):!("application/xhtml+xml"!==Xe||!Ke[e.namespaceURI]))},ht=function(e){u(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},ut=function(e,t){try{u(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){u(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!me[e])if(Oe||Me)try{ht(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},pt=function(e){let t,n;if(Ae)e="<remove></remove>"+e;else{const t=g(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Xe&&qe===Ve&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=J?J.createHTML(e):e;if(qe===Ve)try{t=(new z).parseFromString(i,Xe)}catch(e){}if(!t||!t.documentElement){t=ee.createDocument(qe,"template",null);try{t.documentElement.innerHTML=Ye?Q:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(s.createTextNode(n),o.childNodes[0]||null),qe===Ve?ie.call(t,Te?"html":"body")[0]:Te?t.documentElement:o},ft=function(e){return te.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},gt=function(e){return e instanceof F&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof P)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},mt=function(e){return"object"==typeof c?e instanceof c:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},vt=function(e,t,i){re[e]&&d(re[e],(e=>{e.call(n,t,i,tt)}))},bt=function(e){let t;if(vt("beforeSanitizeElements",e,null),gt(e))return ht(e),!0;const i=et(e.nodeName);if(vt("uponSanitizeElement",e,{tagName:i,allowedTags:fe}),e.hasChildNodes()&&!mt(e.firstElementChild)&&(!mt(e.content)||!mt(e.content.firstElementChild))&&y(/<[/\w]/g,e.innerHTML)&&y(/<[/\w]/g,e.textContent))return ht(e),!0;if(!fe[i]||ye[i]){if(!ye[i]&&wt(i)){if(be.tagNameCheck instanceof RegExp&&y(be.tagNameCheck,i))return!1;if(be.tagNameCheck instanceof Function&&be.tagNameCheck(i))return!1}if(Be&&!Fe[i]){const t=X(e)||e.parentNode,n=Z(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i)t.insertBefore(U(n[i],!0),$(e))}return ht(e),!0}return e instanceof k&&!dt(e)?(ht(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!y(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ee&&3===e.nodeType&&(t=e.textContent,t=m(t,se," "),t=m(t,ae," "),t=m(t,le," "),e.textContent!==t&&(u(n.removed,{element:e.cloneNode()}),e.textContent=t)),vt("afterSanitizeElements",e,null),!1):(ht(e),!0)},yt=function(e,t,n){if(De&&("id"===t||"name"===t)&&(n in s||n in nt))return!1;if(xe&&!we[t]&&y(ce,t));else if(ke&&y(de,t));else if(!me[t]||we[t]){if(!(wt(e)&&(be.tagNameCheck instanceof RegExp&&y(be.tagNameCheck,e)||be.tagNameCheck instanceof Function&&be.tagNameCheck(e))&&(be.attributeNameCheck instanceof RegExp&&y(be.attributeNameCheck,t)||be.attributeNameCheck instanceof Function&&be.attributeNameCheck(t))||"is"===t&&be.allowCustomizedBuiltInElements&&(be.tagNameCheck instanceof RegExp&&y(be.tagNameCheck,n)||be.tagNameCheck instanceof Function&&be.tagNameCheck(n))))return!1}else if(Ge[t]);else if(y(pe,m(n,ue,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!He[e])if(Se&&!y(he,m(n,ue,"")));else if(n)return!1;return!0},wt=function(e){return e.indexOf("-")>0},kt=function(e){let t,i,o,r;vt("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(!s)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:me};for(r=s.length;r--;){t=s[r];const{name:l,namespaceURI:c}=t;if(i="value"===l?t.value:b(t.value),o=et(l),a.attrName=o,a.attrValue=i,a.keepAttr=!0,a.forceKeepAttr=void 0,vt("uponSanitizeAttribute",e,a),i=a.attrValue,a.forceKeepAttr)continue;if(ut(l,e),!a.keepAttr)continue;if(!Ce&&y(/\/>/i,i)){ut(l,e);continue}Ee&&(i=m(i,se," "),i=m(i,ae," "),i=m(i,le," "));const d=et(e.nodeName);if(yt(d,o,i)){if(!Ne||"id"!==o&&"name"!==o||(ut(l,e),i=Re+i),J&&"object"==typeof H&&"function"==typeof H.getAttributeType)if(c);else switch(H.getAttributeType(d,o)){case"TrustedHTML":i=J.createHTML(i);break;case"TrustedScriptURL":i=J.createScriptURL(i)}try{c?e.setAttributeNS(c,l,i):e.setAttribute(l,i),h(n.removed)}catch(e){}}}vt("afterSanitizeAttributes",e,null)},xt=function e(t){let n;const i=ft(t);for(vt("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)vt("uponSanitizeShadowNode",n,null),bt(n)||(n.content instanceof a&&e(n.content),kt(n));vt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t,o,r,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ye=!e,Ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!mt(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!n.isSupported)return e;if(_e||ot(l),n.removed=[],"string"==typeof e&&(Le=!1),Le){if(e.nodeName){const t=et(e.nodeName);if(!fe[t]||ye[t])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)t=pt("\x3c!----\x3e"),o=t.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?t=o:t.appendChild(o);else{if(!Oe&&!Ee&&!Te&&-1===e.indexOf("<"))return J&&Ie?J.createHTML(e):e;if(t=pt(e),!t)return Oe?null:Ie?Q:""}t&&Ae&&ht(t.firstChild);const d=ft(Le?e:t);for(;r=d.nextNode();)bt(r)||(r.content instanceof a&&xt(r.content),kt(r));if(Le)return e;if(Oe){if(Me)for(s=ne.call(t.ownerDocument);t.firstChild;)s.appendChild(t.firstChild);else s=t;return(me.shadowroot||me.shadowrootmode)&&(s=oe.call(i,s,!0)),s}let h=Te?t.outerHTML:t.innerHTML;return Te&&fe["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&y(W,t.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+h),Ee&&(h=m(h,se," "),h=m(h,ae," "),h=m(h,le," ")),J&&Ie?J.createHTML(h):h},n.setConfig=function(e){ot(e),_e=!0},n.clearConfig=function(){tt=null,_e=!1},n.isValidAttribute=function(e,t,n){tt||ot({});const i=et(e),o=et(t);return yt(i,o,n)},n.addHook=function(e,t){"function"==typeof t&&(re[e]=re[e]||[],u(re[e],t))},n.removeHook=function(e){if(re[e])return h(re[e])},n.removeHooks=function(e){re[e]&&(re[e]=[])},n.removeAllHooks=function(){re={}},n}return K()}()},2378:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",c="[object Null]",d="[object Object]",h="[object Proxy]",u="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[r]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[a]=g["[object Map]"]=g["[object Number]"]=g[d]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var m="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,v="object"==typeof self&&self&&self.Object===Object&&self,b=m||v||Function("return this")(),y=t&&!t.nodeType&&t,w=y&&e&&!e.nodeType&&e,k=w&&w.exports===y,x=k&&m.process,S=function(){try{var e=w&&w.require&&w.require("util").types;return e||x&&x.binding&&x.binding("util")}catch(e){}}(),C=S&&S.isTypedArray;var E,T,_,A=Array.prototype,O=Function.prototype,M=Object.prototype,I=b["__core-js_shared__"],D=O.toString,N=M.hasOwnProperty,R=(E=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",B=M.toString,L=D.call(Object),P=RegExp("^"+D.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=k?b.Buffer:void 0,z=b.Symbol,H=b.Uint8Array,j=F?F.allocUnsafe:void 0,G=(T=Object.getPrototypeOf,_=Object,function(e){return T(_(e))}),U=Object.create,$=M.propertyIsEnumerable,W=A.splice,V=z?z.toStringTag:void 0,q=function(){try{var e=ye(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Y=F?F.isBuffer:void 0,K=Math.max,Z=Date.now,X=ye(b,"Map"),J=ye(Object,"create"),Q=function(){function e(){}return function(t){if(!Ie(t))return{};if(U)return U(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ie(e){var t=this.__data__=new te(e);this.size=t.size}function oe(e,t){var n=Te(e),i=!n&&Ee(e),o=!n&&!i&&Ae(e),r=!n&&!i&&!o&&Ne(e),s=n||i||o||r,a=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)!t&&!N.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||we(c,l))||a.push(c);return a}function re(e,t,n){(void 0!==n&&!Ce(e[t],n)||void 0===n&&!(t in e))&&le(e,t,n)}function se(e,t,n){var i=e[t];N.call(e,t)&&Ce(i,n)&&(void 0!==n||t in e)||le(e,t,n)}function ae(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function le(e,t,n){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}ee.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ee.prototype.get=function(e){var t=this.__data__;if(J){var n=t[e];return n===i?void 0:n}return N.call(t,e)?t[e]:void 0},ee.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:N.call(t,e)},ee.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&void 0===t?i:t,this},te.prototype.clear=function(){this.__data__=[],this.size=0},te.prototype.delete=function(e){var t=this.__data__,n=ae(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),--this.size,!0)},te.prototype.get=function(e){var t=this.__data__,n=ae(t,e);return n<0?void 0:t[n][1]},te.prototype.has=function(e){return ae(this.__data__,e)>-1},te.prototype.set=function(e,t){var n=this.__data__,i=ae(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},ne.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(X||te),string:new ee}},ne.prototype.delete=function(e){var t=be(this,e).delete(e);return this.size-=t?1:0,t},ne.prototype.get=function(e){return be(this,e).get(e)},ne.prototype.has=function(e){return be(this,e).has(e)},ne.prototype.set=function(e,t){var n=be(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},ie.prototype.clear=function(){this.__data__=new te,this.size=0},ie.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ie.prototype.get=function(e){return this.__data__.get(e)},ie.prototype.has=function(e){return this.__data__.has(e)},ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof te){var i=n.__data__;if(!X||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ne(i)}return n.set(e,t),this.size=n.size,this};var ce,de=function(e,t,n){for(var i=-1,o=Object(e),r=n(e),s=r.length;s--;){var a=r[ce?s:++i];if(!1===t(o[a],a,o))break}return e};function he(e){return null==e?void 0===e?u:c:V&&V in Object(e)?function(e){var t=N.call(e,V),n=e[V];try{e[V]=void 0;var i=!0}catch(e){}var o=B.call(e);i&&(t?e[V]=n:delete e[V]);return o}(e):function(e){return B.call(e)}(e)}function ue(e){return De(e)&&he(e)==r}function pe(e){return!(!Ie(e)||function(e){return!!R&&R in e}(e))&&(Oe(e)?P:p).test(function(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function fe(e){if(!Ie(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ke(e),n=[];for(var i in e)("constructor"!=i||!t&&N.call(e,i))&&n.push(i);return n}function ge(e,t,n,i,o){e!==t&&de(t,(function(r,s){if(o||(o=new ie),Ie(r))!function(e,t,n,i,o,r,s){var a=xe(e,n),l=xe(t,n),c=s.get(l);if(c)return void re(e,n,c);var h=r?r(a,l,n+"",e,t,s):void 0,u=void 0===h;if(u){var p=Te(l),f=!p&&Ae(l),g=!p&&!f&&Ne(l);h=l,p||f||g?Te(a)?h=a:De(w=a)&&_e(w)?h=function(e,t){var n=-1,i=e.length;t||(t=Array(i));for(;++n<i;)t[n]=e[n];return t}(a):f?(u=!1,h=function(e,t){if(t)return e.slice();var n=e.length,i=j?j(n):new e.constructor(n);return e.copy(i),i}(l,!0)):g?(u=!1,m=l,v=!0?(b=m.buffer,y=new b.constructor(b.byteLength),new H(y).set(new H(b)),y):m.buffer,h=new m.constructor(v,m.byteOffset,m.length)):h=[]:function(e){if(!De(e)||he(e)!=d)return!1;var t=G(e);if(null===t)return!0;var n=N.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&D.call(n)==L}(l)||Ee(l)?(h=a,Ee(a)?h=function(e){return function(e,t,n,i){var o=!n;n||(n={});var r=-1,s=t.length;for(;++r<s;){var a=t[r],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),o?le(n,a,l):se(n,a,l)}return n}(e,Re(e))}(a):Ie(a)&&!Oe(a)||(h=function(e){return"function"!=typeof e.constructor||ke(e)?{}:Q(G(e))}(l))):u=!1}var m,v,b,y;var w;u&&(s.set(l,h),o(h,l,i,r,s),s.delete(l));re(e,n,h)}(e,t,s,n,ge,i,o);else{var a=i?i(xe(e,s),r,s+"",e,t,o):void 0;void 0===a&&(a=r),re(e,s,a)}}),Re)}function me(e,t){return Se(function(e,t,n){return t=K(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,r=K(i.length-t,0),s=Array(r);++o<r;)s[o]=i[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=i[o];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,Pe),e+"")}var ve=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Pe;function be(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return pe(n)?n:void 0}function we(e,t){var n=typeof e;return!!(t=null==t?o:t)&&("number"==n||"symbol"!=n&&f.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||M)}function xe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Se=function(e){var t=0,n=0;return function(){var i=Z(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ve);function Ce(e,t){return e===t||e!=e&&t!=t}var Ee=ue(function(){return arguments}())?ue:function(e){return De(e)&&N.call(e,"callee")&&!$.call(e,"callee")},Te=Array.isArray;function _e(e){return null!=e&&Me(e.length)&&!Oe(e)}var Ae=Y||function(){return!1};function Oe(e){if(!Ie(e))return!1;var t=he(e);return t==a||t==l||t==s||t==h}function Me(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Ie(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function De(e){return null!=e&&"object"==typeof e}var Ne=C?function(e){return function(t){return e(t)}}(C):function(e){return De(e)&&Me(e.length)&&!!g[he(e)]};function Re(e){return _e(e)?oe(e,!0):fe(e)}var Be,Le=(Be=function(e,t,n){ge(e,t,n)},me((function(e,t){var n=-1,i=t.length,o=i>1?t[i-1]:void 0,r=i>2?t[2]:void 0;for(o=Be.length>3&&"function"==typeof o?(i--,o):void 0,r&&function(e,t,n){if(!Ie(n))return!1;var i=typeof t;return!!("number"==i?_e(n)&&we(t,n.length):"string"==i&&t in n)&&Ce(n[t],e)}(t[0],t[1],r)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var s=t[n];s&&Be(e,s,n,o)}return e})));function Pe(e){return e}e.exports=Le},7533:()=>{Prism.languages.apacheconf={comment:/#.*/,"directive-inline":{pattern:/(^[\t ]*)\b(?:AcceptFilter|AcceptPathInfo|AccessFileName|Action|Add(?:Alt|AltByEncoding|AltByType|Charset|DefaultCharset|Description|Encoding|Handler|Icon|IconByEncoding|IconByType|InputFilter|Language|ModuleInfo|OutputFilter|OutputFilterByType|Type)|Alias|AliasMatch|Allow(?:CONNECT|EncodedSlashes|Methods|Override|OverrideList)?|Anonymous(?:_LogEmail|_MustGiveEmail|_NoUserID|_VerifyEmail)?|AsyncRequestWorkerFactor|Auth(?:BasicAuthoritative|BasicFake|BasicProvider|BasicUseDigestAlgorithm|DBDUserPWQuery|DBDUserRealmQuery|DBMGroupFile|DBMType|DBMUserFile|Digest(?:Algorithm|Domain|NonceLifetime|Provider|Qop|ShmemSize)|Form(?:Authoritative|Body|DisableNoStore|FakeBasicAuth|Location|LoginRequiredLocation|LoginSuccessLocation|LogoutLocation|Method|Mimetype|Password|Provider|SitePassphrase|Size|Username)|GroupFile|LDAP(?:AuthorizePrefix|BindAuthoritative|BindDN|BindPassword|CharsetConfig|CompareAsUser|CompareDNOnServer|DereferenceAliases|GroupAttribute|GroupAttributeIsDN|InitialBindAsUser|InitialBindPattern|MaxSubGroupDepth|RemoteUserAttribute|RemoteUserIsDN|SearchAsUser|SubGroupAttribute|SubGroupClass|Url)|Merging|Name|nCache(?:Context|Enable|ProvideFor|SOCache|Timeout)|nzFcgiCheckAuthnProvider|nzFcgiDefineProvider|Type|UserFile|zDBDLoginToReferer|zDBDQuery|zDBDRedirectQuery|zDBMType|zSendForbiddenOnFailure)|BalancerGrowth|BalancerInherit|BalancerMember|BalancerPersist|BrowserMatch|BrowserMatchNoCase|BufferedLogs|BufferSize|Cache(?:DefaultExpire|DetailHeader|DirLength|DirLevels|Disable|Enable|File|Header|IgnoreCacheControl|IgnoreHeaders|IgnoreNoLastMod|IgnoreQueryString|IgnoreURLSessionIdentifiers|KeyBaseURL|LastModifiedFactor|Lock|LockMaxAge|LockPath|MaxExpire|MaxFileSize|MinExpire|MinFileSize|NegotiatedDocs|QuickHandler|ReadSize|ReadTime|Root|Socache(?:MaxSize|MaxTime|MinTime|ReadSize|ReadTime)?|StaleOnError|StoreExpired|StoreNoStore|StorePrivate)|CGIDScriptTimeout|CGIMapExtension|CharsetDefault|CharsetOptions|CharsetSourceEnc|CheckCaseOnly|CheckSpelling|ChrootDir|ContentDigest|CookieDomain|CookieExpires|CookieName|CookieStyle|CookieTracking|CoreDumpDirectory|CustomLog|Dav|DavDepthInfinity|DavGenericLockDB|DavLockDB|DavMinTimeout|DBDExptime|DBDInitSQL|DBDKeep|DBDMax|DBDMin|DBDParams|DBDPersist|DBDPrepareSQL|DBDriver|DefaultIcon|DefaultLanguage|DefaultRuntimeDir|DefaultType|Define|Deflate(?:BufferSize|CompressionLevel|FilterNote|InflateLimitRequestBody|InflateRatio(?:Burst|Limit)|MemLevel|WindowSize)|Deny|DirectoryCheckHandler|DirectoryIndex|DirectoryIndexRedirect|DirectorySlash|DocumentRoot|DTracePrivileges|DumpIOInput|DumpIOOutput|EnableExceptionHook|EnableMMAP|EnableSendfile|Error|ErrorDocument|ErrorLog|ErrorLogFormat|Example|ExpiresActive|ExpiresByType|ExpiresDefault|ExtendedStatus|ExtFilterDefine|ExtFilterOptions|FallbackResource|FileETag|FilterChain|FilterDeclare|FilterProtocol|FilterProvider|FilterTrace|ForceLanguagePriority|ForceType|ForensicLog|GprofDir|GracefulShutdownTimeout|Group|Header|HeaderName|Heartbeat(?:Address|Listen|MaxServers|Storage)|HostnameLookups|IdentityCheck|IdentityCheckTimeout|ImapBase|ImapDefault|ImapMenu|Include|IncludeOptional|Index(?:HeadInsert|Ignore|IgnoreReset|Options|OrderDefault|StyleSheet)|InputSed|ISAPI(?:AppendLogToErrors|AppendLogToQuery|CacheFile|FakeAsync|LogNotSupported|ReadAheadBuffer)|KeepAlive|KeepAliveTimeout|KeptBodySize|LanguagePriority|LDAP(?:CacheEntries|CacheTTL|ConnectionPoolTTL|ConnectionTimeout|LibraryDebug|OpCacheEntries|OpCacheTTL|ReferralHopLimit|Referrals|Retries|RetryDelay|SharedCacheFile|SharedCacheSize|Timeout|TrustedClientCert|TrustedGlobalCert|TrustedMode|VerifyServerCert)|Limit(?:InternalRecursion|Request(?:Body|Fields|FieldSize|Line)|XMLRequestBody)|Listen|ListenBackLog|LoadFile|LoadModule|LogFormat|LogLevel|LogMessage|LuaAuthzProvider|LuaCodeCache|Lua(?:Hook(?:AccessChecker|AuthChecker|CheckUserID|Fixups|InsertFilter|Log|MapToStorage|TranslateName|TypeChecker)|Inherit|InputFilter|MapHandler|OutputFilter|PackageCPath|PackagePath|QuickHandler|Root|Scope)|Max(?:ConnectionsPerChild|KeepAliveRequests|MemFree|RangeOverlaps|RangeReversals|Ranges|RequestWorkers|SpareServers|SpareThreads|Threads)|MergeTrailers|MetaDir|MetaFiles|MetaSuffix|MimeMagicFile|MinSpareServers|MinSpareThreads|MMapFile|ModemStandard|ModMimeUsePathInfo|MultiviewsMatch|Mutex|NameVirtualHost|NoProxy|NWSSLTrustedCerts|NWSSLUpgradeable|Options|Order|OutputSed|PassEnv|PidFile|PrivilegesMode|Protocol|ProtocolEcho|Proxy(?:AddHeaders|BadHeader|Block|Domain|ErrorOverride|ExpressDBMFile|ExpressDBMType|ExpressEnable|FtpDirCharset|FtpEscapeWildcards|FtpListOnWildcard|HTML(?:BufSize|CharsetOut|DocType|Enable|Events|Extended|Fixups|Interp|Links|Meta|StripComments|URLMap)|IOBufferSize|MaxForwards|Pass(?:Inherit|InterpolateEnv|Match|Reverse|ReverseCookieDomain|ReverseCookiePath)?|PreserveHost|ReceiveBufferSize|Remote|RemoteMatch|Requests|SCGIInternalRedirect|SCGISendfile|Set|SourceAddress|Status|Timeout|Via)|ReadmeName|ReceiveBufferSize|Redirect|RedirectMatch|RedirectPermanent|RedirectTemp|ReflectorHeader|RemoteIP(?:Header|InternalProxy|InternalProxyList|ProxiesHeader|TrustedProxy|TrustedProxyList)|RemoveCharset|RemoveEncoding|RemoveHandler|RemoveInputFilter|RemoveLanguage|RemoveOutputFilter|RemoveType|RequestHeader|RequestReadTimeout|Require|Rewrite(?:Base|Cond|Engine|Map|Options|Rule)|RLimitCPU|RLimitMEM|RLimitNPROC|Satisfy|ScoreBoardFile|Script(?:Alias|AliasMatch|InterpreterSource|Log|LogBuffer|LogLength|Sock)?|SecureListen|SeeRequestTail|SendBufferSize|Server(?:Admin|Alias|Limit|Name|Path|Root|Signature|Tokens)|Session(?:Cookie(?:Name|Name2|Remove)|Crypto(?:Cipher|Driver|Passphrase|PassphraseFile)|DBD(?:CookieName|CookieName2|CookieRemove|DeleteLabel|InsertLabel|PerUser|SelectLabel|UpdateLabel)|Env|Exclude|Header|Include|MaxAge)?|SetEnv|SetEnvIf|SetEnvIfExpr|SetEnvIfNoCase|SetHandler|SetInputFilter|SetOutputFilter|SSIEndTag|SSIErrorMsg|SSIETag|SSILastModified|SSILegacyExprParser|SSIStartTag|SSITimeFormat|SSIUndefinedEcho|SSL(?:CACertificateFile|CACertificatePath|CADNRequestFile|CADNRequestPath|CARevocationCheck|CARevocationFile|CARevocationPath|CertificateChainFile|CertificateFile|CertificateKeyFile|CipherSuite|Compression|CryptoDevice|Engine|FIPS|HonorCipherOrder|InsecureRenegotiation|OCSP(?:DefaultResponder|Enable|OverrideResponder|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|UseRequestNonce)|OpenSSLConfCmd|Options|PassPhraseDialog|Protocol|Proxy(?:CACertificateFile|CACertificatePath|CARevocation(?:Check|File|Path)|CheckPeer(?:CN|Expire|Name)|CipherSuite|Engine|MachineCertificate(?:ChainFile|File|Path)|Protocol|Verify|VerifyDepth)|RandomSeed|RenegBufferSize|Require|RequireSSL|Session(?:Cache|CacheTimeout|TicketKeyFile|Tickets)|SRPUnknownUserSeed|SRPVerifierFile|Stapling(?:Cache|ErrorCacheTimeout|FakeTryLater|ForceURL|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|ReturnResponderErrors|StandardCacheTimeout)|StrictSNIVHostCheck|UserName|UseStapling|VerifyClient|VerifyDepth)|StartServers|StartThreads|Substitute|Suexec|SuexecUserGroup|ThreadLimit|ThreadsPerChild|ThreadStackSize|TimeOut|TraceEnable|TransferLog|TypesConfig|UnDefine|UndefMacro|UnsetEnv|Use|UseCanonicalName|UseCanonicalPhysicalPort|User|UserDir|VHostCGIMode|VHostCGIPrivs|VHostGroup|VHostPrivs|VHostSecure|VHostUser|Virtual(?:DocumentRoot|ScriptAlias)(?:IP)?|WatchdogInterval|XBitHack|xml2EncAlias|xml2EncDefault|xml2StartParse)\b/im,lookbehind:!0,alias:"property"},"directive-block":{pattern:/<\/?\b(?:Auth[nz]ProviderAlias|Directory|DirectoryMatch|Else|ElseIf|Files|FilesMatch|If|IfDefine|IfModule|IfVersion|Limit|LimitExcept|Location|LocationMatch|Macro|Proxy|Require(?:All|Any|None)|VirtualHost)\b.*>/i,inside:{"directive-block":{pattern:/^<\/?\w+/,inside:{punctuation:/^<\/?/},alias:"tag"},"directive-block-parameter":{pattern:/.*[^>]/,inside:{punctuation:/:/,string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}}},alias:"attr-value"},punctuation:/>/},alias:"tag"},"directive-flags":{pattern:/\[(?:[\w=],?)+\]/,alias:"keyword"},string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}},variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/,regex:/\^?.*\$|\^.*\$?/}},7874:()=>{!function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},i={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:i},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:i},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:i.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:i.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var o=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],r=i.variable[1].inside,s=0;s<o.length;s++)r[o[s]]=e.languages.bash[o[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash}(Prism)},4446:()=>{Prism.languages.basic={comment:{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\$|\b)/i,function:/\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\$|\b)/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:AND|EQV|IMP|NOT|OR|XOR)\b/i,punctuation:/[,;:()]/}},4279:()=>{Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean},2731:()=>{!function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)},9016:()=>{!function(e){function t(e,t){return e.replace(/<<(\d+)>>/g,(function(e,n){return"(?:"+t[+n]+")"}))}function n(e,n,i){return RegExp(t(e,n),i||"")}function i(e,t){for(var n=0;n<t;n++)e=e.replace(/<<self>>/g,(function(){return"(?:"+e+")"}));return e.replace(/<<self>>/g,"[^\\s\\S]")}var o="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",r="class enum interface record struct",s="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",a="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function l(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var c=l(r),d=RegExp(l(o+" "+r+" "+s+" "+a)),h=l(r+" "+s+" "+a),u=l(o+" "+r+" "+a),p=i(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),f=i(/\((?:[^()]|<<self>>)*\)/.source,2),g=/@?\b[A-Za-z_]\w*\b/.source,m=t(/<<0>>(?:\s*<<1>>)?/.source,[g,p]),v=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[h,m]),b=/\[\s*(?:,\s*)*\]/.source,y=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[v,b]),w=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[p,f,b]),k=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[w]),x=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[k,v,b]),S={keyword:d,punctuation:/[<>()?,.:[\]]/},C=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,E=/"(?:\\.|[^\\"\r\n])*"/.source,T=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[T]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[v]),lookbehind:!0,inside:S},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[g,x]),lookbehind:!0,inside:S},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[g]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[c,m]),lookbehind:!0,inside:S},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[v]),lookbehind:!0,inside:S},{pattern:n(/(\bwhere\s+)<<0>>/.source,[g]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[y]),lookbehind:!0,inside:S},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[x,u,g]),inside:S}],keyword:d,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[g]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[g]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[f]),lookbehind:!0,alias:"class-name",inside:S},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[x,v]),inside:S,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[x]),lookbehind:!0,inside:S,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[g,p]),inside:{function:n(/^<<0>>/.source,[g]),generic:{pattern:RegExp(p),alias:"class-name",inside:S}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[c,m,g,x,d.source,f,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[m,f]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:d,"class-name":{pattern:RegExp(x),greedy:!0,inside:S},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var _=E+"|"+C,A=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[_]),O=i(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[A]),2),M=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,I=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[v,O]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[M,I]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[M]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[O]),inside:e.languages.csharp},"class-name":{pattern:RegExp(v),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var D=/:[^}\r\n]+/.source,N=i(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[A]),2),R=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[N,D]),B=i(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[_]),2),L=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[B,D]);function P(t,i){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[i,D]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[R]),lookbehind:!0,greedy:!0,inside:P(R,N)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[L]),lookbehind:!0,greedy:!0,inside:P(L,B)}],char:{pattern:RegExp(C),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp}(Prism)},7046:()=>{Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete Prism.languages.go["class-name"]},7117:()=>{Prism.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:Prism.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},Prism.hooks.add("after-tokenize",(function(e){if("graphql"===e.language)for(var t=e.tokens.filter((function(e){return"string"!=typeof e&&"comment"!==e.type&&"scalar"!==e.type})),n=0;n<t.length;){var i=t[n++];if("keyword"===i.type&&"mutation"===i.content){var o=[];if(h(["definition-mutation","punctuation"])&&"("===d(1).content){n+=2;var r=u(/^\($/,/^\)$/);if(-1===r)continue;for(;n<r;n++){var s=d(0);"variable"===s.type&&(p(s,"variable-input"),o.push(s.content))}n=r+1}if(h(["punctuation","property-query"])&&"{"===d(0).content&&(n++,p(d(0),"property-mutation"),o.length>0)){var a=u(/^\{$/,/^\}$/);if(-1===a)continue;for(var l=n;l<a;l++){var c=t[l];"variable"===c.type&&o.indexOf(c.content)>=0&&p(c,"variable-input")}}}}function d(e){return t[n+e]}function h(e,t){t=t||0;for(var n=0;n<e.length;n++){var i=d(n+t);if(!i||i.type!==e[n])return!1}return!0}function u(e,i){for(var o=1,r=n;r<t.length;r++){var s=t[r],a=s.content;if("punctuation"===s.type&&"string"==typeof a)if(e.test(a))o++;else if(i.test(a)&&0===--o)return r}return-1}function p(e,t){var n=e.alias;n?Array.isArray(n)||(e.alias=n=[n]):e.alias=n=[],n.push(t)}}))},110:()=>{!function(e){e.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},e.hooks.add("before-tokenize",(function(t){e.languages["markup-templating"].buildPlaceholders(t,"handlebars",/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g)})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"handlebars")})),e.languages.hbs=e.languages.handlebars,e.languages.mustache=e.languages.handlebars}(Prism)},2503:()=>{!function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,i={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[i,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:i.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:i.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":i,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:i.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:i.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)},2356:()=>{!function(e){var t=e.util.clone(e.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,i=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,o=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function r(e,t){return e=e.replace(/<S>/g,(function(){return n})).replace(/<BRACES>/g,(function(){return i})).replace(/<SPREAD>/g,(function(){return o})),RegExp(e,t)}o=r(o).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=r(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:r(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:r(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var s=function(e){return e?"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(s).join(""):""},a=function(t){for(var n=[],i=0;i<t.length;i++){var o=t[i],r=!1;if("string"!=typeof o&&("tag"===o.type&&o.content[0]&&"tag"===o.content[0].type?"</"===o.content[0].content[0].content?n.length>0&&n[n.length-1].tagName===s(o.content[0].content[1])&&n.pop():"/>"===o.content[o.content.length-1].content||n.push({tagName:s(o.content[0].content[1]),openedBraces:0}):n.length>0&&"punctuation"===o.type&&"{"===o.content?n[n.length-1].openedBraces++:n.length>0&&n[n.length-1].openedBraces>0&&"punctuation"===o.type&&"}"===o.content?n[n.length-1].openedBraces--:r=!0),(r||"string"==typeof o)&&n.length>0&&0===n[n.length-1].openedBraces){var l=s(o);i<t.length-1&&("string"==typeof t[i+1]||"plain-text"===t[i+1].type)&&(l+=s(t[i+1]),t.splice(i+1,1)),i>0&&("string"==typeof t[i-1]||"plain-text"===t[i-1].type)&&(l=s(t[i-1])+l,t.splice(i-1,1),i--),t[i]=new e.Token("plain-text",l,null,l)}o.content&&"string"!=typeof o.content&&a(o.content)}};e.hooks.add("after-tokenize",(function(e){"jsx"!==e.language&&"tsx"!==e.language||a(e.tokens)}))}(Prism)},319:()=>{!function(e){var t=/\\(?:[^a-z()[\]]|[a-z*]+)/i,n={"equation-command":{pattern:t,alias:"regex"}};e.languages.latex={comment:/%.*/,cdata:{pattern:/(\\begin\{((?:lstlisting|verbatim)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0},equation:[{pattern:/\$\$(?:\\[\s\S]|[^\\$])+\$\$|\$(?:\\[\s\S]|[^\\$])+\$|\\\([\s\S]*?\\\)|\\\[[\s\S]*?\\\]/,inside:n,alias:"string"},{pattern:/(\\begin\{((?:align|eqnarray|equation|gather|math|multline)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0,inside:n,alias:"string"}],keyword:{pattern:/(\\(?:begin|cite|documentclass|end|label|ref|usepackage)(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0},url:{pattern:/(\\url\{)[^}]+(?=\})/,lookbehind:!0},headline:{pattern:/(\\(?:chapter|frametitle|paragraph|part|section|subparagraph|subsection|subsubparagraph|subsubsection|subsubsubparagraph)\*?(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0,alias:"class-name"},function:{pattern:t,alias:"selector"},punctuation:/[[\]{}&]/},e.languages.tex=e.languages.latex,e.languages.context=e.languages.latex}(Prism)},7802:()=>{Prism.languages.less=Prism.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),Prism.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}})},6841:()=>{Prism.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[^z]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+(?:\.[a-f\d]*)?(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|(?:\.\d*)?(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/}},4064:()=>{!function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var i=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,o=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return i})),r=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+o+r+"(?:"+o+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+o+r+")(?:"+o+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(i),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+o+")"+r+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+o+"$"),inside:{"table-header":{pattern:RegExp(i),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!=typeof t)for(var n=0,i=t.length;n<i;n++){var o=t[n];if("code"===o.type){var r=o.content[1],s=o.content[3];if(r&&s&&"code-language"===r.type&&"code-block"===s.type&&"string"==typeof r.content){var a=r.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(a=(/[a-z][\w-]*/i.exec(a)||[""])[0].toLowerCase());s.alias?"string"==typeof s.alias?s.alias=[s.alias,l]:s.alias.push(l):s.alias=[l]}}else e(o.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",i=0,o=t.classes.length;i<o;i++){var r=t.classes[i],c=/language-(.+)/.exec(r);if(c){n=c[1];break}}var d,h=e.languages[n];if(h)t.content=e.highlight((d=t.content,d.replace(s,"").replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if("#"===(t=t.toLowerCase())[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),l(n);var i=a[t];return i||e}))),h,n);else if(n&&"none"!==n&&e.plugins.autoloader){var u="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=u,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(u);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),a={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(Prism)},6854:()=>{!function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,i,o,r){if(n.language===i){var s=n.tokenStack=[];n.code=n.code.replace(o,(function(e){if("function"==typeof r&&!r(e))return e;for(var o,a=s.length;-1!==n.code.indexOf(o=t(i,a));)++a;return s[a]=e,o})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,i){if(n.language===i&&n.tokenStack){n.grammar=e.languages[i];var o=0,r=Object.keys(n.tokenStack);!function s(a){for(var l=0;l<a.length&&!(o>=r.length);l++){var c=a[l];if("string"==typeof c||c.content&&"string"==typeof c.content){var d=r[o],h=n.tokenStack[d],u="string"==typeof c?c:c.content,p=t(i,d),f=u.indexOf(p);if(f>-1){++o;var g=u.substring(0,f),m=new e.Token(i,e.tokenize(h,n.grammar),"language-"+i,h),v=u.substring(f+p.length),b=[];g&&b.push.apply(b,s([g])),b.push(m),v&&b.push.apply(b,s([v])),"string"==typeof c?a.splice.apply(a,[l,1].concat(b)):c.content=b}}else c.content&&s(c.content)}return a}(n.tokens)}}}})}(Prism)},3436:()=>{!function(e){var t=/\$(?:\w[a-z\d]*(?:_[^\x00-\x1F\s"'\\()$]*)?|\{[^}\s"'\\]+\})/i;e.languages.nginx={comment:{pattern:/(^|[\s{};])#.*/,lookbehind:!0,greedy:!0},directive:{pattern:/(^|\s)\w(?:[^;{}"'\\\s]|\\.|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\s+(?:#.*(?!.)|(?![#\s])))*?(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:{string:{pattern:/((?:^|[^\\])(?:\\\\)*)(?:"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')/,lookbehind:!0,greedy:!0,inside:{escape:{pattern:/\\["'\\nrt]/,alias:"entity"},variable:t}},comment:{pattern:/(\s)#.*/,lookbehind:!0,greedy:!0},keyword:{pattern:/^\S+/,greedy:!0},boolean:{pattern:/(\s)(?:off|on)(?!\S)/,lookbehind:!0},number:{pattern:/(\s)\d+[a-z]*(?!\S)/i,lookbehind:!0},variable:t}},punctuation:/[{};]/}}(Prism)},9945:()=>{!function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],i=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,o=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,r=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:i,operator:o,punctuation:r};var s={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},a=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:s}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:s}}];e.languages.insertBefore("php","variable",{string:a,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:a,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:i,operator:o,punctuation:r}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){if(/<\?/.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(Prism)},366:()=>{Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},9385:()=>{!function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",i=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+i),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+i+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(Prism)},767:()=>{!function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,(function(){return t}));t=t.replace(/<self>/g,(function(){return/[^\s\S]/.source})),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)},9865:()=>{!function(e){e.languages.sass=e.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),e.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete e.languages.sass.atrule;var t=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];e.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:t,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:t,operator:n,important:e.languages.sass.important}}}),delete e.languages.sass.property,delete e.languages.sass.important,e.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(Prism)},5266:()=>{Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}},1029:()=>{!function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"];var n=e.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(Prism)},6836:()=>{!function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)},4438:()=>{Prism.languages.vim={string:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\r\n]|'')*'/,comment:/".*/,function:/\b\w+(?=\()/,keyword:/\b(?:N|Next|P|Print|X|XMLent|XMLns|ab|abbreviate|abc|abclear|abo|aboveleft|al|all|ar|arga|argadd|argd|argdelete|argdo|arge|argedit|argg|argglobal|argl|arglocal|args|argu|argument|as|ascii|b|bN|bNext|ba|bad|badd|ball|bd|bdelete|be|bel|belowright|bf|bfirst|bl|blast|bm|bmodified|bn|bnext|bo|botright|bp|bprevious|br|brea|break|breaka|breakadd|breakd|breakdel|breakl|breaklist|brewind|bro|browse|bufdo|buffer|buffers|bun|bunload|bw|bwipeout|c|cN|cNext|cNfcNfile|ca|cabbrev|cabc|cabclear|cad|caddb|caddbuffer|caddexpr|caddf|caddfile|cal|call|cat|catch|cb|cbuffer|cc|ccl|cclose|cd|ce|center|cex|cexpr|cf|cfile|cfir|cfirst|cg|cgetb|cgetbuffer|cgete|cgetexpr|cgetfile|change|changes|chd|chdir|che|checkpath|checkt|checktime|cl|cla|clast|clist|clo|close|cmapc|cmapclear|cn|cnew|cnewer|cnext|cnf|cnfile|cnorea|cnoreabbrev|co|col|colder|colo|colorscheme|comc|comclear|comp|compiler|con|conf|confirm|continue|cope|copen|copy|cp|cpf|cpfile|cprevious|cq|cquit|cr|crewind|cu|cuna|cunabbrev|cunmap|cw|cwindow|d|debugg|debuggreedy|delc|delcommand|delete|delf|delfunction|delm|delmarks|di|diffg|diffget|diffoff|diffpatch|diffpu|diffput|diffsplit|diffthis|diffu|diffupdate|dig|digraphs|display|dj|djump|dl|dlist|dr|drop|ds|dsearch|dsp|dsplit|e|earlier|echoe|echoerr|echom|echomsg|echon|edit|el|else|elsei|elseif|em|emenu|en|endf|endfo|endfor|endfun|endfunction|endif|endt|endtry|endw|endwhile|ene|enew|ex|exi|exit|exu|exusage|f|file|files|filetype|fin|fina|finally|find|fini|finish|fir|first|fix|fixdel|fo|fold|foldc|foldclose|foldd|folddoc|folddoclosed|folddoopen|foldo|foldopen|for|fu|fun|function|go|goto|gr|grep|grepa|grepadd|h|ha|hardcopy|help|helpf|helpfind|helpg|helpgrep|helpt|helptags|hid|hide|his|history|ia|iabbrev|iabc|iabclear|if|ij|ijump|il|ilist|imapc|imapclear|in|inorea|inoreabbrev|isearch|isp|isplit|iu|iuna|iunabbrev|iunmap|j|join|ju|jumps|k|kee|keepalt|keepj|keepjumps|keepmarks|l|lN|lNext|lNf|lNfile|la|lad|laddb|laddbuffer|laddexpr|laddf|laddfile|lan|language|last|later|lb|lbuffer|lc|lcd|lch|lchdir|lcl|lclose|left|lefta|leftabove|let|lex|lexpr|lf|lfile|lfir|lfirst|lg|lgetb|lgetbuffer|lgete|lgetexpr|lgetfile|lgr|lgrep|lgrepa|lgrepadd|lh|lhelpgrep|list|ll|lla|llast|lli|llist|lm|lmak|lmake|lmap|lmapc|lmapclear|ln|lne|lnew|lnewer|lnext|lnf|lnfile|lnoremap|lo|loadview|loc|lockmarks|lockv|lockvar|lol|lolder|lop|lopen|lp|lpf|lpfile|lprevious|lr|lrewind|ls|lt|ltag|lu|lunmap|lv|lvimgrep|lvimgrepa|lvimgrepadd|lw|lwindow|m|ma|mak|make|mark|marks|mat|match|menut|menutranslate|mk|mkexrc|mks|mksession|mksp|mkspell|mkv|mkvie|mkview|mkvimrc|mod|mode|move|mz|mzf|mzfile|mzscheme|n|nbkey|new|next|nmapc|nmapclear|noh|nohlsearch|norea|noreabbrev|nu|number|nun|nunmap|o|omapc|omapclear|on|only|open|opt|options|ou|ounmap|p|pc|pclose|pe|ped|pedit|perl|perld|perldo|po|pop|popu|popup|pp|ppop|pre|preserve|prev|previous|print|prof|profd|profdel|profile|promptf|promptfind|promptr|promptrepl|ps|psearch|ptN|ptNext|pta|ptag|ptf|ptfirst|ptj|ptjump|ptl|ptlast|ptn|ptnext|ptp|ptprevious|ptr|ptrewind|pts|ptselect|pu|put|pw|pwd|py|pyf|pyfile|python|q|qa|qall|quit|quita|quitall|r|read|rec|recover|red|redi|redir|redo|redr|redraw|redraws|redrawstatus|reg|registers|res|resize|ret|retab|retu|return|rew|rewind|ri|right|rightb|rightbelow|ru|rub|ruby|rubyd|rubydo|rubyf|rubyfile|runtime|rv|rviminfo|sN|sNext|sa|sal|sall|san|sandbox|sargument|sav|saveas|sb|sbN|sbNext|sba|sball|sbf|sbfirst|sbl|sblast|sbm|sbmodified|sbn|sbnext|sbp|sbprevious|sbr|sbrewind|sbuffer|scrip|scripte|scriptencoding|scriptnames|se|set|setf|setfiletype|setg|setglobal|setl|setlocal|sf|sfind|sfir|sfirst|sh|shell|sign|sil|silent|sim|simalt|sl|sla|slast|sleep|sm|smagic|smap|smapc|smapclear|sme|smenu|sn|snext|sni|sniff|sno|snomagic|snor|snoremap|snoreme|snoremenu|so|sor|sort|source|sp|spe|spelld|spelldump|spellgood|spelli|spellinfo|spellr|spellrepall|spellu|spellundo|spellw|spellwrong|split|spr|sprevious|sre|srewind|st|sta|stag|star|startg|startgreplace|startinsert|startr|startreplace|stj|stjump|stop|stopi|stopinsert|sts|stselect|sun|sunhide|sunm|sunmap|sus|suspend|sv|sview|syncbind|t|tN|tNext|ta|tab|tabN|tabNext|tabc|tabclose|tabd|tabdo|tabe|tabedit|tabf|tabfind|tabfir|tabfirst|tabl|tablast|tabm|tabmove|tabn|tabnew|tabnext|tabo|tabonly|tabp|tabprevious|tabr|tabrewind|tabs|tag|tags|tc|tcl|tcld|tcldo|tclf|tclfile|te|tearoff|tf|tfirst|th|throw|tj|tjump|tl|tlast|tm|tmenu|tn|tnext|to|topleft|tp|tprevious|tr|trewind|try|ts|tselect|tu|tunmenu|u|una|unabbreviate|undo|undoj|undojoin|undol|undolist|unh|unhide|unlet|unlo|unlockvar|unm|unmap|up|update|ve|verb|verbose|version|vert|vertical|vi|vie|view|vim|vimgrep|vimgrepa|vimgrepadd|visual|viu|viusage|vmapc|vmapclear|vne|vnew|vs|vsplit|vu|vunmap|w|wN|wNext|wa|wall|wh|while|win|winc|wincmd|windo|winp|winpos|winsize|wn|wnext|wp|wprevious|wq|wqa|wqall|write|ws|wsverb|wv|wviminfo|x|xa|xall|xit|xm|xmap|xmapc|xmapclear|xme|xmenu|xn|xnoremap|xnoreme|xnoremenu|xu|xunmap|y|yank)\b/,builtin:/\b(?:acd|ai|akm|aleph|allowrevins|altkeymap|ambiwidth|ambw|anti|antialias|arab|arabic|arabicshape|ari|arshape|autochdir|autocmd|autoindent|autoread|autowrite|autowriteall|aw|awa|background|backspace|backup|backupcopy|backupdir|backupext|backupskip|balloondelay|ballooneval|balloonexpr|bdir|bdlay|beval|bex|bexpr|bg|bh|bin|binary|biosk|bioskey|bk|bkc|bomb|breakat|brk|browsedir|bs|bsdir|bsk|bt|bufhidden|buflisted|buftype|casemap|ccv|cdpath|cedit|cfu|ch|charconvert|ci|cin|cindent|cink|cinkeys|cino|cinoptions|cinw|cinwords|clipboard|cmdheight|cmdwinheight|cmp|cms|columns|com|comments|commentstring|compatible|complete|completefunc|completeopt|consk|conskey|copyindent|cot|cpo|cpoptions|cpt|cscopepathcomp|cscopeprg|cscopequickfix|cscopetag|cscopetagorder|cscopeverbose|cspc|csprg|csqf|cst|csto|csverb|cuc|cul|cursorcolumn|cursorline|cwh|debug|deco|def|define|delcombine|dex|dg|dict|dictionary|diff|diffexpr|diffopt|digraph|dip|dir|directory|dy|ea|ead|eadirection|eb|ed|edcompatible|ef|efm|ei|ek|enc|encoding|endofline|eol|ep|equalalways|equalprg|errorbells|errorfile|errorformat|esckeys|et|eventignore|expandtab|exrc|fcl|fcs|fdc|fde|fdi|fdl|fdls|fdm|fdn|fdo|fdt|fen|fenc|fencs|fex|ff|ffs|fileencoding|fileencodings|fileformat|fileformats|fillchars|fk|fkmap|flp|fml|fmr|foldcolumn|foldenable|foldexpr|foldignore|foldlevel|foldlevelstart|foldmarker|foldmethod|foldminlines|foldnestmax|foldtext|formatexpr|formatlistpat|formatoptions|formatprg|fp|fs|fsync|ft|gcr|gd|gdefault|gfm|gfn|gfs|gfw|ghr|gp|grepformat|grepprg|gtl|gtt|guicursor|guifont|guifontset|guifontwide|guiheadroom|guioptions|guipty|guitablabel|guitabtooltip|helpfile|helpheight|helplang|hf|hh|hi|hidden|highlight|hk|hkmap|hkmapp|hkp|hl|hlg|hls|hlsearch|ic|icon|iconstring|ignorecase|im|imactivatekey|imak|imc|imcmdline|imd|imdisable|imi|iminsert|ims|imsearch|inc|include|includeexpr|incsearch|inde|indentexpr|indentkeys|indk|inex|inf|infercase|insertmode|invacd|invai|invakm|invallowrevins|invaltkeymap|invanti|invantialias|invar|invarab|invarabic|invarabicshape|invari|invarshape|invautochdir|invautoindent|invautoread|invautowrite|invautowriteall|invaw|invawa|invbackup|invballooneval|invbeval|invbin|invbinary|invbiosk|invbioskey|invbk|invbl|invbomb|invbuflisted|invcf|invci|invcin|invcindent|invcompatible|invconfirm|invconsk|invconskey|invcopyindent|invcp|invcscopetag|invcscopeverbose|invcst|invcsverb|invcuc|invcul|invcursorcolumn|invcursorline|invdeco|invdelcombine|invdg|invdiff|invdigraph|invdisable|invea|inveb|inved|invedcompatible|invek|invendofline|inveol|invequalalways|inverrorbells|invesckeys|invet|invex|invexpandtab|invexrc|invfen|invfk|invfkmap|invfoldenable|invgd|invgdefault|invguipty|invhid|invhidden|invhk|invhkmap|invhkmapp|invhkp|invhls|invhlsearch|invic|invicon|invignorecase|invim|invimc|invimcmdline|invimd|invincsearch|invinf|invinfercase|invinsertmode|invis|invjoinspaces|invjs|invlazyredraw|invlbr|invlinebreak|invlisp|invlist|invloadplugins|invlpl|invlz|invma|invmacatsui|invmagic|invmh|invml|invmod|invmodeline|invmodifiable|invmodified|invmore|invmousef|invmousefocus|invmousehide|invnu|invnumber|invodev|invopendevice|invpaste|invpi|invpreserveindent|invpreviewwindow|invprompt|invpvw|invreadonly|invremap|invrestorescreen|invrevins|invri|invrightleft|invrightleftcmd|invrl|invrlc|invro|invrs|invru|invruler|invsb|invsc|invscb|invscrollbind|invscs|invsecure|invsft|invshellslash|invshelltemp|invshiftround|invshortname|invshowcmd|invshowfulltag|invshowmatch|invshowmode|invsi|invsm|invsmartcase|invsmartindent|invsmarttab|invsmd|invsn|invsol|invspell|invsplitbelow|invsplitright|invspr|invsr|invssl|invsta|invstartofline|invstmp|invswapfile|invswf|invta|invtagbsearch|invtagrelative|invtagstack|invtbi|invtbidi|invtbs|invtermbidi|invterse|invtextauto|invtextmode|invtf|invtgst|invtildeop|invtimeout|invtitle|invto|invtop|invtr|invttimeout|invttybuiltin|invttyfast|invtx|invvb|invvisualbell|invwa|invwarn|invwb|invweirdinvert|invwfh|invwfw|invwildmenu|invwinfixheight|invwinfixwidth|invwiv|invwmnu|invwrap|invwrapscan|invwrite|invwriteany|invwritebackup|invws|isf|isfname|isi|isident|isk|iskeyword|isprint|joinspaces|js|key|keymap|keymodel|keywordprg|km|kmp|kp|langmap|langmenu|laststatus|lazyredraw|lbr|lcs|linebreak|lines|linespace|lisp|lispwords|listchars|loadplugins|lpl|lsp|lz|macatsui|magic|makeef|makeprg|matchpairs|matchtime|maxcombine|maxfuncdepth|maxmapdepth|maxmem|maxmempattern|maxmemtot|mco|mef|menuitems|mfd|mh|mis|mkspellmem|ml|mls|mm|mmd|mmp|mmt|modeline|modelines|modifiable|modified|more|mouse|mousef|mousefocus|mousehide|mousem|mousemodel|mouses|mouseshape|mouset|mousetime|mp|mps|msm|mzq|mzquantum|nf|noacd|noai|noakm|noallowrevins|noaltkeymap|noanti|noantialias|noar|noarab|noarabic|noarabicshape|noari|noarshape|noautochdir|noautoindent|noautoread|noautowrite|noautowriteall|noaw|noawa|nobackup|noballooneval|nobeval|nobin|nobinary|nobiosk|nobioskey|nobk|nobl|nobomb|nobuflisted|nocf|noci|nocin|nocindent|nocompatible|noconfirm|noconsk|noconskey|nocopyindent|nocp|nocscopetag|nocscopeverbose|nocst|nocsverb|nocuc|nocul|nocursorcolumn|nocursorline|nodeco|nodelcombine|nodg|nodiff|nodigraph|nodisable|noea|noeb|noed|noedcompatible|noek|noendofline|noeol|noequalalways|noerrorbells|noesckeys|noet|noex|noexpandtab|noexrc|nofen|nofk|nofkmap|nofoldenable|nogd|nogdefault|noguipty|nohid|nohidden|nohk|nohkmap|nohkmapp|nohkp|nohls|noic|noicon|noignorecase|noim|noimc|noimcmdline|noimd|noincsearch|noinf|noinfercase|noinsertmode|nois|nojoinspaces|nojs|nolazyredraw|nolbr|nolinebreak|nolisp|nolist|noloadplugins|nolpl|nolz|noma|nomacatsui|nomagic|nomh|noml|nomod|nomodeline|nomodifiable|nomodified|nomore|nomousef|nomousefocus|nomousehide|nonu|nonumber|noodev|noopendevice|nopaste|nopi|nopreserveindent|nopreviewwindow|noprompt|nopvw|noreadonly|noremap|norestorescreen|norevins|nori|norightleft|norightleftcmd|norl|norlc|noro|nors|noru|noruler|nosb|nosc|noscb|noscrollbind|noscs|nosecure|nosft|noshellslash|noshelltemp|noshiftround|noshortname|noshowcmd|noshowfulltag|noshowmatch|noshowmode|nosi|nosm|nosmartcase|nosmartindent|nosmarttab|nosmd|nosn|nosol|nospell|nosplitbelow|nosplitright|nospr|nosr|nossl|nosta|nostartofline|nostmp|noswapfile|noswf|nota|notagbsearch|notagrelative|notagstack|notbi|notbidi|notbs|notermbidi|noterse|notextauto|notextmode|notf|notgst|notildeop|notimeout|notitle|noto|notop|notr|nottimeout|nottybuiltin|nottyfast|notx|novb|novisualbell|nowa|nowarn|nowb|noweirdinvert|nowfh|nowfw|nowildmenu|nowinfixheight|nowinfixwidth|nowiv|nowmnu|nowrap|nowrapscan|nowrite|nowriteany|nowritebackup|nows|nrformats|numberwidth|nuw|odev|oft|ofu|omnifunc|opendevice|operatorfunc|opfunc|osfiletype|pa|para|paragraphs|paste|pastetoggle|patchexpr|patchmode|path|pdev|penc|pex|pexpr|pfn|ph|pheader|pi|pm|pmbcs|pmbfn|popt|preserveindent|previewheight|previewwindow|printdevice|printencoding|printexpr|printfont|printheader|printmbcharset|printmbfont|printoptions|prompt|pt|pumheight|pvh|pvw|qe|quoteescape|readonly|remap|report|restorescreen|revins|rightleft|rightleftcmd|rl|rlc|ro|rs|rtp|ruf|ruler|rulerformat|runtimepath|sbo|sc|scb|scr|scroll|scrollbind|scrolljump|scrolloff|scrollopt|scs|sect|sections|secure|sel|selection|selectmode|sessionoptions|sft|shcf|shellcmdflag|shellpipe|shellquote|shellredir|shellslash|shelltemp|shelltype|shellxquote|shiftround|shiftwidth|shm|shortmess|shortname|showbreak|showcmd|showfulltag|showmatch|showmode|showtabline|shq|si|sidescroll|sidescrolloff|siso|sj|slm|smartcase|smartindent|smarttab|smc|smd|softtabstop|sol|spc|spell|spellcapcheck|spellfile|spelllang|spellsuggest|spf|spl|splitbelow|splitright|sps|sr|srr|ss|ssl|ssop|stal|startofline|statusline|stl|stmp|su|sua|suffixes|suffixesadd|sw|swapfile|swapsync|swb|swf|switchbuf|sws|sxq|syn|synmaxcol|syntax|t_AB|t_AF|t_AL|t_CS|t_CV|t_Ce|t_Co|t_Cs|t_DL|t_EI|t_F1|t_F2|t_F3|t_F4|t_F5|t_F6|t_F7|t_F8|t_F9|t_IE|t_IS|t_K1|t_K3|t_K4|t_K5|t_K6|t_K7|t_K8|t_K9|t_KA|t_KB|t_KC|t_KD|t_KE|t_KF|t_KG|t_KH|t_KI|t_KJ|t_KK|t_KL|t_RI|t_RV|t_SI|t_Sb|t_Sf|t_WP|t_WS|t_ZH|t_ZR|t_al|t_bc|t_cd|t_ce|t_cl|t_cm|t_cs|t_da|t_db|t_dl|t_fs|t_k1|t_k2|t_k3|t_k4|t_k5|t_k6|t_k7|t_k8|t_k9|t_kB|t_kD|t_kI|t_kN|t_kP|t_kb|t_kd|t_ke|t_kh|t_kl|t_kr|t_ks|t_ku|t_le|t_mb|t_md|t_me|t_mr|t_ms|t_nd|t_op|t_se|t_so|t_sr|t_te|t_ti|t_ts|t_ue|t_us|t_ut|t_vb|t_ve|t_vi|t_vs|t_xs|tabline|tabpagemax|tabstop|tagbsearch|taglength|tagrelative|tagstack|tal|tb|tbi|tbidi|tbis|tbs|tenc|term|termbidi|termencoding|terse|textauto|textmode|textwidth|tgst|thesaurus|tildeop|timeout|timeoutlen|title|titlelen|titleold|titlestring|toolbar|toolbariconsize|top|tpm|tsl|tsr|ttimeout|ttimeoutlen|ttm|tty|ttybuiltin|ttyfast|ttym|ttymouse|ttyscroll|ttytype|tw|tx|uc|ul|undolevels|updatecount|updatetime|ut|vb|vbs|vdir|verbosefile|vfile|viewdir|viewoptions|viminfo|virtualedit|visualbell|vop|wak|warn|wb|wc|wcm|wd|weirdinvert|wfh|wfw|whichwrap|wi|wig|wildchar|wildcharm|wildignore|wildmenu|wildmode|wildoptions|wim|winaltkeys|window|winfixheight|winfixwidth|winheight|winminheight|winminwidth|winwidth|wiv|wiw|wm|wmh|wmnu|wmw|wop|wrap|wrapmargin|wrapscan|writeany|writebackup|writedelay|ww)\b/,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?)\b/i,operator:/\|\||&&|[-+.]=?|[=!](?:[=~][#?]?)?|[<>]=?[#?]?|[*\/%?]|\b(?:is(?:not)?)\b/,punctuation:/[{}[\](),;:]/}},3358:()=>{!function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,i="(?:"+n.source+"(?:[ \t]+"+t.source+")?|"+t.source+"(?:[ \t]+"+n.source+")?)",o=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),r=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(e,t){t=(t||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return i})).replace(/<<value>>/g,(function(){return e}));return RegExp(n,t)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return i}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return i})).replace(/<<key>>/g,(function(){return"(?:"+o+"|"+r+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(r),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml}(Prism)},5660:(e,t,n)=>{var i=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,i={},o={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof r?new r(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var i,r;switch(n=n||{},o.util.type(t)){case"Object":if(r=o.util.objId(t),n[r])return n[r];for(var s in i={},n[r]=i,t)t.hasOwnProperty(s)&&(i[s]=e(t[s],n));return i;case"Array":return r=o.util.objId(t),n[r]?n[r]:(i=[],n[r]=i,t.forEach((function(t,o){i[o]=e(t,n)})),i);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(i){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(i.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var i="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(i))return!1;e=e.parentElement}return!!n}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(e,t){var n=o.util.clone(o.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){var r=(i=i||o.languages)[e],s={};for(var a in r)if(r.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=r[a])}var c=i[e];return i[e]=s,o.languages.DFS(o.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,i,r){r=r||{};var s=o.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],i||a);var l=t[a],c=o.util.type(l);"Object"!==c||r[s(l)]?"Array"!==c||r[s(l)]||(r[s(l)]=!0,e(l,n,a,r)):(r[s(l)]=!0,e(l,n,null,r))}}},plugins:{},highlightAll:function(e,t){o.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var i={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",i),i.elements=Array.prototype.slice.apply(i.container.querySelectorAll(i.selector)),o.hooks.run("before-all-elements-highlight",i);for(var r,s=0;r=i.elements[s++];)o.highlightElement(r,!0===t,i.callback)},highlightElement:function(t,n,i){var r=o.util.getLanguage(t),s=o.languages[r];o.util.setLanguage(t,r);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&o.util.setLanguage(a,r);var l={element:t,language:r,grammar:s,code:t.textContent};function c(e){l.highlightedCode=e,o.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o.hooks.run("after-highlight",l),o.hooks.run("complete",l),i&&i.call(l.element)}if(o.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return o.hooks.run("complete",l),void(i&&i.call(l.element));if(o.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var d=new Worker(o.filename);d.onmessage=function(e){c(e.data)},d.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(o.highlight(l.code,l.grammar,l.language));else c(o.util.encode(l.code))},highlight:function(e,t,n){var i={code:e,grammar:t,language:n};if(o.hooks.run("before-tokenize",i),!i.grammar)throw new Error('The language "'+i.language+'" has no grammar.');return i.tokens=o.tokenize(i.code,i.grammar),o.hooks.run("after-tokenize",i),r.stringify(o.util.encode(i.tokens),i.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var i in n)t[i]=n[i];delete t.rest}var o=new l;return c(o,o.head,e),a(e,o,t,o.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=o.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=o.hooks.all[e];if(n&&n.length)for(var i,r=0;i=n[r++];)i(t)}},Token:r};function r(e,t,n,i){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length}function s(e,t,n,i){e.lastIndex=t;var o=e.exec(n);if(o&&i&&o[1]){var r=o[1].length;o.index+=r,o[0]=o[0].slice(r)}return o}function a(e,t,n,i,l,h){for(var u in n)if(n.hasOwnProperty(u)&&n[u]){var p=n[u];p=Array.isArray(p)?p:[p];for(var f=0;f<p.length;++f){if(h&&h.cause==u+","+f)return;var g=p[f],m=g.inside,v=!!g.lookbehind,b=!!g.greedy,y=g.alias;if(b&&!g.pattern.global){var w=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,w+"g")}for(var k=g.pattern||g,x=i.next,S=l;x!==t.tail&&!(h&&S>=h.reach);S+=x.value.length,x=x.next){var C=x.value;if(t.length>e.length)return;if(!(C instanceof r)){var E,T=1;if(b){if(!(E=s(k,S,e,v))||E.index>=e.length)break;var _=E.index,A=E.index+E[0].length,O=S;for(O+=x.value.length;_>=O;)O+=(x=x.next).value.length;if(S=O-=x.value.length,x.value instanceof r)continue;for(var M=x;M!==t.tail&&(O<A||"string"==typeof M.value);M=M.next)T++,O+=M.value.length;T--,C=e.slice(S,O),E.index-=S}else if(!(E=s(k,0,C,v)))continue;_=E.index;var I=E[0],D=C.slice(0,_),N=C.slice(_+I.length),R=S+C.length;h&&R>h.reach&&(h.reach=R);var B=x.prev;if(D&&(B=c(t,B,D),S+=D.length),d(t,B,T),x=c(t,B,new r(u,m?o.tokenize(I,m):I,y,I)),N&&c(t,x,N),T>1){var L={cause:u+","+f,reach:R};a(e,t,n,x.prev,S,L),h&&L.reach>h.reach&&(h.reach=L.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var i=t.next,o={value:n,prev:t,next:i};return t.next=o,i.prev=o,e.length++,o}function d(e,t,n){for(var i=t.next,o=0;o<n&&i!==e.tail;o++)i=i.next;t.next=i,i.prev=t,e.length-=o}if(e.Prism=o,r.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var i="";return t.forEach((function(t){i+=e(t,n)})),i}var r={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(r.classes,s):r.classes.push(s)),o.hooks.run("wrap",r);var a="";for(var l in r.attributes)a+=" "+l+'="'+(r.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+a+">"+r.content+"</"+r.tag+">"},!e.document)return e.addEventListener?(o.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),i=n.language,r=n.code,s=n.immediateClose;e.postMessage(o.highlight(r,o.languages[i],i)),s&&e.close()}),!1),o):o;var h=o.util.currentScript();function u(){o.manual||o.highlightAll()}if(h&&(o.filename=h.src,h.hasAttribute("data-manual")&&(o.manual=!0)),!o.manual){var p=document.readyState;"loading"===p||"interactive"===p&&h&&h.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */e.exports&&(e.exports=i),void 0!==n.g&&(n.g.Prism=i),i.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},i.languages.markup.tag.inside["attr-value"].inside.entity=i.languages.markup.entity,i.languages.markup.doctype.inside["internal-subset"].inside=i.languages.markup,i.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(i.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:i.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+t]={pattern:/[\s\S]+/,inside:i.languages[t]};var r={};r[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:o},i.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(i.languages.markup.tag,"addAttribute",{value:function(e,t){i.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:i.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.xml=i.languages.extend("markup",{}),i.languages.ssml=i.languages.xml,i.languages.atom=i.languages.xml,i.languages.rss=i.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(i),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{"class-name":[i.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),i.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,i.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:i.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:i.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:i.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:i.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:i.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),i.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),i.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),i.languages.markup&&(i.languages.markup.tag.addInlined("script","javascript"),i.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),i.languages.js=i.languages.javascript,function(){if(void 0!==i&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",o="loaded",r="pre[data-src]:not(["+t+'="'+o+'"]):not(['+t+'="'+n+'"])';i.hooks.add("before-highlightall",(function(e){e.selector+=", "+r})),i.hooks.add("before-sanity-check",(function(s){var a=s.element;if(a.matches(r)){s.code="",a.setAttribute(t,n);var l=a.appendChild(document.createElement("CODE"));l.textContent="Loading…";var c=a.getAttribute("data-src"),d=s.language;if("none"===d){var h=(/\.(\w+)$/.exec(c)||[,"none"])[1];d=e[h]||h}i.util.setLanguage(l,d),i.util.setLanguage(a,d);var u=i.plugins.autoloader;u&&u.loadLanguages(d),function(e,t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status<400&&i.responseText?t(i.responseText):i.status>=400?n("✖ Error "+i.status+" while fetching file: "+i.statusText):n("✖ Error: File does not exist or is empty"))},i.send(null)}(c,(function(e){a.setAttribute(t,o);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),i=t[2],o=t[3];return i?o?[n,Number(o)]:[n,void 0]:[n,n]}}(a.getAttribute("data-range"));if(n){var r=e.split(/\r\n?|\n/g),s=n[0],c=null==n[1]?r.length:n[1];s<0&&(s+=r.length),s=Math.max(0,Math.min(s-1,r.length)),c<0&&(c+=r.length),c=Math.max(0,Math.min(c,r.length)),e=r.slice(s,c).join("\n"),a.hasAttribute("data-start")||a.setAttribute("data-start",String(s+1))}l.textContent=e,i.highlightElement(l)}),(function(e){a.setAttribute(t,"failed"),l.textContent=e}))}})),i.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(r),o=0;t=n[o++];)i.highlightElement(t)}};var s=!1;i.fileHighlight=function(){s||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),s=!0),i.plugins.fileHighlight.highlight.apply(this,arguments)}}}()},2703:(e,t,n)=>{"use strict";var i=n(414);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},53:(e,t)=>{"use strict";
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(!(0<r(o,t)))break e;e[i]=t,e[n]=o,n=i}}function i(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,s=o>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,d=e[c];if(0>r(l,n))c<o&&0>r(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<o&&0>r(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,u=null,p=3,f=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function k(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,N(x);else{var t=i(d);null!==t&&R(k,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,b(T),T=-1),f=!0;var r=p;try{for(w(n),u=i(c);null!==u&&(!(u.expirationTime>n)||e&&!O());){var s=u.callback;if("function"==typeof s){u.callback=null,p=u.priorityLevel;var a=s(u.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?u.callback=a:u===i(c)&&o(c),w(n)}else o(c);u=i(c)}if(null!==u)var l=!0;else{var h=i(d);null!==h&&R(k,h.startTime-n),l=!1}return l}finally{u=null,p=r,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,T=-1,_=5,A=-1;function O(){return!(t.unstable_now()-A<_)}function M(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"==typeof y)S=function(){y(M)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,D=I.port2;I.port1.onmessage=M,S=function(){D.postMessage(null)}}else S=function(){v(M,0)};function N(e){E=e,C||(C=!0,S())}function R(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,r){var s=t.unstable_now();switch("object"==typeof r&&null!==r?r="number"==typeof(r=r.delay)&&0<r?s+r:s:r=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:o,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>s?(e.sortIndex=r,n(d,e),null===i(c)&&e===i(d)&&(m?(b(T),T=-1):m=!0,R(k,r-s))):(e.sortIndex=a,n(c,e),g||f||(g=!0,N(x))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},6774:e=>{e.exports=function(e,t,n,i){var o=n?n.call(i,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<r.length;l++){var c=r[l];if(!a(c))return!1;var d=e[c],h=t[c];if(!1===(o=n?n.call(i,d,h,c):void 0)||void 0===o&&d!==h)return!1}return!0}},616:e=>{var t;self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>S});var n=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};const i=e=>`<span>${e.title}</span>`,o={collapsed:'\n\t\t<svg\n\t\txmlns="http://www.w3.org/2000/svg" \n\t\twidth="1em" \n\t\theight="1em" \n\t\tfill="currentColor" \n\t\tclass="bi bi-caret-right-fill" \n\t\tviewBox="0 0 16 16">\n\t\t\t<path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>\n\t\t</svg>',open:'\n\t\t<svg \n\t\txmlns="http://www.w3.org/2000/svg" \n\t\twidth="1em" \n\t\theight="1em" \n\t\tfill="currentColor" \n\t\tclass="bi bi-caret-down-fill" \n\t\tviewBox="0 0 16 16">\n\t\t\t<path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>\n\t\t</svg>\n\t'},r={tree:"tree",node:"tree__node",nodeHover:"tree__node--hover",nodeDragging:"tree__node--dragging",nodeDropBefore:"tree__node--drop-before",nodeDropInside:"tree__node--drop-inside",nodeDropAfter:"tree__node--drop-after",label:"tree__label",subnodes:"tree__subnodes",collapse:"tree__collapse"},s=({nodes:e,movedNode:t,srcParentNode:i,targetParentNode:o})=>n(void 0,void 0,void 0,(function*(){})),a=(e,t)=>n(void 0,void 0,void 0,(function*(){})),l=(e,t)=>n(void 0,void 0,void 0,(function*(){return!0})),c=(e,t=[],n=null)=>{const i=document.createElement(e);return t.forEach((e=>{i.classList.add(e)})),n&&n.appendChild(i),i};class d extends HTMLElement{static create({data:e,renderLabel:t,icons:n,styles:i,parent:o,onClick:r,draggable:s}){const a=c(d.TAG_NAME,[i.node],o),l=c("div",[i.label],a),h=c("div",[i.subnodes],a),u=c("span",[i.collapse],a);return l.innerHTML=t(e),u.innerHTML=n.collapsed,u.addEventListener("click",a.toggle.bind(a)),l.addEventListener("click",(e=>{r(e,a)})),s&&a.setAttribute("draggable","true"),a._data=e,a._icons=n,a._label=l,a._nodes=h,a._collapseButton=u,a}get data(){return this._data}get label(){return this._label}get subnodes(){return this._nodes}get subnodesData(){const e=[];return Array.from(this._nodes.children).forEach((t=>{e.push(t.data)})),e}get id(){return this._id}constructor(){super(),this._id=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))()}collapse(e){e?(this.removeAttribute("open"),this._collapseButton.innerHTML=this._icons.collapsed):(this.setAttribute("open","true"),this._collapseButton.innerHTML=this._icons.open)}toggle(){this.collapse(this.hasAttribute("open"))}reveal(){((e,t)=>{const n=[];let i=this.closest(e);for(;null!==i;)n.push(i),i=i.parentNode.closest(e);return n})(d.TAG_NAME).forEach((e=>{e.collapse(!1)}))}}d.TAG_NAME="sortable-tree-node";const h=({node:e,eventName:t,handler:n,tree:i})=>{e.addEventListener(t,(e=>{n(e,i)}),!1)};var u;!function(e){e.BEFORE="BEFORE",e.INSIDE="INSIDE",e.AFTER="AFTER"}(u||(u={}));const p=e=>{const t=e.clientY,n=f(e).label.getBoundingClientRect(),i=Math.round(n.height/4);return n.top+i>t?u.BEFORE:n.bottom-i<t?u.AFTER:u.INSIDE},f=e=>e.target.closest(d.TAG_NAME),g=e=>{const t=null==e?void 0:e.parentElement.parentElement;return(null==t?void 0:t.tagName.toLowerCase())!==d.TAG_NAME?null:t},m=(e,t)=>{f(e).classList.remove(t.styles.nodeDropAfter,t.styles.nodeDropBefore,t.styles.nodeDropInside)},v=(e,t)=>{e.stopPropagation();const n=e.target;n.tagName.toLowerCase()===d.TAG_NAME&&(e.dataTransfer.setData("text",n.id),e.dataTransfer.effectAllowed="move",n.classList.add(t.styles.nodeDragging))},b=(e,t)=>function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){e.stopPropagation(),e.preventDefault(),m(e,t);const n=f(e);if(!n)return!1;const i=g(n),o=e.dataTransfer.getData("text"),r=p(e),s=t.getNode(o);if(!s||(null==s?void 0:s.contains(n)))return!1;const a=g(s);if(t.lockRootLevel&&!(null==n?void 0:n.parentElement.closest(d.TAG_NAME))&&(r===u.BEFORE||r===u.AFTER))return!1;if(r===u.BEFORE)return!!(yield t.confirm(s,i))&&(n.parentNode.insertBefore(s,n),t.onDrop(s,a,i),!1);if(r===u.AFTER){if(!(yield t.confirm(s,i)))return!1;const e=n.nextElementSibling;return e?(n.parentNode.insertBefore(s,e),t.onDrop(s,a,i)):(n.parentNode.appendChild(s),t.onDrop(s,a,i)),!1}return!!(yield t.confirm(s,n))&&(n.subnodes.appendChild(s),t.onDrop(s,a,n),!1)})),y=(e,t)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",((e,t)=>{const n=f(e),i=p(e);n.classList.toggle(t.styles.nodeDropBefore,i===u.BEFORE),n.classList.toggle(t.styles.nodeDropInside,i===u.INSIDE),n.classList.toggle(t.styles.nodeDropAfter,i===u.AFTER)})(e,t)},w=(e,t)=>{m(e,t)},k=(e,t)=>{e.target.classList.remove(t.styles.nodeDragging),m(e,t)},x=e=>`sortableTreeState-${e.replace(/[^\w]+/,"-")}`,S=class{constructor({nodes:e,element:t,renderLabel:n,icons:c,styles:d,lockRootLevel:h,onChange:u,onClick:p,initCollapseLevel:f,confirm:g,disableSorting:m,stateId:v}){this.nodeCollection={},e&&(t?(this.defineElements(),this.root=t,this.icons=Object.assign(Object.assign({},o),c),this.styles=Object.assign(Object.assign({},r),d),this.renderLabel=n||i,this.lockRootLevel=void 0===h||h,this.onChange=u||s,this.onClick=p||a,this.confirm=g||l,this.initCollapseLevel=void 0===f?2:f,this.disableSorting=m||!1,t.classList.add(this.styles.tree),this.render({nodes:e,element:t}),v&&(((e,t)=>{const n=sessionStorage.getItem(x(e));if(!n)return;const i=JSON.parse(n),o=(e,t)=>{const[n,i]=t;e.element.collapse(0===n),i&&e.subnodes.forEach(((e,t)=>{void 0!==i[t]&&o(e,i[t])}))};t.forEach(((e,t)=>{o(e,i[t])}))})(v,this.parseTree(this.root)),this.initStateObserver(v))):console.error('Error: "element" is not a valid HTML element!'))}getNode(e){return this.nodeCollection[e]}findNode(e,t){const n=Object.values(this.nodeCollection);for(let i=0;i<n.length;i++){const o=n[i],r=o.data;if(e in r&&r[e]==t)return o}return null}onDrop(e,t,n){const i={nodes:this.parseTree(this.root),movedNode:e,srcParentNode:t,targetParentNode:n};null==n||n.collapse(!1),this.onChange(i)}destroy(){this.observer.disconnect(),this.observer=null}initStateObserver(e){this.observer=new MutationObserver((()=>{((e,t)=>{const n=[],i=e=>{const t=[],n=[e.element.getAttribute("open")?1:0,t];return e.subnodes.forEach((e=>{t.push(i(e))})),n};t.forEach((e=>{n.push(i(e))})),sessionStorage.setItem(x(e),JSON.stringify(n))})(e,this.parseTree(this.root))})),this.observer.observe(this.root,{childList:!0,attributes:!0,subtree:!0})}defineElements(){try{customElements.define(d.TAG_NAME,d)}catch(e){}}render({nodes:e,element:t},n=0){n++,e.forEach((e=>{const i=d.create({icons:this.icons,styles:this.styles,parent:t,renderLabel:this.renderLabel,data:e.data,onClick:this.onClick,draggable:!this.disableSorting});this.disableSorting||((e,t)=>{const n={dragstart:v,drop:b,dragover:y,dragend:k,dragleave:w};for(const[i,o]of Object.entries(n))h({node:e,eventName:i,handler:o,tree:t})})(i,this),i.collapse(n>this.initCollapseLevel),this.nodeCollection[i.id]=i,e.nodes&&this.render({nodes:e.nodes,element:i.subnodes},n)}))}parseTree(e){const t=Array.from(e.querySelectorAll(`:scope > ${d.TAG_NAME}`)),n=[];return t.forEach((e=>{n.push({element:e,id:e.id,subnodes:this.parseTree(e.subnodes)})})),n}};return t.default})(),e.exports=t()},1474:(e,t,n)=>{"use strict";
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{ZP:()=>st});function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var d=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),h=c(/Edge/i),u=c(/firefox/i),p=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),f=c(/iP(ad|od|hone)/i),g=c(/chrome/i)&&c(/android/i),m={capture:!1,passive:!1};function v(e,t,n){e.addEventListener(t,n,!d&&m)}function b(e,t,n){e.removeEventListener(t,n,!d&&m)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function w(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function k(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||i&&e===n)return e;if(e===n)break}while(e=w(e))}return null}var x,S=/\s+/g;function C(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(S," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(S," ")}}function E(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function T(e,t){var n="";if("string"==typeof e)n=e;else do{var i=E(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function _(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function A(){var e=document.scrollingElement;return e||document.documentElement}function O(e,t,n,i,o){if(e.getBoundingClientRect||e===window){var r,s,a,l,c,h,u;if(e!==window&&e.parentNode&&e!==A()?(s=(r=e.getBoundingClientRect()).top,a=r.left,l=r.bottom,c=r.right,h=r.height,u=r.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!d))do{if(o&&o.getBoundingClientRect&&("none"!==E(o,"transform")||n&&"static"!==E(o,"position"))){var p=o.getBoundingClientRect();s-=p.top+parseInt(E(o,"border-top-width")),a-=p.left+parseInt(E(o,"border-left-width")),l=s+r.height,c=a+r.width;break}}while(o=o.parentNode);if(i&&e!==window){var f=T(o||e),g=f&&f.a,m=f&&f.d;f&&(l=(s/=m)+(h/=m),c=(a/=g)+(u/=g))}return{top:s,left:a,bottom:l,right:c,width:u,height:h}}}function M(e,t,n){for(var i=B(e,!0),o=O(e)[t];i;){var r=O(i)[n];if(!("top"===n||"left"===n?o>=r:o<=r))return i;if(i===A())break;i=B(i,!1)}return!1}function I(e,t,n,i){for(var o=0,r=0,s=e.children;r<s.length;){if("none"!==s[r].style.display&&s[r]!==ze.ghost&&(i||s[r]!==ze.dragged)&&k(s[r],n.draggable,e,!1)){if(o===t)return s[r];o++}r++}return null}function D(e,t){for(var n=e.lastElementChild;n&&(n===ze.ghost||"none"===E(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function N(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ze.clone||t&&!y(e,t)||n++;return n}function R(e){var t=0,n=0,i=A();if(e)do{var o=T(e),r=o.a,s=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*s}while(e!==i&&(e=e.parentNode));return[t,n]}function B(e,t){if(!e||!e.getBoundingClientRect)return A();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=E(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return A();if(i||t)return n;i=!0}}}while(n=n.parentNode);return A()}function L(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function P(e,t){return function(){if(!x){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),x=setTimeout((function(){x=void 0}),t)}}}function F(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function z(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var H="Sortable"+(new Date).getTime();function j(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==E(e,"display")&&e!==ze.ghost){t.push({target:e,rect:O(e)});var n=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=T(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,r=0;t.forEach((function(e){var t=0,n=e.target,s=n.fromRect,a=O(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,h=T(n,!0);h&&(a.top-=h.f,a.left-=h.e),n.toRect=a,n.thisAnimationDuration&&L(l,a)&&!L(s,a)&&(d.top-a.top)/(d.left-a.left)==(s.top-a.top)/(s.left-a.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(d,l,c,i.options)),L(a,s)||(n.prevFromRect=s,n.prevToRect=a,t||(t=i.options.animation),i.animate(n,d,a,t)),t&&(o=!0,r=Math.max(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),r):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){E(e,"transition",""),E(e,"transform","");var o=T(this.el),r=o&&o.a,s=o&&o.d,a=(t.left-n.left)/(r||1),l=(t.top-n.top)/(s||1);e.animatingX=!!a,e.animatingY=!!l,E(e,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),E(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),E(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){E(e,"transition",""),E(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var G=[],U={initializeByDefault:!0},$={mount:function(e){for(var t in U)U.hasOwnProperty(t)&&!(t in e)&&(e[t]=U[t]);G.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),G.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";G.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](o({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](o({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var o in G.forEach((function(i){var o=i.pluginName;if(e.options[o]||i.initializeByDefault){var r=new i(e,t,e.options);r.sortable=e,r.options=e.options,e[o]=r,a(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);void 0!==r&&(e.options[o]=r)}},getEventProperties:function(e,t){var n={};return G.forEach((function(i){"function"==typeof i.eventProperties&&a(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return G.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(i=o.optionListeners[t].call(e[o.pluginName],n))})),i}};function W(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,s=e.cloneEl,a=e.toEl,l=e.fromEl,c=e.oldIndex,u=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,m=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[H]){var b,y=t.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||d||h?(b=document.createEvent("Event")).initEvent(i,!0,!0):b=new CustomEvent(i,{bubbles:!0,cancelable:!0}),b.to=a||n,b.from=l||n,b.item=r||n,b.clone=s,b.oldIndex=c,b.newIndex=u,b.oldDraggableIndex=p,b.newDraggableIndex=f,b.originalEvent=g,b.pullMode=m?m.lastPutMode:void 0;var k=o(o({},v),$.getEventProperties(i,t));for(var x in k)b[x]=k[x];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var V=["evt"],q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=l(n,V);$.pluginEvent.bind(ze)(e,t,o({dragEl:K,parentEl:Z,ghostEl:X,rootEl:J,nextEl:Q,lastDownEl:ee,cloneEl:te,cloneHidden:ne,dragStarted:ge,putSortable:le,activeSortable:ze.active,originalEvent:i,oldIndex:ie,oldDraggableIndex:re,newIndex:oe,newDraggableIndex:se,hideGhostForTarget:Be,unhideGhostForTarget:Le,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(e){Y({sortable:t,name:e,originalEvent:i})}},r))};function Y(e){W(o({putSortable:le,cloneEl:te,targetEl:K,rootEl:J,oldIndex:ie,oldDraggableIndex:re,newIndex:oe,newDraggableIndex:se},e))}var K,Z,X,J,Q,ee,te,ne,ie,oe,re,se,ae,le,ce,de,he,ue,pe,fe,ge,me,ve,be,ye,we=!1,ke=!1,xe=[],Se=!1,Ce=!1,Ee=[],Te=!1,_e=[],Ae="undefined"!=typeof document,Oe=f,Me=h||d?"cssFloat":"float",Ie=Ae&&!g&&!f&&"draggable"in document.createElement("div"),De=function(){if(Ae){if(d)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ne=function(e,t){var n=E(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=I(e,0,t),r=I(e,1,t),s=o&&E(o),a=r&&E(r),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+O(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!r||"both"!==a.clear&&a.clear!==d?"horizontal":"vertical"}return o&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=i&&"none"===n[Me]||r&&"none"===n[Me]&&l+c>i)?"vertical":"horizontal"},Re=function(e){function t(e,n){return function(i,o,r,s){var a=i.options.group.name&&o.options.group.name&&i.options.group.name===o.options.group.name;if(null==e&&(n||a))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,o,r,s),n)(i,o,r,s);var l=(n?i:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==r(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Be=function(){!De&&X&&E(X,"display","none")},Le=function(){!De&&X&&E(X,"display","")};Ae&&!g&&document.addEventListener("click",(function(e){if(ke)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ke=!1,!1}),!0);var Pe=function(e){if(K){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,r=e.clientY,xe.some((function(e){var t=e[H].options.emptyInsertThreshold;if(t&&!D(e)){var n=O(e),i=o>=n.left-t&&o<=n.right+t,a=r>=n.top-t&&r<=n.bottom+t;return i&&a?s=e:void 0}})),s);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[H]._onDragOver(n)}}var o,r,s},Fe=function(e){K&&K.parentNode[H]._isOutsideThisEl(e.target)};function ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[H]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ne(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ze.supportPointer&&"PointerEvent"in window&&!p,emptyInsertThreshold:5};for(var i in $.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var o in Re(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Ie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,j())}function He(e,t,n,i,o,r,s,a){var l,c,u=e[H],p=u.options.onMove;return!window.CustomEvent||d||h?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=o||t,l.relatedRect=r||O(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),p&&(c=p.call(u,l,s)),c}function je(e){e.draggable=!1}function Ge(){Te=!1}function Ue(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function $e(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}ze.prototype={constructor:ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(me=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,K):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,o=i.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=i.filter;if(function(e){_e.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&_e.push(i)}}(n),!K&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!p||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=k(a,i.draggable,n,!1))&&a.animated||ee===a)){if(ie=N(a),re=N(a,i.draggable),"function"==typeof c){if(c.call(this,e,a,this))return Y({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),q("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=k(l,i.trim(),n,!1))return Y({sortable:t,rootEl:i,name:"filter",targetEl:a,fromEl:n,toEl:n}),q("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());i.handle&&!k(l,i.handle,n,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,n){var i,o=this,r=o.el,s=o.options,a=r.ownerDocument;if(n&&!K&&n.parentNode===r){var l=O(n);if(J=r,Z=(K=n).parentNode,Q=K.nextSibling,ee=n,ae=s.group,ze.dragged=K,ce={target:K,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=ce.clientX-l.left,fe=ce.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,K.style["will-change"]="all",i=function(){q("delayEnded",o,{evt:e}),ze.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!u&&o.nativeDraggable&&(K.draggable=!0),o._triggerDragStart(e,t),Y({sortable:o,name:"choose",originalEvent:e}),C(K,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){_(K,e.trim(),je)})),v(a,"dragover",Pe),v(a,"mousemove",Pe),v(a,"touchmove",Pe),v(a,"mouseup",o._onDrop),v(a,"touchend",o._onDrop),v(a,"touchcancel",o._onDrop),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),q("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(h||d))i();else{if(ze.eventCanceled)return void this._onDrop();v(a,"mouseup",o._disableDelayedDrag),v(a,"touchend",o._disableDelayedDrag),v(a,"touchcancel",o._disableDelayedDrag),v(a,"mousemove",o._delayedDragTouchMoveHandler),v(a,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&v(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&je(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,t?"touchmove":"mousemove",this._onTouchMove):(v(K,"dragend",this),v(J,"dragstart",this._onDragStart));try{document.selection?$e((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(we=!1,J&&K){q("dragStarted",this,{evt:t}),this.nativeDraggable&&v(document,"dragover",Fe);var n=this.options;!e&&C(K,n.dragClass,!1),C(K,n.ghostClass,!0),ze.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Be();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(K.parentNode[H]._isOutsideThisEl(e),t)do{if(t[H]){if(t[H]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Le()}},_onTouchMove:function(e){if(ce){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,o=e.touches?e.touches[0]:e,r=X&&T(X,!0),s=X&&r&&r.a,a=X&&r&&r.d,l=Oe&&ye&&R(ye),c=(o.clientX-ce.clientX+i.x)/(s||1)+(l?l[0]-Ee[0]:0)/(s||1),d=(o.clientY-ce.clientY+i.y)/(a||1)+(l?l[1]-Ee[1]:0)/(a||1);if(!ze.active&&!we){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(X){r?(r.e+=c-(he||0),r.f+=d-(ue||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");E(X,"webkitTransform",h),E(X,"mozTransform",h),E(X,"msTransform",h),E(X,"transform",h),he=c,ue=d,de=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!X){var e=this.options.fallbackOnBody?document.body:J,t=O(K,!0,Oe,!0,e),n=this.options;if(Oe){for(ye=e;"static"===E(ye,"position")&&"none"===E(ye,"transform")&&ye!==document;)ye=ye.parentNode;ye!==document.body&&ye!==document.documentElement?(ye===document&&(ye=A()),t.top+=ye.scrollTop,t.left+=ye.scrollLeft):ye=A(),Ee=R(ye)}C(X=K.cloneNode(!0),n.ghostClass,!1),C(X,n.fallbackClass,!0),C(X,n.dragClass,!0),E(X,"transition",""),E(X,"transform",""),E(X,"box-sizing","border-box"),E(X,"margin",0),E(X,"top",t.top),E(X,"left",t.left),E(X,"width",t.width),E(X,"height",t.height),E(X,"opacity","0.8"),E(X,"position",Oe?"absolute":"fixed"),E(X,"zIndex","100000"),E(X,"pointerEvents","none"),ze.ghost=X,e.appendChild(X),E(X,"transform-origin",pe/parseInt(X.style.width)*100+"% "+fe/parseInt(X.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,o=n.options;q("dragStart",this,{evt:e}),ze.eventCanceled?this._onDrop():(q("setupClone",this),ze.eventCanceled||((te=z(K)).removeAttribute("id"),te.draggable=!1,te.style["will-change"]="",this._hideClone(),C(te,this.options.chosenClass,!1),ze.clone=te),n.cloneId=$e((function(){q("clone",n),ze.eventCanceled||(n.options.removeCloneOnHide||J.insertBefore(te,K),n._hideClone(),Y({sortable:n,name:"clone"}))})),!t&&C(K,o.dragClass,!0),t?(ke=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,K)),v(document,"drop",n),E(K,"transform","translateZ(0)")),we=!0,n._dragStartId=$e(n._dragStarted.bind(n,t,e)),v(document,"selectstart",n),ge=!0,p&&E(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,s=this.el,a=e.target,l=this.options,c=l.group,d=ze.active,h=ae===c,u=l.sort,p=le||d,f=this,g=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=k(a,l.draggable,s,!0),z("dragOver"),ze.eventCanceled)return g;if(K.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return G(!1);if(ke=!1,d&&!l.disabled&&(h?u||(i=Z!==J):le===this||(this.lastPutMode=ae.checkPull(this,d,K,e))&&c.checkPut(this,d,K,e))){if(r="vertical"===this._getDirection(e,a),t=O(K),z("dragOverValid"),ze.eventCanceled)return g;if(i)return Z=J,j(),this._hideClone(),z("revert"),ze.eventCanceled||(Q?J.insertBefore(K,Q):J.appendChild(K)),G(!0);var m=D(s,l.draggable);if(!m||function(e,t,n){var i=O(D(n.el,n.options.draggable)),o=10;return t?e.clientX>i.right+o||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+o}(e,r,this)&&!m.animated){if(m===K)return G(!1);if(m&&s===e.target&&(a=m),a&&(n=O(a)),!1!==He(J,s,K,t,a,n,e,!!a))return j(),m&&m.nextSibling?s.insertBefore(K,m.nextSibling):s.appendChild(K),Z=s,U(),G(!0)}else if(m&&function(e,t,n){var i=O(I(n.el,0,n.options,!0)),o=10;return t?e.clientX<i.left-o||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-o||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var v=I(s,0,l,!0);if(v===K)return G(!1);if(n=O(a=v),!1!==He(J,s,K,t,a,n,e,!1))return j(),s.insertBefore(K,v),Z=s,U(),G(!0)}else if(a.parentNode===s){n=O(a);var b,y,w,x=K.parentNode!==s,S=!function(e,t,n){var i=n?e.left:e.top,o=n?e.right:e.bottom,r=n?e.width:e.height,s=n?t.left:t.top,a=n?t.right:t.bottom,l=n?t.width:t.height;return i===s||o===a||i+r/2===s+l/2}(K.animated&&K.toRect||t,a.animated&&a.toRect||n,r),T=r?"top":"left",_=M(a,"top","top")||M(K,"top","top"),A=_?_.scrollTop:void 0;if(me!==a&&(y=n[T],Se=!1,Ce=!S&&l.invertSwap||x),b=function(e,t,n,i,o,r,s,a){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,d=i?n.top:n.left,h=i?n.bottom:n.right,u=!1;if(!s)if(a&&be<c*o){if(!Se&&(1===ve?l>d+c*r/2:l<h-c*r/2)&&(Se=!0),Se)u=!0;else if(1===ve?l<d+be:l>h-be)return-ve}else if(l>d+c*(1-o)/2&&l<h-c*(1-o)/2)return function(e){return N(K)<N(e)?1:-1}(t);if((u=u||s)&&(l<d+c*r/2||l>h-c*r/2))return l>d+c/2?1:-1;return 0}(e,a,n,r,S?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ce,me===a),0!==b){var R=N(K);do{R-=b,w=Z.children[R]}while(w&&("none"===E(w,"display")||w===X))}if(0===b||w===a)return G(!1);me=a,ve=b;var B=a.nextElementSibling,L=!1,P=He(J,s,K,t,a,n,e,L=1===b);if(!1!==P)return 1!==P&&-1!==P||(L=1===P),Te=!0,setTimeout(Ge,30),j(),L&&!B?s.appendChild(K):a.parentNode.insertBefore(K,L?B:a),_&&F(_,0,A-_.scrollTop),Z=K.parentNode,void 0===y||Ce||(be=Math.abs(y-O(a)[T])),U(),G(!0)}if(s.contains(K))return G(!1)}return!1}function z(l,c){q(l,f,o({evt:e,isOwner:h,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:u,fromSortable:p,target:a,completed:G,onMove:function(n,i){return He(J,s,K,t,n,O(n),e,i)},changed:U},c))}function j(){z("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function G(t){return z("dragOverCompleted",{insertion:t}),t&&(h?d._hideClone():d._showClone(f),f!==p&&(C(K,le?le.options.ghostClass:d.options.ghostClass,!1),C(K,l.ghostClass,!0)),le!==f&&f!==ze.active?le=f:f===ze.active&&le&&(le=null),p===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){z("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===K&&!K.animated||a===s&&!a.animated)&&(me=null),l.dragoverBubble||e.rootEl||a===document||(K.parentNode[H]._isOutsideThisEl(e.target),!t&&Pe(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function U(){oe=N(K),se=N(K,l.draggable),Y({sortable:f,name:"change",toEl:s,newIndex:oe,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",Pe),b(document,"mousemove",Pe),b(document,"touchmove",Pe)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;oe=N(K),se=N(K,n.draggable),q("drop",this,{evt:e}),Z=K&&K.parentNode,oe=N(K),se=N(K,n.draggable),ze.eventCanceled||(we=!1,Ce=!1,Se=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&E(document.body,"user-select",""),E(K,"transform",""),e&&(ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(J===Z||le&&"clone"!==le.lastPutMode)&&te&&te.parentNode&&te.parentNode.removeChild(te),K&&(this.nativeDraggable&&b(K,"dragend",this),je(K),K.style["will-change"]="",ge&&!we&&C(K,le?le.options.ghostClass:this.options.ghostClass,!1),C(K,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==Z?(oe>=0&&(Y({rootEl:Z,name:"add",toEl:Z,fromEl:J,originalEvent:e}),Y({sortable:this,name:"remove",toEl:Z,originalEvent:e}),Y({rootEl:Z,name:"sort",toEl:Z,fromEl:J,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Z,originalEvent:e})),le&&le.save()):oe!==ie&&oe>=0&&(Y({sortable:this,name:"update",toEl:Z,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Z,originalEvent:e})),ze.active&&(null!=oe&&-1!==oe||(oe=ie,se=re),Y({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){q("nulling",this),J=K=Z=X=Q=te=ee=ne=ce=de=ge=oe=se=ie=re=me=ve=le=ae=ze.dragged=ze.ghost=ze.clone=ze.active=null,_e.forEach((function(e){e.checked=!0})),_e.length=he=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":K&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)k(e=n[i],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Ue(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var o=i.children[t];k(o,this.options.draggable,i,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return k(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=$.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&Re(n)},destroy:function(){q("destroy",this);var e=this.el;e[H]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ne){if(q("hideClone",this),ze.eventCanceled)return;E(te,"display","none"),this.options.removeCloneOnHide&&te.parentNode&&te.parentNode.removeChild(te),ne=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ne){if(q("showClone",this),ze.eventCanceled)return;K.parentNode!=J||this.options.group.revertClone?Q?J.insertBefore(te,Q):J.appendChild(te):J.insertBefore(te,K),this.options.group.revertClone&&this.animate(K,te),E(te,"display",""),ne=!1}}else this._hideClone()}},Ae&&v(document,"touchmove",(function(e){(ze.active||we)&&e.cancelable&&e.preventDefault()})),ze.utils={on:v,off:b,css:E,find:_,is:function(e,t){return!!k(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:P,closest:k,toggleClass:C,clone:z,index:N,nextTick:$e,cancelNextTick:We,detectDirection:Ne,getChild:I},ze.get=function(e){return e[H]},ze.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(ze.utils=o(o({},ze.utils),e.utils)),$.mount(e)}))},ze.create=function(e,t){return new ze(e,t)},ze.version="1.15.0";var Ve,qe,Ye,Ke,Ze,Xe,Je=[],Qe=!1;function et(){Je.forEach((function(e){clearInterval(e.pid)})),Je=[]}function tt(){clearInterval(Xe)}var nt=P((function(e,t,n,i){if(t.scroll){var o,r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,c=A(),d=!1;qe!==n&&(qe=n,et(),Ve=t.scroll,o=t.scrollFn,!0===Ve&&(Ve=B(n,!0)));var h=0,u=Ve;do{var p=u,f=O(p),g=f.top,m=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,k=void 0,x=void 0,S=p.scrollWidth,C=p.scrollHeight,T=E(p),_=p.scrollLeft,M=p.scrollTop;p===c?(k=y<S&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),x=w<C&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(k=y<S&&("auto"===T.overflowX||"scroll"===T.overflowX),x=w<C&&("auto"===T.overflowY||"scroll"===T.overflowY));var I=k&&(Math.abs(b-r)<=a&&_+y<S)-(Math.abs(v-r)<=a&&!!_),D=x&&(Math.abs(m-s)<=a&&M+w<C)-(Math.abs(g-s)<=a&&!!M);if(!Je[h])for(var N=0;N<=h;N++)Je[N]||(Je[N]={});Je[h].vx==I&&Je[h].vy==D&&Je[h].el===p||(Je[h].el=p,Je[h].vx=I,Je[h].vy=D,clearInterval(Je[h].pid),0==I&&0==D||(d=!0,Je[h].pid=setInterval(function(){i&&0===this.layer&&ze.active._onTouchMove(Ze);var t=Je[this.layer].vy?Je[this.layer].vy*l:0,n=Je[this.layer].vx?Je[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(ze.dragged.parentNode[H],n,t,e,Ze,Je[this.layer].el)||F(Je[this.layer].el,n,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&u!==c&&(u=B(u,!1)));Qe=d}}),30),it=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=n||o;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(d)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ot(){}function rt(){}ot.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=I(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:it},a(ot,{pluginName:"revertOnSpill"}),rt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:it},a(rt,{pluginName:"removeOnSpill"});ze.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):t.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),tt(),et(),clearTimeout(x),x=void 0},nulling:function(){Ze=qe=Ve=Qe=Xe=Ye=Ke=null,Je.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(i,o);if(Ze=e,t||this.options.forceAutoScrollFallback||h||d||p){nt(e,this.options,r,t);var s=B(r,!0);!Qe||Xe&&i===Ye&&o===Ke||(Xe&&tt(),Xe=setInterval((function(){var r=B(document.elementFromPoint(i,o),!0);r!==s&&(s=r,et()),nt(e,n.options,r,t)}),10),Ye=i,Ke=o)}else{if(!this.options.bubbleScroll||B(r,!0)===A())return void et();nt(e,this.options,B(r,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),ze.mount(rt,ot);const st=ze},2788:(e,t,n)=>{"use strict";n.d(t,{f6:()=>Ie,vJ:()=>Le,iv:()=>ye,ZP:()=>ze,F4:()=>Pe,Fg:()=>Fe});var i=n(9864),o=n(7294),r=n(6774),s=n.n(r);const a=function(e){function t(e,i,l,c,u){for(var p,f,g,m,w,x=0,S=0,C=0,E=0,T=0,D=0,R=g=p=0,L=0,P=0,F=0,z=0,H=l.length,j=H-1,G="",U="",$="",W="";L<H;){if(f=l.charCodeAt(L),L===j&&0!==S+E+C+x&&(0!==S&&(f=47===S?10:47),E=C=x=0,H++,j++),0===S+E+C+x){if(L===j&&(0<P&&(G=G.replace(h,"")),0<G.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:G+=l.charAt(L)}f=59}switch(f){case 123:for(p=(G=G.trim()).charCodeAt(0),g=1,z=++L;L<H;){switch(f=l.charCodeAt(L)){case 123:g++;break;case 125:g--;break;case 47:switch(f=l.charCodeAt(L+1)){case 42:case 47:e:{for(R=L+1;R<j;++R)switch(l.charCodeAt(R)){case 47:if(42===f&&42===l.charCodeAt(R-1)&&L+2!==R){L=R+1;break e}break;case 10:if(47===f){L=R+1;break e}}L=R}}break;case 91:f++;case 40:f++;case 34:case 39:for(;L++<j&&l.charCodeAt(L)!==f;);}if(0===g)break;L++}if(g=l.substring(z,L),0===p&&(p=(G=G.replace(d,"").trim()).charCodeAt(0)),64===p){switch(0<P&&(G=G.replace(h,"")),f=G.charCodeAt(1)){case 100:case 109:case 115:case 45:P=i;break;default:P=I}if(z=(g=t(i,P,g,f,u+1)).length,0<N&&(w=a(3,g,P=n(I,G,F),i,A,_,z,f,u,c),G=P.join(""),void 0!==w&&0===(z=(g=w.trim()).length)&&(f=0,g="")),0<z)switch(f){case 115:G=G.replace(k,s);case 100:case 109:case 45:g=G+"{"+g+"}";break;case 107:g=(G=G.replace(v,"$1 $2"))+"{"+g+"}",g=1===M||2===M&&r("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=G+g,112===c&&(U+=g,g="")}else g=""}else g=t(i,n(i,G,F),g,c,u+1);$+=g,g=F=P=R=p=0,G="",f=l.charCodeAt(++L);break;case 125:case 59:if(1<(z=(G=(0<P?G.replace(h,""):G).trim()).length))switch(0===R&&(p=G.charCodeAt(0),45===p||96<p&&123>p)&&(z=(G=G.replace(" ",":")).length),0<N&&void 0!==(w=a(1,G,i,e,A,_,U.length,c,u,c))&&0===(z=(G=w.trim()).length)&&(G="\0\0"),p=G.charCodeAt(0),f=G.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){W+=G+l.charAt(L);break}default:58!==G.charCodeAt(z-1)&&(U+=o(G,p,f,G.charCodeAt(2)))}F=P=R=p=0,G="",f=l.charCodeAt(++L)}}switch(f){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<G.length&&(P=1,G+="\0"),0<N*B&&a(0,G,i,e,A,_,U.length,c,u,c),_=1,A++;break;case 59:case 125:if(0===S+E+C+x){_++;break}default:switch(_++,m=l.charAt(L),f){case 9:case 32:if(0===E+x+S)switch(T){case 44:case 58:case 9:case 32:m="";break;default:32!==f&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===E+S+x&&(P=F=1,m="\f"+m);break;case 108:if(0===E+S+x+O&&0<R)switch(L-R){case 2:112===T&&58===l.charCodeAt(L-3)&&(O=T);case 8:111===D&&(O=D)}break;case 58:0===E+S+x&&(R=L);break;case 44:0===S+C+E+x&&(P=1,m+="\r");break;case 34:case 39:0===S&&(E=E===f?0:0===E?f:E);break;case 91:0===E+S+C&&x++;break;case 93:0===E+S+C&&x--;break;case 41:0===E+S+x&&C--;break;case 40:if(0===E+S+x){if(0===p)if(2*T+3*D==533);else p=1;C++}break;case 64:0===S+C+E+x+R+g&&(g=1);break;case 42:case 47:if(!(0<E+x+C))switch(S){case 0:switch(2*f+3*l.charCodeAt(L+1)){case 235:S=47;break;case 220:z=L,S=42}break;case 42:47===f&&42===T&&z+2!==L&&(33===l.charCodeAt(z+2)&&(U+=l.substring(z,L+1)),m="",S=0)}}0===S&&(G+=m)}D=T,T=f,L++}if(0<(z=U.length)){if(P=i,0<N&&(void 0!==(w=a(2,U,P,e,A,_,z,c,u,c))&&0===(U=w).length))return W+U+$;if(U=P.join(",")+"{"+U+"}",0!=M*O){switch(2!==M||r(U,2)||(O=0),O){case 111:U=U.replace(y,":-moz-$1")+U;break;case 112:U=U.replace(b,"::-webkit-input-$1")+U.replace(b,"::-moz-$1")+U.replace(b,":-ms-input-$1")+U}O=0}}return W+U+$}function n(e,t,n){var o=t.trim().split(g);t=o;var r=o.length,s=e.length;switch(s){case 0:case 1:var a=0;for(e=0===s?"":e[0]+" ";a<r;++a)t[a]=i(e,t[a],n).trim();break;default:var l=a=0;for(t=[];a<r;++a)for(var c=0;c<s;++c)t[l++]=i(e[c]+" ",o[a],n).trim()}return t}function i(e,t,n){var i=t.charCodeAt(0);switch(33>i&&(i=(t=t.trim()).charCodeAt(0)),i){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,n,i){var s=e+";",a=2*t+3*n+4*i;if(944===a){e=s.indexOf(":",9)+1;var l=s.substring(e,s.length-1).trim();return l=s.substring(0,e).trim()+l+";",1===M||2===M&&r(l,1)?"-webkit-"+l+l:l}if(0===M||2===M&&!r(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(T,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return p.test(s)?s.replace(u,":-webkit-")+s.replace(u,":-moz-")+s:s;case 1e3:switch(t=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=s.replace(w,"tb");break;case 232:l=s.replace(w,"tb-rl");break;case 220:l=s.replace(w,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(t=(s=e).length-10,a=(l=(33===s.charCodeAt(t)?s.substring(0,t):s).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+i&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+s}return s}function r(e,t){var n=e.indexOf(1===t?":":"{"),i=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?i:i.replace(C,"$1"),n,t)}function s(e,t){var n=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(x," or ($1)").substring(4):"("+t+")"}function a(e,t,n,i,o,r,s,a,l,d){for(var h,u=0,p=t;u<N;++u)switch(h=D[u].call(c,e,p,n,i,o,r,s,a,l,d)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!=typeof e?M=1:(M=2,R=e):M=0),l}function c(e,n){var i=e;if(33>i.charCodeAt(0)&&(i=i.trim()),i=[i],0<N){var o=a(-1,n,i,i,A,_,0,0,0,0);void 0!==o&&"string"==typeof o&&(n=o)}var r=t(I,i,n,0,0);return 0<N&&(void 0!==(o=a(-2,r,i,i,A,_,r.length,0,0,0))&&(r=o)),"",O=0,_=A=1,r}var d=/^\0+/g,h=/[\0\r\f]/g,u=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,y=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,_=1,A=1,O=0,M=1,I=[],D=[],N=0,R=null,B=0;return c.use=function e(t){switch(t){case void 0:case null:N=D.length=0;break;default:if("function"==typeof t)D[N++]=t;else if("object"==typeof t)for(var n=0,i=t.length;n<i;++n)e(t[n]);else B=0|!!t}return e},c.set=l,void 0!==e&&l(e),c};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function c(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var d=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=c((function(e){return d.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),u=n(8679),p=n.n(u);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],i=0,o=t.length;i<o;i+=1)n.push(t[i],e[i+1]);return n},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,i.typeOf)(e)},v=Object.freeze([]),b=Object.freeze({});function y(e){return"function"==typeof e}function w(e){return e.displayName||e.name||"Component"}function k(e){return e&&"string"==typeof e.styledComponentId}var x="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",S="undefined"!=typeof window&&"HTMLElement"in window,C=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&(void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY))),E={};function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var _=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,o=i;e>=o;)(o<<=1)<0&&T(16,""+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var r=i;r<o;r++)this.groupSizes[r]=0}for(var s=this.indexOfGroup(e+1),a=0,l=t.length;a<l;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var o=n;o<i;o++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),o=i+n,r=i;r<o;r++)t+=this.tag.getRule(r)+"/*!sc*/\n";return t},e}(),A=new Map,O=new Map,M=1,I=function(e){if(A.has(e))return A.get(e);for(;O.has(M);)M++;var t=M++;return A.set(e,t),O.set(t,e),t},D=function(e){return O.get(e)},N=function(e,t){t>=M&&(M=t+1),A.set(e,t),O.set(t,e)},R="style["+x+'][data-styled-version="5.3.11"]',B=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(e,t,n){for(var i,o=n.split(","),r=0,s=o.length;r<s;r++)(i=o[r])&&e.registerName(t,i)},P=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),i=[],o=0,r=n.length;o<r;o++){var s=n[o].trim();if(s){var a=s.match(B);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(N(c,l),L(e,c,a[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(s)}}},F=function(){return n.nc},z=function(e){var t=document.head,n=e||t,i=document.createElement("style"),o=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var i=t[n];if(i&&1===i.nodeType&&i.hasAttribute(x))return i}}(n),r=void 0!==o?o.nextSibling:null;i.setAttribute(x,"active"),i.setAttribute("data-styled-version","5.3.11");var s=F();return s&&i.setAttribute("nonce",s),n.insertBefore(i,r),i},H=function(){function e(e){var t=this.element=z(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var o=t[n];if(o.ownerNode===e)return o}T(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j=function(){function e(e){var t=this.element=z(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),i=this.nodes[e];return this.element.insertBefore(n,i||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),G=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),U=S,$={isServer:!S,useCSSOMInjection:!C},W=function(){function e(e,t,n){void 0===e&&(e=b),void 0===t&&(t={}),this.options=f({},$,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&S&&U&&(U=!1,function(e){for(var t=document.querySelectorAll(R),n=0,i=t.length;n<i;n++){var o=t[n];o&&"active"!==o.getAttribute(x)&&(P(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return I(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(f({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,i=t.useCSSOMInjection,o=t.target,e=n?new G(o):i?new H(o):new j(o),new _(e)));var e,t,n,i,o},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(I(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(I(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(I(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,i="",o=0;o<n;o++){var r=D(o);if(void 0!==r){var s=e.names.get(r),a=t.getGroup(o);if(s&&a&&s.size){var l=x+".g"+o+'[id="'+r+'"]',c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+=e+",")})),i+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return i}(this)},e}(),V=/(a)(d)/gi,q=function(e){return String.fromCharCode(e+(e>25?39:97))};function Y(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=q(t%52)+n;return(q(t%52)+n).replace(V,"$1-$2")}var K=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Z=function(e){return K(5381,e)};function X(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(y(n)&&!k(n))return!1}return!0}var J=Z("5.3.11"),Q=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&X(e),this.componentId=t,this.baseHash=K(J,t),this.baseStyle=n,W.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var r=ve(this.rules,e,t,n).join(""),s=Y(K(this.baseHash,r)>>>0);if(!t.hasNameForId(i,s)){var a=n(r,"."+s,void 0,i);t.insertRules(i,s,a)}o.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=K(this.baseHash,n.hash),d="",h=0;h<l;h++){var u=this.rules[h];if("string"==typeof u)d+=u;else if(u){var p=ve(u,e,t,n),f=Array.isArray(p)?p.join(""):p;c=K(c,f+h),d+=f}}if(d){var g=Y(c>>>0);if(!t.hasNameForId(i,g)){var m=n(d,"."+g,void 0,i);t.insertRules(i,g,m)}o.push(g)}}return o.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,te=[":","[",".","#"];function ne(e){var t,n,i,o,r=void 0===e?b:e,s=r.options,l=void 0===s?b:s,c=r.plugins,d=void 0===c?v:c,h=new a(l),u=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,i,o,r,s,a,l,c,d,h){switch(n){case 1:if(0===d&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===c)return i+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+i),"";default:return i+(0===h?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(t)}}}((function(e){u.push(e)})),f=function(e,i,r){return 0===i&&-1!==te.indexOf(r[n.length])||r.match(o)?e:"."+t};function g(e,r,s,a){void 0===a&&(a="&");var l=e.replace(ee,""),c=r&&s?s+" "+r+" { "+l+" }":l;return t=a,n=r,i=new RegExp("\\"+n+"\\b","g"),o=new RegExp("(\\"+n+"\\b){2,}"),h(s||!r?"":r,c)}return h.use([].concat(d,[function(e,t,o){2===e&&o.length&&o[0].lastIndexOf(n)>0&&(o[0]=o[0].replace(i,f))},p,function(e){if(-2===e){var t=u;return u=[],t}}])),g.hash=d.length?d.reduce((function(e,t){return t.name||T(15),K(e,t.name)}),5381).toString():"",g}var ie=o.createContext(),oe=(ie.Consumer,o.createContext()),re=(oe.Consumer,new W),se=ne();function ae(){return(0,o.useContext)(ie)||re}function le(){return(0,o.useContext)(oe)||se}function ce(e){var t=(0,o.useState)(e.stylisPlugins),n=t[0],i=t[1],r=ae(),a=(0,o.useMemo)((function(){var t=r;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,o.useMemo)((function(){return ne({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,o.useEffect)((function(){s()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),o.createElement(ie.Provider,{value:a},o.createElement(oe.Provider,{value:l},e.children))}var de=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=se);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.toString=function(){return T(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=se),this.name+e.hash},e}(),he=/([A-Z])/,ue=/([A-Z])/g,pe=/^ms-/,fe=function(e){return"-"+e.toLowerCase()};function ge(e){return he.test(e)?e.replace(ue,fe).replace(pe,"-ms-"):e}var me=function(e){return null==e||!1===e||""===e};function ve(e,t,n,i){if(Array.isArray(e)){for(var o,r=[],s=0,a=e.length;s<a;s+=1)""!==(o=ve(e[s],t,n,i))&&(Array.isArray(o)?r.push.apply(r,o):r.push(o));return r}return me(e)?"":k(e)?"."+e.styledComponentId:y(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:ve(e(t),t,n,i):e instanceof de?n?(e.inject(n,i),e.getName(i)):e:m(e)?function e(t,n){var i,o,r=[];for(var s in t)t.hasOwnProperty(s)&&!me(t[s])&&(Array.isArray(t[s])&&t[s].isCss||y(t[s])?r.push(ge(s)+":",t[s],";"):m(t[s])?r.push.apply(r,e(t[s],s)):r.push(ge(s)+": "+(i=s,(null==(o=t[s])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||i in l||i.startsWith("--")?String(o).trim():o+"px")+";")));return n?[n+" {"].concat(r,["}"]):r}(e):e.toString();var c}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return y(e)||m(e)?be(ve(g(v,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:be(ve(g(e,n)))}new Set;var we=function(e,t,n){return void 0===n&&(n=b),e.theme!==n.theme&&e.theme||t||n.theme},ke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xe=/(^-|-$)/g;function Se(e){return e.replace(ke,"-").replace(xe,"")}var Ce=function(e){return Y(Z(e)>>>0)};function Ee(e){return"string"==typeof e&&!0}var Te=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},_e=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ae(e,t,n){var i=e[n];Te(t)&&Te(i)?Oe(i,t):e[n]=t}function Oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var s=r[o];if(Te(s))for(var a in s)_e(a)&&Ae(e,s[a],a)}return e}var Me=o.createContext();Me.Consumer;function Ie(e){var t=(0,o.useContext)(Me),n=(0,o.useMemo)((function(){return function(e,t){return e?y(e)?e(t):Array.isArray(e)||"object"!=typeof e?T(8):t?f({},t,{},e):e:T(14)}(e.theme,t)}),[e.theme,t]);return e.children?o.createElement(Me.Provider,{value:n},e.children):null}var De={};function Ne(e,t,n){var i=k(e),r=!Ee(e),s=t.attrs,a=void 0===s?v:s,l=t.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Se(e);De[n]=(De[n]||0)+1;var i=n+"-"+Ce("5.3.11"+n+De[n]);return t?t+"-"+i:i}(t.displayName,t.parentComponentId):l,d=t.displayName,u=void 0===d?function(e){return Ee(e)?"styled."+e:"Styled("+w(e)+")"}(e):d,g=t.displayName&&t.componentId?Se(t.displayName)+"-"+t.componentId:t.componentId||c,m=i&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,x=t.shouldForwardProp;i&&e.shouldForwardProp&&(x=t.shouldForwardProp?function(n,i,o){return e.shouldForwardProp(n,i,o)&&t.shouldForwardProp(n,i,o)}:e.shouldForwardProp);var S,C=new Q(n,g,i?e.componentStyle:void 0),E=C.isStatic&&0===a.length,T=function(e,t){return function(e,t,n,i){var r=e.attrs,s=e.componentStyle,a=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,d=e.styledComponentId,u=e.target,p=function(e,t,n){void 0===e&&(e=b);var i=f({},t,{theme:e}),o={};return n.forEach((function(e){var t,n,r,s=e;for(t in y(s)&&(s=s(i)),s)i[t]=o[t]="className"===t?(n=o[t],r=s[t],n&&r?n+" "+r:n||r):s[t]})),[i,o]}(we(t,(0,o.useContext)(Me),a)||b,t,r),g=p[0],m=p[1],v=function(e,t,n,i){var o=ae(),r=le();return t?e.generateAndInjectStyles(b,o,r):e.generateAndInjectStyles(n,o,r)}(s,i,g),w=n,k=m.$as||t.$as||m.as||t.as||u,x=Ee(k),S=m!==t?f({},t,{},m):t,C={};for(var E in S)"$"!==E[0]&&"as"!==E&&("forwardedAs"===E?C.as=S[E]:(c?c(E,h,k):!x||h(E))&&(C[E]=S[E]));return t.style&&m.style!==t.style&&(C.style=f({},t.style,{},m.style)),C.className=Array.prototype.concat(l,d,v!==d?v:null,t.className,m.className).filter(Boolean).join(" "),C.ref=w,(0,o.createElement)(k,C)}(S,e,t,E)};return T.displayName=u,(S=o.forwardRef(T)).attrs=m,S.componentStyle=C,S.displayName=u,S.shouldForwardProp=x,S.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):v,S.styledComponentId=g,S.target=i?e.target:e,S.withComponent=function(e){var i=t.componentId,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["componentId"]),r=i&&i+"-"+(Ee(e)?e:Se(w(e)));return Ne(e,f({},o,{attrs:m,componentId:r}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Oe({},e.defaultProps,t):t}}),Object.defineProperty(S,"toString",{value:function(){return"."+S.styledComponentId}}),r&&p()(S,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Re=function(e){return function e(t,n,o){if(void 0===o&&(o=b),!(0,i.isValidElementType)(n))return T(1,String(n));var r=function(){return t(n,o,ye.apply(void 0,arguments))};return r.withConfig=function(i){return e(t,n,f({},o,{},i))},r.attrs=function(i){return e(t,n,f({},o,{attrs:Array.prototype.concat(o.attrs,i).filter(Boolean)}))},r}(Ne,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Re[e]=Re(e)}));var Be=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=X(e),W.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,i){var o=i(ve(this.rules,t,n,i).join(""),""),r=this.componentId+e;n.insertRules(r,r,o)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,i){e>2&&W.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)},e}();function Le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=ye.apply(void 0,[e].concat(n)),s="sc-global-"+Ce(JSON.stringify(r)),a=new Be(r,s);function l(e){var t=ae(),n=le(),i=(0,o.useContext)(Me),r=(0,o.useRef)(t.allocateGSInstance(s)).current;return t.server&&c(r,e,t,i,n),(0,o.useLayoutEffect)((function(){if(!t.server)return c(r,e,t,i,n),function(){return a.removeStyles(r,t)}}),[r,e,t,i,n]),null}function c(e,t,n,i,o){if(a.isStatic)a.renderStyles(e,E,n,o);else{var r=f({},t,{theme:we(t,i,l.defaultProps)});a.renderStyles(e,r,n,o)}}return o.memo(l)}function Pe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=ye.apply(void 0,[e].concat(n)).join(""),r=Ce(o);return new de(r,o)}!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=F();return"<style "+[n&&'nonce="'+n+'"',x+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?T(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return T(2);var n=((t={})[x]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=F();return i&&(n.nonce=i),[o.createElement("style",f({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new W({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?T(2):o.createElement(ce,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return T(3)}}();var Fe=function(){return(0,o.useContext)(Me)};const ze=Re},8588:function(e){
/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */
var t,n;t=this,n=function(e){var t=function(e){return new t.lib.init(e)};function n(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function i(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:"1.12.0",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var i=document.createElement("img");i.src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(i):e.insertAdjacentElement("afterbegin",i)}if(!0===this.options.close){var o=document.createElement("button");o.type="button",o.setAttribute("aria-label","Close"),o.className="toast-close",o.innerHTML="&#10006;",o.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var r=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&r>360?e.insertAdjacentElement("afterbegin",o):e.appendChild(o)}if(this.options.stopOnFocus&&this.options.duration>0){var s=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){s.removeElement(e)}),s.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var a=n("x",this.options),l=n("y",this.options),c="left"==this.options.position?a:"-"+a,d="toastify-top"==this.options.gravity?l:"-"+l;e.style.transform="translate("+c+","+d+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,n),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},n={top:15,bottom:15},o={top:15,bottom:15},r=document.getElementsByClassName("toastify"),s=0;s<r.length;s++){e=!0===i(r[s],"toastify-top")?"toastify-top":"toastify-bottom";var a=r[s].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(r[s].style[e]=o[e]+"px",o[e]+=a+15):!0===i(r[s],"toastify-left")?(r[s].style[e]=t[e]+"px",t[e]+=a+15):(r[s].style[e]=n[e]+"px",n[e]+=a+15)}return this},t.lib.init.prototype=t.lib,t},e.exports?e.exports=n():t.Toastify=n()},907:(e,t,n)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:()=>i})},3878:(e,t,n)=>{"use strict";function i(e){if(Array.isArray(e))return e}n.d(t,{Z:()=>i})},5671:(e,t,n)=>{"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>i})},1519:(e,t,n)=>{"use strict";function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,{Z:()=>i})},6033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(1519);function o(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,i.Z)(e,t,"get"))}},3092:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(1519);function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,i.Z)(e,t,"set"),n),n}},3144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9142);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,i.Z)(o.key),o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(9142);function o(e,t,n){return(t=(0,i.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}n.d(t,{Z:()=>i})},9199:(e,t,n)=>{"use strict";function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:()=>i})},5267:(e,t,n)=>{"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:()=>i})},4925:(e,t,n)=>{"use strict";function i(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:()=>i})},9439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(3878);var o=n(181),r=n(5267);function s(e,t){return(0,i.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||(0,o.Z)(e,t)||(0,r.Z)()}},4506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(3878),o=n(9199),r=n(181),s=n(5267);function a(e){return(0,i.Z)(e)||(0,o.Z)(e)||(0,r.Z)(e)||(0,s.Z)()}},3433:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(907);var o=n(9199),r=n(181);function s(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||(0,o.Z)(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(1002);function o(e){var t=function(e,t){if("object"!==(0,i.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,i.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,i.Z)(t)?t:String(t)}},1002:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:()=>i})},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(907);function o(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}},2453:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ot});typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(){}Object.assign(o,{default:o,register:o,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(e){const t=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e))})),this.insertBefore(t,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;const t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),r=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-o>t.scrollLeft+t.clientWidth,c=r&&!s;(r||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-o+this.clientWidth/2),(r||s||a||l)&&!e&&this.scrollIntoView(c)}),window.requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};var r=(e=>(e.VERBOSE="VERBOSE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e))(r||{});const s=8,a=9,l=13,c=27,d=37,h=38,u=40,p=39,f=46,g=0;function m(e,t,n="log",i,o="color: inherit"){if(!("console"in window)||!window.console[n])return;const r=["info","log","warn","error"].includes(n),s=[];switch(m.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!r||e)return}i&&s.push(i);const a="Editor.js 2.29.3";e&&(r?(s.unshift("line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;",o),t=`%c${a}%c ${t}`):t=`( ${a} )${t}`);try{r?i?console[n](`${t} %o`,...s):console[n](t,...s):console[n](t)}catch{}}m.logLevel="VERBOSE";const v=m.bind(window,!1),b=m.bind(window,!0);function y(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function w(e){return"function"===y(e)||"asyncfunction"===y(e)}function k(e){return"object"===y(e)}function x(e){return"string"===y(e)}function S(e){return"number"===y(e)}function C(e){return"undefined"===y(e)}function E(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function T(e){return e>47&&e<58||32===e||13===e||229===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}async function _(e,t=(()=>{}),n=(()=>{})){return e.reduce((async(e,i)=>(await e,async function(e,t,n){try{await e.function(e.data),await t(C(e.data)?{}:e.data)}catch{n(C(e.data)?{}:e.data)}}(i,t,n))),Promise.resolve())}function A(e){return Array.prototype.slice.call(e)}function O(e,t){return function(){const n=this,i=arguments;window.setTimeout((()=>e.apply(n,i)),t)}}function M(e,t,n){let i;return(...o)=>{const r=this,s=n&&!i;window.clearTimeout(i),i=window.setTimeout((()=>{i=null,n||e.apply(r,o)}),t),s&&e.apply(r,o)}}function I(e,t,n=void 0){let i,o,r,s=null,a=0;n||(n={});const l=function(){a=!1===n.leading?0:Date.now(),s=null,r=e.apply(i,o),s||(i=o=null)};return function(){const c=Date.now();!a&&!1===n.leading&&(a=c);const d=t-(c-a);return i=this,o=arguments,d<=0||d>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(i,o),s||(i=o=null)):!s&&!1!==n.trailing&&(s=setTimeout(l,d)),r}}function D(e){return e[0].toUpperCase()+e.slice(1)}function N(e,...t){if(!t.length)return e;const n=t.shift();if(k(e)&&k(n))for(const t in n)k(n[t])?(e[t]||Object.assign(e,{[t]:{}}),N(e[t],n[t])):Object.assign(e,{[t]:n[t]});return N(e,...t)}function R(e){const t=function(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e)));return t&&(e[t]=!0),e}();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function B(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))(32)}function L(e,t,n){e&&b(`«${t}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`,"warn")}function P(e,t,n){const i=n.value?"value":"get",o=n[i],r=`#${t}Cache`;if(n[i]=function(...e){return void 0===this[r]&&(this[r]=o.apply(this,...e)),this[r]},"get"===i&&n.set){const t=n.set;n.set=function(n){delete e[r],t.apply(this,n)}}return n}function F(){return window.matchMedia("(max-width: 650px)").matches}const z=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class H{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,n={}){const i=document.createElement(e);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e]);return i}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),i=e.parentNode;i.insertBefore(n,e),i.insertBefore(e,t),i.insertBefore(t,n),i.removeChild(n)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((e=>`input[type="${e}"]`)).join(", ")}static findAllInputs(e){return A(e.querySelectorAll(H.allInputsSelector)).reduce(((e,t)=>H.isNativeInput(t)||H.containsOnlyInlineElements(t)?[...e,t]:[...e,...H.getDeepestBlockElements(t)]),[])}static getDeepestNode(e,t=!1){const n=t?"lastChild":"firstChild",i=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let o=e[n];if(H.isSingleTag(o)&&!H.isNativeInput(o)&&!H.isLineBreakTag(o))if(o[i])o=o[i];else{if(!o.parentNode[i])return o.parentNode;o=o.parentNode[i]}return this.getDeepestNode(o,t)}return e}static isElement(e){return!S(e)&&(e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}static isFragment(e){return!S(e)&&(e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}static isContentEditable(e){return"true"===e.contentEditable}static isNativeInput(e){return!(!e||!e.tagName)&&["INPUT","TEXTAREA"].includes(e.tagName)}static canSetCaret(e){let t=!0;if(H.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1}else t=H.isContentEditable(e);return t}static isNodeEmpty(e,t){let n;return!(this.isSingleTag(e)&&!this.isLineBreakTag(e))&&(n=this.isElement(e)&&this.isNativeInput(e)?e.value:e.textContent.replace("​",""),t&&(n=n.replace(new RegExp(t,"g"),"")),0===n.trim().length)}static isLeaf(e){return!!e&&0===e.childNodes.length}static isEmpty(e,t){e.normalize();const n=[e];for(;n.length>0;)if(e=n.shift()){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=H.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return H.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;x(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=e=>!H.blockElements.includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return H.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce(((e,t)=>[...e,...H.getDeepestBlockElements(t)]),[])}static getHolder(e){return x(e)?document.getElementById(e):e}static isAnchor(e){return"a"===e.tagName.toLowerCase()}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,o=t.top+i,r=t.left+n;return{top:o,left:r,bottom:o+t.height,right:r+t.width}}}const j={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},G=class{static ui(e,t){return G._t(e,t)}static t(e,t){return G._t(e,t)}static setDictionary(e){G.currentDictionary=e}static _t(e,t){const n=G.getNamespace(e);return n&&n[t]?n[t]:t}static getNamespace(e){return e.split(".").reduce(((e,t)=>e&&Object.keys(e).length?e[t]:{}),G.currentDictionary)}};let U=G;U.currentDictionary=j;class $ extends Error{}class W{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=i=>{const o=t(i),r=this.subscribers[e].indexOf(n);return-1!==r&&this.subscribers[e].splice(r,1),o};this.subscribers[e].push(n)}emit(e,t){E(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce(((e,t)=>{const n=t(e);return void 0!==n?n:e}),t)}off(e,t){if(void 0!==this.subscribers[e]){for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}else console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`)}destroy(){this.subscribers={}}}function V(e){Object.setPrototypeOf(this,{get id(){return e.id},get name(){return e.name},get config(){return e.config},get holder(){return e.holder},get isEmpty(){return e.isEmpty},get selected(){return e.selected},set stretched(t){e.stretched=t},get stretched(){return e.stretched},get focusable(){return e.focusable},call:(t,n)=>e.call(t,n),save:()=>e.save(),validate:t=>e.validate(t),dispatchChange(){e.dispatchChange()}})}class q{constructor(){this.allListeners=[]}on(e,t,n,i=!1){const o=function(e=""){return`${e}${Math.floor(1e8*Math.random()).toString(16)}`}("l"),r={id:o,element:e,eventType:t,handler:n,options:i};if(!this.findOne(e,t,n))return this.allListeners.push(r),e.addEventListener(t,n,i),o}off(e,t,n,i){const o=this.findAll(e,t,n);o.forEach(((e,t)=>{const n=this.allListeners.indexOf(o[t]);n>-1&&(this.allListeners.splice(n,1),e.element.removeEventListener(e.eventType,e.handler,e.options))}))}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const i=this.findAll(e,t,n);return i.length>0?i[0]:null}findAll(e,t,n){let i;const o=e?this.findByEventTarget(e):[];return i=e&&t&&n?o.filter((e=>e.eventType===t&&e.handler===n)):e&&t?o.filter((e=>e.eventType===t)):o,i}removeAll(){this.allListeners.map((e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)})),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter((t=>{if(t.element===e)return t}))}findByType(e){return this.allListeners.filter((t=>{if(t.eventType===e)return t}))}findByHandler(e){return this.allListeners.filter((t=>{if(t.handler===e)return t}))}findById(e){return this.allListeners.find((t=>t.id===e))}}class Y{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new q,this.readOnlyMutableListeners={on:(e,t,n,i=!1)=>{this.mutableListenerIds.push(this.listeners.on(e,t,n,i))},clearAll:()=>{for(const e of this.mutableListenerIds)this.listeners.offById(e);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===Y)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class K{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?H.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(K.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${K.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${K.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!K.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e,t=document.selection,n={x:0,y:0,width:0,height:0};if(t&&"Control"!==t.type)return e=t.createRange(),n.x=e.boundingLeft,n.y=e.boundingTop,n.width=e.boundingWidth,n.height=e.boundingHeight,n;if(!window.getSelection)return v("Method window.getSelection is not supported","warn"),n;if(t=window.getSelection(),null===t.rangeCount||isNaN(t.rangeCount))return v("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===t.rangeCount)return n;if(e=t.getRangeAt(0).cloneRange(),e.getBoundingClientRect&&(n=e.getBoundingClientRect()),0===n.x&&0===n.y){const t=document.createElement("span");if(t.getBoundingClientRect){t.appendChild(document.createTextNode("​")),e.insertNode(t),n=t.getBoundingClientRect();const i=t.parentNode;i.removeChild(t),i.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const n=document.createRange(),i=window.getSelection();return H.isNativeInput(e)?H.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),i.removeAllRanges(),i.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=K.range;return null!==t&&e.contains(t.startContainer)}static addFakeCursor(){const e=K.range;if(null===e)return;const t=H.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return null!==H.find(e,".codex-editor__fake-cursor")}static removeFakeCursor(e=document.body){const t=H.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=K.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const i=window.getSelection();let o=null;return i&&i.anchorNode&&i.focusNode?([i.anchorNode,i.focusNode].forEach((i=>{let r=n;for(;r>0&&i.parentNode&&(i.tagName!==e||(o=i,t&&i.classList&&!i.classList.contains(t)&&(o=null),!o));)i=i.parentNode,r--})),o):null}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}}const Z="redactor dom changed",X="block changed",J="fake cursor is about to be toggled",Q="fake cursor have been set";function ee(e,t){return e.mergeable&&e.name===t.name}var te=(e=>(e.APPEND_CALLBACK="appendCallback",e.RENDERED="rendered",e.MOVED="moved",e.UPDATED="updated",e.REMOVED="removed",e.ON_PASTE="onPaste",e))(te||{});class ne extends W{constructor({id:e=B(),data:t,tool:n,api:i,readOnly:o,tunesData:r},s){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(e=void 0)=>{const t=void 0===e,n=e instanceof InputEvent;let i;!t&&!n&&this.detectToolRootChange(e),i=!(!t&&!n)||!(e.length>0&&e.every((e=>{const{addedNodes:t,removedNodes:n,target:i}=e;return[...Array.from(t),...Array.from(n),i].some((e=>(H.isElement(e)||(e=e.parentElement),e&&null!==e.closest('[data-mutation-free="true"]'))))}))),i&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=n.name,this.id=e,this.settings=n.settings,this.config=n.settings.config||{},this.api=i,this.editorEventBus=s||null,this.blockAPI=new V(this),this.tool=n,this.toolInstance=n.create(t,this.blockAPI,o),this.tunes=n.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback((()=>{this.watchBlockMutations(),this.addInputEvents()}))}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(0!==this.cachedInputs.length)return this.cachedInputs;const e=H.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex((t=>t===e||t.contains(e)));-1!==t&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then((e=>e&&!E(e.data)?e.data:{}))}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return w(this.toolInstance.merge)}get focusable(){return 0!==this.inputs.length}get isEmpty(){const e=H.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}set selected(e){var t,n;this.holder.classList.toggle(ne.CSS.selected,e);const i=!0===e&&K.isRangeInsideContainer(this.holder),o=!1===e&&K.isFakeCursorInsideContainer(this.holder);(i||o)&&(null==(t=this.editorEventBus)||t.emit(J,{state:e}),i?K.addFakeCursor():K.removeFakeCursor(this.holder),null==(n=this.editorEventBus)||n.emit(Q,{state:e}))}get selected(){return this.holder.classList.contains(ne.CSS.selected)}set stretched(e){this.holder.classList.toggle(ne.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(ne.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(ne.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(w(this.toolInstance[e])){"appendCallback"===e&&v("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(t){v(`Error during '${e}' call: ${t.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach((([e,n])=>{if(w(n.save))try{t[e]=n.save()}catch(e){v(`Tune ${n.constructor.name} save method throws an Error %o`,"warn",e)}}));const n=window.performance.now();let i;return Promise.resolve(e).then((e=>(i=window.performance.now(),{id:this.id,tool:this.name,data:e,tunes:t,time:i-n}))).catch((e=>{v(`Saving process for ${this.name} tool failed due to the ${e}`,"log","red")}))}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=document.createElement("div"),t=[];return["function"==typeof this.toolInstance.renderSettings?this.toolInstance.renderSettings():[],[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map((e=>e.render()))].flat().forEach((n=>{H.isElement(n)?e.appendChild(n):Array.isArray(n)?t.push(...n):t.push(n)})),[t,e]}updateCurrentInput(){this.currentInput=H.isNativeInput(document.activeElement)||!K.anchorNode?document.activeElement:K.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),w(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(1===e.length)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return e.find((e=>Object.entries(e.data).some((([e,n])=>t[e]&&function(e,t){const n=Array.isArray(e)||k(e),i=Array.isArray(t)||k(t);return n||i?JSON.stringify(e)===JSON.stringify(t):e===t}(t[e],n)))))}async exportDataAsString(){return function(e,t){const n=null==t?void 0:t.export;return w(n)?n(e):x(n)?e[n]:(void 0!==n&&v("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}(await this.data,this.tool.conversionConfig)}compose(){const e=H.make("div",ne.CSS.wrapper),t=H.make("div",ne.CSS.content),n=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=n,t.appendChild(this.toolRenderedElement);let i=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach((e=>{if(w(e.wrap))try{i=e.wrap(i)}catch(t){v(`Tune ${e.constructor.name} wrap method throws an Error %o`,"warn",t)}})),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach((t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))})),Object.entries(e).forEach((([e,t])=>{this.tunesInstances.has(e)||(this.unavailableTunesData[e]=t)}))}addInputEvents(){this.inputs.forEach((e=>{e.addEventListener("focus",this.handleFocus),H.isNativeInput(e)&&e.addEventListener("input",this.didMutated)}))}removeInputEvents(){this.inputs.forEach((e=>{e.removeEventListener("focus",this.handleFocus),H.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)}))}watchBlockMutations(){var e;this.redactorDomChangedCallback=e=>{const{mutations:t}=e;t.some((e=>function(e,t){const{type:n,target:i,addedNodes:o,removedNodes:r}=e;if(i===t)return!0;if(["characterData","attributes"].includes(n)){const e=i.nodeType===Node.TEXT_NODE?i.parentNode:i;return t.contains(e)}const s=Array.from(o).some((e=>t.contains(e))),a=Array.from(r).some((e=>t.contains(e)));return s||a}(e,this.toolRenderedElement)))&&this.didMutated(t)},null==(e=this.editorEventBus)||e.on(Z,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;null==(e=this.editorEventBus)||e.off(Z,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach((e=>{if(Array.from(e.removedNodes).includes(this.toolRenderedElement)){const t=e.addedNodes[e.addedNodes.length-1];this.toolRenderedElement=t}}))}dropInputsCache(){this.cachedInputs=[]}}class ie extends Y{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{b("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:t=>U.t(ie.getNamespace(e),t)})}}var oe={};!function(e,t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),
/*!
       * Codex JavaScript Notification module
       * https://github.com/codex-team/js-notifier
       */
e.exports=function(){var e=n(6),t="cdx-notify--bounce-in",i=null;return{show:function(n){if(n.message){!function(){if(i)return!0;i=e.getWrapper(),document.body.appendChild(i)}();var o=null,r=n.time||8e3;switch(n.type){case"confirm":o=e.confirm(n);break;case"prompt":o=e.prompt(n);break;default:o=e.alert(n),window.setTimeout((function(){o.remove()}),r)}i.appendChild(o),o.classList.add(t)}}}}()},function(e,t,n){var i=n(2);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,o),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var r=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[i].concat(s).concat([r]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var i,o,r,s={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),l=(r={},function(e){if("function"==typeof e)return e();if(void 0===r[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch{t=null}r[e]=t}return r[e]}),c=null,d=0,h=[],u=n(5);function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=s[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(y(i.parts[r],t))}else{var a=[];for(r=0;r<i.parts.length;r++)a.push(y(i.parts[r],t));s[i.id]={id:i.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,o,r,s,a;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var l=d++;n=c||(c=v(t)),i=x.bind(null,n,l,!1),o=x.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=t,a=document.createElement("link"),void 0===s.attrs.type&&(s.attrs.type="text/css"),s.attrs.rel="stylesheet",b(a,s.attrs),g(s,a),i=function(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=u(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n=a,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),i=function(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if(typeof DEBUG<"u"&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var r=n[o];(a=s[r.id]).refs--,i.push(a)}for(e&&p(f(e,t),t),o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete s[a.id]}}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}},function(e,t){e.exports=function(e){var t=typeof window<"u"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,n){var i,o,r,s,a,l,c,d,h;e.exports=(i="cdx-notifies",o="cdx-notify",r="cdx-notify__cross",s="cdx-notify__button--confirm",a="cdx-notify__button--cancel",l="cdx-notify__input",c="cdx-notify__button",d="cdx-notify__btns-wrapper",{alert:h=function(e){var t=document.createElement("DIV"),n=document.createElement("DIV"),i=e.message,s=e.style;return t.classList.add(o),s&&t.classList.add(o+"--"+s),t.innerHTML=i,n.classList.add(r),n.addEventListener("click",t.remove.bind(t)),t.appendChild(n),t},confirm:function(e){var t=h(e),n=document.createElement("div"),i=document.createElement("button"),o=document.createElement("button"),l=t.querySelector("."+r),u=e.cancelHandler,p=e.okHandler;return n.classList.add(d),i.innerHTML=e.okText||"Confirm",o.innerHTML=e.cancelText||"Cancel",i.classList.add(c),o.classList.add(c),i.classList.add(s),o.classList.add(a),u&&"function"==typeof u&&(o.addEventListener("click",u),l.addEventListener("click",u)),p&&"function"==typeof p&&i.addEventListener("click",p),i.addEventListener("click",t.remove.bind(t)),o.addEventListener("click",t.remove.bind(t)),n.appendChild(i),n.appendChild(o),t.appendChild(n),t},prompt:function(e){var t=h(e),n=document.createElement("div"),i=document.createElement("button"),o=document.createElement("input"),a=t.querySelector("."+r),u=e.cancelHandler,p=e.okHandler;return n.classList.add(d),i.innerHTML=e.okText||"Ok",i.classList.add(c),i.classList.add(s),o.classList.add(l),e.placeholder&&o.setAttribute("placeholder",e.placeholder),e.default&&(o.value=e.default),e.inputType&&(o.type=e.inputType),u&&"function"==typeof u&&a.addEventListener("click",u),p&&"function"==typeof p&&i.addEventListener("click",(function(){p(o.value)})),i.addEventListener("click",t.remove.bind(t)),n.appendChild(o),n.appendChild(i),t.appendChild(n),t},getWrapper:function(){var e=document.createElement("DIV");return e.classList.add(i),e}})}])}({get exports(){return oe},set exports(e){oe=e}});const re=i(oe);class se{show(e){re.show(e)}}var ae={};!function(e,t){e.exports=function(){function e(e){var t=e.tags;if(!Object.keys(t).map((function(e){return typeof t[e]})).every((function(e){return"object"===e||"boolean"===e||"function"===e})))throw new Error("The configuration was invalid");this.config=e}var t=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(e){return-1!==t.indexOf(e.nodeName)}var i=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function o(e){return-1!==i.indexOf(e.nodeName)}function r(e,t){return e.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function s(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function a(e,t){return typeof t>"u"||"boolean"==typeof t&&!t}function l(e,t,n){var i=e.name.toLowerCase();return!0!==t&&("function"==typeof t[i]?!t[i](e.value,n):typeof t[i]>"u"||!1===t[i]||"string"==typeof t[i]&&t[i]!==e.value)}return e.prototype.clean=function(e){const t=document.implementation.createHTMLDocument(),n=t.createElement("div");return n.innerHTML=e,this._sanitize(t,n),n.innerHTML},e.prototype._sanitize=function(e,t){var i=r(e,t),c=i.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){t.removeChild(c),this._sanitize(e,t);break}var d,h=o(c);h&&(d=Array.prototype.some.call(c.childNodes,n));var u=!!t.parentNode,p=n(t)&&n(c)&&u,f=c.nodeName.toLowerCase(),g=s(this.config,f,c);if(h&&d||a(c,g)||!this.config.keepNestedBlockElements&&p){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)t.insertBefore(c.childNodes[0],c);t.removeChild(c),this._sanitize(e,t);break}for(var m=0;m<c.attributes.length;m+=1){var v=c.attributes[m];l(v,g,c)&&(c.removeAttribute(v.name),m-=1)}this._sanitize(e,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){t.removeChild(c),this._sanitize(e,t);break}}while(c=i.nextSibling())},e}()}({get exports(){return ae},set exports(e){ae=e}});const le=ae;function ce(e,t){return e.map((e=>{const n=w(t)?t(e.tool):t;return E(n)||(e.data=he(e.data,n)),e}))}function de(e,t={}){return new le({tags:t}).clean(e)}function he(e,t){return Array.isArray(e)?function(e,t){return e.map((e=>he(e,t)))}(e,t):k(e)?function(e,t){const n={};for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const o=e[i],r=ue(t[i])?t[i]:t;n[i]=he(o,r)}return n}(e,t):x(e)?function(e,t){return k(t)?de(e,t):!1===t?de(e,{}):e}(e,t):e}function ue(e){return k(e)||function(e){return"boolean"===y(e)}(e)||w(e)}var pe={};
/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */!function(e,t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));class i{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(e,t,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const i=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(i.hidingDelay&&(this.hidingDelay=i.hidingDelay),this.nodes.content.innerHTML="","string"==typeof t)this.nodes.content.appendChild(document.createTextNode(t));else{if(!(t instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof t+" given.");this.nodes.content.appendChild(t)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),i.placement){case"top":this.placeTop(e,i);break;case"left":this.placeLeft(e,i);break;case"right":this.placeRight(e,i);break;default:this.placeBottom(e,i)}i&&i.delay?this.showingTimeout=setTimeout((()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0}),i.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(e=!1){if(this.hidingDelay&&!e)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout((()=>{this.hide(!0)}),this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(e,t,n){e.addEventListener("mouseenter",(()=>{this.show(e,t,n)})),e.addEventListener("mouseleave",(()=>{this.hide()}))}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const e="codex-tooltips-style";if(document.getElementById(e))return;const t=n(2),i=this.make("style",null,{textContent:t.toString(),id:e});this.prepend(document.head,i)}placeBottom(e,t){const n=e.getBoundingClientRect(),i=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,o=n.bottom+window.pageYOffset+this.offsetTop+t.marginTop;this.applyPlacement("bottom",i,o)}placeTop(e,t){const n=e.getBoundingClientRect(),i=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,o=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",i,o)}placeLeft(e,t){const n=e.getBoundingClientRect(),i=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-t.marginLeft,o=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",i,o)}placeRight(e,t){const n=e.getBoundingClientRect(),i=n.right+this.offsetRight+t.marginRight,o=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",i,o)}applyPlacement(e,t,n){this.nodes.wrapper.classList.add(this.CSS.placement[e]),this.nodes.wrapper.style.left=t+"px",this.nodes.wrapper.style.top=n+"px"}make(e,t=null,n={}){const i=document.createElement(e);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i}append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}}},function(e,t){e.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default}({get exports(){return pe},set exports(e){pe=e}});const fe=i(pe);let ge=null;function me(){ge||(ge=new fe)}function ve(e=!1){me(),null==ge||ge.hide(e)}function be(e,t,n){me(),null==ge||ge.onHover(e,t,n)}const ye=function e(t,n){const i={};return Object.entries(t).forEach((([t,o])=>{if(k(o)){const r=n?`${n}.${t}`:t;Object.values(o).every((e=>x(e)))?i[t]=r:i[t]=e(o,r)}else i[t]=o})),i}(j);const we='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',ke='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>';class xe{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(xe.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(xe.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(xe.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return this.nodes.root.classList.contains(xe.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){this.isConfirmationStateEnabled?this.activateOrEnableConfirmationMode(this.confirmationState):this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(xe.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(xe.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const t=H.make("div",xe.CSS.container);return e.name&&(t.dataset.itemName=e.name),this.nodes.icon=H.make("div",xe.CSS.icon,{innerHTML:e.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),t.appendChild(this.nodes.icon),t.appendChild(H.make("div",xe.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&t.appendChild(H.make("div",xe.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&t.classList.add(xe.CSS.active),e.isDisabled&&t.classList.add(xe.CSS.disabled),t}enableConfirmationMode(e){const t={...this.params,...e,confirmation:e.confirmation},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(xe.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(xe.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(xe.CSS.noHover),this.nodes.root.classList.add(xe.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(void 0===e.confirmation)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(xe.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(xe.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const Se=class{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return-1===this.cursor?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(Se.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Se.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(0===this.items.length)return this.cursor;let t=this.cursor;return-1===t?t=e===Se.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),t=e===Se.directions.RIGHT?(t+1)%this.items.length:(this.items.length+t-1)%this.items.length,H.canSetCaret(this.items[t])&&O((()=>K.setCursor(this.items[t])),50)(),this.items[t].classList.add(this.focusedCssClass),t}};let Ce=Se;Ce.directions={RIGHT:"right",LEFT:"left"};class Ee{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(Ee.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case a:this.handleTabPress(e);break;case d:case h:this.flipLeft();break;case p:case u:this.flipRight();break;case l:this.handleEnterPress(e)}},this.iterator=new Ce(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Ee.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[a,d,p,l,h,u]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),void 0!==t&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter((t=>t!==e))}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Ce.directions.LEFT:Ce.directions.RIGHT){case Ce.directions.RIGHT:this.flipRight();break;case Ce.directions.LEFT:this.flipLeft()}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),w(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach((e=>e()))}}class Te{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:t,placeholder:n}){this.listeners=new q,this.items=e,this.onSearch=t,this.render(n)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=H.make("div",Te.CSS.wrapper);const t=H.make("div",Te.CSS.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=H.make("input",Te.CSS.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",(()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)}))}get foundItems(){return this.items.filter((e=>this.checkItem(e)))}checkItem(e){var t;const n=(null==(t=e.title)?void 0:t.toLowerCase())||"",i=this.searchQuery.toLowerCase();return n.includes(i)}}const _e=class{lock(){z?this.lockHard():document.body.classList.add(_e.CSS.scrollLocked)}unlock(){z?this.unlockHard():document.body.classList.remove(_e.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(_e.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(_e.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let Ae=_e;Ae.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var Oe=Object.defineProperty,Me=Object.getOwnPropertyDescriptor,Ie=(e=>(e.Close="close",e))(Ie||{});const De=class extends W{constructor(e){super(),this.scopeElement=document.body,this.listeners=new q,this.scrollLocker=new Ae,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find((e=>e.isFocused)).onFocus()},this.items=e.items.map((e=>new xe(e))),void 0!==e.scopeElement&&(this.scopeElement=e.scopeElement),e.messages&&(this.messages={...this.messages,...e.messages}),e.customContentFlippableItems&&(this.customContentFlippableItems=e.customContentFlippableItems),this.make(),e.customContent&&this.addCustomContent(e.customContent),e.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(De.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(De.CSS.overlayHidden),this.nodes.popover.classList.add(De.CSS.popoverOpened),this.flipper.activate(this.flippableElements),void 0!==this.search&&requestAnimationFrame((()=>{var e;null==(e=this.search)||e.focus()})),F()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(De.CSS.popoverOpened),this.nodes.popover.classList.remove(De.CSS.popoverOpenTop),this.nodes.overlay.classList.add(De.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach((e=>e.reset())),void 0!==this.search&&this.search.clear(),F()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),F()&&this.scrollLocker.unlock()}make(){this.nodes.popover=H.make("div",[De.CSS.popover]),this.nodes.nothingFoundMessage=H.make("div",[De.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=H.make("div",[De.CSS.items]),this.items.forEach((e=>{this.nodes.items.appendChild(e.getElement())})),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",(e=>{const t=this.getTargetItem(e);void 0!==t&&this.handleItemClick(t)})),this.nodes.wrapper=H.make("div"),this.nodes.overlay=H.make("div",[De.CSS.overlay,De.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",(()=>{this.hide()})),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new Te({items:this.items,placeholder:this.messages.search,onSearch:(e,t)=>{this.items.forEach((e=>{const n=!t.includes(e);e.toggleHidden(n)})),this.toggleNothingFoundMessage(0===t.length),this.toggleCustomContent(""!==e);const n=""===e?this.flippableElements:t.map((e=>e.getElement()));this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(n))}});const e=this.search.getElement();e.classList.add(De.CSS.search),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}addCustomContent(e){this.nodes.customContent=e,this.nodes.customContent.classList.add(De.CSS.customContent),this.nodes.popover.insertBefore(e,this.nodes.popover.firstChild)}getTargetItem(e){return this.items.find((t=>e.composedPath().includes(t.getElement())))}handleItemClick(e){e.isDisabled||(this.items.filter((t=>t!==e)).forEach((e=>e.reset())),e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new Ee({items:this.flippableElements,focusedItemClass:xe.CSS.focused,allowedKeys:[a,h,u,l]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const e=this.items.map((e=>e.getElement()));return(this.customContentFlippableItems||[]).concat(e)}get height(){let e=0;if(null===this.nodes.popover)return e;const t=this.nodes.popover.cloneNode(!0);return t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000px",t.classList.add(De.CSS.popoverOpened),document.body.appendChild(t),e=t.offsetHeight,t.remove(),e}get shouldOpenBottom(){const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.height,i=e.top+n,o=e.top-n,r=Math.min(window.innerHeight,t.bottom);return o<t.top||i<=r}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(De.CSS.nothingFoundMessageDisplayed,e)}toggleCustomContent(e){var t;null==(t=this.nodes.customContent)||t.classList.toggle(De.CSS.customContentHidden,e)}toggleItemActivenessIfNeeded(e){if(!0===e.toggle&&e.toggleActive(),"string"==typeof e.toggle){const t=this.items.filter((t=>t.toggle===e.toggle));if(1===t.length)return void e.toggleActive();t.forEach((t=>{t.toggleActive(t===e)}))}}};let Ne=De;((e,t,n,i)=>{for(var o,r=i>1?void 0:i?Me(t,n):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i?o(t,n,r):o(r))||r);i&&r&&Oe(t,n,r)})([P],Ne.prototype,"height",1);class Re extends Y{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=H.make("div",[Re.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=H.make("div",Re.CSS.conversionToolbarTools);const e=H.make("div",Re.CSS.conversionToolbarLabel,{textContent:U.ui(ye.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),H.append(this.nodes.wrapper,e),H.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),w(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(Re.CSS.conversionToolbarShowed),window.requestAnimationFrame((()=>{this.flipper.activate(this.tools.map((e=>e.button)).filter((e=>!e.classList.contains(Re.CSS.conversionToolHidden)))),this.flipper.focusFirst(),w(this.togglingCallback)&&this.togglingCallback(!0)}))}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(Re.CSS.conversionToolbarShowed),w(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return 1!==this.tools.length||this.tools[0].name!==this.config.defaultBlock}async replaceWithBlock(e,t){const{BlockManager:n,BlockSelection:i,InlineToolbar:o,Caret:r}=this.Editor;n.convert(this.Editor.BlockManager.currentBlock,e,t),i.clearSelection(),this.close(),o.close(),window.requestAnimationFrame((()=>{r.setToBlock(this.Editor.BlockManager.currentBlock,r.positions.END)}))}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach((([e,t])=>{var n;const i=t.conversionConfig;!i||!i.import||null==(n=t.toolbox)||n.forEach((t=>this.addToolIfValid(e,t)))}))}addToolIfValid(e,t){E(t)||!t.icon||this.addTool(e,t)}addTool(e,t){var n;const i=H.make("div",[Re.CSS.conversionTool]),o=H.make("div",[Re.CSS.conversionToolIcon]);i.dataset.tool=e,o.innerHTML=t.icon,H.append(i,o),H.append(i,H.text(U.t(ye.toolNames,t.title||D(e))));const r=null==(n=this.Editor.Tools.blockTools.get(e))?void 0:n.shortcut;if(r){const e=H.make("span",Re.CSS.conversionToolSecondaryLabel,{innerText:R(r)});H.append(i,e)}H.append(this.nodes.tools,i),this.tools.push({name:e,button:i,toolboxItem:t}),this.listeners.on(i,"click",(async()=>{await this.replaceWithBlock(e,t.data)}))}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,t=await e.getActiveToolboxEntry();this.tools.forEach((n=>{let i=!1;if(t){const o=function(e,t){return e.icon===t.icon&&e.title===t.title}(t,n.toolboxItem);i=n.button.dataset.tool===e.name&&o}n.button.hidden=i,n.button.classList.toggle(Re.CSS.conversionToolHidden,i)}))}enableFlipper(){this.flipper=new Ee({focusedItemClass:Re.CSS.conversionToolFocused})}}var Be={};
/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */!function(e,t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.r(t);var r=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.commands={},this.keys={},this.name=t.name,this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return o(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),o(e,[{key:"parseShortcutName",value:function(t){t=t.split("+");for(var n=0;n<t.length;n++){t[n]=t[n].toUpperCase();var i=!1;for(var o in e.supportedCommands)if(e.supportedCommands[o].includes(t[n])){i=this.commands[o]=!0;break}i||(this.keys[t[n]]=!0)}for(var r in e.supportedCommands)this.commands[r]||(this.commands[r]=!1)}},{key:"execute",value:function(t){var n,i={CMD:t.ctrlKey||t.metaKey,SHIFT:t.shiftKey,ALT:t.altKey},o=!0;for(n in this.commands)this.commands[n]!==i[n]&&(o=!1);var r,s=!0;for(r in this.keys)s=s&&t.keyCode===e.keyCodes[r];o&&s&&this.callback(t)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}();t.default=r}]).default}({get exports(){return Be},set exports(e){Be=e}});const Le=i(Be);const Pe=new class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Le({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const i=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,i.filter((e=>e!==n)))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find((({name:e})=>e===t))}};var Fe=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,He=(e,t,n,i)=>{for(var o,r=i>1?void 0:i?ze(t,n):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i?o(t,n,r):o(r))||r);return i&&r&&Fe(t,n,r),r},je=(e=>(e.Opened="toolbox-opened",e.Closed="toolbox-closed",e.BlockAdded="toolbox-block-added",e))(je||{});const Ge=class extends W{constructor({api:e,tools:t,i18nLabels:n}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=t,this.i18nLabels=n}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new Ne({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Ie.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(Ge.CSS.toolbox),this.nodes.toolbox}hasFocus(){var e;return null==(e=this.popover)?void 0:e.hasFocus()}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),null==(e=this.popover)||e.off(Ie.Close,this.onPopoverClose)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||(null==(e=this.popover)||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;null==(e=this.popover)||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const e=[];return this.tools.forEach((t=>{t.toolbox&&e.push(t)})),e}get toolboxItemsToBeDisplayed(){const e=(e,t)=>({icon:e.icon,title:U.t(ye.toolNames,e.title||D(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?R(t.shortcut):""});return this.toolsToBeDisplayed.reduce(((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach((i=>{t.push(e(i,n))})):void 0!==n.toolbox&&t.push(e(n.toolbox,n)),t)),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)}))}enableShortcutForTool(e,t){Pe.add({name:t,on:this.api.ui.nodes.redactor,handler:t=>{t.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(i)try{return this.api.blocks.convert(i.id,e),void window.requestAnimationFrame((()=>{this.api.caret.setToBlock(n,"end")}))}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&Pe.remove(this.api.ui.nodes.redactor,t)}))}async insertNewBlock(e,t){const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(!i)return;const o=i.isEmpty?n:n+1;let r;if(t){const n=await this.api.blocks.composeBlockData(e);r=Object.assign(n,t)}const s=this.api.blocks.insert(e,r,void 0,o,void 0,i.isEmpty);s.call(te.APPEND_CALLBACK),this.api.caret.setToBlock(o),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};let Ue=Ge;He([P],Ue.prototype,"toolsToBeDisplayed",1),He([P],Ue.prototype,"toolboxItemsToBeDisplayed",1);const $e="block hovered";var We=(e=>(e[e.Block=0]="Block",e[e.Inline=1]="Inline",e[e.Tune=2]="Tune",e))(We||{}),Ve=(e=>(e.Shortcut="shortcut",e.Toolbox="toolbox",e.EnabledInlineTools="inlineToolbar",e.EnabledBlockTunes="tunes",e.Config="config",e))(Ve||{}),qe=(e=>(e.Shortcut="shortcut",e.SanitizeConfig="sanitize",e))(qe||{}),Ye=(e=>(e.IsEnabledLineBreaks="enableLineBreaks",e.Toolbox="toolbox",e.ConversionConfig="conversionConfig",e.IsReadOnlySupported="isReadOnlySupported",e.PasteConfig="pasteConfig",e))(Ye||{}),Ke=(e=>(e.IsInline="isInline",e.Title="title",e))(Ke||{}),Ze=(e=>(e.IsTune="isTune",e))(Ze||{});class Xe{constructor({name:e,constructable:t,config:n,api:i,isDefault:o,isInternal:r=!1,defaultPlaceholder:s}){this.api=i,this.name=e,this.constructable=t,this.config=n,this.isDefault=o,this.isInternal=r,this.defaultPlaceholder=s}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(w(this.constructable.reset))return this.constructable.reset()}prepare(){if(w(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return 1===this.type}isBlock(){return 0===this.type}isTune(){return 2===this.type}}class Je{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return A(this.workingArea.children)}static set(e,t,n){return isNaN(Number(t))?(Reflect.set(e,t,n),!0):(e.insert(+t,n),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const n=this.blocks[t];H.swap(this.blocks[e].holder,n.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=n}move(e,t){const n=this.blocks.splice(t,1)[0],i=e-1,o=Math.max(0,i),r=this.blocks[o];e>0?this.insertToDOM(n,"afterend",r):this.insertToDOM(n,"beforebegin",r),this.blocks.splice(e,0,n);const s=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});n.call(te.MOVED,s)}insert(e,t,n=!1){if(!this.length)return void this.push(t);e>this.length&&(e=this.length),n&&(this.blocks[e].holder.remove(),this.blocks[e].call(te.REMOVED));const i=n?1:0;if(this.blocks.splice(e,i,t),e>0){const n=this.blocks[e-1];this.insertToDOM(t,"afterend",n)}else{const n=this.blocks[e+1];n?this.insertToDOM(t,"beforebegin",n):this.insertToDOM(t)}}replace(e,t){if(void 0===this.blocks[e])throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const n=new DocumentFragment;for(const t of e)n.appendChild(t.holder);if(this.length>0){if(t>0){const e=Math.min(t-1,this.length-1);this.blocks[e].holder.after(n)}else 0===t&&this.workingArea.prepend(n);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(n);e.forEach((e=>e.call(te.RENDERED)))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(te.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach((e=>e.call(te.REMOVED))),this.blocks.length=0}insertAfter(e,t){const n=this.blocks.indexOf(e);this.insert(n+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,n){t?n.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(te.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const Qe="block-removed",et="block-added",tt="block-changed";class nt{constructor(){this.completed=Promise.resolve()}add(e){return new Promise(((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)}))}}class it extends Y{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=K.get(),n=H.getDeepestNode(e.currentInput);let i=t.focusNode;if(H.isNativeInput(n))return 0===n.selectionEnd;if(!t.anchorNode)return!1;let o=i.textContent.search(/\S/);-1===o&&(o=0);let r=t.focusOffset;return i.nodeType!==Node.TEXT_NODE&&i.childNodes.length&&(i.childNodes[r]?(i=i.childNodes[r],r=0):(i=i.childNodes[r-1],r=i.textContent.length)),!(!H.isLineBreakTag(n)&&!H.isEmpty(n)||!this.getHigherLevelSiblings(i,"left").every((e=>{const t=H.isLineBreakTag(e),n=1===e.children.length&&H.isLineBreakTag(e.children[0]),i=t||n;return H.isEmpty(e)&&!i}))||r!==o)||(null===n||i===n&&r<=o)}get isAtEnd(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=K.get();let n=t.focusNode;const i=H.getDeepestNode(e.currentInput,!0);if(H.isNativeInput(i))return i.selectionEnd===i.value.length;if(!t.focusNode)return!1;let o=t.focusOffset;if(n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[o-1]?(n=n.childNodes[o-1],o=n.textContent.length):(n=n.childNodes[0],o=0)),H.isLineBreakTag(i)||H.isEmpty(i)){const e=this.getHigherLevelSiblings(n,"right");if(e.every(((t,n)=>n===e.length-1&&H.isLineBreakTag(t)||H.isEmpty(t)&&!H.isLineBreakTag(t)))&&o===n.textContent.length)return!0}const r=i.textContent.replace(/\s+$/,"");return n===i&&o>=r.length}setToBlock(e,t=this.positions.DEFAULT,n=0){var i;const{BlockManager:o,BlockSelection:r}=this.Editor;if(r.clearSelection(),!e.focusable)return null==(i=window.getSelection())||i.removeAllRanges(),r.selectBlock(e),void(o.currentBlock=e);let s;switch(t){case this.positions.START:s=e.firstInput;break;case this.positions.END:s=e.lastInput;break;default:s=e.currentInput}if(!s)return;const a=H.getDeepestNode(s,t===this.positions.END),l=H.getContentLength(a);switch(!0){case t===this.positions.START:n=0;break;case t===this.positions.END:case n>l:n=l}this.set(a,n),o.setCurrentBlockByChildNode(e.holder),o.currentBlock.currentInput=s}setToInput(e,t=this.positions.DEFAULT,n=0){const{currentBlock:i}=this.Editor.BlockManager,o=H.getDeepestNode(e);switch(t){case this.positions.START:this.set(o,0);break;case this.positions.END:this.set(o,H.getContentLength(o));break;default:n&&this.set(o,n)}i.currentInput=e}set(e,t=0){const{top:n,bottom:i}=K.setCursor(e,t),{innerHeight:o}=window;n<0?window.scrollBy(0,n-30):i>o&&window.scrollBy(0,i-o+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const e=this.Editor.BlockManager.insertAtEnd();this.setToBlock(e)}}extractFragmentFromCaretPosition(){const e=K.get();if(e.rangeCount){const t=e.getRangeAt(0),n=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),n){if(H.isNativeInput(n)){const e=n,t=document.createDocumentFragment(),i=e.value.substring(0,e.selectionStart),o=e.value.substring(e.selectionStart);return t.textContent=o,e.value=i,t}{const e=t.cloneRange();return e.selectNodeContents(n),e.setStart(t.endContainer,t.endOffset),e.extractContents()}}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:n,nextBlock:i}=t,{nextInput:o}=n,r=this.isAtEnd;let s=i;const a=e||r;if(o&&a)return this.setToInput(o,this.positions.START),!0;if(null===s){if(n.tool.isDefault||!a)return!1;s=t.insertAtEnd()}return!!a&&(this.setToBlock(s,this.positions.START),!0)}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:n}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:i}=t,o=e||this.isAtStart;return i&&o?(this.setToInput(i,this.positions.END),!0):!(null===n||!o)&&(this.setToBlock(n,this.positions.END),!0)}createShadow(e){const t=document.createElement("span");t.classList.add(it.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${it.CSS.shadowCaret}`);if(!t)return;(new K).expandToTag(t);const n=document.createRange();n.selectNode(t),n.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),n=document.createElement("div"),i=K.get(),o=K.range;n.innerHTML=e,Array.from(n.childNodes).forEach((e=>t.appendChild(e))),0===t.childNodes.length&&t.appendChild(new Text);const r=t.lastChild;o.deleteContents(),o.insertNode(t);const s=document.createRange(),a=r.nodeType===Node.TEXT_NODE?r:r.firstChild;null!==a&&null!==a.textContent&&s.setStart(a,a.textContent.length),i.removeAllRanges(),i.addRange(s)}getHigherLevelSiblings(e,t){let n=e;const i=[];for(;n.parentNode&&"true"!==n.parentNode.contentEditable;)n=n.parentNode;const o="left"===t?"previousSibling":"nextSibling";for(;n[o];)n=n[o],i.push(n);return i}}const ot=class extends Y{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(!1===e.pasteConfig)return void this.exceptionList.push(e.name);if(!w(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){v(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:n}=this.Editor,i=t.setCurrentBlockByChildNode(e.target);!i||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||i&&this.exceptionList.includes(i.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:n}=this.Editor,i=e.types;if((i.includes?i.includes("Files"):i.contains("Files"))&&!E(this.toolsFiles))return void await this.processFiles(e.files);const o=e.getData(this.MIME_TYPE),r=e.getData("text/plain");let s=e.getData("text/html");if(o)try{return void this.insertEditorJSData(JSON.parse(o))}catch{}t&&r.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:r)+"</p>");const a=Object.keys(this.toolsTags).reduce(((e,t)=>(e[t.toLowerCase()]=this.toolsTags[t].sanitizationConfig??{},e)),{}),l=de(s,Object.assign({},a,n.getAllInlineToolsSanitizeConfig(),{br:{}}));l.trim()&&l.trim()!==r&&H.isHTMLString(l)?await this.processText(l,!0):await this.processText(r)}async processText(e,t=!1){const{Caret:n,BlockManager:i}=this.Editor,o=t?this.processHTML(e):this.processPlain(e);if(!o.length)return;if(1===o.length)return void(o[0].isBlock?this.processSingleBlock(o.pop()):this.processInlinePaste(o.pop()));const r=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty;o.map((async(e,t)=>this.insertBlock(e,0===t&&r))),i.currentBlock&&n.setToBlock(i.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return x(e)?[e]:k(e)?Object.keys(e):[]}getTagsConfig(e){if(!1===e.pasteConfig)return;const t=e.pasteConfig.tags||[],n=[];t.forEach((t=>{const i=this.collectTagNames(t);n.push(...i),i.forEach((n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n))return void v(`Paste handler for «${e.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,"warn");const i=k(t)?t[n]:null;this.toolsTags[n.toUpperCase()]={tool:e,sanitizationConfig:i}}))})),this.tagsByTool[e.name]=n.map((e=>e.toUpperCase()))}getFilesConfig(e){if(!1===e.pasteConfig)return;const{files:t={}}=e.pasteConfig;let{extensions:n,mimeTypes:i}=t;!n&&!i||(n&&!Array.isArray(n)&&(v(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),n=[]),i&&!Array.isArray(i)&&(v(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),i=[]),i&&(i=i.filter((t=>!!function(e){return/^[-\w]+\/([-+\w]+|\*)$/.test(e)}(t)||(v(`MIME type value «${t}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1)))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:i||[]})}getPatternsConfig(e){!1===e.pasteConfig||!e.pasteConfig.patterns||E(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach((([t,n])=>{n instanceof RegExp||v(`Pattern ${n} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:n,tool:e})}))}isNativeBehaviour(e){return H.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(e).map((e=>this.processFile(e)))),n=n.filter((e=>!!e));const i=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach(((e,n)=>{t.paste(e.type,e.event,0===n&&i)}))}async processFile(e){const t=function(e){return e.name.split(".").pop()}(e),n=Object.entries(this.toolsFiles).find((([n,{mimeTypes:i,extensions:o}])=>{const[r,s]=e.type.split("/"),a=o.find((e=>e.toLowerCase()===t.toLowerCase())),l=i.find((e=>{const[t,n]=e.split("/");return t===r&&(n===s||"*"===n)}));return!!a||!!l}));if(!n)return;const[i]=n;return{event:this.composePasteEvent("file",{file:e}),type:i}}processHTML(e){const{Tools:t}=this.Editor,n=H.make("DIV");return n.innerHTML=e,this.getNodes(n).map((e=>{let n,i=t.defaultTool,o=!1;switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=H.make("div"),n.appendChild(e);break;case Node.ELEMENT_NODE:n=e,o=!0,this.toolsTags[n.tagName]&&(i=this.toolsTags[n.tagName].tool)}const{tags:r}=i.pasteConfig||{tags:[]},s=r.reduce(((e,t)=>(this.collectTagNames(t).forEach((n=>{const i=k(t)?t[n]:null;e[n.toLowerCase()]=i||{}})),e)),{}),a=Object.assign({},s,i.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){const e=de(n.outerHTML,a);n=H.make("div",void 0,{innerHTML:e}).firstChild}else n.innerHTML=de(n.innerHTML,a);const l=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:o,tool:i.name,event:l}})).filter((e=>{const t=H.isEmpty(e.content),n=H.isSingleTag(e.content);return!t||n}))}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const n=t;return e.split(/\r?\n/).filter((e=>e.trim())).map((e=>{const t=H.make("div");t.textContent=e;const i=this.composePasteEvent("tag",{data:t});return{content:t,tool:n,isBlock:!1,event:i}}))}async processSingleBlock(e){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:i}=n;i&&e.tool===i.name&&H.containsOnlyInlineElements(e.content.innerHTML)?t.insertContentAtCaretPosition(e.content.innerHTML):this.insertBlock(e,(null==i?void 0:i.tool.isDefault)&&i.isEmpty)}async processInlinePaste(e){const{BlockManager:t,Caret:n}=this.Editor,{content:i}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&i.textContent.length<ot.PATTERN_PROCESSING_MAX_LENGTH){const e=await this.processPattern(i.textContent);if(e){const i=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,o=t.paste(e.tool,e.event,i);return void n.setToBlock(o,n.positions.END)}}if(t.currentBlock&&t.currentBlock.currentInput){const e=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,de(i.innerHTML,e))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find((t=>{const n=t.pattern.exec(e);return!!n&&e===n.shift()}));return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:n,Caret:i}=this.Editor,{currentBlock:o}=n;let r;if(t&&o&&o.isEmpty)return r=n.paste(e.tool,e.event,!0),void i.setToBlock(r,i.positions.END);r=n.paste(e.tool,e.event),i.setToBlock(r,i.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:n,Tools:i}=this.Editor;ce(e,(e=>i.blockTools.get(e).sanitizeConfig)).forEach((({tool:e,data:i},o)=>{let r=!1;0===o&&(r=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const s=t.insert({tool:e,data:i,replace:r});n.setToBlock(s,n.positions.END)}))}processElementNode(e,t,n){const i=Object.keys(this.toolsTags),o=e,{tool:r}=this.toolsTags[o.tagName]||{},s=this.tagsByTool[null==r?void 0:r.name]||[],a=i.includes(o.tagName),l=H.blockElements.includes(o.tagName.toLowerCase()),c=Array.from(o.children).some((({tagName:e})=>i.includes(e)&&!s.includes(e))),d=Array.from(o.children).some((({tagName:e})=>H.blockElements.includes(e.toLowerCase())));return l||a||c?a&&!c||l&&!d&&!c?[...t,n,o]:void 0:(n.appendChild(o),[...t,n])}getNodes(e){const t=Array.from(e.childNodes);let n;const i=(e,t)=>{if(H.isEmpty(t)&&!H.isSingleTag(t))return e;const o=e[e.length-1];let r=new DocumentFragment;switch(o&&H.isFragment(o)&&(r=e.pop()),t.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(t,e,r),n)return n;break;case Node.TEXT_NODE:return r.appendChild(t),[...e,r];default:return[...e,r]}return[...e,...Array.from(t.childNodes).reduce(i,[])]};return t.reduce(i,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};let rt=ot;rt.PATTERN_PROCESSING_MAX_LENGTH=450;class st extends Y{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const n=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);n.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const i=[`.${ne.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],o=n.closest("."+this.Editor.UI.CSS.editorWrapper),r=i.some((e=>!!n.closest(e)));!o||r||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",(e=>{this.processMouseDown(e)}),!1),this.listeners.on(document.body,"mousemove",I((e=>{this.processMouseMove(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseleave",(()=>{this.processMouseLeave()})),this.listeners.on(window,"scroll",I((e=>{this.processScroll(e)}),10),{passive:!0}),this.listeners.on(document.body,"mouseup",(()=>{this.processMouseUp()}),!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(null!==e.target.closest(H.allInputsSelector)||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),n=H.make("div",st.CSS.overlay,{}),i=H.make("div",st.CSS.overlayContainer,{}),o=H.make("div",st.CSS.rect,{});return i.appendChild(o),n.appendChild(i),t.appendChild(n),this.overlayRectangle=o,{container:t,overlay:n}}scrollVertical(e){if(!this.inScrollZone||!this.mousedown)return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout((()=>{this.scrollVertical(e)}),0)}changingRectangle(e){if(!this.mousedown)return;void 0!==e.pageY&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:n,index:i}=this.genInfoForMouseSelection(),o=this.startX>t&&this.mouseX>t,r=this.startX<n&&this.mouseX<n;this.rectCrossesBlocks=!(o||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),void 0!==i&&(this.trySelectNextBlock(i),this.inverseSelection(),K.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=this.startX-window.pageXOffset+"px",this.overlayRectangle.style.top=this.startY-window.pageYOffset+"px",this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const e of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(e);if(!this.rectCrossesBlocks&&e)for(const e of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(e)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=this.startY-window.pageYOffset+"px",this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=this.mouseY-window.pageYOffset+"px"),this.mouseX>=this.startX?(this.overlayRectangle.style.left=this.startX-window.pageXOffset+"px",this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=this.mouseX-window.pageXOffset+"px")}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,n=document.elementFromPoint(e,t),i=this.Editor.BlockManager.getBlockByChildNode(n);let o;void 0!==i&&(o=this.Editor.BlockManager.blocks.findIndex((e=>e.holder===i.holder)));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+ne.CSS.content),s=Number.parseInt(window.getComputedStyle(r).width,10)/2;return{index:o,leftPos:e-s,rightPos:e+s}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,n=this.stackOfSelected.length;if(t)return;const i=this.stackOfSelected[n-1]-this.stackOfSelected[n-2]>0;let o=0;n>1&&(o=i?1:-1);const r=e>this.stackOfSelected[n-1]&&1===o,s=e<this.stackOfSelected[n-1]&&-1===o,a=!(r||s||0===o);if(!a&&(e>this.stackOfSelected[n-1]||void 0===this.stackOfSelected[n-1])){let t=this.stackOfSelected[n-1]+1||e;for(;t<=e;t++)this.addBlockInSelection(t);return}if(!a&&e<this.stackOfSelected[n-1]){for(let t=this.stackOfSelected[n-1]-1;t>=e;t--)this.addBlockInSelection(t);return}if(!a)return;let l,c=n-1;for(l=e>this.stackOfSelected[n-1]?()=>e>this.stackOfSelected[c]:()=>e<this.stackOfSelected[c];l();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[c]),this.stackOfSelected.pop(),c--}}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();
/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */
class at{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:i}){this.api=n,this.readOnly=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:at.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=void 0!==t.preserveBlank&&t.preserveBlank,this.data=e}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code)return;const{textContent:t}=this._element;""===t&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable=!1,e.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable=!0,e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){const t={text:this.data.text+e.text};this.data=t}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this.data=t}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(null!==this._element){const e=this._element.innerHTML;this._data.text=e}return this._data}set data(e){this._data=e||{},null!==this._element&&this.hydrate()}hydrate(){window.requestAnimationFrame((()=>{this._element.innerHTML=this._data.text||""}))}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class lt{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}lt.isInline=!0,lt.title="Bold";class ct{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}ct.isInline=!0,ct.title="Italic";class dt{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new K}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=ke,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",(e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)})),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const e=this.selection.findParentTag("A");if(e)return this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value="null"!==t?t:"",this.selection.save()}else this.nodes.button.innerHTML=ke,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const e=new K;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";return t.trim()?this.validateURL(t)?(t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void v("Incorrect Link pasted","warn",t)):(this.selection.restore(),this.unlink(),e.preventDefault(),void this.closeActions())}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e)}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n="#"===e.substring(0,1),i=/^\/\/[^/\s]/.test(e);return!t&&!n&&!i&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}dt.isInline=!0,dt.title="Link";class ht{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=H.make("div",this.CSS.wrapper),t=H.make("div",this.CSS.info),n=H.make("div",this.CSS.title,{textContent:this.title}),i=H.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',t.appendChild(n),t.appendChild(i),e.appendChild(t),e}}ht.isReadOnlySupported=!0;class ut extends Xe{constructor(){super(...arguments),this.type=We.Inline}get title(){return this.constructable[Ke.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class pt extends Xe{constructor(){super(...arguments),this.type=We.Tune}create(e,t){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:t,data:e})}}class ft extends Map{get blockTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isBlock()));return new ft(e)}get inlineTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInline()));return new ft(e)}get blockTunes(){const e=Array.from(this.entries()).filter((([,e])=>e.isTune()));return new ft(e)}get internalTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInternal));return new ft(e)}get externalTools(){const e=Array.from(this.entries()).filter((([,e])=>!e.isInternal));return new ft(e)}}var gt=Object.defineProperty,mt=Object.getOwnPropertyDescriptor,vt=(e,t,n,i)=>{for(var o,r=i>1?void 0:i?mt(t,n):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i?o(t,n,r):o(r))||r);return i&&r&&gt(t,n,r),r};class bt extends Xe{constructor(){super(...arguments),this.type=We.Block,this.inlineTools=new ft,this.tunes=new ft}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[Ye.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[Ye.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[Ye.Toolbox],t=this.config[Ve.Toolbox];if(!E(e)&&!1!==t)return t?Array.isArray(e)?Array.isArray(t)?t.map(((t,n)=>{const i=e[n];return i?{...i,...t}:t})):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[Ye.ConversionConfig]}get enabledInlineTools(){return this.config[Ve.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[Ve.EnabledBlockTunes]}get pasteConfig(){return this.constructable[Ye.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(E(e))return t;const n={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];k(o)?n[i]=Object.assign({},t,o):n[i]=o}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),Array.from(this.tunes.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),e}}vt([P],bt.prototype,"sanitizeConfig",1),vt([P],bt.prototype,"baseSanitizeConfig",1);class yt{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...i}=this.config[e];return new(this.getConstructor(t))({name:e,constructable:t,config:i,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[Ke.IsInline]:return ut;case e[Ze.IsTune]:return pt;default:return bt}}}class wt{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:we,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,i=n.getBoundingClientRect();let o=Math.abs(window.innerHeight-n.offsetHeight);i.top<window.innerHeight&&(o=window.scrollY+n.offsetHeight),window.scrollTo(0,o),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}wt.isTune=!0;class kt{constructor({api:e}){this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}kt.isTune=!0;class xt{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(0===e||!t||!n)throw new Error("Unable to move Block up since it is already the first");const i=t.holder,o=n.holder,r=i.getBoundingClientRect(),s=o.getBoundingClientRect();let a;a=s.top>0?Math.abs(r.top)-Math.abs(s.top):Math.abs(r.top)+s.height,window.scrollBy(0,-1*a),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}xt.isTune=!0;var St=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor;class Et extends Y{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new ft,this.toolsUnavailable=new ft}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=N({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new yt(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(0===t.length)return Promise.resolve();await _(t,(e=>{this.toolPrepareMethodSuccess(e)}),(e=>{this.toolPrepareMethodFallback(e)})),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>{Object.assign(e,t.sanitizeConfig)})),e}destroy(){Object.values(this.available).forEach((async e=>{w(e.reset)&&await e.reset()}))}get internalTools(){return{bold:{class:lt,isInternal:!0},italic:{class:ct,isInternal:!0},link:{class:dt,isInternal:!0},paragraph:{class:at,inlineToolbar:!0,isInternal:!0},stub:{class:ht,isInternal:!0},moveUp:{class:xt,isInternal:!0},delete:{class:kt,isInternal:!0},moveDown:{class:wt,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const e=["render","surround","checkState"].filter((e=>!t.create()[e]));if(e.length)return v(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",e),void this.toolsUnavailable.set(t.name,t)}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach((([e,n])=>{t.push({function:w(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:e,config:n.config}})})),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach((e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)}))}assignInlineToolsToBlockTool(e){if(!1!==this.config.inlineToolbar){if(!0===e.enabledInlineTools)return void(e.inlineTools=new ft(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map((e=>[e,this.inlineTools.get(e)])):Array.from(this.inlineTools.entries())));Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new ft(e.enabledInlineTools.map((e=>[e,this.inlineTools.get(e)]))))}}assignBlockTunesToBlockTool(e){if(!1!==e.enabledBlockTunes){if(Array.isArray(e.enabledBlockTunes)){const t=new ft(e.enabledBlockTunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new ft([...t,...this.blockTunes.internalTools]))}if(Array.isArray(this.config.tunes)){const t=new ft(this.config.tunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new ft([...t,...this.blockTunes.internalTools]))}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!w(t)&&!w(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)k(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}((e,t,n,i)=>{for(var o,r=i>1?void 0:i?Ct(t,n):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i?o(t,n,r):o(r))||r);i&&r&&St(t,n,r)})([P],Et.prototype,"getAllInlineToolsSanitizeConfig",1);const Tt=':root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}\n';const _t={BlocksAPI:class extends Y{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},n={},i,o,r,s,a)=>new V(this.Editor.BlockManager.insert({id:s,tool:e,data:t,index:i,needToFocus:o,replace:r,tunes:a})),this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new ne({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t)=>{const{BlockManager:n}=this.Editor,i=n.getBlockById(e);if(void 0===i)throw new Error(`Block with id "${e}" not found`);return new V(await n.update(i,t))},this.convert=(e,t,n)=>{var i,o;const{BlockManager:r,Tools:s}=this.Editor,a=r.getBlockById(e);if(!a)throw new Error(`Block with id "${e}" not found`);const l=s.blockTools.get(a.name),c=s.blockTools.get(t);if(!c)throw new Error(`Block Tool with type "${t}" not found`);const d=void 0!==(null==(i=null==l?void 0:l.conversionConfig)?void 0:i.export),h=void 0!==(null==(o=c.conversionConfig)?void 0:o.import);if(!d||!h){const e=[!d&&D(a.name),!h&&D(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${a.name}" to "${t}" is not possible. ${e} tool(s) should provide a "conversionConfig"`)}r.convert(a,t,n)},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const n=e.map((({id:e,type:t,data:n})=>this.Editor.BlockManager.composeBlock({id:e,tool:t||this.config.defaultBlock,data:n})));return this.Editor.BlockManager.insertMany(n,t),n.map((e=>new V(e)))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(t)return this.Editor.BlockManager.getBlockIndex(t);b("There is no block with id `"+e+"`","warn")}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(void 0!==t)return new V(t);b("There is no block at index `"+e+"`","warn")}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return void 0===t?(b("There is no block with id `"+e+"`","warn"),null):new V(t)}swap(e,t){v("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(e){return void b(e,"warn")}0===this.Editor.BlockManager.blocks.length&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(void 0===e||void 0===e.blocks)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){L(!0,"blocks.stretchBlock()","BlockAPI");const n=this.Editor.BlockManager.getBlockByIndex(e);n&&(n.stretched=t)}insertNewBlock(){v("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if("number"!=typeof e)throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(null===e)throw new Error("Index should be greater than or equal to 0")}},CaretAPI:class extends Y{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.firstBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0),this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.lastBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0),this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.previousBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0),this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>!!this.Editor.BlockManager.nextBlock&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0),this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,n=0)=>!!this.Editor.BlockManager.blocks[e]&&(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],t,n),!0),this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}},EventsAPI:class extends Y{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}},I18nAPI:ie,API:class extends Y{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}},InlineToolbarAPI:class extends Y{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}},ListenersAPI:class extends Y{get methods(){return{on:(e,t,n,i)=>this.on(e,t,n,i),off:(e,t,n,i)=>this.off(e,t,n,i),offById:e=>this.offById(e)}}on(e,t,n,i){return this.listeners.on(e,t,n,i)}off(e,t,n,i){this.listeners.off(e,t,n,i)}offById(e){this.listeners.offById(e)}},NotifierAPI:class extends Y{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new se}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}},ReadOnlyAPI:class extends Y{get methods(){const e=()=>this.isEnabled;return{toggle:e=>this.toggle(e),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}},SanitizerAPI:class extends Y{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return de(e,t)}},SaverAPI:class extends Y{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(b(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}},SelectionAPI:class extends Y{get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,t){return(new K).findParentTag(e,t)}expandToTag(e){(new K).expandToTag(e)}},StylesAPI:class extends Y{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}},ToolbarAPI:class extends Y{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){-1!==this.Editor.BlockManager.currentBlockIndex?e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close():b("Could't toggle the Toolbar because there is no block selected ","warn")}toggleToolbox(e){-1!==this.Editor.BlockManager.currentBlockIndex?e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close():b("Could't toggle the Toolbox because there is no block selected ","warn")}},TooltipAPI:class extends Y{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,n)=>this.show(e,t,n),hide:()=>this.hide(),onHover:(e,t,n)=>this.onHover(e,t,n)}}show(e,t,n){!function(e,t,n){me(),null==ge||ge.show(e,t,n)}(e,t,n)}hide(){ve()}onHover(e,t,n){be(e,t,n)}},UiAPI:class extends Y{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}},BlockSettings:class extends Y{constructor(){super(...arguments),this.opened=!1,this.selection=new K,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return null==(e=this.popover)?void 0:e.flipper}make(){this.nodes.wrapper=H.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const[t,n]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new Ne({searchable:!0,items:t.map((e=>this.resolveTuneAliases(e))),customContent:n,customContentFlippableItems:this.getControls(n),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:U.ui(ye.ui.popover,"Nothing found"),search:U.ui(ye.ui.popover,"Filter")}}),this.popover.on(Ie.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,K.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Ie.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(e){const{StylesAPI:t}=this.Editor,n=e.querySelectorAll(`.${t.classes.settingsButton}, ${H.allInputsSelector}`);return Array.from(n)}resolveTuneAliases(e){const t=function(e,t){const n={};return Object.keys(e).forEach((i=>{const o=t[i];void 0!==o?n[o]=e[i]:n[i]=e[i]})),n}(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}},ConversionToolbar:Re,Toolbar:class extends Y{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:null==(e=this.toolboxInstance)?void 0:e.opened,close:()=>{var e;null==(e=this.toolboxInstance)||e.close()},open:()=>{null!==this.toolboxInstance?(this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()):v("toolbox.open() called before initialization is finished","warn")},toggle:()=>{null!==this.toolboxInstance?this.toolboxInstance.toggle():v("toolbox.toggle() called before initialization is finished","warn")},hasFocus:()=>{var e;return null==(e=this.toolboxInstance)?void 0:e.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback((()=>{this.drawUI(),this.enableModuleBindings()}),{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(null===this.toolboxInstance)return void v("Can't open Toolbar since Editor initialization is not finished yet","warn");if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:n}=this.Editor.UI,i=e.pluginsContent,o=window.getComputedStyle(i),r=parseInt(o.paddingTop,10),s=t.offsetHeight;let a;a=n?t.offsetTop+s:t.offsetTop+r,this.nodes.wrapper.style.top=`${Math.floor(a)}px`,1===this.Editor.BlockManager.blocks.length&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||(null==(e=this.nodes.wrapper)||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),null==(t=this.toolboxInstance)||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=H.make("div",this.CSS.toolbar),["content","actions"].forEach((e=>{this.nodes[e]=H.make("div",this.CSS[e])})),H.append(this.nodes.wrapper,this.nodes.content),H.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=H.make("div",this.CSS.plusButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>'}),H.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",(()=>{ve(!0),this.plusButtonClicked()}),!1);const e=H.make("div");e.appendChild(document.createTextNode(U.ui(ye.ui.toolbar.toolbox,"Add"))),e.appendChild(H.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),be(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=H.make("span",this.CSS.settingsToggler,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>'}),H.append(this.nodes.actions,this.nodes.settingsToggler);const t=H.make("div"),n=H.text(U.ui(ye.ui.blockTunes.toggler,"Click to tune")),i=await async function(e,t){const n=navigator.keyboard;return n&&(await n.getLayoutMap()).get(e)||t}("Slash","/");t.appendChild(n),t.appendChild(H.make("div",this.CSS.plusButtonShortcut,{textContent:R(`CMD + ${i}`)})),be(this.nodes.settingsToggler,t,{hidingDelay:400}),H.append(this.nodes.actions,this.makeToolbox()),H.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),H.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Ue({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:U.ui(ye.ui.popover,"Filter"),nothingFound:U.ui(ye.ui.popover,"Nothing found")}}),this.toolboxInstance.on(je.Opened,(()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(je.Closed,(()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)})),this.toolboxInstance.on(je.BlockAdded,(({block:e})=>{const{BlockManager:t,Caret:n}=this.Editor,i=t.getBlockById(e.id);0===i.inputs.length&&(i===t.lastBlock?(t.insertAtEnd(),n.setToBlock(t.lastBlock)):n.setToBlock(t.nextBlock))})),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,null==(e=this.toolboxInstance)||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",(e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),null!=(t=this.toolboxInstance)&&t.opened&&this.toolboxInstance.close(),ve(!0)}),!0),F()||this.eventsDispatcher.on($e,(e=>{var t;this.Editor.BlockSettings.opened||null!=(t=this.toolboxInstance)&&t.opened||this.moveAndOpen(e.block)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}},InlineToolbar:class extends Y{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=F()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback((()=>{this.make()}),{timeout:2e3})}async tryToShow(e=!1,t=!0){e&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(t),this.move(),this.open(t),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach((([e,t])=>{const n=this.getToolShortcut(e);n&&Pe.remove(this.Editor.UI.nodes.redactor,n),w(t.clear)&&t.clear()})),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(e){return void 0!==this.nodes.wrapper&&this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=H.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=H.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=H.make("div",this.CSS.buttonsWrapper),this.nodes.actions=H.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",(e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()})),H.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),H.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),H.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame((()=>{this.recalculateWidth()})),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let e=Array.from(this.buttonsList);e.unshift(this.nodes.conversionToggler),e=e.filter((e=>!e.hidden)),this.flipper.activate(e)}move(){const e=K.rect,t=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),n={x:e.x-t.x,y:e.y+e.height-t.top+this.toolbarVerticalMargin};n.x+this.width+t.x>this.Editor.UI.contentRect.right&&(n.x=this.Editor.UI.contentRect.right-this.width-t.x),this.nodes.wrapper.style.left=Math.floor(n.x)+"px",this.nodes.wrapper.style.top=Math.floor(n.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=K.get(),t=K.text;if(!e||!e.anchorNode||e.isCollapsed||t.length<1)return!1;const n=H.isElement(e.anchorNode)?e.anchorNode:e.anchorNode.parentElement;if(e&&["IMG","INPUT"].includes(n.tagName)||null===n.closest('[contenteditable="true"]'))return!1;const i=this.Editor.BlockManager.getBlock(e.anchorNode);return!!i&&0!==i.tool.inlineTools.size}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=H.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=H.make("div",this.CSS.conversionTogglerContent);const e=H.make("div",this.CSS.conversionTogglerArrow,{innerHTML:we});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",(()=>{this.Editor.ConversionToolbar.toggle((e=>{!e&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()}))})),!1===F()&&be(this.nodes.conversionToggler,U.ui(ye.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:t}=e,n=t.name,i=t.tool.conversionConfig,o=i&&i.export;this.nodes.conversionToggler.hidden=!o,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!o);const r=await t.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=r.icon||r.title||D(n)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();H.append(this.nodes.wrapper,e)}async addToolsFiltered(e=!0){const t=K.get(),n=this.Editor.BlockManager.getBlock(t.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(n.tool.inlineTools.values()).forEach((e=>{this.addTool(e)})),e&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(e){const t=e.create(),n=t.render();if(!n)return void v("Render method must return an instance of Node","warn",e.name);if(n.dataset.tool=e.name,this.nodes.buttons.appendChild(n),this.toolsInstances.set(e.name,t),w(t.renderActions)){const e=t.renderActions();this.nodes.actions.appendChild(e)}this.listeners.on(n,"click",(e=>{this.toolClicked(t),e.preventDefault()}));const i=this.getToolShortcut(e.name);if(i)try{this.enableShortcuts(t,i)}catch{}const o=H.make("div"),r=U.t(ye.toolNames,e.title||D(e.name));o.appendChild(H.text(r)),i&&o.appendChild(H.make("div",this.CSS.inlineToolbarShortcut,{textContent:R(i)})),!1===F()&&be(n,o,{placement:"top",hidingDelay:100}),t.checkState(K.get())}getToolShortcut(e){const{Tools:t}=this.Editor,n=t.inlineTools.get(e),i=t.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][qe.Shortcut]:n.shortcut}enableShortcuts(e,t){Pe.add({name:t,handler:t=>{const{currentBlock:n}=this.Editor.BlockManager;n&&n.tool.enabledInlineTools&&(t.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const t=K.range;e.surround(t),this.checkToolsState(),void 0!==e.renderActions&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach((e=>{e.checkState(K.get())}))}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach((([t,n])=>{e[t]=n.create()})),e}enableFlipper(){this.flipper=new Ee({focusedItemClass:this.CSS.focusedButton,allowedKeys:[l,a]})}},BlockEvents:class extends Y{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case s:this.backspace(e);break;case f:this.delete(e);break;case l:this.enter(e);break;case u:case p:this.arrowRightAndDown(e);break;case h:case d:this.arrowLeftAndUp(e);break;case a:this.tabPressed(e)}"/"===e.key&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(),"Slash"===e.code&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&T(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){this.Editor.BlockManager.getBlockByChildNode(e.target).dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t&&(t.dropTarget=!1)}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:n,Caret:i}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then((()=>{const o=n.removeSelectedBlocks(),r=n.insertDefaultBlockAtIndex(o,!0);i.setToBlock(r,i.positions.START),t.clearSelection(e)}))}tabPressed(e){const{InlineToolbar:t,ConversionToolbar:n,Caret:i}=this.Editor;n.opened||t.opened||(e.shiftKey?i.navigatePrevious(!0):i.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(e){const{BlockManager:t,UI:n}=this.Editor;if(t.currentBlock.tool.isLineBreaksEnabled||n.someToolbarOpened&&n.someFlipperButtonFocused||e.shiftKey)return;let i=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):i=this.Editor.Caret.isAtEnd?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,previousBlock:o}=t;if(K.isCollapsed&&n.isAtStart)if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput===i.firstInput){if(null!==o)if(o.isEmpty)t.removeBlock(o);else if(i.isEmpty){t.removeBlock(i);const e=t.currentBlock;n.setToBlock(e,n.positions.END)}else ee(i,o)?this.mergeBlocks(o,i):n.setToBlock(o,n.positions.END)}else n.navigatePrevious()}delete(e){const{BlockManager:t,Caret:n}=this.Editor,{currentBlock:i,nextBlock:o}=t;if(K.isCollapsed&&n.isAtEnd)if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput===i.lastInput){if(null!==o){if(!o.isEmpty)return i.isEmpty?(t.removeBlock(i),void n.setToBlock(o,n.positions.START)):void(ee(i,o)?this.mergeBlocks(i,o):n.setToBlock(o,n.positions.START));t.removeBlock(o)}}else n.navigateNext()}mergeBlocks(e,t){const{BlockManager:n,Caret:i,Toolbar:o}=this.Editor;i.createShadow(e.pluginsContent),n.mergeBlocks(e,t).then((()=>{window.requestAnimationFrame((()=>{i.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),o.close()}))}))}arrowRightAndDown(e){const t=Ee.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===a);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===u&&n?this.Editor.CrossBlockSelection.toggleBlockSelectedState():(e.keyCode===u||e.keyCode===p&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():(O((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Ee.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===a))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const t=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;e.shiftKey&&e.keyCode===h&&t?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):(e.keyCode===h||e.keyCode===d&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():(O((()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()}),20)(),this.Editor.BlockSelection.clearSelection(e))}needToolbarClosing(e){const t=e.keyCode===l&&this.Editor.Toolbar.toolbox.opened,n=e.keyCode===l&&this.Editor.BlockSettings.opened,i=e.keyCode===l&&this.Editor.InlineToolbar.opened,o=e.keyCode===l&&this.Editor.ConversionToolbar.opened,r=e.keyCode===a;return!(e.shiftKey||r||t||n||i||o)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}},BlockManager:class extends Y{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find((e=>!!e.inputs.length))}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find((e=>!!e.inputs.length))}get previousBlock(){return 0===this.currentBlockIndex?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every((e=>e.isEmpty))}prepare(){const e=new Je(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Je.set,get:Je.get}),this.listeners.on(document,"copy",(e=>this.Editor.BlockEvents.handleCommandC(e)))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:n,tunes:i={}}){const o=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),s=new ne({id:n,data:t,tool:r,api:this.Editor.API,readOnly:o,tunesData:i},this.eventsDispatcher);return o||window.requestIdleCallback((()=>{this.bindBlockEvents(s)}),{timeout:2e3}),s}insert({id:e,tool:t=this.config.defaultBlock,data:n={},index:i,needToFocus:o=!0,replace:r=!1,tunes:s={}}={}){let a=i;void 0===a&&(a=this.currentBlockIndex+(r?0:1));const l=this.composeBlock({id:e,tool:t,data:n,tunes:s});return r&&this.blockDidMutated(Qe,this.getBlockByIndex(a),{index:a}),this._blocks.insert(a,l,r),this.blockDidMutated(et,l,{index:a}),o?this.currentBlockIndex=a:a<=this.currentBlockIndex&&this.currentBlockIndex++,l}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t){const n=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},n,t),tunes:e.tunes}),o=this.getBlockIndex(e);return this._blocks.replace(o,i),this.blockDidMutated(tt,i,{index:o}),i}replace(e,t,n){const i=this.getBlockIndex(e);this.insert({tool:t,data:n,index:i,replace:!0})}paste(e,t,n=!1){const i=this.insert({tool:e,replace:n});try{window.requestIdleCallback((()=>{i.call(te.ON_PASTE,t)}))}catch(t){v(`${e}: onPaste callback call is failed`,"error",t)}return i}insertDefaultBlockAtIndex(e,t=!1){const n=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=n,this.blockDidMutated(et,n,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,n}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){const n=await t.data;E(n)||await e.mergeWith(n),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,t=!0){return new Promise((n=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(i),this.blockDidMutated(Qe,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?0===i&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,t&&this.insert()),n()}))}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=H.make("div");t.appendChild(e);const n={text:H.isEmpty(t)?"":t.innerHTML};return this.insert({data:n})}getBlockByIndex(e){return-1===e&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find((t=>t.id===e))}getBlock(e){H.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,n=e.closest(`.${ne.CSS.wrapper}`),i=t.indexOf(n);if(i>=0)return this._blocks[i]}setCurrentBlockByChildNode(e){H.isElement(e)||(e=e.parentNode);const t=e.closest(`.${ne.CSS.wrapper}`);if(!t)return;const n=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);return null!=n&&n.isEqualNode(this.Editor.UI.nodes.wrapper)?(this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock):void 0}getBlockByChildNode(e){if(!(e&&e instanceof Node))return;H.isElement(e)||(e=e.parentNode);const t=e.closest(`.${ne.CSS.wrapper}`);return this.blocks.find((e=>e.holder===t))}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){isNaN(e)||isNaN(t)?v("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(e)&&this.validateIndex(t)?(this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated("block-moved",this.currentBlock,{fromIndex:t,toIndex:e})):v("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}async convert(e,t,n){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const i=this.Editor.Tools.blockTools.get(t);if(!i)throw new Error(`Could not convert Block. Tool «${t}» not found.`);let o=function(e,t){const n=null==t?void 0:t.import;return w(n)?n(e):x(n)?{[n]:e}:(void 0!==n&&v("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}(de(await e.exportDataAsString(),i.sanitizeConfig),i.conversionConfig);n&&(o=Object.assign(o,n)),this.replace(e,i.name,o)}dropPointer(){this.currentBlockIndex=-1}async clear(e=!1){const t=new nt;this.blocks.forEach((e=>{t.add((async()=>{await this.removeBlock(e,!1)}))})),await t.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map((e=>e.destroy())))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",(e=>{t.keydown(e)})),this.readOnlyMutableListeners.on(e.holder,"keyup",(e=>{t.keyup(e)})),this.readOnlyMutableListeners.on(e.holder,"dragover",(e=>{t.dragOver(e)})),this.readOnlyMutableListeners.on(e.holder,"dragleave",(e=>{t.dragLeave(e)})),e.on("didMutated",(e=>this.blockDidMutated(tt,e,{index:this.getBlockIndex(e)})))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",(e=>this.Editor.BlockEvents.handleCommandX(e))),this.blocks.forEach((e=>{this.bindBlockEvents(e)}))}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,n){const i=new CustomEvent(e,{detail:{target:new V(t),...n}});return this.eventsDispatcher.emit(X,{event:i}),t}},BlockSelection:class extends Y{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every((e=>!0===e.selected))}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach((t=>{t.selected=e})),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return null===this.anyBlockSelectedCache&&(this.anyBlockSelectedCache=e.blocks.some((e=>!0===e.selected))),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter((e=>e.selected))}prepare(){this.selection=new K,Pe.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:n}=this.Editor;if(n.isEnabled)return e.preventDefault(),void this.selectAllBlocks();t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){K.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let n;n=isNaN(e)?t.currentBlock:t.getBlockByIndex(e),n.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:n,Caret:i,RectangleSelection:o}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,s=r&&T(e.keyCode);if(this.anyBlockSelected&&r&&s&&!K.isSelectionExists){const t=n.removeSelectedBlocks();n.insertDefaultBlockAtIndex(t,!0),i.setToBlock(n.currentBlock),O((()=>{const t=e.key;i.insertContentAtCaretPosition(t.length>1?"":t)}),20)()}this.Editor.CrossBlockSelection.clear(e),this.anyBlockSelected&&!o.isRectActivated()?(t&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}copySelectedBlocks(e){e.preventDefault();const t=H.make("div");this.selectedBlocks.forEach((e=>{const n=de(e.holder.innerHTML,this.sanitizerConfig),i=H.make("p");i.innerHTML=n,t.appendChild(i)}));const n=Array.from(t.childNodes).map((e=>e.textContent)).join("\n\n"),i=t.innerHTML;return e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map((e=>e.save()))).then((t=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(t))}catch{}}))}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,n=t.getBlockByIndex(e);void 0!==n&&this.selectBlock(n)}selectBlock(e){this.selection.save(),K.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Pe.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),H.isNativeInput(e.target)&&!this.readyToBlockSelection)return void(this.readyToBlockSelection=!0);const t=this.Editor.BlockManager.getBlock(e.target),n=t.inputs;n.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:1!==n.length||this.needToSelectAll?this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0):this.needToSelectAll=!0}selectAllBlocks(){this.selection.save(),K.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},Caret:it,CrossBlockSelection:class extends Y{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:n}=this.Editor;if(null===e.relatedTarget&&null===e.target)return;const i=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,o=t.getBlockByChildNode(e.target);if(i&&o&&o!==i){if(i===this.firstSelectedBlock)return K.get().removeAllRanges(),i.selected=!0,o.selected=!0,void n.clearCache();if(o===this.firstSelectedBlock)return i.selected=!1,o.selected=!1,void n.clearCache();this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,o),this.lastSelectedBlock=o}}}async prepare(){this.listeners.on(document,"mousedown",(e=>{this.enableCrossBlockSelection(e)}))}watchSelection(e){if(e.button!==g)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:n}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,n.clearCache(),K.get().removeAllRanges());const i=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),o=t.blocks[i];o&&(this.lastSelectedBlock.selected!==o.selected?(o.selected=!0,n.clearCache()):(this.lastSelectedBlock.selected=!1,n.clearCache()),this.lastSelectedBlock=o,this.Editor.InlineToolbar.close(),o.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor,o=t.blocks.indexOf(this.firstSelectedBlock),r=t.blocks.indexOf(this.lastSelectedBlock);if(n.anyBlockSelected&&o>-1&&r>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case u:case p:i.setToBlock(t.blocks[Math.max(o,r)],i.positions.END);break;case h:case d:i.setToBlock(t.blocks[Math.min(o,r)],i.positions.START);break;default:i.setToBlock(t.blocks[Math.max(o,r)],i.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;K.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:n,BlockSelection:i}=this.Editor,o=n.blocks.indexOf(e),r=n.blocks.indexOf(t),s=e.selected!==t.selected;for(let a=Math.min(o,r);a<=Math.max(o,r);a++){const o=n.blocks[a];o!==this.firstSelectedBlock&&o!==(s?e:t)&&(n.blocks[a].selected=!n.blocks[a].selected,i.clearCache())}}},DragNDrop:class extends Y{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",(async e=>{await this.processDrop(e)}),!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",(()=>{this.processDragStart()})),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",(e=>{this.processDragOver(e)}),!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Caret:n,Paste:i}=this.Editor;e.preventDefault(),t.blocks.forEach((e=>{e.dropTarget=!1})),K.isAtEditor&&!K.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const o=t.setCurrentBlockByChildNode(e.target);if(o)this.Editor.Caret.setToBlock(o,n.positions.END);else{const e=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(e,n.positions.END)}await i.processDataTransfer(e.dataTransfer,!0)}processDragStart(){K.isAtEditor&&!K.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}},ModificationsObserver:class extends Y{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver((e=>{this.redactorChanged(e)})),this.eventsDispatcher.on(X,(e=>{this.particularBlockChanged(e.event)})),this.eventsDispatcher.on(J,(()=>{this.disable()})),this.eventsDispatcher.on(Q,(()=>{this.enable()}))}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!w(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout((()=>{let e;e=1===this.batchingOnChangeQueue.size?this.batchingOnChangeQueue.values().next().value:Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,e),this.batchingOnChangeQueue.clear()}),this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Z,{mutations:e})}},Paste:rt,ReadOnly:class extends Y{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,n=[];Array.from(t.entries()).forEach((([e,t])=>{t.isReadOnlySupported||n.push(e)})),this.toolsDontSupportReadOnly=n,this.config.readOnly&&n.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const t=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const t in this.Editor)this.Editor[t].toggleReadOnly&&this.Editor[t].toggleReadOnly(e);if(t===e)return this.readOnlyEnabled;const n=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(n.blocks),this.readOnlyEnabled}throwCriticalError(){throw new $(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}},RectangleSelection:st,Renderer:class extends Y{async render(e){return new Promise((t=>{const{Tools:n,BlockManager:i}=this.Editor;if(0===e.length)i.insert();else{const t=e.map((({type:e,data:t,tunes:o,id:r})=>{let s;!1===n.available.has(e)&&(b(`Tool «${e}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),t=this.composeStubDataForTool(e,t,r),e=n.stubTool);try{s=i.composeBlock({id:r,tool:e,data:t,tunes:o})}catch(a){v(`Block «${e}» skipped because of plugins error`,"error",{data:t,error:a}),t=this.composeStubDataForTool(e,t,r),e=n.stubTool,s=i.composeBlock({id:r,tool:e,data:t,tunes:o})}return s}));i.insertMany(t)}window.requestIdleCallback((()=>{t()}),{timeout:2e3})}))}composeStubDataForTool(e,t,n){const{Tools:i}=this.Editor;let o=e;if(i.unavailable.has(e)){const t=i.unavailable.get(e).toolbox;void 0!==t&&void 0!==t[0].title&&(o=t[0].title)}return{savedData:{id:n,type:e,data:t},title:o}}},Saver:class extends Y{async save(){const{BlockManager:e,Tools:t}=this.Editor,n=e.blocks,i=[];try{n.forEach((e=>{i.push(this.getSavedData(e))}));const e=await Promise.all(i),o=await ce(e,(e=>t.blockTools.get(e).sanitizeConfig));return this.makeOutput(o)}catch(e){b("Saving failed due to the Error %o","error",e)}}async getSavedData(e){const t=await e.save(),n=t&&await e.validate(t.data);return{...t,isValid:n}}makeOutput(e){const t=[];return e.forEach((({id:e,tool:n,data:i,tunes:o,isValid:r})=>{if(!r)return void v(`Block «${n}» skipped because saved data is invalid`);if(n===this.Editor.Tools.stubTool)return void t.push(i);const s={id:e,type:n,data:i,...!E(o)&&{tunes:o}};t.push(s)})),{time:+new Date,blocks:t,version:"2.29.3"}}},Tools:Et,UI:class extends Y{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=M((()=>{this.windowResize()}),200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${ne.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback((()=>{this.enableModuleBindings()}),{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:i}=this.Editor;return t.opened||n.opened||i.opened||e.toolbox.opened}get someFlipperButtonFocused(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter((([e,t])=>t.flipper instanceof Ee)).some((([e,t])=>t.flipper.hasFocus()))}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:n,ConversionToolbar:i}=this.Editor;t.close(),n.close(),i.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<650}make(){this.nodes.holder=H.getHolder(this.config.holder),this.nodes.wrapper=H.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=H.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(H.get(e))return;const t=H.make("style",null,{id:e,textContent:Tt.toString()});this.config.style&&!E(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),H.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",(e=>{this.redactorClicked(e)}),!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",(e=>{this.documentTouched(e)}),{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",(e=>{this.documentKeydown(e)}),!0),this.readOnlyMutableListeners.on(document,"mousedown",(e=>{this.documentClicked(e)}),!0);const e=M((()=>{this.selectionChanged()}),180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",(()=>{this.resizeDebouncer()}),{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",I((t=>{const n=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||n&&e!==n&&(e=n,this.eventsDispatcher.emit($e,{block:this.Editor.BlockManager.getBlockByChildNode(n)}))}),20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case l:this.enterPressed(e);break;case s:case f:this.backspacePressed(e);break;case c:this.escapePressed(e);break;default:this.defaultBehaviour(e)}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,n=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;void 0===t||null!==n?n||t&&i||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(e)}backspacePressed(e){const{BlockManager:t,BlockSelection:n,Caret:i}=this.Editor;if(n.anyBlockSelected&&!K.isSelectionExists){const o=t.removeSelectedBlocks(),r=t.insertDefaultBlockAtIndex(o,!0);i.setToBlock(r,i.positions.START),n.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:n}=this.Editor,i=t.currentBlockIndex>=0;if(n.anyBlockSelected&&!K.isSelectionExists)return n.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),void e.stopPropagation();if(!this.someToolbarOpened&&i&&"BODY"===e.target.tagName){const e=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(e),this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,n;if(!e.isTrusted)return;const i=e.target;this.nodes.holder.contains(i)||K.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const o=null==(t=this.Editor.BlockSettings.nodes.wrapper)?void 0:t.contains(i),r=null==(n=this.Editor.Toolbar.nodes.settingsToggler)?void 0:n.contains(i),s=o||r;if(this.Editor.BlockSettings.opened&&!s){this.Editor.BlockSettings.close();const e=this.Editor.BlockManager.getBlockByChildNode(i);this.Editor.Toolbar.moveAndOpen(e)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(n,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!K.isCollapsed)return;const t=e.target,n=e.metaKey||e.ctrlKey;if(H.isAnchor(t)&&n){e.stopImmediatePropagation(),e.stopPropagation();!function(e){window.open(e,"_blank")}(function(e){try{return new URL(e).href}catch{}return"//"===e.substring(0,2)?window.location.protocol+e:window.location.origin+e}(t.getAttribute("href")))}else this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),n=H.offset(t.holder).bottom,i=e.pageY,{BlockSelection:o}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&n<i){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:t,Caret:n,Toolbar:i}=this.Editor;(!t.lastBlock.tool.isDefault||!t.lastBlock.isEmpty)&&t.insertAtEnd(),n.setToTheLastBlock(),i.moveAndOpen(t.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,n=K.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&K.get().removeAllRanges(),!n)return void(K.range||this.Editor.InlineToolbar.close());const i=n.closest(`.${ne.CSS.content}`),o=null===i||i.closest(`.${K.CSS.editorWrapper}`)!==this.nodes.wrapper;if(o&&(this.Editor.InlineToolbar.containsNode(n)||this.Editor.InlineToolbar.close(),"true"!==n.dataset.inlineToolbar))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(n);const r=!0!==o;this.Editor.InlineToolbar.tryToShow(!0,r)}}};class At{constructor(e){let t,n;this.moduleInstances={},this.eventsDispatcher=new W,this.isReady=new Promise(((e,i)=>{t=e,n=i})),Promise.resolve().then((async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:n,Caret:i,UI:o,ModificationsObserver:r}=this.moduleInstances;o.checkEmptiness(),r.enable(),this.configuration.autofocus&&i.setToBlock(n.blocks[0],i.positions.START),t()})).catch((e=>{v(`Editor.js is not ready because of ${e}`,"error"),n(e)}))}set configuration(e){var t,n;k(e)?this.config={...e}:this.config={holder:e},L(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),null==this.config.holder&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=r.VERBOSE),function(e){m.logLevel=e}(this.config.logLevel),L(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=void 0!==this.config.minHeight?this.config.minHeight:300;const i={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=void 0===this.config.inlineToolbar||this.config.inlineToolbar,(E(this.config.data)||!this.config.data.blocks||0===this.config.data.blocks.length)&&(this.config.data={blocks:[i]}),this.config.readOnly=this.config.readOnly||!1,null!=(t=this.config.i18n)&&t.messages&&U.setDictionary(this.config.i18n.messages),this.config.i18n.direction=(null==(n=this.config.i18n)?void 0:n.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(x(t)&&!H.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&k(t)&&!H.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce(((e,t)=>e.then((async()=>{try{await this.moduleInstances[t].prepare()}catch(e){if(e instanceof $)throw new Error(e.message);v(`Module ${t} was skipped because of %o`,"warn",e)}}))),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(_t).forEach((([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(t){v("[constructModules]",`Module ${e} skipped because`,"error",t)}}))}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const n in this.moduleInstances)n!==e&&(t[n]=this.moduleInstances[n]);return t}}
/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Ot{static get version(){return"2.29.3"}constructor(e){let t=()=>{};k(e)&&w(e.onReady)&&(t=e.onReady);const n=new At(e);this.isReady=n.isReady.then((()=>{this.exportAPI(n),t()}))}exportAPI(e){["configuration"].forEach((t=>{this[t]=e[t]})),this.destroy=()=>{Object.values(e.moduleInstances).forEach((e=>{w(e.destroy)&&e.destroy(),e.listeners.removeAll()})),null==ge||ge.destroy(),ge=null,e=null;for(const e in this)Object.prototype.hasOwnProperty.call(this,e)&&delete this[e];Object.setPrototypeOf(this,null)},Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach((([t,n])=>{Object.entries(n).forEach((([n,i])=>{this[i]=e.moduleInstances.API.methods[t][n]}))}))}}},247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=function e(){var t=[].slice.call(arguments),n=!1;"boolean"==typeof t[0]&&(n=t.shift());var i=t[0];if(o(i))throw new Error("extendee must be an object");for(var r=t.slice(1),s=r.length,a=0;a<s;a++){var l=r[a];for(var c in l)if(Object.prototype.hasOwnProperty.call(l,c)){var d=l[c];if(n&&(u=d,Array.isArray(u)||"[object Object]"=={}.toString.call(u))){var h=Array.isArray(d)?[]:{};i[c]=e(!0,Object.prototype.hasOwnProperty.call(i,c)&&!o(i[c])?i[c]:h,d)}else i[c]=d}}var u;return i};function o(e){return!e||"object"!=typeof e&&"function"!=typeof e}function r(e){return e&&e.__esModule?e.default:e}class s{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};let n=this._callbacks[e];if(n)for(let e of n)e.apply(this,t);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+e,{args:t})),this}makeEvent(e,t){let n={bubbles:!0,cancelable:!0,detail:t};if("function"==typeof window.CustomEvent)return new CustomEvent(e,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}off(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;let n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(let e=0;e<n.length;e++){if(n[e]===t){n.splice(e,1);break}}return this}}var a={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:(e,t)=>t(),chunksUploaded:function(e,t){t()},binaryBody:!1,fallback(){let e;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let t of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(t.className)){e=t,t.className="dz-message";break}e||(e=l.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));let t=e.getElementsByTagName("span")[0];return t&&(null!=t.textContent?t.textContent=this.options.dictFallbackMessage:null!=t.innerText&&(t.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(e,t,n,i){let o={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},r=e.width/e.height;null==t&&null==n?(t=o.srcWidth,n=o.srcHeight):null==t?t=n*r:null==n&&(n=t/r);let s=(t=Math.min(t,o.srcWidth))/(n=Math.min(n,o.srcHeight));if(o.srcWidth>t||o.srcHeight>n)if("crop"===i)r>s?(o.srcHeight=e.height,o.srcWidth=o.srcHeight*s):(o.srcWidth=e.width,o.srcHeight=o.srcWidth/s);else{if("contain"!==i)throw new Error(`Unknown resizeMethod '${i}'`);r>s?n=t/r:t=n*r}return o.srcX=(e.width-o.srcWidth)/2,o.srcY=(e.height-o.srcHeight)/2,o.trgWidth=t,o.trgHeight=n,o},transformFile(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:r('<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n'),drop(e){return this.element.classList.remove("dz-drag-hover")},dragstart(e){},dragend(e){return this.element.classList.remove("dz-drag-hover")},dragenter(e){return this.element.classList.add("dz-drag-hover")},dragover(e){return this.element.classList.add("dz-drag-hover")},dragleave(e){return this.element.classList.remove("dz-drag-hover")},paste(e){},reset(){return this.element.classList.remove("dz-started")},addedfile(e){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){for(var t of(e.previewElement=l.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),e.previewElement.querySelectorAll("[data-dz-name]")))t.textContent=e.name;for(t of e.previewElement.querySelectorAll("[data-dz-size]"))t.innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=l.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),e.previewElement.appendChild(e._removeLink));let n=t=>(t.preventDefault(),t.stopPropagation(),e.status===l.UPLOADING?l.confirm(this.options.dictCancelUploadConfirmation,(()=>this.removeFile(e))):this.options.dictRemoveFileConfirmation?l.confirm(this.options.dictRemoveFileConfirmation,(()=>this.removeFile(e))):this.removeFile(e));for(let t of e.previewElement.querySelectorAll("[data-dz-remove]"))t.addEventListener("click",n)}},removedfile(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(let n of e.previewElement.querySelectorAll("[data-dz-thumbnail]"))n.alt=e.name,n.src=t;return setTimeout((()=>e.previewElement.classList.add("dz-image-preview")),1)}},error(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);for(let n of e.previewElement.querySelectorAll("[data-dz-errormessage]"))n.textContent=t}},errormultiple(){},processing(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(e,t,n){if(e.previewElement)for(let n of e.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===n.nodeName?n.value=t:n.style.width=`${t}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple(){},canceled(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple(){},complete(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};class l extends s{static initClass(){this.prototype.Emitter=s,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter((e=>e.accepted)).map((e=>e))}getRejectedFiles(){return this.files.filter((e=>!e.accepted)).map((e=>e))}getFilesWithStatus(e){return this.files.filter((t=>t.status===e)).map((e=>e))}getQueuedFiles(){return this.getFilesWithStatus(l.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(l.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(l.ADDED)}getActiveFiles(){return this.files.filter((e=>e.status===l.UPLOADING||e.status===l.QUEUED)).map((e=>e))}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(l.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let e=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",l.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",(()=>{let{files:t}=this.hiddenFileInput;if(t.length)for(let e of t)this.addFile(e);this.emit("addedfiles",t),e()}))};e()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(let e of this.events)this.on(e,this.options[e]);this.on("uploadprogress",(()=>this.updateTotalUploadProgress())),this.on("removedfile",(()=>this.updateTotalUploadProgress())),this.on("canceled",(e=>this.emit("complete",e))),this.on("complete",(e=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout((()=>this.emit("queuecomplete")),0)}));let e=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:e=>this.emit("dragstart",e),dragenter:t=>(e(t),this.emit("dragenter",t)),dragover:t=>{let n;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",e(t),this.emit("dragover",t)},dragleave:e=>this.emit("dragleave",e),drop:t=>(e(t),this.drop(t)),dragend:e=>this.emit("dragend",e)}}],this.clickableElements.forEach((e=>this.listeners.push({element:e,events:{click:t=>((e!==this.element||t.target===this.element||l.elementInside(t.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}}))),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,l.instances.splice(l.instances.indexOf(this),1)}updateTotalUploadProgress(){let e,t=0,n=0;if(this.getActiveFiles().length){for(let e of this.getActiveFiles())t+=e.upload.bytesSent,n+=e.upload.total;e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}_getParamName(e){return"function"==typeof this.options.paramName?this.options.paramName(e):`${this.options.paramName}${this.options.uploadMultiple?`[${e}]`:""}`}_renameFile(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}getFallbackForm(){let e,t;if(e=this.getExistingFallback())return e;let n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+=`<p>${this.options.dictFallbackText}</p>`),n+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let i=l.createElement(n);return"FORM"!==this.element.tagName?(t=l.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),t.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}getExistingFallback(){let e=function(e){for(let t of e)if(/(^| )fallback($| )/.test(t.className))return t};for(let n of["div","form"]){var t;if(t=e(this.element.getElementsByTagName(n)))return t}}setupEventListeners(){return this.listeners.map((e=>(()=>{let t=[];for(let n in e.events){let i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t})()))}removeEventListeners(){return this.listeners.map((e=>(()=>{let t=[];for(let n in e.events){let i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t})()))}disable(){return this.clickableElements.forEach((e=>e.classList.remove("dz-clickable"))),this.removeEventListeners(),this.disabled=!0,this.files.map((e=>this.cancelUpload(e)))}enable(){return delete this.disabled,this.clickableElements.forEach((e=>e.classList.add("dz-clickable"))),this.setupEventListeners()}filesize(e){let t=0,n="b";if(e>0){let i=["tb","gb","mb","kb","b"];for(let o=0;o<i.length;o++){let r=i[o];if(e>=Math.pow(this.options.filesizeBase,4-o)/10){t=e/Math.pow(this.options.filesizeBase,4-o),n=r;break}}t=Math.round(10*t)/10}return`<strong>${t}</strong> ${this.options.dictFileSizeUnits[n]}`}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(e){if(!e.dataTransfer)return;this.emit("drop",e);let t=[];for(let n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){let{items:n}=e.dataTransfer;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}this.emit("addedfiles",t)}paste(e){if(null==(t=null!=e?e.clipboardData:void 0,n=e=>e.items,null!=t?n(t):void 0))return;var t,n;this.emit("paste",e);let{items:i}=e.clipboardData;return i.length?this._addFilesFromItems(i):void 0}handleFiles(e){for(let t of e)this.addFile(t)}_addFilesFromItems(e){return(()=>{let t=[];for(let i of e){var n;null!=i.webkitGetAsEntry&&(n=i.webkitGetAsEntry())?n.isFile?t.push(this.addFile(i.getAsFile())):n.isDirectory?t.push(this._addFilesFromDirectory(n,n.name)):t.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?t.push(this.addFile(i.getAsFile())):t.push(void 0)}return t})()}_addFilesFromDirectory(e,t){let n=e.createReader(),i=e=>{return t=console,n="log",i=t=>t.log(e),null!=t&&"function"==typeof t[n]?i(t,n):void 0;var t,n,i};var o=()=>n.readEntries((e=>{if(e.length>0){for(let n of e)n.isFile?n.file((e=>{if(!this.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=`${t}/${e.name}`,this.addFile(e)})):n.isDirectory&&this._addFilesFromDirectory(n,`${t}/${n.name}`);o()}return null}),i);return o()}accept(e,t){this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):l.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}addFile(e){e.upload={uuid:l.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=l.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(t=>{t?(e.accepted=!1,this._errorProcessing([e],t)):(e.accepted=!0,this.options.autoQueue&&this.enqueueFile(e)),this._updateMaxFilesReachedClass()}))}enqueueFiles(e){for(let t of e)this.enqueueFile(t);return null}enqueueFile(e){if(e.status!==l.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=l.QUEUED,this.options.autoProcessQueue)return setTimeout((()=>this.processQueue()),0)}_enqueueThumbnail(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(e),setTimeout((()=>this._processThumbnailQueue()),0)}_processThumbnailQueue(){if(this._processingThumbnail||0===this._thumbnailQueue.length)return;this._processingThumbnail=!0;let e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(t=>(this.emit("thumbnail",e,t),this._processingThumbnail=!1,this._processThumbnailQueue())))}removeFile(e){if(e.status===l.UPLOADING&&this.cancelUpload(e),this.files=c(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}removeAllFiles(e){null==e&&(e=!1);for(let t of this.files.slice())(t.status!==l.UPLOADING||e)&&this.removeFile(t);return null}resizeImage(e,t,n,i,o){return this.createThumbnail(e,t,n,i,!0,((t,n)=>{if(null==n)return o(e);{let{resizeMimeType:t}=this.options;null==t&&(t=e.type);let i=n.toDataURL(t,this.options.resizeQuality);return"image/jpeg"!==t&&"image/jpg"!==t||(i=u.restore(e.dataURL,i)),o(l.dataURItoBlob(i))}}))}createThumbnail(e,t,n,i,o,r){let s=new FileReader;s.onload=()=>{e.dataURL=s.result,"image/svg+xml"!==e.type?this.createThumbnailFromUrl(e,t,n,i,o,r):null!=r&&r(s.result)},s.readAsDataURL(e)}displayExistingFile(e,t,n,i,o=!0){if(this.emit("addedfile",e),this.emit("complete",e),o){let o=t=>{this.emit("thumbnail",e,t),n&&n()};e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,o,i)}else this.emit("thumbnail",e,t),n&&n()}createThumbnailFromUrl(e,t,n,i,o,r,s){let a=document.createElement("img");return s&&(a.crossOrigin=s),o="from-image"!=getComputedStyle(document.body).imageOrientation&&o,a.onload=()=>{let s=e=>e(1);return"undefined"!=typeof EXIF&&null!==EXIF&&o&&(s=e=>EXIF.getData(a,(function(){return e(EXIF.getTag(this,"Orientation"))}))),s((o=>{e.width=a.width,e.height=a.height;let s=this.options.resize.call(this,e,t,n,i),l=document.createElement("canvas"),c=l.getContext("2d");switch(l.width=s.trgWidth,l.height=s.trgHeight,o>4&&(l.width=s.trgHeight,l.height=s.trgWidth),o){case 2:c.translate(l.width,0),c.scale(-1,1);break;case 3:c.translate(l.width,l.height),c.rotate(Math.PI);break;case 4:c.translate(0,l.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-l.width);break;case 7:c.rotate(.5*Math.PI),c.translate(l.height,-l.width),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-l.height,0)}h(c,a,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);let d=l.toDataURL("image/png");if(null!=r)return r(d,l)}))},null!=r&&(a.onerror=r),a.src=e.dataURL}processQueue(){let{parallelUploads:e}=this.options,t=this.getUploadingFiles().length,n=t;if(t>=e)return;let i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}processFile(e){return this.processFiles([e])}processFiles(e){for(let t of e)t.processing=!0,t.status=l.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}_getFilesWithXhr(e){return this.files.filter((t=>t.xhr===e)).map((e=>e))}cancelUpload(e){if(e.status===l.UPLOADING){let t=this._getFilesWithXhr(e.xhr);for(let e of t)e.status=l.CANCELED;void 0!==e.xhr&&e.xhr.abort();for(let e of t)this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==l.ADDED&&e.status!==l.QUEUED||(e.status=l.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(e,...t){return"function"==typeof e?e.apply(this,t):e}uploadFile(e){return this.uploadFiles([e])}uploadFiles(e){this._transformFiles(e,(t=>{if(this.options.chunking){let n=t[0];e[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||n.size>this.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(n.size/this.options.chunkSize)}if(e[0].upload.chunked){let n=e[0],i=t[0],o=0;n.upload.chunks=[];let r=()=>{let t=0;for(;void 0!==n.upload.chunks[t];)t++;if(t>=n.upload.totalChunkCount)return;o++;let r=t*this.options.chunkSize,s=Math.min(r+this.options.chunkSize,i.size),a={name:this._getParamName(0),data:i.webkitSlice?i.webkitSlice(r,s):i.slice(r,s),filename:n.upload.filename,chunkIndex:t};n.upload.chunks[t]={file:n,index:t,dataBlock:a,status:l.UPLOADING,progress:0,retries:0},this._uploadData(e,[a])};if(n.upload.finishedChunkUpload=(t,i)=>{let o=!0;t.status=l.SUCCESS,t.dataBlock=null,t.response=t.xhr.responseText,t.responseHeaders=t.xhr.getAllResponseHeaders(),t.xhr=null;for(let e=0;e<n.upload.totalChunkCount;e++){if(void 0===n.upload.chunks[e])return r();n.upload.chunks[e].status!==l.SUCCESS&&(o=!1)}o&&this.options.chunksUploaded(n,(()=>{this._finished(e,i,null)}))},this.options.parallelChunkUploads)for(let e=0;e<n.upload.totalChunkCount;e++)r();else r()}else{let n=[];for(let i=0;i<e.length;i++)n[i]={name:this._getParamName(i),data:t[i],filename:e[i].upload.filename};this._uploadData(e,n)}}))}_getChunk(e,t){for(let n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}_uploadData(e,t){let n=new XMLHttpRequest;for(let t of e)t.xhr=n;e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=n);let o=this.resolveOption(this.options.method,e,t),r=this.resolveOption(this.options.url,e,t);n.open(o,r,!0),this.resolveOption(this.options.timeout,e)&&(n.timeout=this.resolveOption(this.options.timeout,e)),n.withCredentials=!!this.options.withCredentials,n.onload=t=>{this._finishedUploading(e,n,t)},n.ontimeout=()=>{this._handleUploadError(e,n,`Request timedout after ${this.options.timeout/1e3} seconds`)},n.onerror=()=>{this._handleUploadError(e,n)},(null!=n.upload?n.upload:n).onprogress=t=>this._updateFilesUploadProgress(e,n,t);let s=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};this.options.binaryBody&&(s["Content-Type"]=e[0].type),this.options.headers&&i(s,this.options.headers);for(let e in s){let t=s[e];t&&n.setRequestHeader(e,t)}if(this.options.binaryBody){for(let t of e)this.emit("sending",t,n);this.options.uploadMultiple&&this.emit("sendingmultiple",e,n),this.submitRequest(n,null,e)}else{let i=new FormData;if(this.options.params){let t=this.options.params;"function"==typeof t&&(t=t.call(this,e,n,e[0].upload.chunked?this._getChunk(e[0],n):null));for(let e in t){let n=t[e];if(Array.isArray(n))for(let t=0;t<n.length;t++)i.append(e,n[t]);else i.append(e,n)}}for(let t of e)this.emit("sending",t,n,i);this.options.uploadMultiple&&this.emit("sendingmultiple",e,n,i),this._addFormElementData(i);for(let e=0;e<t.length;e++){let n=t[e];i.append(n.name,n.data,n.filename)}this.submitRequest(n,i,e)}}_transformFiles(e,t){let n=[],i=0;for(let o=0;o<e.length;o++)this.options.transformFile.call(this,e[o],(r=>{n[o]=r,++i===e.length&&t(n)}))}_addFormElementData(e){if("FORM"===this.element.tagName)for(let t of this.element.querySelectorAll("input, textarea, select, button")){let n=t.getAttribute("name"),i=t.getAttribute("type");if(i&&(i=i.toLowerCase()),null!=n)if("SELECT"===t.tagName&&t.hasAttribute("multiple"))for(let i of t.options)i.selected&&e.append(n,i.value);else(!i||"checkbox"!==i&&"radio"!==i||t.checked)&&e.append(n,t.value)}}_updateFilesUploadProgress(e,t,n){if(e[0].upload.chunked){let i=e[0],o=this._getChunk(i,t);n?(o.progress=100*n.loaded/n.total,o.total=n.total,o.bytesSent=n.loaded):(o.progress=100,o.bytesSent=o.total),i.upload.progress=0,i.upload.total=0,i.upload.bytesSent=0;for(let e=0;e<i.upload.totalChunkCount;e++)i.upload.chunks[e]&&void 0!==i.upload.chunks[e].progress&&(i.upload.progress+=i.upload.chunks[e].progress,i.upload.total+=i.upload.chunks[e].total,i.upload.bytesSent+=i.upload.chunks[e].bytesSent);i.upload.progress=i.upload.progress/i.upload.totalChunkCount,this.emit("uploadprogress",i,i.upload.progress,i.upload.bytesSent)}else for(let t of e)t.upload.total&&t.upload.bytesSent&&t.upload.bytesSent==t.upload.total||(n?(t.upload.progress=100*n.loaded/n.total,t.upload.total=n.total,t.upload.bytesSent=n.loaded):(t.upload.progress=100,t.upload.bytesSent=t.upload.total),this.emit("uploadprogress",t,t.upload.progress,t.upload.bytesSent))}_finishedUploading(e,t,n){let i;if(e[0].status!==l.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),i):this._finished(e,i,n):this._handleUploadError(e,t,i)}}_handleUploadError(e,t,n){if(e[0].status!==l.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){let n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}submitRequest(e,t,n){if(1==e.readyState)if(this.options.binaryBody)if(n[0].upload.chunked){const t=this._getChunk(n[0],e);e.send(t.dataBlock.data)}else e.send(n[0]);else e.send(t);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}_finished(e,t,n){for(let i of e)i.status=l.SUCCESS,this.emit("success",i,t,n),this.emit("complete",i);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(e,t,n){for(let i of e)i.status=l.ERROR,this.emit("error",i,t,n),this.emit("complete",i);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}constructor(e,t){let n,o;if(super(),this.element=e,this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");l.instances.push(this),this.element.dropzone=this;let r=null!=(o=l.optionsForElement(this.element))?o:{};if(this.options=i(!0,{},a,r,null!=t?t:{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!l.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=e=>this.options.renameFilename.call(this,e.name,e)),"string"==typeof this.options.method&&(this.options.method=this.options.method.toUpperCase()),(n=this.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=l.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=l.getElements(this.options.clickable,"clickable")),this.init()}}l.initClass(),l.options={},l.optionsForElement=function(e){return e.getAttribute("id")?l.options[d(e.getAttribute("id"))]:void 0},l.instances=[],l.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},l.discover=function(){let e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];let t=t=>(()=>{let n=[];for(let i of t)/(^| )dropzone($| )/.test(i.className)?n.push(e.push(i)):n.push(void 0);return n})();t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return(()=>{let t=[];for(let n of e)!1!==l.optionsForElement(n)?t.push(new l(n)):t.push(void 0);return t})()},l.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],l.isBrowserSupported=function(){let e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==l.blacklistedBrowsers&&(l.blockedBrowsers=l.blacklistedBrowsers);for(let t of l.blockedBrowsers)if(t.test(navigator.userAgent)){e=!1;continue}}else e=!1;else e=!1;return e},l.dataURItoBlob=function(e){let t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i);for(let e=0,n=t.length,i=0<=n;i?e<=n:e>=n;i?e++:e--)o[e]=t.charCodeAt(e);return new Blob([i],{type:n})};const c=(e,t)=>e.filter((e=>e!==t)).map((e=>e)),d=e=>e.replace(/[\-_](\w)/g,(e=>e.charAt(1).toUpperCase()));l.createElement=function(e){let t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},l.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},l.getElement=function(e,t){let n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector or a plain HTML element.`);return n},l.getElements=function(e,t){let n,i;if(e instanceof Array){i=[];try{for(n of e)i.push(this.getElement(n,t))}catch(e){i=null}}else if("string"==typeof e)for(n of(i=[],document.querySelectorAll(e)))i.push(n);else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return i},l.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},l.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");let n=e.type,i=n.replace(/\/.*$/,"");for(let o of t)if(o=o.trim(),"."===o.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(i===o.replace(/\/.*$/,""))return!0}else if(n===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each((function(){return new l(this,e)}))}),l.ADDED="added",l.QUEUED="queued",l.ACCEPTED=l.QUEUED,l.UPLOADING="uploading",l.PROCESSING=l.UPLOADING,l.CANCELED="canceled",l.ERROR="error",l.SUCCESS="success";var h=function(e,t,n,i,o,r,s,a,l,c){let d=function(e){e.naturalWidth;let t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;let i=n.getContext("2d");i.drawImage(e,0,0);let{data:o}=i.getImageData(1,0,1,t),r=0,s=t,a=t;for(;a>r;)0===o[4*(a-1)+3]?s=a:r=a,a=s+r>>1;let l=a/t;return 0===l?1:l}(t);return e.drawImage(t,n,i,o,r,s,a,l,c/d)};class u{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(e){let t,n,i,o,r,s="",a="",l="",c=0;for(;t=e[c++],n=e[c++],a=e[c++],i=t>>2,o=(3&t)<<4|n>>4,r=(15&n)<<2|a>>6,l=63&a,isNaN(n)?r=l=64:isNaN(a)&&(l=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(l),t=n=a="",i=o=r=l="",c<e.length;);return s}static restore(e,t){if(!e.match("data:image/jpeg;base64,"))return t;let n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),o=this.exifManipulation(t,i);return`data:image/jpeg;base64,${this.encode64(o)}`}static exifManipulation(e,t){let n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}static getExifArray(e){let t,n=0;for(;n<e.length;){if(t=e[n],255===t[0]&225===t[1])return t;n++}return[]}static insertExif(e,t){let n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),o=i.indexOf(255,3),r=i.slice(0,o),s=i.slice(o),a=r;return a=a.concat(t),a=a.concat(s),a}static slice2Segments(e){let t=0,n=[];for(;;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{let i=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,i);n.push(o),t=i}if(t>e.length)break}return n}static decode64(e){let t,n,i,o,r,s="",a="",l=0,c=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");i=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),r=this.KEY_STR.indexOf(e.charAt(l++)),a=this.KEY_STR.indexOf(e.charAt(l++)),t=i<<2|o>>4,n=(15&o)<<4|r>>2,s=(3&r)<<6|a,c.push(t),64!==r&&c.push(n),64!==a&&c.push(s),t=n=s="",i=o=r=a="",l<e.length;);return c}}u.initClass()},3213:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>m,jn:()=>w});var i=n(7294),o=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&d(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&d(e,n,t[n]);return e},u=(e,t)=>r(e,s(t));function p(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=p(i,t,n);if(e)return e;i=t?null:i.sibling}}function f(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const g=f(i.createContext(null));class m extends i.Component{render(){return i.createElement(g.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:v,ReactCurrentDispatcher:b}=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(){const e=i.useContext(g);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=i.useId();return i.useMemo((()=>{for(const n of[null==v?void 0:v.current,e,null==e?void 0:e.alternate]){if(!n)continue;const e=p(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t])}function w(){const e=function(){var e,t;const n=y(),[o]=i.useState((()=>new Map));o.clear();let r=n;for(;r;){const n=null==(e=r.type)?void 0:e._context;n&&n!==g&&!o.has(n)&&o.set(n,null==(t=null==b?void 0:b.current)?void 0:t.readContext(f(n))),r=r.return}return o}();return i.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>o=>i.createElement(t,null,i.createElement(n.Provider,u(h({},o),{value:e.get(n)})))),(e=>i.createElement(m,h({},e))))),[e])}},5080:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var i=n(6382),o=n(4391),r=i.zA.performance&&i.zA.performance.now?function(){return i.zA.performance.now()}:function(){return(new Date).getTime()};class s{constructor(e,t){this.id=s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){var t=[];return t=e?e.length>0?e:[e]:[],this.layers=t,this}getLayers(){return this.layers}addLayer(e){var t,n=this.layers,i=n.length;for(t=0;t<i;t++)if(n[t]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e,t=s.animations,n=t.length;for(e=0;e<n;e++)if(t[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),s._addAnimation(this),this}stop(){return s._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var t,n=e.id,i=this.animations,o=i.length;for(t=0;t<o;t++)if(i[t].id===n){this.animations.splice(t,1);break}}static _runFrames(){var e,t,n,i,o,s,a,l,c={},d=this.animations;for(i=0;i<d.length;i++)if(t=(e=d[i]).layers,n=e.func,e._updateFrameObject(r()),s=t.length,!n||!1!==n.call(e,e.frame))for(o=0;o<s;o++)void 0!==(a=t[o])._id&&(c[a._id]=a);for(l in c)c.hasOwnProperty(l)&&c[l].batchDraw()}static _animationLoop(){var e=s;e.animations.length?(e._runFrames(),o.Z.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,o.Z.requestAnimFrame(this._animationLoop))}}s.animations=[],s.animIdCounter=0,s.animRunning=!1},7044:(e,t,n)=>{"use strict";n.d(t,{RF:()=>d,Xz:()=>c,hh:()=>h});var i,o=n(4391),r=n(4333),s=n(6382),a=n(2772),l=n(2513);class c{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||s.So.pixelRatio||function(){if(i)return i;var e=o.Z.createCanvasElement(),t=e.getContext("2d");return i=(s.So._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),o.Z.releaseCanvas(e),i}();this.pixelRatio=t,this._canvas=o.Z.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch(e){try{return this._canvas.toDataURL()}catch(e){return o.Z.error("Unable to get data URL. "+e.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}a.F.addGetterSetter(c,"pixelRatio",void 0,(0,l.Kg)());class d extends c{constructor(e={width:0,height:0}){super(e),this.context=new r.xn(this),this.setSize(e.width,e.height)}}class h extends c{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new r.jR(this),this.setSize(e.width,e.height)}}},671:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var i=n(2772),o=n(8826),r=n(2513);class s extends o.N{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var n=[];return t.forEach((function(t){e(t)&&n.push(t)})),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.destroy()})),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var n=[];return this._descendants((i=>{const o=i._isMatch(e);return o&&n.push(i),!(!o||!t)})),n}_descendants(e){let t=!1;const n=this.getChildren();for(const i of n){if(t=e(i),t)return!0;if(i.hasChildren()&&(t=i._descendants(e),t))return!0}return!1}toObject(){var e=o.N.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach((t=>{e.children.push(t.toObject())})),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=o.N.prototype.clone.call(this,e);return this.getChildren().forEach((function(e){t.add(e.clone())})),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(e)&&t.push(n)})),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach((function(t){t._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach((function(e,t){e.index=t})),this._requestDraw()}drawScene(e,t){var n=this.getLayer(),i=e||n&&n.getCanvas(),o=i&&i.getContext(),r=this._getCanvasCache(),s=r&&r.scene,a=i&&i.isCache;if(!this.isVisible()&&!a)return this;if(s){o.save();var l=this.getAbsoluteTransform(t).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var n=this.getLayer(),i=e||n&&n.hitCanvas,o=i&&i.getContext(),r=this._getCanvasCache();if(r&&r.hit){o.save();var s=this.getAbsoluteTransform(t).getMatrix();o.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,n){var i,o=t&&t.getContext(),r=this.clipWidth(),s=this.clipHeight(),a=this.clipFunc(),l=r&&s||a;const c=n===this;if(l){o.save();var d=this.getAbsoluteTransform(n),h=d.getMatrix();if(o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),o.beginPath(),a)a.call(this,o,this);else{var u=this.clipX(),p=this.clipY();o.rect(u,p,r,s)}o.clip(),h=d.copy().invert().getMatrix(),o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}var f=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;f&&(o.save(),o._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach((function(i){i[e](t,n)})),f&&o.restore(),l&&o.restore()}getClientRect(e){var t,n,i,o,r,s=(e=e||{}).skipTransform,a=e.relativeTo,l={x:1/0,y:1/0,width:0,height:0},c=this;null===(t=this.children)||void 0===t||t.forEach((function(t){if(t.visible()){var s=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===s.width&&0===s.height||(void 0===n?(n=s.x,i=s.y,o=s.x+s.width,r=s.y+s.height):(n=Math.min(n,s.x),i=Math.min(i,s.y),o=Math.max(o,s.x+s.width),r=Math.max(r,s.y+s.height)))}}));for(var d=this.find("Shape"),h=!1,u=0;u<d.length;u++){if(d[u]._isVisible(this)){h=!0;break}}return l=h&&void 0!==n?{x:n,y:i,width:o-n,height:r-i}:{x:0,y:0,width:0,height:0},s?l:this._transformedRect(l,a)}}i.F.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),i.F.addGetterSetter(s,"clipX",void 0,(0,r.Kg)()),i.F.addGetterSetter(s,"clipY",void 0,(0,r.Kg)()),i.F.addGetterSetter(s,"clipWidth",void 0,(0,r.Kg)()),i.F.addGetterSetter(s,"clipHeight",void 0,(0,r.Kg)()),i.F.addGetterSetter(s,"clipFunc")},4333:(e,t,n)=>{"use strict";n.d(t,{_y:()=>s,jR:()=>l,xn:()=>a});var i=n(4391),o=n(6382);var r=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class s{constructor(e){this.canvas=e,o.So.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var n,o,r,s,a=this.traceArr,l=a.length,c="";for(n=0;n<l;n++)(r=(o=a[n]).method)?(s=o.args,c+=r,e?c+="()":i.Z._isArray(s[0])?c+="(["+s.join(",")+"])":(t&&(s=s.map((e=>"number"==typeof e?Math.floor(e):e))),c+="("+s.join(",")+")")):(c+=o.property,e||(c+="="+o.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,i,o,r){this._context.arc(e,t,n,i,o,r)}arcTo(e,t,n,i,o){this._context.arcTo(e,t,n,i,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,i,o,r){this._context.bezierCurveTo(e,t,n,i,o,r)}clearRect(e,t,n,i){this._context.clearRect(e,t,n,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,t){var n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,i){return this._context.createLinearGradient(e,t,n,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,i,o,r){return this._context.createRadialGradient(e,t,n,i,o,r)}drawImage(e,t,n,i,o,r,s,a,l){var c=arguments,d=this._context;3===c.length?d.drawImage(e,t,n):5===c.length?d.drawImage(e,t,n,i,o):9===c.length&&d.drawImage(e,t,n,i,o,r,s,a,l)}ellipse(e,t,n,i,o,r,s,a){this._context.ellipse(e,t,n,i,o,r,s,a)}isPointInPath(e,t,n,i){return n?this._context.isPointInPath(n,e,t,i):this._context.isPointInPath(e,t,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,t,n,i){this._context.fillRect(e,t,n,i)}strokeRect(e,t,n,i){this._context.strokeRect(e,t,n,i)}fillText(e,t,n,i){i?this._context.fillText(e,t,n,i):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,i){return this._context.getImageData(e,t,n,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,i){this._context.rect(e,t,n,i)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,i){this._context.quadraticCurveTo(e,t,n,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,i,o,r){this._context.setTransform(e,t,n,i,o,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,i){this._context.strokeText(e,t,n,i)}transform(e,t,n,i,o,r){this._context.transform(e,t,n,i,o,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,n=this,o=r.length,s=this.setAttr,a=function(e){var o,r=n[e];n[e]=function(){return t=function(e){var t,n,o=[],r=e.length,s=i.Z;for(t=0;t<r;t++)n=e[t],s._isNumber(n)?n=Math.round(1e3*n)/1e3:s._isString(n)||(n+=""),o.push(n);return o}(Array.prototype.slice.call(arguments,0)),o=r.apply(n,arguments),n._trace({method:e,args:t}),o}};for(e=0;e<o;e++)a(r[e]);n.setAttr=function(){s.apply(n,arguments);var e=arguments[0],t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(e){Object.defineProperty(s.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})}));class a extends s{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const i=e.getFillPatternImage();if(i&&"pattern"===n)return void this._fillPattern(e);const o=e.getFillLinearGradientColorStops();if(o&&"linear-gradient"===n)return void this._fillLinearGradient(e);const r=e.getFillRadialGradientColorStops();r&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):i?this._fillPattern(e):o?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(t.x,t.y,n.x,n.y);if(i){for(var r=0;r<i.length;r+=2)o.addColorStop(i[r],i[r+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,i,o=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",r=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,s=null!==(i=e.getShadowOffset())&&void 0!==i?i:{x:0,y:0},a=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=a.x*l,d=a.y*l;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}class l extends s{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const o=e.getStrokeScaleEnabled();if(!o){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),i="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),o||this.restore()}}}},5468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(2240).S},4117:(e,t,n)=>{"use strict";n.d(t,{DD:()=>r});var i=n(6382),o=n(4391);const r={get isDragging(){var e=!1;return r._dragElements.forEach((t=>{"dragging"===t.dragStatus&&(e=!0)})),e},justDragged:!1,get node(){var e;return r._dragElements.forEach((t=>{e=t.node})),e},_dragElements:new Map,_drag(e){const t=[];r._dragElements.forEach(((n,i)=>{const{node:r}=n,s=r.getStage();s.setPointersPositions(e),void 0===n.pointerId&&(n.pointerId=o.Z._getFirstPointerId(e));const a=s._changedPointerPositions.find((e=>e.id===n.pointerId));if(a){if("dragging"!==n.dragStatus){var l=r.dragDistance();if(Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y))<l)return;if(r.startDrag({evt:e}),!r.isDragging())return}r._setDragPosition(e,n),t.push(r)}})),t.forEach((t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)}))},_endDragBefore(e){const t=[];r._dragElements.forEach((n=>{const{node:o}=n,s=o.getStage();e&&s.setPointersPositions(e);if(!s._changedPointerPositions.find((e=>e.id===n.pointerId)))return;"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(r.justDragged=!0,i.So._mouseListenClick=!1,i.So._touchListenClick=!1,i.So._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof i.So.Stage&&n.node;a&&-1===t.indexOf(a)&&t.push(a)})),t.forEach((e=>{e.draw()}))},_endDragAfter(e){r._dragElements.forEach(((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),"dragging"!==t.dragStatus&&r._dragElements.delete(n)}))}};i.So.isBrowser&&(window.addEventListener("mouseup",r._endDragBefore,!0),window.addEventListener("touchend",r._endDragBefore,!0),window.addEventListener("mousemove",r._drag),window.addEventListener("touchmove",r._drag),window.addEventListener("mouseup",r._endDragAfter,!1),window.addEventListener("touchend",r._endDragAfter,!1))},2772:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var i=n(4391),o=n(2513),r="get",s="set";const a={addGetterSetter(e,t,n,i,o){a.addGetter(e,t,n),a.addSetter(e,t,i,o),a.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){var o=r+i.Z._capitalize(t);e.prototype[o]=e.prototype[o]||function(){var e=this.attrs[t];return void 0===e?n:e}},addSetter(e,t,n,o){var r=s+i.Z._capitalize(t);e.prototype[r]||a.overWriteSetter(e,t,n,o)},overWriteSetter(e,t,n,o){var r=s+i.Z._capitalize(t);e.prototype[r]=function(e){return n&&null!=e&&(e=n.call(this,e,t)),this._setAttr(t,e),o&&o.call(this),this}},addComponentsGetterSetter(e,t,n,l,c){var d,h,u=n.length,p=i.Z._capitalize,f=r+p(t),g=s+p(t);e.prototype[f]=function(){var e={};for(d=0;d<u;d++)e[h=n[d]]=this.getAttr(t+p(h));return e};var m=(0,o.uZ)(n);e.prototype[g]=function(e){var i,o=this.attrs[t];for(i in l&&(e=l.call(this,e)),m&&m.call(this,e,t),e)e.hasOwnProperty(i)&&this._setAttr(t+p(i),e[i]);return e||n.forEach((e=>{this._setAttr(t+p(e),void 0)})),this._fireChangeEvent(t,o,e),c&&c.call(this),this},a.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var n=i.Z._capitalize(t),o=s+n,a=r+n;e.prototype[t]=function(){return arguments.length?(this[o](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(e,t,n,o){i.Z.error("Adding deprecated "+t);var s=r+i.Z._capitalize(t),l=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[s]=function(){i.Z.error(l);var e=this.attrs[t];return void 0===e?n:e},a.addSetter(e,t,o,(function(){i.Z.error(l)})),a.addOverloadedGetterSetter(e,t)},backCompat(e,t){i.Z.each(t,(function(t,n){var o=e.prototype[n],a=r+i.Z._capitalize(t),l=s+i.Z._capitalize(t);function c(){o.apply(this,arguments),i.Z.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[t]=c,e.prototype[a]=c,e.prototype[l]=c}))},afterSetFilter(){this._filterUpToDate=!1}}},6382:(e,t,n)=>{"use strict";n.d(t,{DA:()=>s,So:()=>r,zA:()=>o});var i=Math.PI/180;const o="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},r={_global:o,version:"8.4.3",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:e=>r.angleDeg?e*i:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>r.DD.isDragging,isDragReady:()=>!!r.DD.node,releaseCanvasOnDestroy:!0,document:o.document,_injectGlobal(e){o.Konva=e}},s=e=>{r[e.prototype.getClassName()]=e};r._injectGlobal(r)},9908:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4391),o=n(671),r=n(6382);class s extends o.W{_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&i.Z.throw("You may only add groups and shapes to groups.")}}s.prototype.nodeType="Group",(0,r.DA)(s)},8826:(e,t,n)=>{"use strict";n.d(t,{N:()=>C});var i=n(4391),o=n(2772),r=n(7044),s=n(6382),a=n(4117),l=n(2513),c="absoluteOpacity",d="allEventListeners",h="absoluteTransform",u="absoluteScale",p="canvas",f="listening",g="mouseenter",m="mouseleave",v="Shape",b=" ",y="stage",w="transform",k="visible",x=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(b);let S=1;class C{constructor(e){this._id=S++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==w&&e!==h||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){var n=this._cache.get(e);return(void 0===n||(e===w||e===h)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map((e=>e+"Change.konva")).join(b);this.on(n,(()=>{this._clearCache(e)})),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:e,filter:t,hit:n}=this._cache.get(p);i.Z.releaseCanvas(e,t,n),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},n={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var o=Math.ceil(t.width||n.width),s=Math.ceil(t.height||n.height),a=t.pixelRatio,l=void 0===t.x?Math.floor(n.x):t.x,d=void 0===t.y?Math.floor(n.y):t.y,h=t.offset||0,f=t.drawBorder||!1,g=t.hitCanvasPixelRatio||1;if(o&&s){o+=2*h+1,s+=2*h+1,l-=h,d-=h;var m=new r.RF({pixelRatio:a,width:o,height:s}),v=new r.RF({pixelRatio:a,width:0,height:0}),b=new r.hh({pixelRatio:g,width:o,height:s}),y=m.getContext(),w=b.getContext();return b.isCache=!0,m.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(m.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),y.save(),w.save(),y.translate(-l,-d),w.translate(-l,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(u),this.drawScene(m,this),this.drawHit(b,this),this._isUnderCache=!1,y.restore(),w.restore(),f&&(y.save(),y.beginPath(),y.rect(0,0,o,s),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(p,{scene:m,filter:v,hit:b,x:l,y:d}),this._requestDraw(),this}i.Z.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(p)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var n,i,o,r,s=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=this.getAbsoluteTransform(t);return s.forEach((function(e){var t=a.point(e);void 0===n&&(n=o=t.x,i=r=t.y),n=Math.min(n,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y)})),{x:n,y:i,width:o-n,height:r-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/i,n.height/i),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,n,o,r=this.filters(),s=this._getCanvasCache(),a=s.scene,l=s.filter,c=l.getContext();if(r){if(!this._filterUpToDate){var d=a.pixelRatio;l.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(e=r.length,c.clear(),c.drawImage(a._canvas,0,0,a.getWidth()/d,a.getHeight()/d),t=c.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<e;n++)"function"==typeof(o=r[n])?(o.call(this,t),c.putImageData(t,0,0)):i.Z.error("Filter should be type of function, but got "+typeof o+" instead. Please check correct filters")}catch(e){i.Z.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return a}on(e,t){if(this._cache&&this._cache.delete(d),3===arguments.length)return this._delegate.apply(this,arguments);var n,i,o,r,s=e.split(b),a=s.length;for(n=0;n<a;n++)o=(i=s[n].split("."))[0],r=i[1]||"",this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:r,handler:t});return this}off(e,t){var n,i,o,r,s,a=(e||"").split(b),l=a.length;if(this._cache&&this._cache.delete(d),!e)for(i in this.eventListeners)this._off(i);for(n=0;n<l;n++)if(r=(o=a[n].split("."))[0],s=o[1],r)this.eventListeners[r]&&this._off(r,s,t);else for(i in this.eventListeners)this._off(i,s,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,(function(e){t.call(this,e.evt)})),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){var o=this;this.on(e,(function(e){for(var r=e.target.findAncestors(t,!0,o),s=0;s<r.length;s++)(e=i.Z.cloneObject(e)).currentTarget=r[s],n.call(r[s],e)}))}remove(){return this.isDragging()&&this.stopDrag(),a.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+i.Z._capitalize(e);return i.Z._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges((()=>{var t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+i.Z._capitalize(t),i.Z._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))})),this}isListening(){return this._getCache(f,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),i=!1;a.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(i=!0)}));var o=!t&&!s.So.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,n,i,o=this.getDepth(),r=this,s=0;return"Stage"!==r.nodeType&&function a(l){for(e=[],t=l.length,n=0;n<t;n++)i=l[n],s++,i.nodeType!==v&&(e=e.concat(i.getChildren().slice())),i._id===r._id&&(n=t);e.length>0&&e[0].getDepth()<=o&&a(e)}(r.getStage().getChildren()),s}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(w),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges((()=>{this.x(e.x),this.y(e.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var t=this.getAbsoluteTransform().copy();return t.invert(),t.point(e)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),r=new i.w,s=this.offset();return r.m=o.slice(),r.translate(s.x,s.y),r.getTranslation()}setAbsolutePosition(e){var t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y,this._clearCache(w);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(t),this.setPosition({x:e.x,y:e.y}),this._clearCache(w),this._clearSelfAndDescendantCache(h),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,n=e.y,i=this.x(),o=this.y();return void 0!==t&&(i+=t),void 0!==n&&(o+=n),this.setPosition({x:i,y:o}),this}_eachAncestorReverse(e,t){var n,i,o=[],r=this.getParent();if(!t||t._id!==this._id){for(o.unshift(this);r&&(!t||r._id!==t._id);)o.unshift(r),r=r.parent;for(n=o.length,i=0;i<n;i++)e(o[i])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return i.Z.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return i.Z.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return i.Z.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return i.Z.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return i.Z.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&i.Z.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(c,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,n,o,r={},s=this.getAttrs();for(e in r.attrs={},s)t=s[e],i.Z.isObject(t)&&!i.Z._isPlainObject(t)&&!i.Z._isArray(t)||(n="function"==typeof this[e]&&this[e],delete s[e],o=n?n.call(this):null,s[e]=t,o!==t&&(r.attrs[e]=t));return r.className=this.getClassName(),i.Z._prepareToStringify(r)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){var i=[];t&&this._isMatch(e)&&i.push(this);for(var o=this.parent;o;){if(o===n)return i;o._isMatch(e)&&i.push(o),o=o.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,n,o=e.replace(/ /g,"").split(","),r=o.length;for(t=0;t<r;t++)if(n=o[t],i.Z.isValidSelector(n)||(i.Z.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Z.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Z.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(y,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():void 0}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new i.w,this._eachAncestorReverse((function(e){var n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())}),e),t;t=this._cache.get(h)||new i.w,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var n=this.transformsEnabled();if("all"===n)t.multiply(this.getTransform());else if("position"===n){const e=this.attrs.x||0,n=this.attrs.y||0,i=this.attrs.offsetX||0,o=this.attrs.offsetY||0;t.translate(e-i,n-o)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(w,this._getTransform)}_getTransform(){var e,t,n=this._cache.get(w)||new i.w;n.reset();var o=this.x(),r=this.y(),a=s.So.getAngle(this.rotation()),l=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,c=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,d=this.attrs.skewX||0,h=this.attrs.skewY||0,u=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return 0===o&&0===r||n.translate(o,r),0!==a&&n.rotate(a),0===d&&0===h||n.skew(d,h),1===l&&1===c||n.scale(l,c),0===u&&0===p||n.translate(-1*u,-1*p),n.dirty=!1,n}clone(e){var t,n,o,r,s,a=i.Z.cloneObject(this.attrs);for(t in e)a[t]=e[t];var l=new this.constructor(a);for(t in this.eventListeners)for(o=(n=this.eventListeners[t]).length,r=0;r<o;r++)(s=n[r]).name.indexOf("konva")<0&&(l.eventListeners[t]||(l.eventListeners[t]=[]),l.eventListeners[t].push(s));return l}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),n=this.getStage(),i=void 0!==e.x?e.x:Math.floor(t.x),o=void 0!==e.y?e.y:Math.floor(t.y),s=e.pixelRatio||1,a=new r.RF({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:s}),l=a.getContext();return!1===e.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||o)&&l.translate(-1*i,-1*o),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,n=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(i),i}toImage(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,i.Z._urlToImage(this.toDataURL(e),(function(e){t(e),null==n||n(e)}))}catch(e){n(e)}}))}toBlob(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob((e=>{t(e),null==n||n(e)}))}catch(e){n(e)}}))}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.So.dragDistance}_off(e,t,n){var i,o,r,s=this.eventListeners[e];for(i=0;i<s.length;i++)if(o=s[i].name,r=s[i].handler,!("konva"===o&&"konva"!==t||t&&o!==t||n&&n!==r)){if(s.splice(i,1),0===s.length){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){var t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){var t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){var n=this["set"+i.Z._capitalize(e)];return i.Z._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(s.So.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){var n=this.attrs[e];(n!==t||i.Z.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){var i;void 0!==n&&((i=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,i,n))}_fireAndBubble(e,t,n){if(t&&this.nodeType===v&&(t.target=this),!((e===g||e===m)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);var i=(e===g||e===m)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){let t=this._cache.get(d);if(!t){t={};let e=Object.getPrototypeOf(this);for(;e;)if(e.eventListeners){for(var n in e.eventListeners){const i=e.eventListeners[n],o=t[n]||[];t[n]=i.concat(o)}e=Object.getPrototypeOf(e)}else e=Object.getPrototypeOf(e);this._cache.set(d,t)}return t[e]}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,t);const o=this.eventListeners[e];if(o)for(i=0;i<o.length;i++)o[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),o=n._getPointerById(t)||n._changedPointerPositions[0]||i;a.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){a.DD._dragElements.has(this._id)||this._createDragElement(e);a.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(n){var o={x:n.x-t.offset.x,y:n.y-t.offset.y},r=this.dragBoundFunc();if(void 0!==r){const t=r.call(this,o,e);t?o=t:i.Z.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===o.x&&this._lastPos.y===o.y||(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const t=a.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),a.DD._endDragBefore(e),a.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=a.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(e){if((!(void 0!==e.evt.button)||s.So.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;a.DD._dragElements.forEach((e=>{this.isAncestorOf(e.node)&&(t=!0)})),t||this._createDragElement(e)}}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=a.DD._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&a.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return i.Z.haveIntersection(n,this.getClientRect())}static create(e,t){return i.Z._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var n,o,r,a=C.prototype.getClassName.call(e),l=e.children;t&&(e.attrs.container=t),s.So[a]||(i.Z.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");if(n=new(0,s.So[a])(e.attrs),l)for(o=l.length,r=0;r<o;r++)n.add(C._createNode(l[r]));return n}}C.prototype.nodeType="Node",C.prototype._attrsAffectingSize=[],C.prototype.eventListeners={},C.prototype.on.call(C.prototype,x,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(w),this._clearSelfAndDescendantCache(h))})),C.prototype.on.call(C.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(k)})),C.prototype.on.call(C.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(f)})),C.prototype.on.call(C.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(c)}));const E=o.F.addGetterSetter;E(C,"zIndex"),E(C,"absolutePosition"),E(C,"position"),E(C,"x",0,(0,l.Kg)()),E(C,"y",0,(0,l.Kg)()),E(C,"globalCompositeOperation","source-over",(0,l.sY)()),E(C,"opacity",1,(0,l.Kg)()),E(C,"name","",(0,l.sY)()),E(C,"id","",(0,l.sY)()),E(C,"rotation",0,(0,l.Kg)()),o.F.addComponentsGetterSetter(C,"scale",["x","y"]),E(C,"scaleX",1,(0,l.Kg)()),E(C,"scaleY",1,(0,l.Kg)()),o.F.addComponentsGetterSetter(C,"skew",["x","y"]),E(C,"skewX",0,(0,l.Kg)()),E(C,"skewY",0,(0,l.Kg)()),o.F.addComponentsGetterSetter(C,"offset",["x","y"]),E(C,"offsetX",0,(0,l.Kg)()),E(C,"offsetY",0,(0,l.Kg)()),E(C,"dragDistance",null,(0,l.Kg)()),E(C,"width",0,(0,l.Kg)()),E(C,"height",0,(0,l.Kg)()),E(C,"listening",!0,(0,l.I0)()),E(C,"preventDefault",!0,(0,l.I0)()),E(C,"filters",null,(function(e){return this._filterUpToDate=!1,e})),E(C,"visible",!0,(0,l.I0)()),E(C,"transformsEnabled","all",(0,l.sY)()),E(C,"size"),E(C,"dragBoundFunc"),E(C,"draggable",!1,(0,l.I0)()),o.F.backCompat(C,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},6287:(e,t,n)=>{"use strict";n.d(t,{I5:()=>c,Xg:()=>d,q0:()=>l,rl:()=>s,yM:()=>a});var i=n(6382);const o=new Map,r=void 0!==i.So._global.PointerEvent;function s(e){return o.get(e)}function a(e){return{evt:e,pointerId:e.pointerId}}function l(e,t){return o.get(e)===t}function c(e,t){d(e);t.getStage()&&(o.set(e,t),r&&t._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))}function d(e,t){const n=o.get(e);if(!n)return;const i=n.getStage();i&&i.content,o.delete(e),r&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}},4786:(e,t,n)=>{"use strict";n.d(t,{J:()=>m,b:()=>v});var i=n(6382),o=n(4391),r=n(2772),s=n(8826),a=n(2513),l=n(6287),c="hasShadow",d="shadowRGBA",h="patternImage",u="linearGradient",p="radialGradient";let f;function g(){return f||(f=o.Z.createCanvasElement().getContext("2d"),f)}const m={};class v extends s.N{constructor(e){let t;for(super(e);t=o.Z.getRandomColor(),!t||t in m;);this.colorKey=t,m[t]=this}getContext(){return o.Z.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return o.Z.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new o.w;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(i.So.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=t.getMatrix(),r="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=g(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=t.createLinearGradient(n.x,n.y,i.x,i.y),r=0;r<e.length;r+=2)o.addColorStop(e[r],e[r+1]);return o}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=g(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),r=0;r<e.length;r+=2)o.addColorStop(e[r],e[r+1]);return o}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=o.Z.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage().bufferHitCanvas;return t.getContext().clear(),this.drawHit(t,null,!0),t.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return s.N.prototype.destroy.call(this),delete m[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage())return!1;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),i=this.hasStroke(),o=1!==this.getAbsoluteOpacity();if(n&&i&&o)return!0;const r=this.hasShadow(),s=this.shadowForStrokeEnabled();return!!(n&&i&&r&&s)}setStrokeHitEnabled(e){o.Z.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const t=e.skipTransform,n=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,r=i.width+o,s=i.height+o,a=!e.skipShadow&&this.hasShadow(),l=a?this.shadowOffsetX():0,c=a?this.shadowOffsetY():0,d=r+Math.abs(l),h=s+Math.abs(c),u=a&&this.shadowBlur()||0,p={width:d+2*u,height:h+2*u,x:-(o/2+u)+Math.min(l,0)+i.x,y:-(o/2+u)+Math.min(c,0)+i.y};return t?p:this._transformedRect(p,n)}drawScene(e,t){var n,i,o=this.getLayer(),r=e||o.getCanvas(),s=r.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),d=r.isCache,h=t===this;if(!this.isVisible()&&!h)return this;if(a){s.save();var u=this.getAbsoluteTransform(t).getMatrix();return s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!l)return this;if(s.save(),this._useBufferCanvas()&&!d){(i=(n=this.getStage().bufferCanvas).getContext()).clear(),i.save(),i._applyLineJoin(this);var p=this.getAbsoluteTransform(t).getMatrix();i.transform(p[0],p[1],p[2],p[3],p[4],p[5]),l.call(this,i,this),i.restore();var f=n.pixelRatio;c&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(n._canvas,0,0,n.width/f,n.height/f)}else{if(s._applyLineJoin(this),!h){p=this.getAbsoluteTransform(t).getMatrix();s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}c&&s._applyShadow(this),l.call(this,s,this)}return s.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;var i=this.getLayer(),r=e||i.hitCanvas,s=r&&r.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||o.Z.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){s.save();var d=this.getAbsoluteTransform(t).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;s.save(),s._applyLineJoin(this);if(!(this===t)){var h=this.getAbsoluteTransform(t).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(e=0){var t,n,i,r,s,a=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=a.hit,d=c.getContext(),h=c.getWidth(),u=c.getHeight();d.clear(),d.drawImage(l._canvas,0,0,h,u);try{for(i=(n=(t=d.getImageData(0,0,h,u)).data).length,r=o.Z._hexToRgb(this.colorKey),s=0;s<i;s+=4)n[s+3]>e?(n[s]=r.r,n[s+1]=r.g,n[s+2]=r.b,n[s+3]=255):n[s+3]=0;d.putImageData(t,0,0)}catch(e){o.Z.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return l.q0(e,this)}setPointerCapture(e){l.I5(e,this)}releaseCapture(e){l.Xg(e,this)}}v.prototype._fillFunc=function(e){e.fill()},v.prototype._strokeFunc=function(e){e.stroke()},v.prototype._fillFuncHit=function(e){e.fill()},v.prototype._strokeFuncHit=function(e){e.stroke()},v.prototype._centroid=!1,v.prototype.nodeType="Shape",(0,i.DA)(v),v.prototype.eventListeners={},v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(c)})),v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(d)})),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(h)})),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(u)})),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(p)})),r.F.addGetterSetter(v,"stroke",void 0,(0,a.if)()),r.F.addGetterSetter(v,"strokeWidth",2,(0,a.Kg)()),r.F.addGetterSetter(v,"fillAfterStrokeEnabled",!1),r.F.addGetterSetter(v,"hitStrokeWidth","auto",(0,a.hi)()),r.F.addGetterSetter(v,"strokeHitEnabled",!0,(0,a.I0)()),r.F.addGetterSetter(v,"perfectDrawEnabled",!0,(0,a.I0)()),r.F.addGetterSetter(v,"shadowForStrokeEnabled",!0,(0,a.I0)()),r.F.addGetterSetter(v,"lineJoin"),r.F.addGetterSetter(v,"lineCap"),r.F.addGetterSetter(v,"sceneFunc"),r.F.addGetterSetter(v,"hitFunc"),r.F.addGetterSetter(v,"dash"),r.F.addGetterSetter(v,"dashOffset",0,(0,a.Kg)()),r.F.addGetterSetter(v,"shadowColor",void 0,(0,a.sY)()),r.F.addGetterSetter(v,"shadowBlur",0,(0,a.Kg)()),r.F.addGetterSetter(v,"shadowOpacity",1,(0,a.Kg)()),r.F.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),r.F.addGetterSetter(v,"shadowOffsetX",0,(0,a.Kg)()),r.F.addGetterSetter(v,"shadowOffsetY",0,(0,a.Kg)()),r.F.addGetterSetter(v,"fillPatternImage"),r.F.addGetterSetter(v,"fill",void 0,(0,a.if)()),r.F.addGetterSetter(v,"fillPatternX",0,(0,a.Kg)()),r.F.addGetterSetter(v,"fillPatternY",0,(0,a.Kg)()),r.F.addGetterSetter(v,"fillLinearGradientColorStops"),r.F.addGetterSetter(v,"strokeLinearGradientColorStops"),r.F.addGetterSetter(v,"fillRadialGradientStartRadius",0),r.F.addGetterSetter(v,"fillRadialGradientEndRadius",0),r.F.addGetterSetter(v,"fillRadialGradientColorStops"),r.F.addGetterSetter(v,"fillPatternRepeat","repeat"),r.F.addGetterSetter(v,"fillEnabled",!0),r.F.addGetterSetter(v,"strokeEnabled",!0),r.F.addGetterSetter(v,"shadowEnabled",!0),r.F.addGetterSetter(v,"dashEnabled",!0),r.F.addGetterSetter(v,"strokeScaleEnabled",!0),r.F.addGetterSetter(v,"fillPriority","color"),r.F.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),r.F.addGetterSetter(v,"fillPatternOffsetX",0,(0,a.Kg)()),r.F.addGetterSetter(v,"fillPatternOffsetY",0,(0,a.Kg)()),r.F.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),r.F.addGetterSetter(v,"fillPatternScaleX",1,(0,a.Kg)()),r.F.addGetterSetter(v,"fillPatternScaleY",1,(0,a.Kg)()),r.F.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),r.F.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),r.F.addGetterSetter(v,"fillLinearGradientStartPointX",0),r.F.addGetterSetter(v,"strokeLinearGradientStartPointX",0),r.F.addGetterSetter(v,"fillLinearGradientStartPointY",0),r.F.addGetterSetter(v,"strokeLinearGradientStartPointY",0),r.F.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),r.F.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),r.F.addGetterSetter(v,"fillLinearGradientEndPointX",0),r.F.addGetterSetter(v,"strokeLinearGradientEndPointX",0),r.F.addGetterSetter(v,"fillLinearGradientEndPointY",0),r.F.addGetterSetter(v,"strokeLinearGradientEndPointY",0),r.F.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),r.F.addGetterSetter(v,"fillRadialGradientStartPointX",0),r.F.addGetterSetter(v,"fillRadialGradientStartPointY",0),r.F.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),r.F.addGetterSetter(v,"fillRadialGradientEndPointX",0),r.F.addGetterSetter(v,"fillRadialGradientEndPointY",0),r.F.addGetterSetter(v,"fillPatternRotation",0),r.F.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},4391:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,w:()=>o});var i=n(6382);class o{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new o(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),n=Math.sin(e),i=this.m[0]*t+this.m[2]*n,o=this.m[1]*t+this.m[3]*n,r=this.m[0]*-n+this.m[2]*t,s=this.m[1]*-n+this.m[3]*t;return this.m[0]=i,this.m[1]=o,this.m[2]=r,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var n=this.m[0]+this.m[2]*t,i=this.m[1]+this.m[3]*t,o=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=r,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],s=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=s,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,i=-this.m[2]*e,o=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=s,this}getMatrix(){return this.m}decompose(){var e=this.m[0],t=this.m[1],n=this.m[2],i=this.m[3],o=e*i-t*n;let r={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=t){var s=Math.sqrt(e*e+t*t);r.rotation=t>0?Math.acos(e/s):-Math.acos(e/s),r.scaleX=s,r.scaleY=o/s,r.skewX=(e*n+t*i)/o,r.skewY=0}else if(0!=n||0!=i){var a=Math.sqrt(n*n+i*i);r.rotation=Math.PI/2-(i>0?Math.acos(-n/a):-Math.acos(n/a)),r.scaleX=o/a,r.scaleY=a,r.skewX=0,r.skewY=(e*n+t*i)/o}return r.rotation=u._getRotation(r.rotation),r}}var r=Math.PI/180,s=180/Math.PI,a="Konva error: ",l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,d=[];const h="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)},u={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){d.push(e),1===d.length&&h((function(){const e=d;d=[],e.forEach((function(e){e()}))}))},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch(e){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var n=u.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},getRGB(e){var t;return e in l?{r:(t=l[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=c.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",u._namedColorToRBA(e)||u._hex3ColorToRGBA(e)||u._hex4ColorToRGBA(e)||u._hex6ColorToRGBA(e)||u._hex8ColorToRGBA(e)||u._rgbColorToRGBA(e)||u._rgbaColorToRGBA(e)||u._hslColorToRGBA(e)),_namedColorToRBA(e){var t=l[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e)));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(n[0])/360,o=Number(n[1])/100,r=Number(n[2])/100;let s,a,l;if(0===o)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s=r<.5?r*(1+o):r+o-r*o;const c=2*r-s,d=[0,0,0];for(let e=0;e<3;e++)a=i+1/3*-(e-1),a<0&&a++,a>1&&a--,l=6*a<1?c+6*(s-c)*a:2*a<1?s:3*a<2?c+(s-c)*(2/3-a)*6:c,d[e]=255*l;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*r,radToDeg:e=>e*s,_degToRad:e=>(u.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),u.degToRad(e)),_radToDeg:e=>(u.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),u.radToDeg(e)),_getRotation:e=>i.So.angleDeg?u.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(a+e)},error(e){console.error(a+e)},warn(e){i.So.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(var n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,i,o,r){var s,a,l,c=(e-n)*(e-n)+(t-i)*(t-i);if(0==c)s=e,a=t,l=(o-n)*(o-n)+(r-i)*(r-i);else{var d=((o-e)*(n-e)+(r-t)*(i-t))/c;d<0?(s=e,a=t,l=(e-o)*(e-o)+(t-r)*(t-r)):d>1?(s=n,a=i,l=(n-o)*(n-o)+(i-r)*(i-r)):l=((s=e+d*(n-e))-o)*(s-o)+((a=t+d*(i-t))-r)*(a-r)}return[s,a,l]},_getProjectionToLine(e,t,n){var i=u.cloneObject(e),o=Number.MAX_VALUE;return t.forEach((function(r,s){if(n||s!==t.length-1){var a=t[(s+1)%t.length],l=u._getProjectionToSegment(r.x,r.y,a.x,a.y,e.x,e.y),c=l[0],d=l[1],h=l[2];h<o&&(i.x=c,i.y=d,o=h)}})),i},_prepareArrayForTween(e,t,n){var i,o=[],r=[];if(e.length>t.length){var s=t;t=e,e=s}for(i=0;i<e.length;i+=2)o.push({x:e[i],y:e[i+1]});for(i=0;i<t.length;i+=2)r.push({x:t[i],y:t[i+1]});var a=[];return r.forEach((function(e){var t=u._getProjectionToLine(e,o,n);a.push(t.x),a.push(t.y)})),a},_prepareToStringify(e){var t;for(var n in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n])if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||u._isElement(e[n])){if(!t.configurable)return null;delete e[n]}else if(null===u._prepareToStringify(e[n])){if(!t.configurable)return null;delete e[n]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){i.So.releaseCanvasOnDestroy&&e.forEach((e=>{e.width=0,e.height=0}))},drawRoundedRectPath(e,t,n,i){let o=0,r=0,s=0,a=0;"number"==typeof i?o=r=s=a=Math.min(i,t/2,n/2):(o=Math.min(i[0]||0,t/2,n/2),r=Math.min(i[1]||0,t/2,n/2),a=Math.min(i[2]||0,t/2,n/2),s=Math.min(i[3]||0,t/2,n/2)),e.moveTo(o,0),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,0,!1),e.lineTo(t,n-a),e.arc(t-a,n-a,a,0,Math.PI/2,!1),e.lineTo(s,n),e.arc(s,n-s,s,Math.PI/2,Math.PI,!1),e.lineTo(0,o),e.arc(o,o,o,Math.PI,3*Math.PI/2,!1)}}},2513:(e,t,n)=>{"use strict";n.d(t,{I0:()=>p,Jj:()=>l,Kg:()=>a,hi:()=>c,if:()=>h,q8:()=>u,sY:()=>d,uZ:()=>f,xj:()=>s});var i=n(6382),o=n(4391);function r(e){return o.Z._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||o.Z._isBoolean(e)?e:Object.prototype.toString.call(e)}function s(e){return e>255?255:e<0?0:Math.round(e)}function a(){if(i.So.isUnminified)return function(e,t){return o.Z._isNumber(e)||o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function l(e){if(i.So.isUnminified)return function(t,n){let i=o.Z._isNumber(t),s=o.Z._isArray(t)&&t.length==e;return i||s||o.Z.warn(r(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function c(){if(i.So.isUnminified)return function(e,t){return o.Z._isNumber(e)||"auto"===e||o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function d(){if(i.So.isUnminified)return function(e,t){return o.Z._isString(e)||o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function h(){if(i.So.isUnminified)return function(e,t){const n=o.Z._isString(e),i="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||i||o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function u(){if(i.So.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(o.Z._isArray(e)?e.forEach((function(e){o.Z._isNumber(e)||o.Z.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")})):o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function p(){if(i.So.isUnminified)return function(e,t){return!0===e||!1===e||o.Z.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function f(e){if(i.So.isUnminified)return function(t,n){return null==t||o.Z.isObject(t)||o.Z.warn(r(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}},2240:(e,t,n)=>{"use strict";n.d(t,{S:()=>Q});var i=n(6382),o=n(4391),r=n(8826),s=n(671),a=n(2772),l=n(7044),c=n(4117),d=n(6287),h="mouseleave",u="mouseover",p="mouseenter",f="mousemove",g="mousedown",m="mouseup",v="pointermove",b="pointerdown",y="pointerup",w="pointercancel",k="pointerout",x="pointerleave",S="pointerover",C="pointerenter",E="contextmenu",T="touchstart",_="touchend",A="touchmove",O="touchcancel",M="wheel",I=[[p,"_pointerenter"],[g,"_pointerdown"],[f,"_pointermove"],[m,"_pointerup"],[h,"_pointerleave"],[T,"_pointerdown"],[A,"_pointermove"],[_,"_pointerup"],[O,"_pointercancel"],[u,"_pointerover"],[M,"_wheel"],[E,"_contextmenu"],[b,"_pointerdown"],[v,"_pointermove"],[y,"_pointerup"],[w,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const D={mouse:{[k]:"mouseout",[x]:h,[S]:u,[C]:p,[v]:f,[b]:g,[y]:m,[w]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[x]:"touchleave",[S]:"touchover",[C]:"touchenter",[v]:A,[b]:T,[y]:_,[w]:O,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[x]:x,[S]:S,[C]:C,[v]:v,[b]:b,[y]:y,[w]:w,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},N=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",R=e=>{const t=N(e);return"pointer"===t?i.So.pointerEventsEnabled&&D.pointer:"touch"===t?D.touch:"mouse"===t?D.mouse:void 0};function B(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&o.Z.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const L=[];class P extends s.W{constructor(e){super(B(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),L.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{B(this.attrs)})),this._checkVisibility()}_validateAdd(e){const t="Layer"===e.getType(),n="FastLayer"===e.getType();t||n||o.Z.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){if("."===e.charAt(0)){var t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var n;n="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e,t=this.children,n=t.length;for(e=0;e<n;e++)t[e].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),s.W.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&o.Z._isInDocument(e)&&this.container().removeChild(e);var t=L.indexOf(this);return t>-1&&L.splice(t,1),o.Z.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(o.Z.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find((t=>t.id===e))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new l.RF({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,i=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),i.forEach((function(t){if(t.isVisible()){var i=t._toKonvaCanvas(e);n.drawImage(i._canvas,e.x,e.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}})),t}getIntersection(e){if(!e)return null;var t,n=this.children;for(t=n.length-1;t>=0;t--){const i=n[t].getIntersection(e);if(i)return i}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach((n=>{n.setSize({width:e,height:t}),n.draw()}))}add(e,...t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var r=this.children.length;return r>5&&o.Z.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),i.So.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return d.q0(e,this)}setPointerCapture(e){d.I5(e,this)}releaseCapture(e){d.Xg(e,this)}getLayers(){return this.children}_bindContentEvents(){i.So.isBrowser&&I.forEach((([e,t])=>{this.content.addEventListener(e,(e=>{this[t](e)}),{passive:!1})}))}_pointerenter(e){this.setPointersPositions(e);const t=R(e.type);this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=R(e.type);this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=R(e.type),n=N(e.type);if(t){this.setPointersPositions(e);var o=this._getTargetShape(n),r=!c.DD.isDragging||i.So.hitOnDragEnabled;o&&r?(o._fireAndBubble(t.pointerout,{evt:e}),o._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const t=R(e.type),n=N(e.type);if(t){this.setPointersPositions(e);var o=!1;this._changedPointerPositions.forEach((r=>{var s=this.getIntersection(r);c.DD.justDragged=!1,i.So["_"+n+"ListenClick"]=!0;if(!(s&&s.isListening()))return;i.So.capturePointerEventsEnabled&&s.setPointerCapture(r.id),this[n+"ClickStartShape"]=s,s._fireAndBubble(t.pointerdown,{evt:e,pointerId:r.id}),o=!0;const a=e.type.indexOf("touch")>=0;s.preventDefault()&&e.cancelable&&a&&e.preventDefault()})),o||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const t=R(e.type),n=N(e.type);if(!t)return;if(c.DD.isDragging&&c.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!c.DD.isDragging||i.So.hitOnDragEnabled))return;var o={};let r=!1;var s=this._getTargetShape(n);this._changedPointerPositions.forEach((i=>{const a=d.rl(i.id)||this.getIntersection(i),l=i.id,c={evt:e,pointerId:l};var h=s!==a;if(h&&s&&(s._fireAndBubble(t.pointerout,Object.assign({},c),a),s._fireAndBubble(t.pointerleave,Object.assign({},c),a)),a){if(o[a._id])return;o[a._id]=!0}a&&a.isListening()?(r=!0,h&&(a._fireAndBubble(t.pointerover,Object.assign({},c),s),a._fireAndBubble(t.pointerenter,Object.assign({},c),s),this[n+"targetShape"]=a),a._fireAndBubble(t.pointermove,Object.assign({},c))):s&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:l}),this[n+"targetShape"]=null)})),r||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=R(e.type),n=N(e.type);if(!t)return;this.setPointersPositions(e);const o=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var s={};let a=!1;this._changedPointerPositions.forEach((l=>{const h=d.rl(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),s[h._id])return;s[h._id]=!0}const u=l.id,p={evt:e,pointerId:u};let f=!1;i.So["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):c.DD.justDragged||(i.So["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout((function(){i.So["_"+n+"InDblClickWindow"]=!1}),i.So.dblClickWindow),h&&h.isListening()?(a=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(t.pointerup,Object.assign({},p)),i.So["_"+n+"ListenClick"]&&o&&o===h&&(h._fireAndBubble(t.pointerclick,Object.assign({},p)),f&&r&&r===h&&h._fireAndBubble(t.pointerdblclick,Object.assign({},p)))):(this[n+"ClickEndShape"]=null,i.So["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),f&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))})),a||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.So["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(E,{evt:e}):this._fire(E,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(M,{evt:e}):this._fire(M,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=d.rl(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(y,d.yM(e)),d.Xg(e.pointerId)}_lostpointercapture(e){d.Xg(e.pointerId)}setPointersPositions(e){var t=this._getContentPosition(),n=null,i=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,(e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})),Array.prototype.forEach.call(e.changedTouches||e.touches,(e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}))):(n=(e.clientX-t.left)/t.scaleX,i=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:i},this._pointerPositions=[{x:n,y:i,id:o.Z._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:i,id:o.Z._getFirstPointerId(e)}])}_setPointerPosition(e){o.Z.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.RF({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.hh({pixelRatio:1,width:this.width(),height:this.height()}),i.So.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return o.Z.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(e){e.batchDraw()})),this}}P.prototype.nodeType="Stage",(0,i.DA)(P),a.F.addGetterSetter(P,"container");var F=n(2513),z=n(4786),H=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],j=H.length;class G extends s.W{constructor(e){super(e),this.canvas=new l.RF,this.hitCanvas=new l.hh({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.N.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.N.prototype.moveUp.call(this))return!1;var e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.N.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.N.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return r.N.prototype.remove.call(this),e&&e.parentNode&&o.Z._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&o.Z.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),r.N.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Z.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Z.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Z.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,n=!1;;){for(let i=0;i<j;i++){const o=H[i],r=this._getIntersection({x:e.x+o.x*t,y:e.y+o.y*t}),s=r.shape;if(s)return s;if(n=!!r.antialiased,!r.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,i=n[3];if(255===i){const e=o.Z._rgbToHex(n[0],n[1],n[2]),t=z.J["#"+e];return t?{shape:t}:{antialiased:!0}}return i>0?{antialiased:!0}:{}}drawScene(e,t){var n=this.getLayer(),i=e||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),s.W.prototype.drawScene.call(this,i,t),this._fire("draw",{node:this}),this}drawHit(e,t){var n=this.getLayer(),i=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),s.W.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){o.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return o.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return o.Z.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}G.prototype.nodeType="Layer",(0,i.DA)(G),a.F.addGetterSetter(G,"imageSmoothingEnabled",!0),a.F.addGetterSetter(G,"clearBeforeDraw",!0),a.F.addGetterSetter(G,"hitGraphEnabled",!0,(0,F.I0)());class U extends G{constructor(e){super(e),this.listening(!1),o.Z.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}U.prototype.nodeType="FastLayer",(0,i.DA)(U);var $=n(9908),W=n(5080),V={node:1,duration:1,easing:1,onFinish:1,yoyo:1},q=0,Y=["fill","stroke","shadowColor"];class K{constructor(e,t,n,i,o,r,s){this.prop=e,this.propFunc=t,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()}fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class Z{constructor(e){var t,n,r=this,s=e.node,a=s._id,l=e.easing||X.Linear,c=!!e.yoyo;t=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=s,this._id=q++;var d=s.getLayer()||(s instanceof i.So.Stage?s.getLayers():null);for(n in d||o.Z.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new W.f((function(){r.tween.onEnterFrame()}),d),this.tween=new K(n,(function(e){r._tweenFunc(e)}),l,0,1,1e3*t,c),this._addListeners(),Z.attrs[a]||(Z.attrs[a]={}),Z.attrs[a][this._id]||(Z.attrs[a][this._id]={}),Z.tweens[a]||(Z.tweens[a]={}),e)void 0===V[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){var n,i,r,s,a,l,c,d,h=this.node,u=h._id;if((r=Z.tweens[u][e])&&delete Z.attrs[u][r][e],n=h.getAttr(e),o.Z._isArray(t))if(i=[],a=Math.max(t.length,n.length),"points"===e&&t.length!==n.length&&(t.length>n.length?(c=n,n=o.Z._prepareArrayForTween(n,t,h.closed())):(l=t,t=o.Z._prepareArrayForTween(t,n,h.closed()))),0===e.indexOf("fill"))for(s=0;s<a;s++)if(s%2==0)i.push(t[s]-n[s]);else{var p=o.Z.colorToRGBA(n[s]);d=o.Z.colorToRGBA(t[s]),n[s]=p,i.push({r:d.r-p.r,g:d.g-p.g,b:d.b-p.b,a:d.a-p.a})}else for(s=0;s<a;s++)i.push(t[s]-n[s]);else-1!==Y.indexOf(e)?(n=o.Z.colorToRGBA(n),i={r:(d=o.Z.colorToRGBA(t)).r-n.r,g:d.g-n.g,b:d.b-n.b,a:d.a-n.a}):i=t-n;Z.attrs[u][this._id][e]={start:n,diff:i,end:t,trueEnd:l,trueStart:c},Z.tweens[u][e]=this._id}_tweenFunc(e){var t,n,i,r,s,a,l,c,d=this.node,h=Z.attrs[d._id][this._id];for(t in h){if(i=(n=h[t]).start,r=n.diff,c=n.end,o.Z._isArray(i))if(s=[],l=Math.max(i.length,c.length),0===t.indexOf("fill"))for(a=0;a<l;a++)a%2==0?s.push((i[a]||0)+r[a]*e):s.push("rgba("+Math.round(i[a].r+r[a].r*e)+","+Math.round(i[a].g+r[a].g*e)+","+Math.round(i[a].b+r[a].b*e)+","+(i[a].a+r[a].a*e)+")");else for(a=0;a<l;a++)s.push((i[a]||0)+r[a]*e);else s=-1!==Y.indexOf(t)?"rgba("+Math.round(i.r+r.r*e)+","+Math.round(i.g+r.g*e)+","+Math.round(i.b+r.b*e)+","+(i.a+r.a*e)+")":i+r*e;d.setAttr(t,s)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=Z.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=Z.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,t=this.node._id,n=this._id,i=Z.tweens[t];for(e in this.pause(),i)delete Z.tweens[t][e];delete Z.attrs[t][n]}}Z.attrs={},Z.tweens={},r.N.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Z(e).play()};const X={BackEaseIn(e,t,n,i){var o=1.70158;return n*(e/=i)*e*((o+1)*e-o)+t},BackEaseOut(e,t,n,i){var o=1.70158;return n*((e=e/i-1)*e*((o+1)*e+o)+1)+t},BackEaseInOut(e,t,n,i){var o=1.70158;return(e/=i/2)<1?n/2*(e*e*((1+(o*=1.525))*e-o))+t:n/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+t},ElasticEaseIn(e,t,n,i,o,r){var s=0;return 0===e?t:1==(e/=i)?t+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*i-s)*(2*Math.PI)/r)+t)},ElasticEaseOut(e,t,n,i,o,r){var s=0;return 0===e?t:1==(e/=i)?t+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin((e*i-s)*(2*Math.PI)/r)+n+t)},ElasticEaseInOut(e,t,n,i,o,r){var s=0;return 0===e?t:2==(e/=i/2)?t+n:(r||(r=i*(.3*1.5)),!o||o<Math.abs(n)?(o=n,s=r/4):s=r/(2*Math.PI)*Math.asin(n/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*i-s)*(2*Math.PI)/r)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-s)*(2*Math.PI)/r)*.5+n+t)},BounceEaseOut:(e,t,n,i)=>(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(e,t,n,i)=>n-X.BounceEaseOut(i-e,0,n,i)+t,BounceEaseInOut:(e,t,n,i)=>e<i/2?.5*X.BounceEaseIn(2*e,0,n,i)+t:.5*X.BounceEaseOut(2*e-i,0,n,i)+.5*n+t,EaseIn:(e,t,n,i)=>n*(e/=i)*e+t,EaseOut:(e,t,n,i)=>-n*(e/=i)*(e-2)+t,EaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,i)=>n*(e/=i)*e*e*e*e+t,StrongEaseOut:(e,t,n,i)=>n*((e=e/i-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,i)=>n*e/i+t};var J=n(4333);const Q=o.Z._assign(i.So,{Util:o.Z,Transform:o.w,Node:r.N,Container:s.W,Stage:P,stages:L,Layer:G,FastLayer:U,Group:$.Z,DD:c.DD,Shape:z.b,shapes:z.J,Animation:W.f,Tween:Z,Easings:X,Context:J._y,Canvas:l.Xz})},2107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ge});var i=n(2240),o=n(2772),r=n(4786),s=n(6382),a=n(2513);class l extends r.b{_sceneFunc(e){var t=s.So.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),i=s.So.getAngle(n?360-this.angle():this.angle()),o=Math.cos(Math.min(i,Math.PI)),r=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),a=Math.sin(Math.min(i,Math.PI/2)),l=o*(o>0?e:t),c=r*(r>0?e:t),d=a*(a>0?t:e);return{x:l,y:n?-1*d:c,width:1*t-l,height:d-c}}}function c(e,t,n,i,o,r,s){var a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2)),c=s*a/(a+l),d=s*l/(a+l);return[n-c*(o-e),i-c*(r-t),n+d*(o-e),i+d*(r-t)]}function d(e,t){var n,i,o=e.length,r=[];for(n=2;n<o-2;n+=2)i=c(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),isNaN(i[0])||(r.push(i[0]),r.push(i[1]),r.push(e[n]),r.push(e[n+1]),r.push(i[2]),r.push(i[3]));return r}l.prototype._centroid=!0,l.prototype.className="Arc",l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(l),o.F.addGetterSetter(l,"innerRadius",0,(0,a.Kg)()),o.F.addGetterSetter(l,"outerRadius",0,(0,a.Kg)()),o.F.addGetterSetter(l,"angle",0,(0,a.Kg)()),o.F.addGetterSetter(l,"clockwise",!1,(0,a.I0)());class h extends r.b{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(e){var t,n,i,o=this.points(),r=o.length,s=this.tension(),a=this.closed(),l=this.bezier();if(r){if(e.beginPath(),e.moveTo(o[0],o[1]),0!==s&&r>4){for(n=(t=this.getTensionPoints()).length,i=a?0:4,a||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);i<n-2;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);a||e.quadraticCurveTo(t[n-2],t[n-1],o[r-2],o[r-1])}else if(l)for(i=2;i<r;)e.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);else for(i=2;i<r;i+=2)e.lineTo(o[i],o[i+1]);a?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():d(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,n=this.tension(),i=c(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),o=c(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),r=d(e,n);return[i[2],i[3]].concat(r).concat([o[0],o[1],e[t-2],e[t-1],o[2],o[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var t,n,i=(e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points())[0],o=e[0],r=e[1],s=e[1],a=0;a<e.length/2;a++)t=e[2*a],n=e[2*a+1],i=Math.min(i,t),o=Math.max(o,t),r=Math.min(r,n),s=Math.max(s,n);return{x:i,y:r,width:o-i,height:s-r}}}h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,s.DA)(h),o.F.addGetterSetter(h,"closed",!1),o.F.addGetterSetter(h,"bezier",!1),o.F.addGetterSetter(h,"tension",0,(0,a.Kg)()),o.F.addGetterSetter(h,"points",[],(0,a.q8)());class u extends r.b{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=u.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength;this.on("dataChange.konva",(function(){this.dataArray=u.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength}))}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var n=!1,i=0;i<t.length;i++){var o=t[i].command,r=t[i].points;switch(o){case"L":e.lineTo(r[0],r[1]);break;case"M":e.moveTo(r[0],r[1]);break;case"C":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var s=r[0],a=r[1],l=r[2],c=r[3],d=r[4],h=r[5],u=r[6],p=r[7],f=l>c?l:c,g=l>c?1:l/c,m=l>c?c/l:1;e.translate(s,a),e.rotate(u),e.scale(g,m),e.arc(0,0,f,d,d+h,1-p),e.scale(1/g,1/m),e.rotate(-u),e.translate(-s,-a);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach((function(t){if("A"===t.command){var n=t.points[4],i=t.points[5],o=t.points[4]+i,r=Math.PI/180;if(Math.abs(n-o)<r&&(r=Math.abs(n-o)),i<0)for(let i=n-r;i>o;i-=r){const n=u.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);e.push(n.x,n.y)}else for(let i=n+r;i<o;i+=r){const n=u.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let n=0;n<=1;n+=.01){const i=u.getPointOnCubicBezier(n,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(i.x,i.y)}else e=e.concat(t.points)}));for(var t,n,i=e[0],o=e[0],r=e[1],s=e[1],a=0;a<e.length/2;a++)t=e[2*a],n=e[2*a+1],isNaN(t)||(i=Math.min(i,t),o=Math.max(o,t)),isNaN(n)||(r=Math.min(r,n),s=Math.max(s,n));return{x:i,y:r,width:o-i,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){var t,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&e>this.dataArray[n].pathLength;)e-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(t=this.dataArray[n-1].points.slice(-2))[0],y:t[1]};if(e<.01)return{x:(t=this.dataArray[n].points.slice(0,2))[0],y:t[1]};var o=this.dataArray[n],r=o.points;switch(o.command){case"L":return u.getPointOnLine(e,o.start.x,o.start.y,r[0],r[1]);case"C":return u.getPointOnCubicBezier(e/o.pathLength,o.start.x,o.start.y,r[0],r[1],r[2],r[3],r[4],r[5]);case"Q":return u.getPointOnQuadraticBezier(e/o.pathLength,o.start.x,o.start.y,r[0],r[1],r[2],r[3]);case"A":var s=r[0],a=r[1],l=r[2],c=r[3],d=r[4],h=r[5],p=r[6];return d+=h*e/o.pathLength,u.getPointOnEllipticalArc(s,a,l,c,d,p)}return null}static getLineLength(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}static getPointOnLine(e,t,n,i,o,r,s){void 0===r&&(r=t),void 0===s&&(s=n);var a=(o-n)/(i-t+1e-8),l=Math.sqrt(e*e/(1+a*a));i<t&&(l*=-1);var c,d=a*l;if(i===t)c={x:r,y:s+d};else if((s-n)/(r-t+1e-8)===a)c={x:r+l,y:s+d};else{var h,u,p=this.getLineLength(t,n,i,o),f=(r-t)*(i-t)+(s-n)*(o-n);h=t+(f/=p*p)*(i-t),u=n+f*(o-n);var g=this.getLineLength(r,s,h,u),m=Math.sqrt(e*e-g*g);l=Math.sqrt(m*m/(1+a*a)),i<t&&(l*=-1),c={x:h+l,y:u+(d=a*l)}}return c}static getPointOnCubicBezier(e,t,n,i,o,r,s,a,l){function c(e){return e*e*e}function d(e){return 3*e*e*(1-e)}function h(e){return 3*e*(1-e)*(1-e)}function u(e){return(1-e)*(1-e)*(1-e)}return{x:a*c(e)+r*d(e)+i*h(e)+t*u(e),y:l*c(e)+s*d(e)+o*h(e)+n*u(e)}}static getPointOnQuadraticBezier(e,t,n,i,o,r,s){function a(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:r*a(e)+i*l(e)+t*c(e),y:s*a(e)+o*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,i,o,r){var s=Math.cos(r),a=Math.sin(r),l=n*Math.cos(o),c=i*Math.sin(o);return{x:e+(l*s-c*a),y:t+(l*a+c*s)}}static parsePathData(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)t=t.replace(new RegExp(n[i],"g"),"|"+n[i]);var o,r=t.split("|"),s=[],a=[],l=0,c=0,d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<r.length;i++){var h=r[i],u=h.charAt(0);for(h=h.slice(1),a.length=0;o=d.exec(h);)a.push(o[0]);for(var p=[],f=0,g=a.length;f<g;f++)if("00"!==a[f]){var m=parseFloat(a[f]);isNaN(m)?p.push(0):p.push(m)}else p.push(0,0);for(;p.length>0&&!isNaN(p[0]);){var v,b,y,w,k,x,S,C,E,T,_=null,A=[],O=l,M=c;switch(u){case"l":l+=p.shift(),c+=p.shift(),_="L",A.push(l,c);break;case"L":l=p.shift(),c=p.shift(),A.push(l,c);break;case"m":var I=p.shift(),D=p.shift();if(l+=I,c+=D,_="M",s.length>2&&"z"===s[s.length-1].command)for(var N=s.length-2;N>=0;N--)if("M"===s[N].command){l=s[N].points[0]+I,c=s[N].points[1]+D;break}A.push(l,c),u="l";break;case"M":l=p.shift(),c=p.shift(),_="M",A.push(l,c),u="L";break;case"h":l+=p.shift(),_="L",A.push(l,c);break;case"H":l=p.shift(),_="L",A.push(l,c);break;case"v":c+=p.shift(),_="L",A.push(l,c);break;case"V":c=p.shift(),_="L",A.push(l,c);break;case"C":A.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),c=p.shift(),A.push(l,c);break;case"c":A.push(l+p.shift(),c+p.shift(),l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),_="C",A.push(l,c);break;case"S":b=l,y=c,"C"===(v=s[s.length-1]).command&&(b=l+(l-v.points[2]),y=c+(c-v.points[3])),A.push(b,y,p.shift(),p.shift()),l=p.shift(),c=p.shift(),_="C",A.push(l,c);break;case"s":b=l,y=c,"C"===(v=s[s.length-1]).command&&(b=l+(l-v.points[2]),y=c+(c-v.points[3])),A.push(b,y,l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),_="C",A.push(l,c);break;case"Q":A.push(p.shift(),p.shift()),l=p.shift(),c=p.shift(),A.push(l,c);break;case"q":A.push(l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),_="Q",A.push(l,c);break;case"T":b=l,y=c,"Q"===(v=s[s.length-1]).command&&(b=l+(l-v.points[0]),y=c+(c-v.points[1])),l=p.shift(),c=p.shift(),_="Q",A.push(b,y,l,c);break;case"t":b=l,y=c,"Q"===(v=s[s.length-1]).command&&(b=l+(l-v.points[0]),y=c+(c-v.points[1])),l+=p.shift(),c+=p.shift(),_="Q",A.push(b,y,l,c);break;case"A":w=p.shift(),k=p.shift(),x=p.shift(),S=p.shift(),C=p.shift(),E=l,T=c,l=p.shift(),c=p.shift(),_="A",A=this.convertEndpointToCenterParameterization(E,T,l,c,S,C,w,k,x);break;case"a":w=p.shift(),k=p.shift(),x=p.shift(),S=p.shift(),C=p.shift(),E=l,T=c,l+=p.shift(),c+=p.shift(),_="A",A=this.convertEndpointToCenterParameterization(E,T,l,c,S,C,w,k,x)}s.push({command:_||u,points:A,start:{x:O,y:M},pathLength:this.calcLength(O,M,_||u,A)})}"z"!==u&&"Z"!==u||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,t,n,i){var o,r,s,a,l=u;switch(n){case"L":return l.getLineLength(e,t,i[0],i[1]);case"C":for(o=0,r=l.getPointOnCubicBezier(0,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),a=.01;a<=1;a+=.01)s=l.getPointOnCubicBezier(a,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),o+=l.getLineLength(r.x,r.y,s.x,s.y),r=s;return o;case"Q":for(o=0,r=l.getPointOnQuadraticBezier(0,e,t,i[0],i[1],i[2],i[3]),a=.01;a<=1;a+=.01)s=l.getPointOnQuadraticBezier(a,e,t,i[0],i[1],i[2],i[3]),o+=l.getLineLength(r.x,r.y,s.x,s.y),r=s;return o;case"A":o=0;var c=i[4],d=i[5],h=i[4]+d,p=Math.PI/180;if(Math.abs(c-h)<p&&(p=Math.abs(c-h)),r=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),d<0)for(a=c-p;a>h;a-=p)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),o+=l.getLineLength(r.x,r.y,s.x,s.y),r=s;else for(a=c+p;a<h;a+=p)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),o+=l.getLineLength(r.x,r.y,s.x,s.y),r=s;return s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),o+=l.getLineLength(r.x,r.y,s.x,s.y)}return 0}static convertEndpointToCenterParameterization(e,t,n,i,o,r,s,a,l){var c=l*(Math.PI/180),d=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-i)/2,h=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-i)/2,u=d*d/(s*s)+h*h/(a*a);u>1&&(s*=Math.sqrt(u),a*=Math.sqrt(u));var p=Math.sqrt((s*s*(a*a)-s*s*(h*h)-a*a*(d*d))/(s*s*(h*h)+a*a*(d*d)));o===r&&(p*=-1),isNaN(p)&&(p=0);var f=p*s*h/a,g=p*-a*d/s,m=(e+n)/2+Math.cos(c)*f-Math.sin(c)*g,v=(t+i)/2+Math.sin(c)*f+Math.cos(c)*g,b=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},y=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(b(e)*b(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(y(e,t))},k=w([1,0],[(d-f)/s,(h-g)/a]),x=[(d-f)/s,(h-g)/a],S=[(-1*d-f)/s,(-1*h-g)/a],C=w(x,S);return y(x,S)<=-1&&(C=Math.PI),y(x,S)>=1&&(C=0),0===r&&C>0&&(C-=2*Math.PI),1===r&&C<0&&(C+=2*Math.PI),[m,v,s,a,k,C,c,r]}}u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],(0,s.DA)(u),o.F.addGetterSetter(u,"data");class p extends h{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,n=this.points(),i=n,o=0!==this.tension()&&n.length>4;o&&(i=this.getTensionPoints());var r,s,a=this.pointerLength(),l=n.length;if(o){const e=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[l-2],n[l-1]],t=u.calcLength(i[i.length-4],i[i.length-3],"C",e),o=u.getPointOnQuadraticBezier(Math.min(1,1-a/t),e[0],e[1],e[2],e[3],e[4],e[5]);r=n[l-2]-o.x,s=n[l-1]-o.y}else r=n[l-2]-n[l-4],s=n[l-1]-n[l-3];var c=(Math.atan2(s,r)+t)%t,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[l-2],n[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-a,d/2),e.lineTo(-a,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),o?(r=(i[0]+i[2])/2-n[0],s=(i[1]+i[3])/2-n[1]):(r=n[2]-n[0],s=n[3]-n[1]),e.rotate((Math.atan2(-s,-r)+t)%t),e.moveTo(0,0),e.lineTo(-a,d/2),e.lineTo(-a,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}}p.prototype.className="Arrow",(0,s.DA)(p),o.F.addGetterSetter(p,"pointerLength",10,(0,a.Kg)()),o.F.addGetterSetter(p,"pointerWidth",10,(0,a.Kg)()),o.F.addGetterSetter(p,"pointerAtBeginning",!1),o.F.addGetterSetter(p,"pointerAtEnding",!0);class f extends r.b{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}f.prototype._centroid=!0,f.prototype.className="Circle",f.prototype._attrsAffectingSize=["radius"],(0,s.DA)(f),o.F.addGetterSetter(f,"radius",0,(0,a.Kg)());class g extends r.b{_sceneFunc(e){var t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}g.prototype.className="Ellipse",g.prototype._centroid=!0,g.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s.DA)(g),o.F.addComponentsGetterSetter(g,"radius",["x","y"]),o.F.addGetterSetter(g,"radiusX",0,(0,a.Kg)()),o.F.addGetterSetter(g,"radiusY",0,(0,a.Kg)());var m=n(4391);class v extends r.b{constructor(e){super(e),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image;let r;if(o){const e=this.attrs.cropWidth,i=this.attrs.cropHeight;r=e&&i?[o,this.cropX(),this.cropY(),e,i,0,0,t,n]:[o,0,0,t,n]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?m.Z.drawRoundedRectPath(e,t,n,i):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),o&&(i&&e.clip(),e.drawImage.apply(e,r))}_hitFunc(e){var t=this.width(),n=this.height(),i=this.cornerRadius();e.beginPath(),i?m.Z.drawRoundedRectPath(e,t,n,i):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(e,t,n=null){var i=m.Z.createImageElement();i.onload=function(){var e=new v({image:i});t(e)},i.onerror=n,i.crossOrigin="Anonymous",i.src=e}}v.prototype.className="Image",(0,s.DA)(v),o.F.addGetterSetter(v,"cornerRadius",0,(0,a.Jj)(4)),o.F.addGetterSetter(v,"image"),o.F.addComponentsGetterSetter(v,"crop",["x","y","width","height"]),o.F.addGetterSetter(v,"cropX",0,(0,a.Kg)()),o.F.addGetterSetter(v,"cropY",0,(0,a.Kg)()),o.F.addGetterSetter(v,"cropWidth",0,(0,a.Kg)()),o.F.addGetterSetter(v,"cropHeight",0,(0,a.Kg)());var b=n(9908),y=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],w="up",k="right",x="down",S="left",C=y.length;class E extends b.Z{constructor(e){super(e),this.on("add.konva",(function(e){this._addListeners(e.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,n=this,i=function(){n._sync()};for(t=0;t<C;t++)e.on(y[t]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,n,i,o,r,s,a=this.getText(),l=this.getTag();if(a&&l){switch(e=a.width(),t=a.height(),n=l.pointerDirection(),i=l.pointerWidth(),s=l.pointerHeight(),o=0,r=0,n){case w:o=e/2,r=-1*s;break;case k:o=e+i,r=t/2;break;case x:o=e/2,r=t+s;break;case S:o=-1*i,r=t/2}l.setAttrs({x:-1*o,y:-1*r,width:e,height:t}),a.setAttrs({x:-1*o,y:-1*r})}}}E.prototype.className="Label",(0,s.DA)(E);class T extends r.b{_sceneFunc(e){var t=this.width(),n=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),r=this.pointerHeight(),s=this.cornerRadius();let a=0,l=0,c=0,d=0;"number"==typeof s?a=l=c=d=Math.min(s,t/2,n/2):(a=Math.min(s[0]||0,t/2,n/2),l=Math.min(s[1]||0,t/2,n/2),d=Math.min(s[2]||0,t/2,n/2),c=Math.min(s[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(a,0),i===w&&(e.lineTo((t-o)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+o)/2,0)),e.lineTo(t-l,0),e.arc(t-l,l,l,3*Math.PI/2,0,!1),i===k&&(e.lineTo(t,(n-r)/2),e.lineTo(t+o,n/2),e.lineTo(t,(n+r)/2)),e.lineTo(t,n-d),e.arc(t-d,n-d,d,0,Math.PI/2,!1),i===x&&(e.lineTo((t+o)/2,n),e.lineTo(t/2,n+r),e.lineTo((t-o)/2,n)),e.lineTo(c,n),e.arc(c,n-c,c,Math.PI/2,Math.PI,!1),i===S&&(e.lineTo(0,(n+r)/2),e.lineTo(-1*o,n/2),e.lineTo(0,(n-r)/2)),e.lineTo(0,a),e.arc(a,a,a,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,n=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),r=this.width(),s=this.height();return o===w?(t-=i,s+=i):o===x?s+=i:o===S?(e-=1.5*n,r+=n):o===k&&(r+=1.5*n),{x:e,y:t,width:r,height:s}}}T.prototype.className="Tag",(0,s.DA)(T),o.F.addGetterSetter(T,"pointerDirection","none"),o.F.addGetterSetter(T,"pointerWidth",0,(0,a.Kg)()),o.F.addGetterSetter(T,"pointerHeight",0,(0,a.Kg)()),o.F.addGetterSetter(T,"cornerRadius",0,(0,a.Jj)(4));class _ extends r.b{_sceneFunc(e){var t=this.cornerRadius(),n=this.width(),i=this.height();e.beginPath(),t?m.Z.drawRoundedRectPath(e,n,i,t):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}}_.prototype.className="Rect",(0,s.DA)(_),o.F.addGetterSetter(_,"cornerRadius",0,(0,a.Jj)(4));class A extends r.b{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(var i=0;i<e;i++)n.push({x:t*Math.sin(2*i*Math.PI/e),y:-1*t*Math.cos(2*i*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();var t=e[0].x,n=e[0].y,i=e[0].x,o=e[0].y;return e.forEach((e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.y)})),{x:t,y:i,width:n-t,height:o-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}A.prototype.className="RegularPolygon",A.prototype._centroid=!0,A.prototype._attrsAffectingSize=["radius"],(0,s.DA)(A),o.F.addGetterSetter(A,"radius",0,(0,a.Kg)()),o.F.addGetterSetter(A,"sides",0,(0,a.Kg)());var O=2*Math.PI;class M extends r.b{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,O,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),O,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}M.prototype.className="Ring",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(M),o.F.addGetterSetter(M,"innerRadius",0,(0,a.Kg)()),o.F.addGetterSetter(M,"outerRadius",0,(0,a.Kg)());var I=n(5080);class D extends r.b{constructor(e){super(e),this._updated=!0,this.anim=new I.f((()=>{var e=this._updated;return this._updated=!1,e})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(e){var t=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[t],r=this.frameOffsets(),s=o[i+0],a=o[i+1],l=o[i+2],c=o[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),d)if(r){var h=r[t],u=2*n;e.drawImage(d,s,a,l,c,h[u+0],h[u+1],l,c)}else e.drawImage(d,s,a,l,c,0,0,l,c)}_hitFunc(e){var t=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[t],r=this.frameOffsets(),s=o[i+2],a=o[i+3];if(e.beginPath(),r){var l=r[t],c=2*n;e.rect(l[c+0],l[c+1],s,a)}else e.rect(0,0,s,a);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval((function(){e._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}D.prototype.className="Sprite",(0,s.DA)(D),o.F.addGetterSetter(D,"animation"),o.F.addGetterSetter(D,"animations"),o.F.addGetterSetter(D,"frameOffsets"),o.F.addGetterSetter(D,"image"),o.F.addGetterSetter(D,"frameIndex",0,(0,a.Kg)()),o.F.addGetterSetter(D,"frameRate",17,(0,a.Kg)()),o.F.backCompat(D,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class N extends r.b{_sceneFunc(e){var t=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var o=1;o<2*i;o++){var r=o%2==0?n:t,s=r*Math.sin(o*Math.PI/i),a=-1*r*Math.cos(o*Math.PI/i);e.lineTo(s,a)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}function R(e){return Array.from(e)}N.prototype.className="Star",N.prototype._centroid=!0,N.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s.DA)(N),o.F.addGetterSetter(N,"numPoints",5,(0,a.Kg)()),o.F.addGetterSetter(N,"innerRadius",0,(0,a.Kg)()),o.F.addGetterSetter(N,"outerRadius",0,(0,a.Kg)());var B,L="auto",P="justify",F="left",z="middle",H="normal",j=" ",G="none",U=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],$=U.length;function W(){return B||(B=m.Z.createCanvasElement().getContext("2d"))}class V extends r.b{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<$;t++)this.on(U[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,n=t.length;if(this.text()){var i,o=this.padding(),r=this.fontSize(),s=this.lineHeight()*r,a=this.verticalAlign(),l=0,c=this.align(),d=this.getWidth(),h=this.letterSpacing(),u=this.fill(),p=this.textDecoration(),f=-1!==p.indexOf("underline"),g=-1!==p.indexOf("line-through"),m=0,v=(m=s/2,0),b=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",z),e.setAttr("textAlign",F),a===z?l=(this.getHeight()-n*s-2*o)/2:"bottom"===a&&(l=this.getHeight()-n*s-2*o),e.translate(o,l+o),i=0;i<n;i++){v=0,b=0;var y,w,k,x=t[i],S=x.text,C=x.width,E=x.lastInParagraph;if(e.save(),"right"===c?v+=d-C-2*o:"center"===c&&(v+=(d-C-2*o)/2),f){e.save(),e.beginPath(),e.moveTo(v,m+b+Math.round(r/2)),w=0===(y=S.split(" ").length-1),k=c!==P||E?C:d-2*o,e.lineTo(v+Math.round(k),m+b+Math.round(r/2)),e.lineWidth=r/15;const t=this._getLinearGradient();e.strokeStyle=t||u,e.stroke(),e.restore()}if(g){e.save(),e.beginPath(),e.moveTo(v,m+b),w=0===(y=S.split(" ").length-1),k=c===P&&E&&!w?d-2*o:C,e.lineTo(v+Math.round(k),m+b),e.lineWidth=r/15;const t=this._getLinearGradient();e.strokeStyle=t||u,e.stroke(),e.restore()}if(0!==h||c===P){y=S.split(" ").length-1;for(var T=R(S),_=0;_<T.length;_++){var A=T[_];" "!==A||E||c!==P||(v+=(d-2*o-C)/y),this._partialTextX=v,this._partialTextY=m+b,this._partialText=A,e.fillStrokeShape(this),v+=this.measureSize(A).width+h}}else this._partialTextX=v,this._partialTextY=m+b,this._partialText=S,e.fillStrokeShape(this);e.restore(),n>1&&(m+=s)}}}_hitFunc(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=m.Z._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===L||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===L||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return m.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n=W(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:i}}_getContextFont(){return this.fontStyle()+j+this.fontVariant()+j+(this.fontSize()+"px ")+this.fontFamily().split(",").map((e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e})).join(", ")}_addTextLine(e){this.align()===P&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),n=e.length;return W().measureText(e).width+(n?t*(n-1):0)}_setTextData(){var e=this.text().split("\n"),t=+this.fontSize(),n=0,i=this.lineHeight()*t,o=this.attrs.width,r=this.attrs.height,s=o!==L&&void 0!==o,a=r!==L&&void 0!==r,l=this.padding(),c=o-2*l,d=r-2*l,h=0,u=this.wrap(),p="char"!==u&&u!==G,f=this.ellipsis();this.textArr=[],W().font=this._getContextFont();for(var g=f?this._getTextWidth("…"):0,m=0,v=e.length;m<v;++m){var b=e[m],y=this._getTextWidth(b);if(s&&y>c)for(;b.length>0;){for(var w=0,k=b.length,x="",S=0;w<k;){var C=w+k>>>1,E=b.slice(0,C+1),T=this._getTextWidth(E)+g;T<=c?(w=C+1,x=E,S=T):k=C}if(!x)break;if(p){var _,A=b[x.length];(_=(A===j||"-"===A)&&S<=c?x.length:Math.max(x.lastIndexOf(j),x.lastIndexOf("-"))+1)>0&&(w=_,x=x.slice(0,w),S=this._getTextWidth(x))}if(x=x.trimRight(),this._addTextLine(x),n=Math.max(n,S),h+=i,this._shouldHandleEllipsis(h)){this._tryToAddEllipsisToLastLine();break}if((b=(b=b.slice(w)).trimLeft()).length>0&&(y=this._getTextWidth(b))<=c){this._addTextLine(b),h+=i,n=Math.max(n,y);break}}else this._addTextLine(b),h+=i,n=Math.max(n,y),this._shouldHandleEllipsis(h)&&m<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),a&&h+i>d)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){var t=+this.fontSize(),n=this.lineHeight()*t,i=this.attrs.height,o=i!==L&&void 0!==i,r=i-2*this.padding();return!(this.wrap()!==G)||o&&e+n>r}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=e!==L&&void 0!==e,n=e-2*this.padding(),i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(o&&i){if(t)this._getTextWidth(o.text+"…")<n||(o.text=o.text.slice(0,o.text.length-3));this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+"…")}}getStrokeScaleEnabled(){return!0}}V.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},V.prototype._strokeFunc=function(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},V.prototype.className="Text",V.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s.DA)(V),o.F.overWriteSetter(V,"width",(0,a.hi)()),o.F.overWriteSetter(V,"height",(0,a.hi)()),o.F.addGetterSetter(V,"fontFamily","Arial"),o.F.addGetterSetter(V,"fontSize",12,(0,a.Kg)()),o.F.addGetterSetter(V,"fontStyle",H),o.F.addGetterSetter(V,"fontVariant",H),o.F.addGetterSetter(V,"padding",0,(0,a.Kg)()),o.F.addGetterSetter(V,"align",F),o.F.addGetterSetter(V,"verticalAlign","top"),o.F.addGetterSetter(V,"lineHeight",1,(0,a.Kg)()),o.F.addGetterSetter(V,"wrap","word"),o.F.addGetterSetter(V,"ellipsis",!1,(0,a.I0)()),o.F.addGetterSetter(V,"letterSpacing",0,(0,a.Kg)()),o.F.addGetterSetter(V,"text","",(0,a.sY)()),o.F.addGetterSetter(V,"textDecoration","");var q="normal";function Y(e){e.fillText(this.partialText,0,0)}function K(e){e.strokeText(this.partialText,0,0)}class Z extends r.b{constructor(e){super(e),this.dummyCanvas=m.Z.createCanvasElement(),this.dataArray=[],this.dataArray=u.parsePathData(this.attrs.data),this.on("dataChange.konva",(function(){this.dataArray=u.parsePathData(this.attrs.data),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),n=this.fill(),i=this.fontSize(),o=this.glyphInfo;"underline"===t&&e.beginPath();for(var r=0;r<o.length;r++){e.save();var s=o[r].p0;e.translate(s.x,s.y),e.rotate(o[r].rotation),this.partialText=o[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var n=t[0].p0;e.moveTo(n.x,n.y)}for(var i=0;i<t.length;i++){var o=t[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return m.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return V.prototype.setText.call(this,e)}_getContextFont(){return V.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,t=this._getTextSize(this.attrs.text),n=this.letterSpacing(),i=this.align(),o=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var r=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var s=0,a=0;a<e.dataArray.length;a++)e.dataArray[a].pathLength>0&&(s+=e.dataArray[a].pathLength);var l=0;"center"===i&&(l=Math.max(0,s/2-r/2)),"right"===i&&(l=Math.max(0,s-r));for(var c,d,h,p=R(this.text()),f=this.text().split(" ").length-1,g=-1,m=0,v=function(){m=0;for(var t=e.dataArray,n=g+1;n<t.length;n++){if(t[n].pathLength>0)return g=n,t[n];"M"===t[n].command&&(c={x:t[n].points[0],y:t[n].points[1]})}return{}},b=function(t){var o=e._getTextSize(t).width+n;" "===t&&"justify"===i&&(o+=(s-r)/f);var a=0,l=0;for(d=void 0;Math.abs(o-a)/o>.01&&l<20;){l++;for(var p=a;void 0===h;)(h=v())&&p+h.pathLength<o&&(p+=h.pathLength,h=void 0);if(0===Object.keys(h).length||void 0===c)return;var g=!1;switch(h.command){case"L":u.getLineLength(c.x,c.y,h.points[0],h.points[1])>o?d=u.getPointOnLine(o,c.x,c.y,h.points[0],h.points[1],c.x,c.y):h=void 0;break;case"A":var b=h.points[4],y=h.points[5],w=h.points[4]+y;0===m?m=b+1e-8:o>a?m+=Math.PI/180*y/Math.abs(y):m-=Math.PI/360*y/Math.abs(y),(y<0&&m<w||y>=0&&m>w)&&(m=w,g=!0),d=u.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],m,h.points[6]);break;case"C":0===m?m=o>h.pathLength?1e-8:o/h.pathLength:o>a?m+=(o-a)/h.pathLength/2:m=Math.max(m-(a-o)/h.pathLength/2,0),m>1&&(m=1,g=!0),d=u.getPointOnCubicBezier(m,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);break;case"Q":0===m?m=o/h.pathLength:o>a?m+=(o-a)/h.pathLength:m-=(a-o)/h.pathLength,m>1&&(m=1,g=!0),d=u.getPointOnQuadraticBezier(m,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3])}void 0!==d&&(a=u.getLineLength(c.x,c.y,d.x,d.y)),g&&(g=!1,h=void 0)}},y=l/(e._getTextSize("C").width+n)-1,w=0;w<y&&(b("C"),void 0!==c&&void 0!==d);w++)c=d;for(var k=0;k<p.length&&(b(p[k]),void 0!==c&&void 0!==d);k++){var x=u.getLineLength(c.x,c.y,d.x,d.y),S=0;if(o)try{S=o(p[k-1],p[k])*this.fontSize()}catch(e){S=0}c.x+=S,d.x+=S,this.textWidth+=S;var C=u.getPointOnLine(S+x/2,c.x,c.y,d.x,d.y),E=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:C.x,transposeY:C.y,text:p[k],rotation:E,p0:c,p1:d}),c=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach((function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)}));for(var t,n,i=e[0]||0,o=e[0]||0,r=e[1]||0,s=e[1]||0,a=0;a<e.length/2;a++)t=e[2*a],n=e[2*a+1],i=Math.min(i,t),o=Math.max(o,t),r=Math.min(r,n),s=Math.max(s,n);var l=this.fontSize();return{x:i-l/2,y:r-l/2,width:o-i+l,height:s-r+l}}destroy(){return m.Z.releaseCanvas(this.dummyCanvas),super.destroy()}}Z.prototype._fillFunc=Y,Z.prototype._strokeFunc=K,Z.prototype._fillFuncHit=Y,Z.prototype._strokeFuncHit=K,Z.prototype.className="TextPath",Z.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s.DA)(Z),o.F.addGetterSetter(Z,"data"),o.F.addGetterSetter(Z,"fontFamily","Arial"),o.F.addGetterSetter(Z,"fontSize",12,(0,a.Kg)()),o.F.addGetterSetter(Z,"fontStyle",q),o.F.addGetterSetter(Z,"align","left"),o.F.addGetterSetter(Z,"letterSpacing",0,(0,a.Kg)()),o.F.addGetterSetter(Z,"textBaseline","middle"),o.F.addGetterSetter(Z,"fontVariant",q),o.F.addGetterSetter(Z,"text",""),o.F.addGetterSetter(Z,"textDecoration",null),o.F.addGetterSetter(Z,"kerningFunc",null);var X=n(8826),J="tr-konva",Q=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((e=>e+`.${J}`)).join(" "),ee="nodesRect",te=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],ne={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const ie="ontouchstart"in s.So._global;var oe=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function re(e,t,n){const i=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),o=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:i,y:o})}function se(e,t){const n=function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e);return re(e,t,n)}class ae extends b.Z{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Q,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return m.Z.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return J+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter((e=>!e.isAncestorOf(this)||(m.Z.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));return this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},n=e._attrsAffectingSize.map((e=>e+"Change."+this._getEventNamespace())).join(" ");e.on(n,t),e.on(te.map((e=>e+`.${this._getEventNamespace()}`)).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,(n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)})),e.on(`dragmove.${this._getEventNamespace()}`,(n=>{if(!t)return;const i=e.getAbsolutePosition(),o=i.x-t.x,r=i.y-t.y;this.nodes().forEach((t=>{if(t===e)return;if(t.isDragging())return;const i=t.getAbsolutePosition();t.setAbsolutePosition({x:i.x+o,y:i.y+r}),t.startDrag(n)})),t=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((e=>{e.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ee),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ee,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(n),r=e.getAbsolutePosition(n),a=i.x*o.x-e.offsetX()*o.x,l=i.y*o.y-e.offsetY()*o.y;const c=(s.So.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return re({x:r.x+a*Math.cos(c)+l*Math.sin(-c),y:r.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*o.x,height:i.height*o.y,rotation:c},-s.So.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map((t=>{const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var i=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],o=t.getAbsoluteTransform();i.forEach((function(t){var n=o.point(t);e.push(n)}))}));const t=new m.w;var n,i,o,r;t.rotate(-s.So.getAngle(this.rotation())),e.forEach((function(e){var s=t.point(e);void 0===n&&(n=o=s.x,i=r=s.y),n=Math.min(n,s.x),i=Math.min(i,s.y),o=Math.max(o,s.x),r=Math.max(r,s.y)})),t.invert();const a=t.point({x:n,y:i});return{x:a.x,y:a.y,width:o-n,height:r-i,rotation:s.So.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),oe.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var t=new _({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ie?10:"auto"}),n=this;t.on("mousedown touchstart",(function(e){n._handleMouseDown(e)})),t.on("dragstart",(e=>{t.stopDrag(),e.cancelBubble=!0})),t.on("dragend",(e=>{e.cancelBubble=!0})),t.on("mouseenter",(()=>{var n=s.So.getAngle(this.rotation()),i=function(e,t){if("rotater"===e)return"crosshair";t+=m.Z.degToRad(ne[e]||0);var n=(m.Z.radToDeg(t)%360+360)%360;return m.Z._inRange(n,337.5,360)||m.Z._inRange(n,0,22.5)?"ns-resize":m.Z._inRange(n,22.5,67.5)?"nesw-resize":m.Z._inRange(n,67.5,112.5)?"ew-resize":m.Z._inRange(n,112.5,157.5)?"nwse-resize":m.Z._inRange(n,157.5,202.5)?"ns-resize":m.Z._inRange(n,202.5,247.5)?"nesw-resize":m.Z._inRange(n,247.5,292.5)?"ew-resize":m.Z._inRange(n,292.5,337.5)?"nwse-resize":(m.Z.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(e,n);t.getStage().content&&(t.getStage().content.style.cursor=i),this._cursorChange=!0})),t.on("mouseout",(()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(t)}_createBack(){var e=new r.b({name:"back",width:0,height:0,draggable:!0,sceneFunc(e){var t=this.getParent(),n=t.padding();e.beginPath(),e.rect(-n,-n,this.width()+2*n,this.height()+2*n),e.moveTo(this.width()/2,-n),t.rotateEnabled()&&e.lineTo(this.width()/2,-t.rotateAnchorOffset()*m.Z._sign(this.height())-n),e.fillStrokeShape(this)},hitFunc:(e,t)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(e=>{e.cancelBubble=!0})),e.on("dragmove",(e=>{e.cancelBubble=!0})),e.on("dragend",(e=>{e.cancelBubble=!0})),this.on("dragmove",(e=>{this.update()}))}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),n=t.width,i=t.height,o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(n/o),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var r=e.target.getAbsolutePosition(),s=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-r.x,y:s.y-r.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach((t=>{t._fire("transformstart",{evt:e.evt,target:t})}))}_handleMouseMove(e){var t,n,i,o=this.findOne("."+this._movingAnchorName),r=o.getStage();r.setPointersPositions(e);const a=r.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),o.setAbsolutePosition(l);const d=o.getAbsolutePosition();if(c.x!==d.x||c.y!==d.y)if("rotater"!==this._movingAnchorName){var h=this.keepRatio()||e.shiftKey,u=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(h){var p=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(p.x-o.x(),2)+Math.pow(p.y-o.y(),2));var f=this.findOne(".top-left").x()>p.x?-1:1,g=this.findOne(".top-left").y()>p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".top-left").x(p.x-t),this.findOne(".top-left").y(p.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(o.y());else if("top-right"===this._movingAnchorName){if(h){p=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-p.x,2)+Math.pow(p.y-o.y(),2));f=this.findOne(".top-right").x()<p.x?-1:1,g=this.findOne(".top-right").y()>p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".top-right").x(p.x+t),this.findOne(".top-right").y(p.y-n)}var m=o.position();this.findOne(".top-left").y(m.y),this.findOne(".bottom-right").x(m.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(o.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(o.x());else if("bottom-left"===this._movingAnchorName){if(h){p=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(p.x-o.x(),2)+Math.pow(o.y()-p.y,2));f=p.x<o.x()?-1:1,g=o.y()<p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,o.x(p.x-t),o.y(p.y+n)}m=o.position(),this.findOne(".top-left").x(m.x),this.findOne(".bottom-right").y(m.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(o.y());else if("bottom-right"===this._movingAnchorName){if(h){p=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-p.x,2)+Math.pow(o.y()-p.y,2));f=this.findOne(".bottom-right").x()<p.x?-1:1,g=this.findOne(".bottom-right").y()<p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".bottom-right").x(p.x+t),this.findOne(".bottom-right").y(p.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(u=this.centeredScaling()||e.altKey){var v=this.findOne(".top-left"),b=this.findOne(".bottom-right"),y=v.x(),w=v.y(),k=this.getWidth()-b.x(),x=this.getHeight()-b.y();b.move({x:-y,y:-w}),v.move({x:k,y:x})}var S=this.findOne(".top-left").getAbsolutePosition();t=S.x,n=S.y;var C=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),E=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:C,height:E,rotation:s.So.getAngle(this.rotation())},e)}else{var T=this._getNodeRect();t=o.x()-T.width/2,n=-o.y()+T.height/2;let i=Math.atan2(-n,t)+Math.PI/2;T.height<0&&(i-=Math.PI);const r=s.So.getAngle(this.rotation())+i,a=s.So.getAngle(this.rotationSnapTolerance()),l=se(T,function(e,t,n){let i=t;for(let o=0;o<e.length;o++){const r=s.So.getAngle(e[o]),a=Math.abs(r-t)%(2*Math.PI);Math.min(a,2*Math.PI-a)<n&&(i=r)}return i}(this.rotationSnaps(),r,a)-T.rotation);this._fitNodesInto(l,e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach((t=>{t._fire("transformend",{evt:e,target:t})})),this._movingAnchorName=null}}_fitNodesInto(e,t){var n=this._getNodeRect();if(m.Z._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(m.Z._inRange(e.height,2*-this.padding()-1,1))return void this.update();const i=this.flipEnabled();var o=new m.w;if(o.rotate(s.So.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const t=o.point({x:2*-this.padding(),y:0});if(e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,!i)return void this.update()}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const t=o.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const t=o.point({x:0,y:2*-this.padding()});if(e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const t=o.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){const t=this.boundBoxFunc()(n,e);t?e=t:m.Z.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const r=1e7,a=new m.w;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/r,n.height/r);const l=new m.w;l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(e.width/r,e.height/r);const c=l.multiply(a.invert());this._nodes.forEach((e=>{var n;const i=e.getParent().getAbsoluteTransform(),o=e.getTransform().copy();o.translate(e.offsetX(),e.offsetY());const r=new m.w;r.multiply(i.copy().invert()).multiply(c).multiply(i).multiply(o);const s=r.decompose();e.setAttrs(s),this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e}),null===(n=e.getLayer())||void 0===n||n.batchDraw()})),this.rotation(m.Z._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(m.Z._getRotation(t.rotation));var n=t.width,i=t.height,o=this.enabledAnchors(),r=this.resizeEnabled(),s=this.padding(),a=this.anchorSize();this.find("._anchor").forEach((e=>{e.setAttrs({width:a,height:a,offsetX:a/2,offsetY:a/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:a/2+s,offsetY:a/2+s,visible:r&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:a/2+s,visible:r&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:a/2-s,offsetY:a/2+s,visible:r&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:a/2+s,visible:r&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:a/2-s,visible:r&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:a/2+s,offsetY:a/2-s,visible:r&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:a/2-s,visible:r&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:a/2-s,offsetY:a/2-s,visible:r&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*m.Z._sign(i)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),b.Z.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return X.N.prototype.toObject.call(this)}clone(e){return X.N.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ae.prototype.className="Transformer",(0,s.DA)(ae),o.F.addGetterSetter(ae,"enabledAnchors",oe,(function(e){return e instanceof Array||m.Z.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach((function(e){-1===oe.indexOf(e)&&m.Z.warn("Unknown anchor name: "+e+". Available names are: "+oe.join(", "))})),e||[]})),o.F.addGetterSetter(ae,"flipEnabled",!0,(0,a.I0)()),o.F.addGetterSetter(ae,"resizeEnabled",!0),o.F.addGetterSetter(ae,"anchorSize",10,(0,a.Kg)()),o.F.addGetterSetter(ae,"rotateEnabled",!0),o.F.addGetterSetter(ae,"rotationSnaps",[]),o.F.addGetterSetter(ae,"rotateAnchorOffset",50,(0,a.Kg)()),o.F.addGetterSetter(ae,"rotationSnapTolerance",5,(0,a.Kg)()),o.F.addGetterSetter(ae,"borderEnabled",!0),o.F.addGetterSetter(ae,"anchorStroke","rgb(0, 161, 255)"),o.F.addGetterSetter(ae,"anchorStrokeWidth",1,(0,a.Kg)()),o.F.addGetterSetter(ae,"anchorFill","white"),o.F.addGetterSetter(ae,"anchorCornerRadius",0,(0,a.Kg)()),o.F.addGetterSetter(ae,"borderStroke","rgb(0, 161, 255)"),o.F.addGetterSetter(ae,"borderStrokeWidth",1,(0,a.Kg)()),o.F.addGetterSetter(ae,"borderDash"),o.F.addGetterSetter(ae,"keepRatio",!0),o.F.addGetterSetter(ae,"centeredScaling",!1),o.F.addGetterSetter(ae,"ignoreStroke",!1),o.F.addGetterSetter(ae,"padding",0,(0,a.Kg)()),o.F.addGetterSetter(ae,"node"),o.F.addGetterSetter(ae,"nodes"),o.F.addGetterSetter(ae,"boundBoxFunc"),o.F.addGetterSetter(ae,"anchorDragBoundFunc"),o.F.addGetterSetter(ae,"shouldOverdrawWholeArea",!1),o.F.addGetterSetter(ae,"useSingleNodeRotation",!0),o.F.backCompat(ae,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class le extends r.b{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,s.So.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}function ce(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}le.prototype.className="Wedge",le.prototype._centroid=!0,le.prototype._attrsAffectingSize=["radius"],(0,s.DA)(le),o.F.addGetterSetter(le,"radius",0,(0,a.Kg)()),o.F.addGetterSetter(le,"angle",0,(0,a.Kg)()),o.F.addGetterSetter(le,"clockwise",!1),o.F.backCompat(le,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var de=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],he=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];o.F.addGetterSetter(X.N,"blurRadius",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"brightness",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"contrast",0,(0,a.Kg)(),o.F.afterSetFilter);function ue(e,t,n,i,o){var r=n-t,s=o-i;return 0===r?i+s/2:0===s?i:s*((e-t)/r)+i}o.F.addGetterSetter(X.N,"embossStrength",.5,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"embossWhiteLevel",.5,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"embossDirection","top-left",null,o.F.afterSetFilter),o.F.addGetterSetter(X.N,"embossBlend",!1,null,o.F.afterSetFilter);o.F.addGetterSetter(X.N,"enhance",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"hue",0,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"saturation",0,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"luminance",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"hue",0,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"saturation",0,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"value",0,(0,a.Kg)(),o.F.afterSetFilter);function pe(e,t,n){var i=4*(n*e.width+t),o=[];return o.push(e.data[i++],e.data[i++],e.data[i++],e.data[i++]),o}function fe(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}o.F.addGetterSetter(X.N,"kaleidoscopePower",2,(0,a.Kg)(),o.F.afterSetFilter),o.F.addGetterSetter(X.N,"kaleidoscopeAngle",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"threshold",0,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"noise",.2,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"pixelSize",8,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"levels",.5,(0,a.Kg)(),o.F.afterSetFilter);o.F.addGetterSetter(X.N,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),o.F.addGetterSetter(X.N,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),o.F.addGetterSetter(X.N,"blue",0,a.xj,o.F.afterSetFilter);o.F.addGetterSetter(X.N,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),o.F.addGetterSetter(X.N,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),o.F.addGetterSetter(X.N,"blue",0,a.xj,o.F.afterSetFilter),o.F.addGetterSetter(X.N,"alpha",1,(function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}));o.F.addGetterSetter(X.N,"threshold",.5,(0,a.Kg)(),o.F.afterSetFilter);const ge=i.S.Util._assign(i.S,{Arc:l,Arrow:p,Circle:f,Ellipse:g,Image:v,Label:E,Tag:T,Line:h,Path:u,Rect:_,RegularPolygon:A,Ring:M,Sprite:D,Star:N,Text:V,TextPath:Z,Transformer:ae,Wedge:le,Filters:{Blur:function(e){var t=Math.round(this.blurRadius());t>0&&function(e,t){var n,i,o,r,s,a,l,c,d,h,u,p,f,g,m,v,b,y,w,k,x,S,C,E,T=e.data,_=e.width,A=e.height,O=t+t+1,M=_-1,I=A-1,D=t+1,N=D*(D+1)/2,R=new ce,B=null,L=R,P=null,F=null,z=de[t],H=he[t];for(o=1;o<O;o++)L=L.next=new ce,o===D&&(B=L);for(L.next=R,l=a=0,i=0;i<A;i++){for(v=b=y=w=c=d=h=u=0,p=D*(k=T[a]),f=D*(x=T[a+1]),g=D*(S=T[a+2]),m=D*(C=T[a+3]),c+=N*k,d+=N*x,h+=N*S,u+=N*C,L=R,o=0;o<D;o++)L.r=k,L.g=x,L.b=S,L.a=C,L=L.next;for(o=1;o<D;o++)r=a+((M<o?M:o)<<2),c+=(L.r=k=T[r])*(E=D-o),d+=(L.g=x=T[r+1])*E,h+=(L.b=S=T[r+2])*E,u+=(L.a=C=T[r+3])*E,v+=k,b+=x,y+=S,w+=C,L=L.next;for(P=R,F=B,n=0;n<_;n++)T[a+3]=C=u*z>>H,0!==C?(C=255/C,T[a]=(c*z>>H)*C,T[a+1]=(d*z>>H)*C,T[a+2]=(h*z>>H)*C):T[a]=T[a+1]=T[a+2]=0,c-=p,d-=f,h-=g,u-=m,p-=P.r,f-=P.g,g-=P.b,m-=P.a,r=l+((r=n+t+1)<M?r:M)<<2,c+=v+=P.r=T[r],d+=b+=P.g=T[r+1],h+=y+=P.b=T[r+2],u+=w+=P.a=T[r+3],P=P.next,p+=k=F.r,f+=x=F.g,g+=S=F.b,m+=C=F.a,v-=k,b-=x,y-=S,w-=C,F=F.next,a+=4;l+=_}for(n=0;n<_;n++){for(b=y=w=v=d=h=u=c=0,p=D*(k=T[a=n<<2]),f=D*(x=T[a+1]),g=D*(S=T[a+2]),m=D*(C=T[a+3]),c+=N*k,d+=N*x,h+=N*S,u+=N*C,L=R,o=0;o<D;o++)L.r=k,L.g=x,L.b=S,L.a=C,L=L.next;for(s=_,o=1;o<=t;o++)a=s+n<<2,c+=(L.r=k=T[a])*(E=D-o),d+=(L.g=x=T[a+1])*E,h+=(L.b=S=T[a+2])*E,u+=(L.a=C=T[a+3])*E,v+=k,b+=x,y+=S,w+=C,L=L.next,o<I&&(s+=_);for(a=n,P=R,F=B,i=0;i<A;i++)T[3+(r=a<<2)]=C=u*z>>H,C>0?(C=255/C,T[r]=(c*z>>H)*C,T[r+1]=(d*z>>H)*C,T[r+2]=(h*z>>H)*C):T[r]=T[r+1]=T[r+2]=0,c-=p,d-=f,h-=g,u-=m,p-=P.r,f-=P.g,g-=P.b,m-=P.a,r=n+((r=i+D)<I?r:I)*_<<2,c+=v+=P.r=T[r],d+=b+=P.g=T[r+1],h+=y+=P.b=T[r+2],u+=w+=P.a=T[r+3],P=P.next,p+=k=F.r,f+=x=F.g,g+=S=F.b,m+=C=F.a,v-=k,b-=x,y-=S,w-=C,F=F.next,a+=_}}(e,t)},Brighten:function(e){var t,n=255*this.brightness(),i=e.data,o=i.length;for(t=0;t<o;t+=4)i[t]+=n,i[t+1]+=n,i[t+2]+=n},Contrast:function(e){var t,n=Math.pow((this.contrast()+100)/100,2),i=e.data,o=i.length,r=150,s=150,a=150;for(t=0;t<o;t+=4)r=i[t],s=i[t+1],a=i[t+2],r/=255,r-=.5,r*=n,r+=.5,s/=255,s-=.5,s*=n,s+=.5,a/=255,a-=.5,a*=n,a+=.5,r=(r*=255)<0?0:r>255?255:r,s=(s*=255)<0?0:s>255?255:s,a=(a*=255)<0?0:a>255?255:a,i[t]=r,i[t+1]=s,i[t+2]=a},Emboss:function(e){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),o=this.embossBlend(),r=0,s=0,a=e.data,l=e.width,c=e.height,d=4*l,h=c;switch(i){case"top-left":r=-1,s=-1;break;case"top":r=-1,s=0;break;case"top-right":r=-1,s=1;break;case"right":r=0,s=1;break;case"bottom-right":r=1,s=1;break;case"bottom":r=1,s=0;break;case"bottom-left":r=1,s=-1;break;case"left":r=0,s=-1;break;default:m.Z.error("Unknown emboss direction: "+i)}do{var u=(h-1)*d,p=r;h+p<1&&(p=0),h+p>c&&(p=0);var f=(h-1+p)*l*4,g=l;do{var v=u+4*(g-1),b=s;g+b<1&&(b=0),g+b>l&&(b=0);var y=f+4*(g-1+b),w=a[v]-a[y],k=a[v+1]-a[y+1],x=a[v+2]-a[y+2],S=w,C=S>0?S:-S;if((k>0?k:-k)>C&&(S=k),(x>0?x:-x)>C&&(S=x),S*=t,o){var E=a[v]+S,T=a[v+1]+S,_=a[v+2]+S;a[v]=E>255?255:E<0?0:E,a[v+1]=T>255?255:T<0?0:T,a[v+2]=_>255?255:_<0?0:_}else{var A=n-S;A<0?A=0:A>255&&(A=255),a[v]=a[v+1]=a[v+2]=A}}while(--g)}while(--h)},Enhance:function(e){var t,n,i,o,r=e.data,s=r.length,a=r[0],l=a,c=r[1],d=c,h=r[2],u=h,p=this.enhance();if(0!==p){for(o=0;o<s;o+=4)(t=r[o+0])<a?a=t:t>l&&(l=t),(n=r[o+1])<c?c=n:n>d&&(d=n),(i=r[o+2])<h?h=i:i>u&&(u=i);var f,g,m,v,b,y,w,k,x;for(l===a&&(l=255,a=0),d===c&&(d=255,c=0),u===h&&(u=255,h=0),p>0?(g=l+p*(255-l),m=a-p*(a-0),b=d+p*(255-d),y=c-p*(c-0),k=u+p*(255-u),x=h-p*(h-0)):(g=l+p*(l-(f=.5*(l+a))),m=a+p*(a-f),b=d+p*(d-(v=.5*(d+c))),y=c+p*(c-v),k=u+p*(u-(w=.5*(u+h))),x=h+p*(h-w)),o=0;o<s;o+=4)r[o+0]=ue(r[o+0],a,l,m,g),r[o+1]=ue(r[o+1],c,d,y,b),r[o+2]=ue(r[o+2],h,u,x,k)}},Grayscale:function(e){var t,n,i=e.data,o=i.length;for(t=0;t<o;t+=4)n=.34*i[t]+.5*i[t+1]+.16*i[t+2],i[t]=n,i[t+1]=n,i[t+2]=n},HSL:function(e){var t,n,i,o,r,s=e.data,a=s.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,d=127*this.luminance(),h=1*l*Math.cos(c*Math.PI/180),u=1*l*Math.sin(c*Math.PI/180),p=.299+.701*h+.167*u,f=.587-.587*h+.33*u,g=.114-.114*h-.497*u,m=.299-.299*h-.328*u,v=.587+.413*h+.035*u,b=.114-.114*h+.293*u,y=.299-.3*h+1.25*u,w=.587-.586*h-1.05*u,k=.114+.886*h-.2*u;for(t=0;t<a;t+=4)n=s[t+0],i=s[t+1],o=s[t+2],r=s[t+3],s[t+0]=p*n+f*i+g*o+d,s[t+1]=m*n+v*i+b*o+d,s[t+2]=y*n+w*i+k*o+d,s[t+3]=r},HSV:function(e){var t,n,i,o,r,s=e.data,a=s.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(d*Math.PI/180),u=l*c*Math.sin(d*Math.PI/180),p=.299*l+.701*h+.167*u,f=.587*l-.587*h+.33*u,g=.114*l-.114*h-.497*u,m=.299*l-.299*h-.328*u,v=.587*l+.413*h+.035*u,b=.114*l-.114*h+.293*u,y=.299*l-.3*h+1.25*u,w=.587*l-.586*h-1.05*u,k=.114*l+.886*h-.2*u;for(t=0;t<a;t+=4)n=s[t+0],i=s[t+1],o=s[t+2],r=s[t+3],s[t+0]=p*n+f*i+g*o,s[t+1]=m*n+v*i+b*o,s[t+2]=y*n+w*i+k*o,s[t+3]=r},Invert:function(e){var t,n=e.data,i=n.length;for(t=0;t<i;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]},Kaleidoscope:function(e){var t,n,i,o,r,s,a,l,c,d=e.width,h=e.height,u=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),f=Math.floor(d*(p%360)/360);if(!(u<1)){var g=m.Z.createCanvasElement();g.width=d,g.height=h;var v=g.getContext("2d").getImageData(0,0,d,h);m.Z.releaseCanvas(g),function(e,t,n){var i,o,r,s,a=e.data,l=t.data,c=e.width,d=e.height,h=n.polarCenterX||c/2,u=n.polarCenterY||d/2,p=0,f=0,g=0,m=0,v=Math.sqrt(h*h+u*u);o=c-h,r=d-u,v=(s=Math.sqrt(o*o+r*r))>v?s:v;var b,y,w,k,x=d,S=c,C=360/S*Math.PI/180;for(y=0;y<S;y+=1)for(w=Math.sin(y*C),k=Math.cos(y*C),b=0;b<x;b+=1)o=Math.floor(h+v*b/x*k),p=a[0+(i=4*((r=Math.floor(u+v*b/x*w))*c+o))],f=a[i+1],g=a[i+2],m=a[i+3],l[0+(i=4*(y+b*c))]=p,l[i+1]=f,l[i+2]=g,l[i+3]=m}(e,v,{polarCenterX:d/2,polarCenterY:h/2});for(var b=d/Math.pow(2,u);b<=8;)b*=2,u-=1;var y=b=Math.ceil(b),w=0,k=y,x=1;for(f+b>d&&(w=y,k=0,x=-1),n=0;n<h;n+=1)for(t=w;t!==k;t+=x)l=4*(d*n+Math.round(t+f)%d),o=v.data[l+0],r=v.data[l+1],s=v.data[l+2],a=v.data[l+3],c=4*(d*n+t),v.data[c+0]=o,v.data[c+1]=r,v.data[c+2]=s,v.data[c+3]=a;for(n=0;n<h;n+=1)for(y=Math.floor(b),i=0;i<u;i+=1){for(t=0;t<y+1;t+=1)l=4*(d*n+t),o=v.data[l+0],r=v.data[l+1],s=v.data[l+2],a=v.data[l+3],c=4*(d*n+2*y-t-1),v.data[c+0]=o,v.data[c+1]=r,v.data[c+2]=s,v.data[c+3]=a;y*=2}!function(e,t,n){var i,o,r,s,a,l,c=e.data,d=t.data,h=e.width,u=e.height,p=n.polarCenterX||h/2,f=n.polarCenterY||u/2,g=0,m=0,v=0,b=0,y=Math.sqrt(p*p+f*f);o=h-p,r=u-f,y=(l=Math.sqrt(o*o+r*r))>y?l:y;var w,k,x,S=u,C=h,E=n.polarRotation||0;for(o=0;o<h;o+=1)for(r=0;r<u;r+=1)s=o-p,a=r-f,w=Math.sqrt(s*s+a*a)*S/y,k=(k=(180*Math.atan2(a,s)/Math.PI+360+E)%360)*C/360,x=Math.floor(k),g=c[0+(i=4*(Math.floor(w)*h+x))],m=c[i+1],v=c[i+2],b=c[i+3],d[0+(i=4*(r*h+o))]=g,d[i+1]=m,d[i+2]=v,d[i+3]=b}(v,e,{polarRotation:0})}},Mask:function(e){var t=function(e,t){var n=pe(e,0,0),i=pe(e,e.width-1,0),o=pe(e,0,e.height-1),r=pe(e,e.width-1,e.height-1),s=t||10;if(fe(n,i)<s&&fe(i,r)<s&&fe(r,o)<s&&fe(o,n)<s){for(var a=function(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([i,n,r,o]),l=[],c=0;c<e.width*e.height;c++){var d=fe(a,[e.data[4*c],e.data[4*c+1],e.data[4*c+2]]);l[c]=d<s?0:255}return l}}(e,this.threshold());return t&&function(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t=function(e,t,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;a<n;a++)for(var l=0;l<t;l++){for(var c=a*t+l,d=0,h=0;h<o;h++)for(var u=0;u<o;u++){var p=a+h-r,f=l+u-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[h*o+u];d+=e[p*t+f]*g}}s[c]=d}return s}(t=function(e,t,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;a<n;a++)for(var l=0;l<t;l++){for(var c=a*t+l,d=0,h=0;h<o;h++)for(var u=0;u<o;u++){var p=a+h-r,f=l+u-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[h*o+u];d+=e[p*t+f]*g}}s[c]=d>=1020?255:0}return s}(t=function(e,t,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),s=[],a=0;a<n;a++)for(var l=0;l<t;l++){for(var c=a*t+l,d=0,h=0;h<o;h++)for(var u=0;u<o;u++){var p=a+h-r,f=l+u-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[h*o+u];d+=e[p*t+f]*g}}s[c]=2040===d?255:0}return s}(t,e.width,e.height),e.width,e.height),e.width,e.height)),e},Noise:function(e){var t,n=255*this.noise(),i=e.data,o=i.length,r=n/2;for(t=0;t<o;t+=4)i[t+0]+=r-2*r*Math.random(),i[t+1]+=r-2*r*Math.random(),i[t+2]+=r-2*r*Math.random()},Pixelate:function(e){var t,n,i,o,r,s,a,l,c,d,h,u,p,f,g=Math.ceil(this.pixelSize()),v=e.width,b=e.height,y=Math.ceil(v/g),w=Math.ceil(b/g),k=e.data;if(g<=0)m.Z.error("pixelSize value can not be <= 0");else for(u=0;u<y;u+=1)for(p=0;p<w;p+=1){for(o=0,r=0,s=0,a=0,c=(l=u*g)+g,h=(d=p*g)+g,f=0,t=l;t<c;t+=1)if(!(t>=v))for(n=d;n<h;n+=1)n>=b||(o+=k[(i=4*(v*n+t))+0],r+=k[i+1],s+=k[i+2],a+=k[i+3],f+=1);for(o/=f,r/=f,s/=f,a/=f,t=l;t<c;t+=1)if(!(t>=v))for(n=d;n<h;n+=1)n>=b||(k[(i=4*(v*n+t))+0]=o,k[i+1]=r,k[i+2]=s,k[i+3]=a)}},Posterize:function(e){var t,n=Math.round(254*this.levels())+1,i=e.data,o=i.length,r=255/n;for(t=0;t<o;t+=1)i[t]=Math.floor(i[t]/r)*r},RGB:function(e){var t,n,i=e.data,o=i.length,r=this.red(),s=this.green(),a=this.blue();for(t=0;t<o;t+=4)n=(.34*i[t]+.5*i[t+1]+.16*i[t+2])/255,i[t]=n*r,i[t+1]=n*s,i[t+2]=n*a,i[t+3]=i[t+3]},RGBA:function(e){var t,n,i=e.data,o=i.length,r=this.red(),s=this.green(),a=this.blue(),l=this.alpha();for(t=0;t<o;t+=4)n=1-l,i[t]=r*l+i[t]*n,i[t+1]=s*l+i[t+1]*n,i[t+2]=a*l+i[t+2]*n},Sepia:function(e){var t,n,i,o,r=e.data,s=r.length;for(t=0;t<s;t+=4)n=r[t+0],i=r[t+1],o=r[t+2],r[t+0]=Math.min(255,.393*n+.769*i+.189*o),r[t+1]=Math.min(255,.349*n+.686*i+.168*o),r[t+2]=Math.min(255,.272*n+.534*i+.131*o)},Solarize:function(e){var t=e.data,n=e.width,i=4*n,o=e.height;do{var r=(o-1)*i,s=n;do{var a=r+4*(s-1),l=t[a],c=t[a+1],d=t[a+2];l>127&&(l=255-l),c>127&&(c=255-c),d>127&&(d=255-d),t[a]=l,t[a+1]=c,t[a+2]=d}while(--s)}while(--o)},Threshold:function(e){var t,n=255*this.threshold(),i=e.data,o=i.length;for(t=0;t<o;t+=1)i[t]=i[t]<n?0:255}}})},3416:(e,t,n)=>{"use strict";n.d(t,{kP:()=>o,x0:()=>r});let i=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,t=21)=>((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*t/e.length);return(r=t)=>{let s="";for(;;){let t=n(o),a=o;for(;a--;)if(s+=e[t[a]&i]||"",s.length===r)return s}}})(e,t,i),r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},5804:(e,t,n)=>{"use strict";n.d(t,{NE:()=>s,QF:()=>T,QK:()=>p,YR:()=>I,Y_:()=>h,td:()=>b,uJ:()=>C,uo:()=>g,w9:()=>E,ym:()=>S});var i=n(6560),o=n(7823),r=n(2376);const s=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function a(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}function l(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}function c(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function d(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const h=(e,t,n)=>{let s=d(e,n);if(!s)return!1;let a=u(s);if(!a)return!1;let c=a.nodeAfter;if(y(e,a,t))return!0;if(0==s.parent.content.size&&(l(c,"start")||r.qv.isSelectable(c))){let n=(0,i.dR)(e.doc,s.before(),s.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let i=e.tr.step(n);i.setSelection(l(c,"start")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(a.pos)),1):r.qv.create(i.doc,i.mapping.map(a.pos))),t(i.scrollIntoView())}return!0}}return!(!c.isAtom||a.depth!=s.depth-1)&&(t&&t(e.tr.delete(a.pos,a.pos+c.nodeSize).scrollIntoView()),!0)};function u(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const p=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function f(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const g=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=f(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(t){let i=n.after(),o=e.tr.replaceWith(i,i,a.createAndFill());o.setSelection(r.Y1.near(o.doc.resolve(i),1)),t(o.scrollIntoView())}return!0};const m=(e,t)=>{let{$from:n,$to:o}=e.selection;if(e.selection instanceof r.qv&&e.selection.node.isBlock)return!(!n.parentOffset||!(0,i.Ax)(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){let s=o.parentOffset==o.parent.content.size,a=e.tr;(e.selection instanceof r.Bs||e.selection instanceof r.C1)&&a.deleteSelection();let l=0==n.depth?null:f(n.node(-1).contentMatchAt(n.indexAfter(-1))),c=v&&v(o.parent,s),d=c?[c]:s&&l?[{type:l}]:void 0,h=(0,i.Ax)(a.doc,a.mapping.map(n.pos),1,d);if(d||h||!(0,i.Ax)(a.doc,a.mapping.map(n.pos),1,l?[{type:l}]:void 0)||(l&&(d=[{type:l}]),h=!0),h&&(a.split(a.mapping.map(n.pos),1,d),!s&&!n.parentOffset&&n.parent.type!=l)){let e=a.mapping.map(n.before()),t=a.doc.resolve(e);l&&n.node(-1).canReplaceWith(t.index(),t.index()+1,l)&&a.setNodeMarkup(a.mapping.map(n.before()),l)}t(a.scrollIntoView())}return!0};var v;const b=(e,t)=>(t&&t(e.tr.setSelection(new r.C1(e.doc))),!0);function y(e,t,n){let s,a,c=t.nodeBefore,d=t.nodeAfter;if(c.type.spec.isolating||d.type.spec.isolating)return!1;if(function(e,t,n){let o=t.nodeBefore,r=t.nodeAfter,s=t.index();return!(!(o&&r&&o.type.compatibleContent(r.type))||(!o.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!r.isTextblock&&!(0,i.Mn)(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let h=t.parent.canReplace(t.index(),t.index()+1);if(h&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(d.type))&&a.matchType(s[0]||d.type).validEnd){if(n){let r=t.pos+d.nodeSize,a=o.HY.empty;for(let e=s.length-1;e>=0;e--)a=o.HY.from(s[e].create(null,a));a=o.HY.from(c.copy(a));let l=e.tr.step(new i.FC(t.pos-1,r,t.pos,r,new o.p2(a,1,0),s.length,!0)),h=r+2*s.length;(0,i.Mn)(l.doc,h)&&l.join(h),n(l.scrollIntoView())}return!0}let u=r.Y1.findFrom(t,1),p=u&&u.$from.blockRange(u.$to),f=p&&(0,i.k9)(p);if(null!=f&&f>=t.depth)return n&&n(e.tr.lift(p,f).scrollIntoView()),!0;if(h&&l(d,"start",!0)&&l(c,"end")){let r=c,s=[];for(;s.push(r),!r.isTextblock;)r=r.lastChild;let a=d,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,a.content)){if(n){let r=o.HY.empty;for(let e=s.length-1;e>=0;e--)r=o.HY.from(s[e].copy(r));n(e.tr.step(new i.FC(t.pos-s.length,t.pos+d.nodeSize,t.pos+l,t.pos+d.nodeSize-l,new o.p2(r,s.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function w(e){return function(t,n){let i=t.selection,o=e<0?i.$from:i.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(t.tr.setSelection(r.Bs.create(t.doc,e<0?o.start(s):o.end(s)))),!0)}}const k=w(-1),x=w(1);function S(e,t=null){return function(n,o){let{$from:r,$to:s}=n.selection,a=r.blockRange(s),l=a&&(0,i.nd)(a,e,t);return!!l&&(o&&o(n.tr.wrap(a,l).scrollIntoView()),!0)}}function C(e,t=null){return function(n,i){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(r,s,((i,r)=>{if(o)return!1;if(i.isTextblock&&!i.hasMarkup(e,t))if(i.type==e)o=!0;else{let t=n.doc.resolve(r),i=t.index();o=t.parent.canReplaceWith(i,i+1,e)}}))}if(!o)return!1;if(i){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];o.setBlockType(r,s,e,t)}i(o.scrollIntoView())}return!0}}function E(e,t=null){return function(n,i){let{empty:o,$cursor:r,ranges:s}=n.selection;if(o&&!r||!function(e,t,n){for(let i=0;i<t.length;i++){let{$from:o,$to:r}=t[i],s=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,r.pos,(e=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return!0}return!1}(n.doc,s,e))return!1;if(i)if(r)e.isInSet(n.storedMarks||r.marks())?i(n.tr.removeStoredMark(e)):i(n.tr.addStoredMark(e.create(t)));else{let o=!1,r=n.tr;for(let t=0;!o&&t<s.length;t++){let{$from:i,$to:r}=s[t];o=n.doc.rangeHasMark(i.pos,r.pos,e)}for(let n=0;n<s.length;n++){let{$from:i,$to:a}=s[n];if(o)r.removeMark(i.pos,a.pos,e);else{let n=i.pos,o=a.pos,s=i.nodeAfter,l=a.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,d=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+c<o&&(n+=c,o-=d),r.addMark(n,o,e.create(t))}}i(r.scrollIntoView())}return!0}}function T(...e){return function(t,n,i){for(let o=0;o<e.length;o++)if(e[o](t,n,i))return!0;return!1}}let _=T(s,((e,t,n)=>{let s=a(e,n);if(!s)return!1;let d=c(s);if(!d){let n=s.blockRange(),o=n&&(0,i.k9)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let h=d.nodeBefore;if(!h.type.spec.isolating&&y(e,d,t))return!0;if(0==s.parent.content.size&&(l(h,"end")||r.qv.isSelectable(h))){let n=(0,i.dR)(e.doc,s.before(),s.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let i=e.tr.step(n);i.setSelection(l(h,"end")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(d.pos,-1)),-1):r.qv.create(i.doc,d.pos-h.nodeSize)),t(i.scrollIntoView())}return!0}}return!(!h.isAtom||d.depth!=s.depth-1)&&(t&&t(e.tr.delete(d.pos-h.nodeSize,d.pos).scrollIntoView()),!0)}),((e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;s=c(i)}let a=s&&s.nodeBefore;return!(!a||!r.qv.isSelectable(a))&&(t&&t(e.tr.setSelection(r.qv.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)})),A=T(s,h,((e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;s=u(i)}let a=s&&s.nodeAfter;return!(!a||!r.qv.isSelectable(a))&&(t&&t(e.tr.setSelection(r.qv.create(e.doc,s.pos)).scrollIntoView()),!0)}));const O={Enter:T(p,((e,t)=>{let n=e.selection,{$from:i,$to:o}=n;if(n instanceof r.C1||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=f(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=e.tr.insert(n,s.createAndFill());a.setSelection(r.Bs.create(a.doc,n+1)),t(a.scrollIntoView())}return!0}),((e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if((0,i.Ax)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),r=o&&(0,i.k9)(o);return null!=r&&(t&&t(e.tr.lift(o,r).scrollIntoView()),!0)}),m),"Mod-Enter":g,Backspace:_,"Mod-Backspace":_,"Shift-Backspace":_,Delete:A,"Mod-Delete":A,"Mod-a":b},M={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"],"Ctrl-a":k,"Ctrl-e":x};for(let e in O)M[e]=O[e];const I=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?M:O},5284:(e,t,n)=>{"use strict";n.d(t,{m8:()=>x,KX:()=>C,Yw:()=>S,of:()=>E});var i=200,o=function(){};o.prototype.append=function(e){return e.length?(e=o.from(e),!this.length&&e||e.length<i&&this.leafAppend(e)||this.length<i&&e.leafPrepend(this)||this.appendInner(e)):this},o.prototype.prepend=function(e){return e.length?o.from(e).append(this):this},o.prototype.appendInner=function(e){return new s(this,e)},o.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},o.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},o.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},o.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(t,n){return i.push(e(t,n))}),t,n),i},o.from=function(e){return e instanceof o?e:e&&e.length?new r(e):o.empty};var r=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,i){for(var o=t;o<n;o++)if(!1===e(this.values[o],i+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],i+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=i)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=i)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(o);o.empty=new r([]);var s=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,i){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),i))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,i+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,i){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,i+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,i))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(o);const a=o;var l=n(6560),c=n(2376);class d{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,i,o=this.items.length;for(;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(n=this.remapping(o,this.items.length),i=n.maps.length);let r,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),i=n.maps.length),i--,void c.push(e);if(n){c.push(new h(e.map));let t,o=e.step.map(n.slice(i));o&&a.maybeStep(o).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new h(t,void 0,void 0,l.length+c.length))),i--,t&&n.appendMap(t,i)}else a.maybeStep(e.step);return e.selection?(r=n?e.selection.map(n.slice(i)):e.selection,s=new d(this.items.slice(0,o).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:r}}addTransform(e,t,n,i){let o=[],r=this.eventCount,s=this.items,a=!i&&s.length?s.get(s.length-1):null;for(let n=0;n<e.steps.length;n++){let l,c=e.steps[n].invert(e.docs[n]),d=new h(e.mapping.maps[n],c,t);(l=a&&a.merge(d))&&(d=l,n?o.pop():s=s.slice(0,s.length-1)),o.push(d),t&&(r++,t=void 0),i||(a=d)}let l=r-n.depth;return l>p&&(s=function(e,t){let n;return e.forEach(((e,i)=>{if(e.selection&&0==t--)return n=i,!1})),e.slice(n)}(s,l),r-=l),new d(s.append(o),r)}remapping(e,t){let n=new l.vs;return this.items.forEach(((t,i)=>{let o=null!=t.mirrorOffset&&i-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new d(this.items.append(e.map((e=>new h(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-t),o=e.mapping,r=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),i);let a=t;this.items.forEach((t=>{let i=o.getMirror(--a);if(null==i)return;r=Math.min(r,i);let l=o.maps[i];if(t.step){let r=e.steps[i].invert(e.docs[i]),c=t.selection&&t.selection.map(o.slice(a+1,i));c&&s++,n.push(new h(l,r,c))}else n.push(new h(l))}),i);let l=[];for(let e=t;e<r;e++)l.push(new h(o.maps[e]));let c=this.items.slice(0,i).append(l).append(n),u=new d(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,i=[],o=0;return this.items.forEach(((r,s)=>{if(s>=e)i.push(r),r.selection&&o++;else if(r.step){let e=r.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=r.selection&&r.selection.map(t.slice(n));a&&o++;let l,c=new h(s.invert(),e,a),d=i.length-1;(l=i.length&&i[d].merge(c))?i[d]=l:i.push(c)}}else r.map&&n--}),this.items.length,0),new d(a.from(i.reverse()),o)}}d.empty=new d(a.empty,0);class h{constructor(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new h(t.getMap().invert(),t,this.selection)}}}class u{constructor(e,t,n,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i}}const p=20;function f(e){let t=[];return e.forEach(((e,n,i,o)=>t.push(i,o))),t}function g(e,t){if(!e)return null;let n=[];for(let i=0;i<e.length;i+=2){let o=t.map(e[i],1),r=t.map(e[i+1],-1);o<=r&&n.push(o,r)}return n}function m(e,t,n,i){let o=y(t),r=w.get(t).spec.config,s=(i?e.undone:e.done).popEvent(t,o);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(i?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),r,o),c=new u(i?l:s.remaining,i?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(w,{redo:i,historyState:c}).scrollIntoView())}let v=!1,b=null;function y(e){let t=e.plugins;if(b!=t){v=!1,b=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){v=!0;break}}return v}const w=new c.H$("history"),k=new c.H$("closeHistory");function x(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new c.Sy({key:w,state:{init:()=>new u(d.empty,d.empty,null,0),apply:(t,n,i)=>function(e,t,n,i){let o,r=n.getMeta(w);if(r)return r.historyState;n.getMeta(k)&&(e=new u(e.done,e.undone,null,0));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(w))return s.getMeta(w).redo?new u(e.done.addTransform(n,void 0,i,y(t)),e.undone,f(n.mapping.maps[n.steps.length-1]),e.prevTime):new u(e.done,e.undone.addTransform(n,void 0,i,y(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new u(e.done.rebased(n,o),e.undone.rebased(n,o),g(e.prevRanges,n.mapping),e.prevTime):new u(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),g(e.prevRanges,n.mapping),e.prevTime);{let o=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-i.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,i)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&i>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),r=s?g(e.prevRanges,n.mapping):f(n.mapping.maps[n.steps.length-1]);return new u(e.done.addTransform(n,o?t.selection.getBookmark():void 0,i,y(t)),d.empty,r,n.time)}}(n,i,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,i="historyUndo"==n?S:"historyRedo"==n?C:null;return!!i&&(t.preventDefault(),i(e.state,e.dispatch))}}}})}const S=(e,t)=>{let n=w.getState(e);return!(!n||0==n.done.eventCount)&&(t&&m(n,e,t,!1),!0)},C=(e,t)=>{let n=w.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&m(n,e,t,!0),!0)};function E(e){let t=w.getState(e);return t?t.done.eventCount:0}},6912:(e,t,n)=>{"use strict";n.d(t,{Hw:()=>s,VK:()=>o,dU:()=>l});var i=n(2376);class o{constructor(e,t){var n;this.match=e,this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,i,o){let r=n;if(t[1]){let e=t[0].lastIndexOf(t[1]);r+=t[0].slice(e+t[1].length);let n=(i+=e)-o;n>0&&(r=t[0].slice(e-n,e)+r,i=o)}return e.tr.insertText(r,i,o)}):t}}const r=500;function s({rules:e}){let t=new i.Sy({state:{init:()=>null,apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,i,o,r)=>a(n,i,o,r,e,t),handleDOMEvents:{compositionend:n=>{setTimeout((()=>{let{$cursor:i}=n.state.selection;i&&a(n,i.pos,i.pos,"",e,t)}))}}},isInputRules:!0});return t}function a(e,t,n,i,o,s){if(e.composing)return!1;let a=e.state,l=a.doc.resolve(t);if(l.parent.type.spec.code)return!1;let c=l.parent.textBetween(Math.max(0,l.parentOffset-r),l.parentOffset,null,"￼")+i;for(let r=0;r<o.length;r++){let l=o[r].match.exec(c),d=l&&o[r].handler(a,l,t-(l[0].length-i.length),n);if(d)return e.dispatch(d.setMeta(s,{transform:d,from:t,to:n,text:i})),!0}return!1}const l=(e,t)=>{let n=e.plugins;for(let i=0;i<n.length;i++){let o,r=n[i];if(r.spec.isInputRules&&(o=r.getState(e))){if(t){let n=e.tr,i=o.transform;for(let e=i.steps.length-1;e>=0;e--)n.step(i.steps[e].invert(i.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1};new o(/--$/,"—"),new o(/\.\.\.$/,"…"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new o(/"$/,"”"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new o(/'$/,"’")},7327:(e,t,n)=>{"use strict";n.d(t,{h:()=>g});for(var i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},r="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=s||r&&+r[1]<57,c=0;c<10;c++)i[48+c]=i[96+c]=String(c);for(c=1;c<=24;c++)i[c+111]="F"+c;for(c=65;c<=90;c++)i[c]=String.fromCharCode(c+32),o[c]=String.fromCharCode(c);for(var d in i)o.hasOwnProperty(d)||(o[d]=i[d]);var h=n(2376);const u="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function p(e){let t,n,i,o,r=e.split(/-(?!$)/),s=r[r.length-1];"Space"==s&&(s=" ");for(let e=0;e<r.length-1;e++){let s=r[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))i=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);u?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function f(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function g(e){return new h.Sy({props:{handleKeyDown:m(e)}})}function m(e){let t=function(e){let t=Object.create(null);for(let n in e)t[p(n)]=e[n];return t}(e);return function(e,n){let r,s=function(e){var t=!(l&&(e.ctrlKey||e.altKey||e.metaKey)||a&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?o:i)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),c=1==s.length&&" "!=s,d=t[f(s,n,!c)];if(d&&d(e.state,e.dispatch,e))return!0;if(c&&(n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(r=i[n.keyCode])&&r!=s){let i=t[f(r,n,!0)];if(i&&i(e.state,e.dispatch,e))return!0}else if(c&&n.shiftKey){let i=t[f(s,n,!0)];if(i&&i(e.state,e.dispatch,e))return!0}return!1}}},7823:(e,t,n)=>{"use strict";function i(e){this.content=e}n.d(t,{aw:()=>X,PW:()=>ae,HY:()=>a,vc:()=>h,ZU:()=>Y,NB:()=>I,Ts:()=>O,e4:()=>u,V_:()=>K,p2:()=>p}),i.prototype={constructor:i,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,r=o.find(e),s=o.content.slice();return-1==r?s.push(n||e,t):(s[r+1]=t,n&&(s[r]=n)),new i(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new i(n)},addToStart:function(e,t){return new i([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new i(n)},addBefore:function(e,t,n){var o=this.remove(t),r=o.content.slice(),s=o.find(e);return r.splice(-1==s?r.length:s,0,t,n),new i(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=i.from(e)).size?new i(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=i.from(e)).size?new i(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=i.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},i.from=function(e){if(e instanceof i)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new i(t)};const o=i;function r(e,t,n){for(let i=0;;i++){if(i==e.childCount||i==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(i),s=t.child(i);if(o!=s){if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)n++;return n}if(o.content.size||s.content.size){let e=r(o.content,s.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function s(e,t,n,i){for(let o=e.childCount,r=t.childCount;;){if(0==o||0==r)return o==r?null:{a:n,b:i};let a=e.child(--o),l=t.child(--r),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:i};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,i--;return{a:n,b:i}}if(a.content.size||l.content.size){let e=s(a.content,l.content,n-1,i-1);if(e)return e}n-=c,i-=c}else n-=c,i-=c}}class a{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,i=0,o){for(let r=0,s=0;s<t;r++){let a=this.content[r],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,o||null,r)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,i+o)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let o="",r=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),r=!n):s.isLeaf?(i?o+="function"==typeof i?i(s):i:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),r=!n):!r&&s.isBlock&&(o+=n,r=!0)}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new a(i,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],i=0;if(t>e)for(let o=0,r=0;r<t;o++){let s=this.content[o],a=r+s.nodeSize;a>e&&((r<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-r),Math.min(s.text.length,t-r)):s.cut(Math.max(0,e-r-1),Math.min(s.content.size,t-r-1))),n.push(s),i+=s.nodeSize),r=a}return new a(n,i)}cutByIndex(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new a(i,o)}addToStart(e){return new a([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new a(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return r(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return s(this,e,t,n)}findIndex(e,t=-1){if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let o=i+this.child(n).nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return a.empty;let t,n=0;for(let i=0;i<e.length;i++){let o=e[i];n+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new a(t||e,n)}static from(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(e,t){return l.index=e,l.offset=t,l}function d(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!d(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class h{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return h.none;if(e instanceof h)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}h.none=[];class u extends Error{}class p{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=g(this.content,e+this.openStart,t);return n&&new p(n,this.openStart,this.openEnd)}removeBetween(e,t){return new p(f(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return p.empty;let n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new p(a.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)i++;return new p(e,n,i)}}function f(e,t,n){let{index:i,offset:o}=e.findIndex(t),r=e.maybeChild(i),{index:s,offset:a}=e.findIndex(n);if(o==t||r.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(i,r.copy(f(r.content,t-o-1,n-o-1)))}function g(e,t,n,i){let{index:o,offset:r}=e.findIndex(t),s=e.maybeChild(o);if(r==t||s.isText)return i&&!i.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=g(s.content,t-r-1,n);return a&&e.replaceChild(o,s.copy(a))}function m(e,t,n){if(n.openStart>e.depth)throw new u("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new u("Inconsistent open depths");return v(e,t,n,0)}function v(e,t,n,i){let o=e.index(i),r=e.node(i);if(o==t.index(i)&&i<e.depth-n.openStart){let s=v(e,t,n,i+1);return r.copy(r.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=i||t.depth!=i){let{start:o,end:s}=function(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)i=t.node(e).copy(a.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}(n,e);return x(r,S(e,o,s,t,i))}{let i=e.parent,o=i.content;return x(i,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return x(r,C(e,t,i))}function b(e,t){if(!t.type.compatibleContent(e.type))throw new u("Cannot join "+t.type.name+" onto "+e.type.name)}function y(e,t,n){let i=e.node(n);return b(i,t.node(n)),i}function w(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function k(e,t,n,i){let o=(t||e).node(n),r=0,s=t?t.index(n):o.childCount;e&&(r=e.index(n),e.depth>n?r++:e.textOffset&&(w(e.nodeAfter,i),r++));for(let e=r;e<s;e++)w(o.child(e),i);t&&t.depth==n&&t.textOffset&&w(t.nodeBefore,i)}function x(e,t){return e.type.checkContent(t),e.copy(t)}function S(e,t,n,i,o){let r=e.depth>o&&y(e,t,o+1),s=i.depth>o&&y(n,i,o+1),l=[];return k(null,e,o,l),r&&s&&t.index(o)==n.index(o)?(b(r,s),w(x(r,S(e,t,n,i,o+1)),l)):(r&&w(x(r,C(e,t,o+1)),l),k(t,n,o,l),s&&w(x(s,C(n,i,o+1)),l)),k(i,null,o,l),new a(l)}function C(e,t,n){let i=[];if(k(null,e,n,i),e.depth>n){w(x(y(e,t,n+1),C(e,t,n+1)),i)}return k(t,null,n,i),new a(i)}p.empty=new p(a.empty,0,0);class E{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],i=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)i+=n.child(t).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){let e=n;n=i,i=e}let o=n.marks;for(var r=0;r<o.length;r++)!1!==o[r].type.spec.inclusive||i&&o[r].isInSet(i.marks)||(o=o[r--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||i&&n[o].isInSet(i.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new O(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],i=0,o=t;for(let t=e;;){let{index:e,offset:r}=t.content.findIndex(o),s=o-r;if(n.push(t,e,i+r),!s)break;if(t=t.child(e),t.isText)break;o=s-1,i+=r+1}return new E(t,n,o)}static resolveCached(e,t){for(let n=0;n<T.length;n++){let i=T[n];if(i.pos==t&&i.doc==e)return i}let n=T[_]=E.resolve(e,t);return _=(_+1)%A,n}}let T=[],_=0,A=12;class O{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const M=Object.create(null);class I{constructor(e,t,n,i=h.none){this.type=e,this.attrs=t,this.marks=i,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,i=0){this.content.nodesBetween(e,t,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,i){return this.content.textBetween(e,t,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&d(this.attrs,t||e.defaultAttrs||M)&&h.sameSet(this.marks,n||h.none)}copy(e=null){return e==this.content?this:new I(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new I(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return p.empty;let i=this.resolve(e),o=this.resolve(t),r=n?0:i.sharedDepth(t),s=i.start(r),a=i.node(r).content.cut(i.pos-s,o.pos-s);return new p(a,i.depth-r,o.depth-r)}replace(e,t,n){return m(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let i=this.content.child(t-1);return{node:i,index:t-1,offset:n-i.nodeSize}}resolve(e){return E.resolveCached(this,e)}resolveNoCache(e){return E.resolve(this,e)}rangeHasMark(e,t,n){let i=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(i=!0),!i))),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),N(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=a.empty,i=0,o=n.childCount){let r=this.contentMatchAt(e).matchFragment(n,i,o),s=r&&r.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=i;e<o;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(n),r=o&&o.matchFragment(this.content,t);return!!r&&r.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=h.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!h.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let i=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,n)}}I.prototype.text=void 0;class D extends I{constructor(e,t,n,i){if(super(e,t,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):N(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new D(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new D(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function N(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class R{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new B(e,t);if(null==n.next)return R.empty;let i=L(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return n(G(e,0));function n(i){let o=[];i.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let i;for(let e=0;e<o.length;e++)o[e][0]==t&&(i=o[e][1]);G(e,n).forEach((e=>{i||o.push([t,i=[]]),-1==i.indexOf(e)&&i.push(e)}))}))}));let r=t[i.join(",")]=new R(i.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let i=o[e][1].sort(j);r.next.push({type:o[e][0],next:t[i.join(",")]||n(i)})}return r}}(function(e){let t=[[]];return o(r(e,0),n()),t;function n(){return t.push([])-1}function i(e,n,i){let o={term:i,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}function r(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(r(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return i(t,s),o(r(e.expr,s),s),[i(s)]}if("plus"==e.type){let s=n();return o(r(e.expr,t),s),o(r(e.expr,s),s),[i(s)]}if("opt"==e.type)return[i(t)].concat(r(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();o(r(e.expr,s),t),s=t}if(-1==e.max)o(r(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();i(s,t),o(r(e.expr,s),t),s=t}return[i(s)]}if("name"==e.type)return[i(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let i=0;;i++){let s=r(e.exprs[i],t);if(i==e.exprs.length-1)return s;o(s,t=n())}}}(i));return function(e,t){for(let n=0,i=[e];n<i.length;n++){let e=i[n],o=!e.validEnd,r=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];r.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==i.indexOf(s)&&i.push(s)}o&&t.err("Only non-generatable nodes ("+r.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let i=this;for(let o=t;i&&o<n;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let i=[this];return function o(r,s){let l=r.matchFragment(e,n);if(l&&(!t||l.validEnd))return a.from(s.map((e=>e.createAndFill())));for(let e=0;e<r.next.length;e++){let{type:t,next:n}=r.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==i.indexOf(n)){i.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),o=i.match;if(o.matchType(e)){let e=[];for(let t=i;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:r,next:s}=o.next[e];r.isLeaf||r.hasRequiredAttrs()||r.name in t||i.type&&!s.validEnd||(n.push({match:r.contentMatch,type:r,via:i}),t[r.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let i=0;i<n.next.length;i++)-1==e.indexOf(n.next[i].next)&&t(n.next[i].next)}(this),e.map(((t,n)=>{let i=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)i+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return i})).join("\n")}}R.empty=new R(!0);class B{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function L(e){let t=[];do{t.push(P(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function P(e){let t=[];do{t.push(F(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function F(e){let t=function(e){if(e.eat("(")){let t=L(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,i=n[t];if(i)return[i];let o=[];for(let e in n){let i=n[e];i.groups.indexOf(t)>-1&&o.push(i)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=H(e,t)}return t}function z(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function H(e,t){let n=z(e),i=n;return e.eat(",")&&(i="}"!=e.next?z(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}function j(e,t){return t-e}function G(e,t){let n=[];return function t(i){let o=e[i];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(i);for(let e=0;e<o.length;e++){let{term:i,to:r}=o[e];i||-1!=n.indexOf(r)||t(r)}}(t),n.sort(j)}function U(e){let t=Object.create(null);for(let n in e){let i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function $(e,t){let n=Object.create(null);for(let i in e){let o=t&&t[i];if(void 0===o){let t=e[i];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+i);o=t.default}n[i]=o}return n}function W(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new q(e[n]);return t}class V{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=W(n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==R.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:$(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(e),a.from(t),h.setFrom(n))}createChecked(e=null,t,n){return t=a.from(t),this.checkContent(t),new I(this,this.computeAttrs(e),t,h.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=a.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(a.empty,!0);return o?new I(this,e,t.append(o),h.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,i)=>n[e]=new V(e,t,i)));let i=t.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class q{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Y{constructor(e,t,n,i){this.name=e,this.rank=t,this.schema=n,this.spec=i,this.attrs=W(i.attrs),this.excluded=null;let o=U(this.attrs);this.instance=o?new h(this,o):null}create(e=null){return!e&&this.instance?this.instance:new h(this,$(this.attrs,e))}static compile(e,t){let n=Object.create(null),i=0;return e.forEach(((e,o)=>n[e]=new Y(e,i++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class K{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=o.from(e.nodes),t.marks=o.from(e.marks||{}),this.nodes=V.compile(this.spec.nodes,this),this.marks=Y.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],i=t.spec.content||"",o=t.spec.marks;t.contentMatch=n[i]||(n[i]=R.parse(i,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.markSet="_"==o?null:o?Z(this,o.split(" ")):""!=o&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:Z(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,i){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof V))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,i)}text(e,t){let n=this.nodes.text;return new D(n,n.defaultAttrs,e,h.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return I.fromJSON(this,e)}markFromJSON(e){return h.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Z(e,t){let n=[];for(let i=0;i<t.length;i++){let o=t[i],r=e.marks[o],s=r;if(r)n.push(r);else for(let t in e.marks){let i=e.marks[t];("_"==o||i.spec.group&&i.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=i)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}class X{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new ie(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new ie(this,t,!0);return n.addAll(e,t.from,t.to),p.maxOpen(n.finish())}matchTag(e,t,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let n=this.tags[i];if(oe(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let i=this.styles[o],r=i.style;if(!(0!=r.indexOf(e)||i.context&&!n.matchesContext(i.context)||r.length>e.length&&(61!=r.charCodeAt(e.length)||r.slice(e.length+1)!=t))){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,i=0;for(;i<t.length;i++){let e=t[i];if((null==e.priority?50:e.priority)<n)break}t.splice(i,0,e)}for(let t in e.marks){let i=e.marks[t].spec.parseDOM;i&&i.forEach((e=>{n(e=re(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)}))}for(let t in e.nodes){let i=e.nodes[t].spec.parseDOM;i&&i.forEach((e=>{n(e=re(e)),e.node||e.ignore||e.mark||(e.node=t)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new X(e,X.schemaRules(e)))}}const J={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Q={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ee={ol:!0,ul:!0};function te(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class ne{constructor(e,t,n,i,o,r,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=i,this.solid=o,this.options=s,this.content=[],this.activeMarks=h.none,this.stashMarks=[],this.match=r||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(a.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=a.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let i=n[t];(this.type?this.type.allowsMarkType(i.type):se(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!J.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ie{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let i,o=t.topNode,r=te(null,t.preserveWhitespace,0)|(n?4:0);i=o?new ne(o.type,o.attrs,h.none,h.none,!0,t.topMatch||o.type.contentMatch,r):new ne(n?null:e.schema.topNodeType,null,h.none,h.none,!0,null,r),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style");if(t){let n=this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=n.exec(e);)i.push(t[1],t[2].trim());return i}(t));if(!n)return;let[i,o]=n,r=this.top;for(let e=0;e<o.length;e++)this.removePendingMark(o[e],r);for(let e=0;e<i.length;e++)this.addPendingMark(i[e]);this.addElement(e);for(let e=0;e<i.length;e++)this.removePendingMark(i[e],r);for(let e=0;e<o.length;e++)this.addPendingMark(o[e])}else this.addElement(e)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],o=e.previousSibling;(!i||o&&"BR"==o.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,i=e.nodeName.toLowerCase();ee.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&ee.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:Q.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let t,n=this.top,r=this.needsBlock;if(J.hasOwnProperty(i))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=r}else this.addElementByRule(e,o,!1===o.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=h.none,n=h.none;e:for(let i=0;i<e.length;i+=2)for(let o;;){let r=this.parser.matchStyle(e[i],e[i+1],this,o);if(!r)continue e;if(r.ignore)return null;if(r.clearMark?this.top.pendingMarks.forEach((e=>{r.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;o=r}return[t,n]}addElementByRule(e,t,n){let i,o,r;if(t.node)o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):i=this.enter(o,t.attrs||null,t.preserveWhitespace);else{r=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(r)}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}i&&this.sync(s)&&this.open--,r&&this.removePendingMark(r,s)}addAll(e,t,n){let i=t||0;for(let o=t?e.childNodes[t]:e.firstChild,r=null==n?null:e.childNodes[n];o!=r;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let t,n;for(let i=this.open;i>=0;i--){let o=this.nodes[i],r=o.findWrapping(e);if(r&&(!t||t.length>r.length)&&(t=r,n=o,!r.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(let e=0;e<t.length;e++)this.enterInner(t[e],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let i=0;i<e.marks.length;i++)t.type&&!t.type.allowsMarkType(e.marks[i].type)||(n=e.marks[i].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,n),i}enterInner(e,t=null,n=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let r=te(e,i,o.options);4&o.options&&0==o.content.length&&(r|=4),this.nodes.push(new ne(e,t,o.activeMarks,o.pendingMarks,n,null,r)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)){t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(i?0:1),r=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(r(e-1,s))return!0;return!1}{let e=s>0||0==s&&i?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return r(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let t=i.popFromStashMark(e);t&&i.type&&i.type.allowsMarkType(t.type)&&(i.activeMarks=t.addToSet(i.activeMarks))}if(i==t)break}}}function oe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function re(e){let t={};for(let n in e)t[n]=e[n];return t}function se(e,t){let n=t.schema.nodes;for(let i in n){let o=n[i];if(!o.allowsMarkType(e))continue;let r=[],s=e=>{r.push(e);for(let n=0;n<e.edgeCount;n++){let{type:i,next:o}=e.edge(n);if(i==t)return!0;if(r.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}class ae{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=ce(t).createDocumentFragment());let i=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,r=0;for(;n<o.length&&r<e.marks.length;){let t=e.marks[r];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,r++}else r++}for(;n<o.length;)i=o.pop()[1];for(;r<e.marks.length;){let n=e.marks[r++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=ae.renderSpec(ce(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&ae.renderSpec(ce(n),i(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,o=t[0],r=o.indexOf(" ");r>0&&(n=o.slice(0,r),o=o.slice(r+1));let s=n?e.createElementNS(n,o):e.createElement(o),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let o=l;o<t.length;o++){let r=t[o];if(0===r){if(o<t.length-1||o>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=ae.renderSpec(e,r,n);if(s.appendChild(t),o){if(i)throw new RangeError("Multiple content holes");i=o}}}return{dom:s,contentDOM:i}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ae(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=le(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return le(e.marks)}}function le(e){let t={};for(let n in e){let i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function ce(e){return e.document||window.document}},2376:(e,t,n)=>{"use strict";n.d(t,{Bs:()=>d,C1:()=>f,H$:()=>A,Sy:()=>E,Y1:()=>s,qv:()=>u,xm:()=>a,yy:()=>S});var i=n(7823),o=n(6560);const r=Object.create(null);class s{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new a(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=i.p2.empty){let n=t.content.lastChild,o=null;for(let e=0;e<t.openEnd;e++)o=n,n=n.lastChild;let r=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],d=e.mapping.slice(r);e.replaceRange(d.map(l.pos),d.map(c.pos),a?i.p2.empty:t),0==a&&v(e,r,(n?n.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:r,$to:s}=i[o],a=e.mapping.slice(n),l=a.map(r.pos),c=a.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),v(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let i=e.parent.inlineContent?new d(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(let i=e.depth-1;i>=0;i--){let o=t<0?m(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):m(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))}static atStart(e){return m(e,e,0,0,1)||new f(e)}static atEnd(e){return m(e,e,e.content.size,e.childCount,-1)||new f(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=r[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in r)throw new RangeError("Duplicate use of selection JSON ID "+e);return r[e]=t,t.prototype.jsonID=e,t}getBookmark(){return d.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(e,t){this.$from=e,this.$to=t}}let l=!1;function c(e){l||e.parent.inlineContent||(l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class d extends s{constructor(e,t=e){c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return s.near(n);let i=e.resolve(t.map(this.anchor));return new d(i.parent.inlineContent?i:n,n)}replace(e,t=i.p2.empty){if(super.replace(e,t),t==i.p2.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof d&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new d(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))}static between(e,t,n){let i=e.pos-t.pos;if(n&&!i||(n=i>=0?1:-1),!t.parent.inlineContent){let e=s.findFrom(t,n,!0)||s.findFrom(t,-n,!0);if(!e)return s.near(t,n);t=e.$head}return e.parent.inlineContent||(0==i||(e=(s.findFrom(e,-n,!0)||s.findFrom(e,n,!0)).$anchor).pos<t.pos!=i<0)&&(e=t),new d(e,t)}}s.jsonID("text",d);class h{constructor(e,t){this.anchor=e,this.head=t}map(e){return new h(e.map(this.anchor),e.map(this.head))}resolve(e){return d.between(e.resolve(this.anchor),e.resolve(this.head))}}class u extends s{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return n?s.near(o):new u(o)}content(){return new i.p2(i.HY.from(this.node),0,0)}eq(e){return e instanceof u&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new u(e.resolve(t.anchor))}static create(e,t){return new u(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}u.prototype.visible=!1,s.jsonID("node",u);class p{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new h(n,n):new p(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&u.isSelectable(n)?new u(t):s.near(t)}}class f extends s{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=i.p2.empty){if(t==i.p2.empty){e.delete(0,e.doc.content.size);let t=s.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new f(e)}map(e){return new f(e)}eq(e){return e instanceof f}getBookmark(){return g}}s.jsonID("all",f);const g={map(){return this},resolve:e=>new f(e)};function m(e,t,n,i,o,r=!1){if(t.inlineContent)return d.create(e,n);for(let s=i-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let i=t.child(s);if(i.isAtom){if(!r&&u.isSelectable(i))return u.create(e,n-(o<0?i.nodeSize:0))}else{let t=m(e,i,n+o,o<0?i.childCount:0,o,r);if(t)return t}n+=i.nodeSize*o}return null}function v(e,t,n){let i=e.steps.length-1;if(i<t)return;let r,a=e.steps[i];(a instanceof o.Pu||a instanceof o.FC)&&(e.mapping.maps[i].forEach(((e,t,n,i)=>{null==r&&(r=i)})),e.setSelection(s.near(e.doc.resolve(r),n)))}class b extends o.wx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return i.vc.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||i.vc.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let i=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function y(e,t){return t&&e?e.bind(t):e}class w{constructor(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)}}const k=[new w("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new w("selection",{init:(e,t)=>e.selection||s.atStart(t.doc),apply:e=>e.selection}),new w("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,i)=>i.selection.$cursor?e.storedMarks:null}),new w("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class x{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=k.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new w(e.key,e.spec.state,e))}))}}class S{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),i=null;for(;;){let o=!1;for(let r=0;r<this.config.plugins.length;r++){let s=this.config.plugins[r];if(s.spec.appendTransaction){let a=i?i[r].n:0,l=i?i[r].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,r)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let e=0;e<this.config.plugins.length;e++)i.push(e<r?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}i&&(i[r]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new S(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let o=n[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new b(this)}static create(e){let t=new x(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new S(t);for(let i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n}reconfigure(e){let t=new x(this.schema,e.plugins),n=t.fields,i=new S(t);for(let t=0;t<n.length;t++){let o=n[t].name;i[o]=this.hasOwnProperty(o)?this[o]:n[t].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],o=i.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new x(e.schema,e.plugins),r=new S(o);return o.fields.forEach((o=>{if("doc"==o.name)r.doc=i.NB.fromJSON(e.schema,t.doc);else if("selection"==o.name)r.selection=s.fromJSON(r.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],a=s.spec.state;if(s.key==o.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(r[o.name]=a.fromJSON.call(s,e,t[i],r))}r[o.name]=o.init(e,r)}})),r}}function C(e,t,n){for(let i in e){let o=e[i];o instanceof Function?o=o.bind(t):"handleDOMEvents"==i&&(o=C(o,t,{})),n[i]=o}return n}class E{constructor(e){this.spec=e,this.props={},e.props&&C(e.props,this,this.props),this.key=e.key?e.key.key:_("plugin")}getState(e){return e[this.key]}}const T=Object.create(null);function _(e){return e in T?e+"$"+ ++T[e]:(T[e]=0,e+"$")}class A{constructor(e="key"){this.key=_(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},6560:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>C,FC:()=>b,KS:()=>a,Mn:()=>E,Pu:()=>v,dR:()=>A,k9:()=>k,nd:()=>x,nj:()=>_,vs:()=>l,wx:()=>j});var i=n(7823);const o=Math.pow(2,16);function r(e){return 65535&e}class s{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class a{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&a.empty)return a.empty}recover(e){let t=0,n=r(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/o}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let i=0,r=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[l+r],h=this.ranges[l+a],u=c+d;if(e<=u){let r=c+i+((d?e==c?-1:e==u?1:t:t)<0?0:h);if(n)return r;let a=e==(t<0?c:u)?null:l/3+(e-c)*o,p=e==c?2:e==u?1:4;return(t<0?e!=c:e!=u)&&(p|=8),new s(r,p,a)}i+=h-d}return n?e+i:new s(e+i,0,null)}touches(e,t){let n=0,i=r(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let r=this.ranges[t]-(this.inverted?n:0);if(r>e)break;let a=this.ranges[t+o];if(e<=r+a&&t==3*i)return!0;n+=this.ranges[t+s]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let r=this.ranges[i],s=r-(this.inverted?o:0),a=r+(this.inverted?0:o),l=this.ranges[i+t],c=this.ranges[i+n];e(s,s+l,a,a+c),o+=c-l}}invert(){return new a(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])}}a.empty=new a([]);class l{constructor(e=[],t,n=0,i=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=i}slice(e=0,t=this.maps.length){return new l(this.maps,this.mirror,e,t)}copy(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],null!=i&&i<t?n+i:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=i&&i>t?n-i-1:void 0)}}invert(){let e=new l;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let i=0;for(let n=this.from;n<this.to;n++){let o=this.maps[n].mapResult(e,t);if(null!=o.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return n?e:new s(e,i,null)}}const c=Object.create(null);class d{getMap(){return a.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=c[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in c)throw new RangeError("Duplicate use of step JSON ID "+e);return c[e]=t,t.prototype.jsonID=e,t}}class h{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new h(e,null)}static fail(e){return new h(null,e)}static fromReplace(e,t,n,o){try{return h.ok(e.replace(t,n,o))}catch(e){if(e instanceof i.e4)return h.fail(e.message);throw e}}}function u(e,t,n){let o=[];for(let i=0;i<e.childCount;i++){let r=e.child(i);r.content.size&&(r=r.copy(u(r.content,t,r))),r.isInline&&(r=t(r,n,i)),o.push(r)}return i.HY.fromArray(o)}class p extends d{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),r=new i.p2(u(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),o),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,r)}invert(){return new f(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new p(t.pos,n.pos,this.mark)}merge(e){return e instanceof p&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new p(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new p(t.from,t.to,e.markFromJSON(t.mark))}}d.jsonID("addMark",p);class f extends d{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new i.p2(u(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,n)}invert(){return new p(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new f(t.pos,n.pos,this.mark)}merge(e){return e instanceof f&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new f(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new f(t.from,t.to,e.markFromJSON(t.mark))}}d.jsonID("removeMark",f);class g extends d{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new i.p2(i.HY.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new g(this.pos,t.marks[n]);return new g(this.pos,this.mark)}}return new m(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new g(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new g(t.pos,e.markFromJSON(t.mark))}}d.jsonID("addNodeMark",g);class m extends d{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new i.p2(i.HY.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new g(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new m(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new m(t.pos,e.markFromJSON(t.mark))}}d.jsonID("removeNodeMark",m);class v extends d{constructor(e,t,n,i=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=i}apply(e){return this.structure&&y(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new a([this.from,this.to-this.from,this.slice.size])}invert(e){return new v(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new v(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof v)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?i.p2.empty:new i.p2(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new v(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?i.p2.empty:new i.p2(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new v(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new v(t.from,t.to,i.p2.fromJSON(e,t.slice),!!t.structure)}}d.jsonID("replace",v);class b extends d{constructor(e,t,n,i,o,r,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=i,this.slice=o,this.insert=r,this.structure=s}apply(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")}getMap(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new b(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||i<t.pos||o>n.pos?null:new b(t.pos,n.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new b(t.from,t.to,t.gapFrom,t.gapTo,i.p2.fromJSON(e,t.slice),t.insert,!!t.structure)}}function y(e,t,n){let i=e.resolve(t),o=n-t,r=i.depth;for(;o>0&&r>0&&i.indexAfter(r)==i.node(r).childCount;)r--,o--;if(o>0){let e=i.node(r).maybeChild(i.indexAfter(r));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function w(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function k(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let i=e.$from.node(n),o=e.$from.index(n),r=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(o,r,t))return n;if(0==n||i.type.spec.isolating||!w(i,o,r))break}return null}function x(e,t,n=null,i=e){let o=function(e,t){let{parent:n,startIndex:i,endIndex:o}=e,r=n.contentMatchAt(i).findWrapping(t);if(!r)return null;let s=r.length?r[0]:t;return n.canReplaceWith(i,o,s)?r:null}(e,t),r=o&&function(e,t){let{parent:n,startIndex:i,endIndex:o}=e,r=n.child(i),s=t.contentMatch.findWrapping(r.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=i;a&&e<o;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?s:null}(i,t);return r?o.map(S).concat({type:t,attrs:n}).concat(r.map(S)):null}function S(e){return{type:e,attrs:null}}function C(e,t,n=1,i){let o=e.resolve(t),r=o.depth-n,s=i&&i[i.length-1]||o.parent;if(r<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let e=o.depth-1,t=n-2;e>r;e--,t--){let n=o.node(e),r=o.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(r,n.childCount),a=i&&i[t]||n;if(a!=n&&(s=s.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(r+1,n.childCount)||!a.type.validContent(s))return!1}let a=o.indexAfter(r),l=i&&i[0];return o.node(r).canReplaceWith(a,a,l?l.type:o.node(r+1).type)}function E(e,t){let n=e.resolve(t),i=n.index();return T(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function T(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function _(e,t,n){let i=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let e=0;e<n.openStart;e++)o=o.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=i.depth;t>=0;t--){let n=t==i.depth?0:i.pos<=(i.start(t+1)+i.end(t+1))/2?-1:1,r=i.index(t)+(n>0?1:0),s=i.node(t),a=!1;if(1==e)a=s.canReplace(r,r,o);else{let e=s.contentMatchAt(r).findWrapping(o.firstChild.type);a=e&&s.canReplaceWith(r,r,e[0])}if(a)return 0==n?i.pos:n<0?i.before(t+1):i.after(t+1)}return null}function A(e,t,n=t,o=i.p2.empty){if(t==n&&!o.size)return null;let r=e.resolve(t),s=e.resolve(n);return O(r,s,o)?new v(t,n,o):new M(r,s,o).fit()}function O(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}d.jsonID("replaceAround",b);class M{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=i.HY.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=i.HY.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;let r=this.placed,s=n.depth,a=o.depth;for(;s&&a&&1==r.childCount;)r=r.firstChild.content,s--,a--;let l=new i.p2(r,s,a);return e>-1?new b(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new v(n.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,o=null;n?(o=N(this.unplaced.content,n-1).firstChild,e=o.content):e=this.unplaced.content;let r=e.firstChild;for(let e=this.depth;e>=0;e--){let s,{type:a,match:l}=this.frontier[e],c=null;if(1==t&&(r?l.matchType(r.type)||(c=l.fillBefore(i.HY.from(r),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:e,parent:o,inject:c};if(2==t&&r&&(s=l.findWrapping(r.type)))return{sliceDepth:n,frontierDepth:e,parent:o,wrap:s};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=N(e,t);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new i.p2(e,t+1,Math.max(n,o.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=N(e,t);if(o.childCount<=1&&t>0){let r=e.size-t<=t+o.size;this.unplaced=new i.p2(I(e,t-1,1),t-1,r?t-1:n)}else this.unplaced=new i.p2(I(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:o,wrap:r}){for(;this.depth>t;)this.closeFrontierNode();if(r)for(let e=0;e<r.length;e++)this.openFrontierNode(r[e]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-e,c=0,d=[],{match:h,type:u}=this.frontier[t];if(o){for(let e=0;e<o.childCount;e++)d.push(o.child(e));h=h.matchFragment(o)}let p=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let e=a.child(c),t=h.matchType(e.type);if(!t)break;c++,(c>1||0==l||e.content.size)&&(h=t,d.push(R(e.mark(u.allowedMarks(e.marks)),1==c?l:0,c==a.childCount?p:-1)))}let f=c==a.childCount;f||(p=-1),this.placed=D(this.placed,t,i.HY.from(d)),this.frontier[t].match=h,f&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=a;e<p;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?i.p2.empty:new i.p2(I(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new i.p2(I(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!B(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),r=B(e,t,i,n,o);if(r){for(let n=t-1;n>=0;n--){let{match:t,type:i}=this.frontier[n],o=B(e,n,i,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:r,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=D(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),i=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,i)}return e}openFrontierNode(e,t=null,n){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=D(this.placed,this.depth,i.HY.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(i.HY.empty,!0);e.childCount&&(this.placed=D(this.placed,this.frontier.length,e))}}function I(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(I(e.firstChild.content,t-1,n)))}function D(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(D(e.lastChild.content,t-1,n)))}function N(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function R(e,t,n){if(t<=0)return e;let o=e.content;return t>1&&(o=o.replaceChild(0,R(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(i.HY.empty,!0)))),e.copy(o)}function B(e,t,n,i,o){let r=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==r.childCount&&!n.compatibleContent(r.type))return null;let a=i.fillBefore(r.content,!0,s);return a&&!function(e,t,n){for(let i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(n,r.content,s)?a:null}function L(e){return e.spec.defining||e.spec.definingForContent}function P(e,t,n,o,r){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(P(i.content,t+1,n,o,i)))}if(t>o){let t=r.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(i.HY.empty,!0))}return e}function F(e,t){let n=[];for(let i=Math.min(e.depth,t.depth);i>=0;i--){let o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&n.push(i)}return n}class z extends d{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return h.fromReplace(e,this.pos,this.pos+1,new i.p2(i.HY.from(o),0,t.isLeaf?0:1))}getMap(){return a.empty}invert(e){return new z(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new z(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new z(t.pos,t.attr,t.value)}}d.jsonID("attr",z);let H=class extends Error{};H=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(H.prototype=Object.create(Error.prototype)).constructor=H,H.prototype.name="TransformError";class j{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new H(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=i.p2.empty){let o=A(this.doc,e,t,n);return o&&this.step(o),this}replaceWith(e,t,n){return this.replace(e,t,new i.p2(i.HY.from(n),0,0))}delete(e,t){return this.replace(e,t,i.p2.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,o){if(!o.size)return e.deleteRange(t,n);let r=e.doc.resolve(t),s=e.doc.resolve(n);if(O(r,s,o))return e.step(new v(t,n,o));let a=F(r,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(r.depth+1);a.unshift(l);for(let e=r.depth,t=r.pos-1;e>0;e--,t--){let n=r.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;a.indexOf(e)>-1?l=e:r.before(e)==t&&a.splice(1,0,-e)}let c=a.indexOf(l),d=[],h=o.openStart;for(let e=o.content,t=0;;t++){let n=e.firstChild;if(d.push(n),t==o.openStart)break;e=n.content}for(let e=h-1;e>=0;e--){let t=d[e].type,n=L(t);if(n&&r.node(c).type!=t)h=e;else if(n||!t.isTextblock)break}for(let t=o.openStart;t>=0;t--){let l=(t+h+1)%(o.openStart+1),u=d[l];if(u)for(let t=0;t<a.length;t++){let d=a[(t+c)%a.length],h=!0;d<0&&(h=!1,d=-d);let p=r.node(d-1),f=r.index(d-1);if(p.canReplaceWith(f,f,u.type,u.marks))return e.replace(r.before(d),h?s.after(d):n,new i.p2(P(o.content,0,o.openStart,l),l,o.openEnd))}}let u=e.steps.length;for(let i=a.length-1;i>=0&&(e.replace(t,n,o),!(e.steps.length>u));i--){let e=a[i];e<0||(t=r.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,o){if(!o.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(0==i.parentOffset)for(let e=i.depth-1;e>=0;e--){let t=i.index(e);if(i.node(e).canReplaceWith(t,t,n))return i.before(e+1);if(t>0)return null}if(i.parentOffset==i.parent.content.size)for(let e=i.depth-1;e>=0;e--){let t=i.indexAfter(e);if(i.node(e).canReplaceWith(t,t,n))return i.after(e+1);if(t<i.node(e).childCount)return null}return null}(e.doc,t,o.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new i.p2(i.HY.from(o),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let i=e.doc.resolve(t),o=e.doc.resolve(n),r=F(i,o);for(let t=0;t<r.length;t++){let n=r[t],s=t==r.length-1;if(s&&0==n||i.node(n).type.contentMatch.validEnd)return e.delete(i.start(n),o.end(n));if(n>0&&(s||i.node(n-1).canReplace(i.index(n-1),o.indexAfter(n-1))))return e.delete(i.before(n),o.after(n))}for(let r=1;r<=i.depth&&r<=o.depth;r++)if(t-i.start(r)==i.depth-r&&n>i.end(r)&&o.end(r)-n!=o.depth-r)return e.delete(i.before(r),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:o,$to:r,depth:s}=t,a=o.before(s+1),l=r.after(s+1),c=a,d=l,h=i.HY.empty,u=0;for(let e=s,t=!1;e>n;e--)t||o.index(e)>0?(t=!0,h=i.HY.from(o.node(e).copy(h)),u++):c--;let p=i.HY.empty,f=0;for(let e=s,t=!1;e>n;e--)t||r.after(e+1)<r.end(e)?(t=!0,p=i.HY.from(r.node(e).copy(p)),f++):d++;e.step(new b(c,d,a,l,new i.p2(h.append(p),u,f),h.size-u,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let o=new v(t-n,t+n,i.p2.empty,!0);e.step(o)}(this,e,t),this}wrap(e,t){return function(e,t,n){let o=i.HY.empty;for(let e=n.length-1;e>=0;e--){if(o.size){let t=n[e].type.contentMatch.matchFragment(o);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=i.HY.from(n[e].type.create(n[e].attrs,o))}let r=t.start,s=t.end;e.step(new b(r,s,r,s,new i.p2(o,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,o=null){return function(e,t,n,o,r){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(o,r)&&function(e,t,n){let i=e.resolve(t),o=i.index();return i.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(s).map(n),o)){e.clearIncompatible(e.mapping.slice(s).map(n,1),o);let a=e.mapping.slice(s),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new b(l,c,l+1,c-1,new i.p2(i.HY.from(o.create(r,null,t.marks)),0,0),1,!0)),!1}}))}(this,e,t,n,o),this}setNodeMarkup(e,t,n=null,o){return function(e,t,n,o,r){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(o,null,r||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new b(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new i.p2(i.HY.from(a),0,0),1,!0))}(this,e,t,n,o),this}setNodeAttribute(e,t,n){return this.step(new z(e,t,n)),this}addNodeMark(e,t){return this.step(new g(e,t)),this}removeNodeMark(e,t){if(!(t instanceof i.vc)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new m(e,t)),this}split(e,t=1,n){return function(e,t,n=1,o){let r=e.doc.resolve(t),s=i.HY.empty,a=i.HY.empty;for(let e=r.depth,t=r.depth-n,l=n-1;e>t;e--,l--){s=i.HY.from(r.node(e).copy(s));let t=o&&o[l];a=i.HY.from(t?t.type.create(t.attrs,a):r.node(e).copy(a))}e.step(new v(t,t,new i.p2(s.append(a),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,i){let o,r,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let d=e.marks;if(!i.isInSet(d)&&c.type.allowsMarkType(i.type)){let c=Math.max(l,t),h=Math.min(l+e.nodeSize,n),u=i.addToSet(d);for(let e=0;e<d.length;e++)d[e].isInSet(u)||(o&&o.to==c&&o.mark.eq(d[e])?o.to=h:s.push(o=new f(c,h,d[e])));r&&r.to==c?r.to=h:a.push(r=new p(c,h,i))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,o){let r=[],s=0;e.doc.nodesBetween(t,n,((e,a)=>{if(!e.isInline)return;s++;let l=null;if(o instanceof i.ZU){let t,n=e.marks;for(;t=o.isInSet(n);)(l||(l=[])).push(t),n=t.removeFromSet(n)}else o?o.isInSet(e.marks)&&(l=[o]):l=e.marks;if(l&&l.length){let i=Math.min(a+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,o=l[e];for(let e=0;e<r.length;e++){let t=r[e];t.step==s-1&&o.eq(r[e].style)&&(n=t)}n?(n.to=i,n.step=s):r.push({style:o,from:Math.max(a,t),to:i,step:s})}}})),r.forEach((t=>e.step(new f(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,o=n.contentMatch){let r=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<r.childCount;t++){let l=r.child(t),c=a+l.nodeSize,d=o.matchType(l.type);if(d){o=d;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new f(a,c,l.marks[t]))}else s.push(new v(a,c,i.p2.empty));a=c}if(!o.validEnd){let t=o.fillBefore(i.HY.empty,!0);e.replace(a,a,new i.p2(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}(this,e,t,n),this}}},4348:(e,t,n)=>{"use strict";n.d(t,{EH:()=>zt,p:()=>Lt,tk:()=>an});var i=n(2376),o=n(7823),r=n(6560);const s=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let l=null;const c=function(e,t,n){let i=l||(l=document.createRange());return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i},d=function(e,t,n,i){return n&&(u(e,t,n,i,-1)||u(e,t,n,i,1))},h=/^(img|br|input|textarea|hr)$/i;function u(e,t,n,i,o){for(;;){if(e==n&&t==i)return!0;if(t==(o<0?0:p(e))){let n=e.parentNode;if(!n||1!=n.nodeType||f(e)||h.test(e.nodeName)||"false"==e.contentEditable)return!1;t=s(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?p(e):0}}}function p(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function f(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const g=function(e){return e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function m(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const v="undefined"!=typeof navigator?navigator:null,b="undefined"!=typeof document?document:null,y=v&&v.userAgent||"",w=/Edge\/(\d+)/.exec(y),k=/MSIE \d/.exec(y),x=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(y),S=!!(k||x||w),C=k?document.documentMode:x?+x[1]:w?+w[1]:0,E=!S&&/gecko\/(\d+)/i.test(y);E&&(/Firefox\/(\d+)/.exec(y)||[0,0])[1];const T=!S&&/Chrome\/(\d+)/.exec(y),_=!!T,A=T?+T[1]:0,O=!S&&!!v&&/Apple Computer/.test(v.vendor),M=O&&(/Mobile\/\w+/.test(y)||!!v&&v.maxTouchPoints>2),I=M||!!v&&/Mac/.test(v.platform),D=/Android \d/.test(y),N=!!b&&"webkitFontSmoothing"in b.documentElement.style,R=N?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function B(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function L(e,t){return"number"==typeof e?e:e[t]}function P(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}function F(e,t,n){let i=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,r=e.dom.ownerDocument;for(let s=n||e.dom;s;s=a(s)){if(1!=s.nodeType)continue;let e=s,n=e==r.body,a=n?B(r):P(e),l=0,c=0;if(t.top<a.top+L(i,"top")?c=-(a.top-t.top+L(o,"top")):t.bottom>a.bottom-L(i,"bottom")&&(c=t.bottom-a.bottom+L(o,"bottom")),t.left<a.left+L(i,"left")?l=-(a.left-t.left+L(o,"left")):t.right>a.right-L(i,"right")&&(l=t.right-a.right+L(o,"right")),l||c)if(n)r.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,i=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let o=e.scrollLeft-n,r=e.scrollTop-i;t={left:t.left-o,top:t.top-r,right:t.right-o,bottom:t.bottom-r}}if(n)break}}function z(e){let t=[],n=e.ownerDocument;for(let i=e;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),e!=n);i=a(i));return t}function H(e,t){for(let n=0;n<e.length;n++){let{dom:i,top:o,left:r}=e[n];i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=r&&(i.scrollLeft=r)}}let j=null;function G(e,t){let n,i,o=2e8,r=0,s=t.top,a=t.top;for(let l=e.firstChild,d=0;l;l=l.nextSibling,d++){let e;if(1==l.nodeType)e=l.getClientRects();else{if(3!=l.nodeType)continue;e=c(l).getClientRects()}for(let c=0;c<e.length;c++){let h=e[c];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<o){n=l,o=e,i=e&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==l.nodeType&&e&&(r=d+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(r=d+1)}}return n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,i=document.createRange();for(let o=0;o<n;o++){i.setEnd(e,o+1),i.setStart(e,o);let n=V(i,1);if(n.top!=n.bottom&&U(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,i):!n||o&&1==n.nodeType?{node:e,offset:r}:G(n,i)}function U(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function $(e,t,n){let i=e.childNodes.length;if(i&&n.top<n.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-n.top)/(n.bottom-n.top))-2)),r=o;;){let n=e.childNodes[r];if(1==n.nodeType){let e=n.getClientRects();for(let i=0;i<e.length;i++){let o=e[i];if(U(t,o))return $(n,t,o)}}if((r=(r+1)%i)==o)break}return e}function W(e,t){let n,i=e.dom.ownerDocument,o=0;if(i.caretPositionFromPoint)try{let e=i.caretPositionFromPoint(t.left,t.top);e&&({offsetNode:n,offset:o}=e)}catch(e){}if(!n&&i.caretRangeFromPoint){let e=i.caretRangeFromPoint(t.left,t.top);e&&({startContainer:n,startOffset:o}=e)}let r,s=(e.root.elementFromPoint?e.root:i).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!U(t,n))return null;if(s=$(e.dom,t,n),!s)return null}if(O)for(let e=s;n&&e;e=a(e))e.draggable&&(n=void 0);if(s=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(E&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,i=n.childNodes[o];"IMG"==i.nodeName&&(e=i.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?r=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(r=function(e,t,n,i){let o=-1;for(let n=t;n!=e.dom;){let t=e.docView.nearestDesc(n,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&(e.left>i.left||e.top>i.top?o=t.posBefore:(e.right<i.left||e.bottom<i.top)&&(o=t.posAfter)),!t.contentDOM&&o<0)return(t.node.isBlock?i.top<(e.top+e.bottom)/2:i.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}n=t.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==r&&(r=function(e,t,n){let{node:i,offset:o}=G(t,n),r=-1;if(1==i.nodeType&&!i.firstChild){let e=i.getBoundingClientRect();r=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(i,o,r)}(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:r,inside:l?l.posAtStart-l.border:-1}}function V(e,t){let n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}const q=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Y(e,t,n){let{node:i,offset:o,atom:r}=e.docView.domFromPos(t,n<0?-1:1),s=N||E;if(3==i.nodeType){if(!s||!q.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){let e=o,t=o,r=n<0?1:-1;return n<0&&!o?(t++,r=-1):n>=0&&o==i.nodeValue.length?(e--,r=1):n<0?e--:t++,K(V(c(i,e,t),1),r<0)}{let e=V(c(i,o,o),n);if(E&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let t=V(c(i,o-1,o-1),-1);if(t.top==e.top){let n=V(c(i,o,o+1),-1);if(n.top!=e.top)return K(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(r||0)).parent.inlineContent){if(null==r&&o&&(n<0||o==p(i))){let e=i.childNodes[o-1];if(1==e.nodeType)return Z(e.getBoundingClientRect(),!1)}if(null==r&&o<p(i)){let e=i.childNodes[o];if(1==e.nodeType)return Z(e.getBoundingClientRect(),!0)}return Z(i.getBoundingClientRect(),n>=0)}if(null==r&&o&&(n<0||o==p(i))){let e=i.childNodes[o-1],t=3==e.nodeType?c(e,p(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return K(V(t,1),!1)}if(null==r&&o<p(i)){let e=i.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return K(V(t,-1),!0)}return K(V(3==i.nodeType?c(i):i,-n),n>=0)}function K(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Z(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function X(e,t,n){let i=e.state,o=e.root.activeElement;i!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),o!=e.dom&&o&&o.focus()}}const J=/[\u0590-\u08ac]/;let Q=null,ee=null,te=!1;function ne(e,t,n){return Q==t&&ee==n?te:(Q=t,ee=n,te="up"==n||"down"==n?function(e,t,n){let i=t.selection,o="up"==n?i.$from:i.$to;return X(e,t,(()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let i=Y(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?i.top-o.top>2*(o.bottom-i.top):o.bottom-i.bottom>2*(i.bottom-o.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,r=!o,s=o==i.parent.content.size,a=e.domSelection();return J.test(i.parent.textContent)&&a.modify?X(e,t,(()=>{let{focusNode:t,focusOffset:o,anchorNode:r,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=i.depth?e.docView.domAfterPos(i.before()):e.dom,{focusNode:d,focusOffset:h}=e.domSelectionRange(),u=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&o==h;try{a.collapse(r,s),t&&(t!=r||o!=s)&&a.extend&&a.extend(t,o)}catch(e){}return null!=l&&(a.caretBidiLevel=l),u})):"left"==n||"backward"==n?r:s}(e,t,n))}class ie{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,i;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}let i;if(e==this.dom&&this.contentDOM)i=t>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!1;break}if(t.previousSibling)break}if(null==i&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!0;break}if(t.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let o,r=this.getDesc(i);if(r&&(!t||r.node)){if(!n||!(o=r.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return r;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],o=n+i.size;if(n==e&&o!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-n-i.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let t=0;n<this.children.length;n++){let o=this.children[n],r=t+o.size;if(r>e||o instanceof de){i=e-t;break}t=r}if(i)return this.children[n].domFromPos(i-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof oe&&e.side>=0;n--);if(t<=0){let e,i=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,i=!1);return e&&t&&i&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?s(e.dom)+1:0}}{let e,i=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,i=!1);return e&&i&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?s(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let r=n,a=0;;a++){let n=this.children[a],l=r+n.size;if(-1==i&&e<=l){let o=r+n.border;if(e>=o&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=r;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=s(n.dom)+1;break}e-=n.size}-1==i&&(i=0)}if(i>-1&&(l>t||a==this.children.length-1)){t=l;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=s(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}r=l}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let o=Math.min(e,t),r=Math.max(e,t);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(o>a&&r<c)return l.setSelection(e-a-l.border,t-a-l.border,n,i);a=c}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=n.getSelection(),h=!1;if((E||O)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if(h=!(!t||"\n"!=e.nodeValue[t-1]),h&&t==e.nodeValue.length)for(let t,n=e;n;n=n.parentNode){if(t=n.nextSibling){"BR"==t.nodeName&&(a=l={node:t.parentNode,offset:s(t)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];h=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(E&&c.focusNode&&c.focusNode!=l.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(i=!0)}if(!(i||h&&O)&&d(a.node,a.offset,c.anchorNode,c.anchorOffset)&&d(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((c.extend||e==t)&&!h){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),u=!0}catch(e){}}if(!u){if(e>t){let e=a;a=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let o=this.children[i],r=n+o.size;if(n==r?e<=r&&t>=n:e<r&&t>n){let i=n+o.border,s=r-o.border;if(e>=i&&t<=s)return this.dirty=e==n||t==r?2:1,void(e!=i||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-i,t-i):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=r}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class oe extends ie{constructor(e,t,n,i){let o,r=t.type.toDOM;if("function"==typeof r&&(r=r(n,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:i))),!t.type.spec.raw){if(1!=r.nodeType){let e=document.createElement("span");e.appendChild(r),r=e}r.contentEditable="false",r.classList.add("ProseMirror-widget")}super(e,[],r,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class re extends ie{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class se extends ie{constructor(e,t,n,i){super(e,[],n,i),this.mark=t}static create(e,t,n,i){let r=i.nodeViews[t.type.name],s=r&&r(t,i,n);return s&&s.dom||(s=o.PW.renderSpec(document,t.type.spec.toDOM(t,n))),new se(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let i=se.create(this.parent,this.mark,!0,n),o=this.children,r=this.size;t<r&&(o=Se(o,t,r,n)),e>0&&(o=Se(o,0,e,n));for(let e=0;e<o.length;e++)o[e].parent=i;return i.children=o,i}}class ae extends ie{constructor(e,t,n,i,o,r,s,a,l){super(e,[],o,r),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s,r&&this.updateChildren(a,l)}static create(e,t,n,i,r,s){let a,l=r.nodeViews[t.type.name],c=l&&l(t,r,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s),n,i),d=c&&c.dom,h=c&&c.contentDOM;if(t.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(t.text);else d||({dom:d,contentDOM:h}=o.PW.renderSpec(document,t.type.spec.toDOM(t)));h||t.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let u=d;return d=be(d,n,t),c?a=new he(e,t,n,i,d,h||null,u,c,r,s+1):t.isText?new ce(e,t,n,i,d,u,r):new ae(e,t,n,i,d,h||null,u,r,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>o.HY.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ye(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,r=e.composing?this.localCompositionInfo(e,t):null,s=r&&r.pos>-1?r:null,a=r&&r.pos<0,l=new ke(this,s&&s.node,e);!function(e,t,n,i){let o=t.locals(e),r=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);i(s,o,t.forChild(r,s),n),r+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<o.length&&o[s].to==r){let e,t=o[s++];for(;s<o.length&&o[s].to==r;)(e||(e=[t])).push(o[s++]);if(e){e.sort(xe);for(let t=0;t<e.length;t++)n(e[t],c,!!l)}else n(t,c,!!l)}let d,h;if(l)h=-1,d=l,l=null;else{if(!(c<e.childCount))break;h=c,d=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=r&&a.splice(e--,1);for(;s<o.length&&o[s].from<=r&&o[s].to>r;)a.push(o[s++]);let u=r+d.nodeSize;if(d.isText){let e=u;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<u&&(l=d.cut(e-r),d=d.cut(0,e-r),u=e,h=-1)}i(d,d.isInline&&!d.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(r,d),h),r=u}}(this.node,this.innerDeco,((t,r,s)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&l.syncToMarks(r==this.node.childCount?o.vc.none:this.node.child(r).marks,n,e),l.placeWidget(t,e,i)}),((t,o,s,c)=>{let d;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,o,s,c)||a&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(d=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(t,o,s,d,e)||l.updateNextNode(t,o,s,e,c)||l.addNode(t,o,s,e,i),i+=t.nodeSize})),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),ue(this.contentDOM,this.children,e),M&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:o}=e.state.selection;if(!(e.state.selection instanceof i.Bs)||n<t||o>t+this.node.content.size)return null;let r=e.domSelectionRange(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=p(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(r.focusNode,r.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,i=function(e,t,n,i){for(let o=0,r=0;o<e.childCount&&r<=i;){let s=e.child(o++),a=r;if(r+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<e.childCount;){let t=e.child(o++);if(r+=t.nodeSize,!t.isText)break;l+=t.text}if(r>=n){let e=a<i?l.lastIndexOf(t,i-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}(this.node.content,e,n-t,o-t);return i<0?null:{node:s,pos:i,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let r=new re(this,o,t,i);e.input.compositionNodes.push(r),this.children=Se(this.children,n,n+i.length,e,r)}update(e,t,n,i){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(ye(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=me(this.dom,this.nodeDOM,ge(this.outerDeco,this.node,t),ge(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function le(e,t,n,i,o){return be(i,t,e),new ae(void 0,e,t,n,i,i,i,o,0)}class ce extends ae{constructor(e,t,n,i,o,r,s){super(e,t,n,i,o,null,r,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new ce(this.parent,i,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class de extends ie{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class he extends ae{constructor(e,t,n,i,o,r,s,a,l,c){super(e,t,n,i,o,r,s,l,c),this.spec=a}update(e,t,n,i){if(3==this.dirty)return!1;if(this.spec.update){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,i),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ue(e,t,n){let i=e.firstChild,o=!1;for(let r=0;r<t.length;r++){let s=t[r],a=s.dom;if(a.parentNode==e){for(;a!=i;)i=we(i),o=!0;i=i.nextSibling}else o=!0,e.insertBefore(a,i);if(s instanceof se){let t=i?i.previousSibling:e.lastChild;ue(s.contentDOM,s.children,n),i=t?t.nextSibling:e.firstChild}}for(;i;)i=we(i),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const pe=function(e){e&&(this.nodeName=e)};pe.prototype=Object.create(null);const fe=[new pe];function ge(e,t,n){if(0==e.length)return fe;let i=n?fe[0]:new pe,o=[i];for(let r=0;r<e.length;r++){let s=e[r].type.attrs;if(s){s.nodeName&&o.push(i=new pe(s.nodeName));for(let e in s){let r=s[e];null!=r&&(n&&1==o.length&&o.push(i=new pe(t.isInline?"span":"div")),"class"==e?i.class=(i.class?i.class+" ":"")+r:"style"==e?i.style=(i.style?i.style+";":"")+r:"nodeName"!=e&&(i[e]=r))}}}return o}function me(e,t,n,i){if(n==fe&&i==fe)return t;let o=t;for(let t=0;t<i.length;t++){let r=i[t],s=n[t];if(t){let t;s&&s.nodeName==r.nodeName&&o!=e&&(t=o.parentNode)&&t.nodeName.toLowerCase()==r.nodeName||(t=document.createElement(r.nodeName),t.pmIsDeco=!0,t.appendChild(o),s=fe[0]),o=t}ve(o,s||fe[0],r)}return o}function ve(e,t,n){for(let i in t)"class"==i||"style"==i||"nodeName"==i||i in n||e.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<i.length;t++)-1==o.indexOf(i[t])&&e.classList.remove(i[t]);for(let t=0;t<o.length;t++)-1==i.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=i.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function be(e,t,n){return me(e,e,fe,ge(t,n,1!=e.nodeType))}function ye(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function we(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class ke{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,i=n.children.length,o=e.childCount,r=new Map,s=[];e:for(;o>0;){let a;for(;;)if(i){let e=n.children[i-1];if(!(e instanceof se)){a=e,i--;break}n=e,i=e.children.length}else{if(n==t)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,r.set(a,o),s.push(a)}}return{index:o,matched:r,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let i=0,o=this.stack.length>>1,r=Math.min(o,e.length);for(;i<r&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&!1!==e[i].type.spec.spanning;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){i=t;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let i=se.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,i){let o,r=-1;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))r=this.top.children.indexOf(o,this.index);else for(let i=this.index,o=Math.min(this.top.children.length,i+5);i<o;i++){let o=this.top.children[i];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){r=i;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(e,t,n,i,o){let r=this.top.children[i];return 3==r.dirty&&r.dom==r.contentDOM&&(r.dirty=2),!!r.update(e,t,n,o)&&(this.destroyBetween(this.index,i),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,i,o){for(let r=this.index;r<this.top.children.length;r++){let s=this.top.children[r];if(s instanceof ae){let a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;let l=s.dom;if(!(this.isLocked(l)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&ye(t,s.outerDeco)))&&s.update(e,t,n,i))return this.destroyBetween(this.index,r),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,n,i,o){this.top.children.splice(this.index++,0,ae.create(this.top,e,t,n,i,o)),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(e)||e!=i.widget&&i.widget.type.toDOM.parentNode){let i=new oe(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof se;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ce)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((O||_)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let i=new de(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function xe(e,t){return e.type.side-t.type.side}function Se(e,t,n,i,o){let r=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,d=a+=l.size;c>=n||d<=t?r.push(l):(c<t&&r.push(l.slice(0,t-c,i)),o&&(r.push(o),o=void 0),d>n&&r.push(l.slice(n-c,l.size,i)))}return r}function Ce(e,t=null){let n=e.domSelectionRange(),o=e.state.doc;if(!n.focusNode)return null;let r=e.docView.nearestDesc(n.focusNode),a=r&&0==r.size,l=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c,d,h=o.resolve(l);if(g(n)){for(c=h;r&&!r.node;)r=r.parent;let e=r.node;if(r&&e.isAtom&&i.qv.isSelectable(e)&&r.parent&&(!e.isInline||!function(e,t,n){for(let i=0==t,o=t==p(e);i||o;){if(e==n)return!0;let t=s(e);if(!(e=e.parentNode))return!1;i=i&&0==t,o=o&&t==p(e)}}(n.focusNode,n.focusOffset,r.dom))){let e=r.posBefore;d=new i.qv(l==e?h:o.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;c=o.resolve(t)}if(!d){d=Ne(e,c,h,"pointer"==t||e.state.selection.head<h.pos&&!a?1:-1)}return d}function Ee(e){return e.editable?e.hasFocus():Be(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Te(e,t=!1){let n=e.state.selection;if(Ie(e,n),Ee(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&_){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&d(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),i=e.cursorWrapper.dom,o="IMG"==i.nodeName;o?n.setEnd(i.parentNode,s(i)+1):n.setEnd(i,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&S&&C<=11&&(i.disabled=!0,i.disabled=!1)}(e);else{let o,r,{anchor:s,head:a}=n;!_e||n instanceof i.Bs||(n.$from.parent.inlineContent||(o=Ae(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=Ae(e,n.to))),e.docView.setSelection(s,a,e.root,t),_e&&(o&&Me(o),r&&Me(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),i=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==i&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Ee(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const _e=O||_&&A<63;function Ae(e,t){let{node:n,offset:i}=e.docView.domFromPos(t,0),o=i<n.childNodes.length?n.childNodes[i]:null,r=i?n.childNodes[i-1]:null;if(O&&o&&"false"==o.contentEditable)return Oe(o);if(!(o&&"false"!=o.contentEditable||r&&"false"!=r.contentEditable)){if(o)return Oe(o);if(r)return Oe(r)}}function Oe(e){return e.contentEditable="true",O&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Me(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ie(e,t){if(t instanceof i.qv){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(De(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else De(e)}function De(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Ne(e,t,n,o){return e.someProp("createSelectionBetween",(i=>i(e,t,n)))||i.Bs.between(t,n,o)}function Re(e){return!(e.editable&&!e.hasFocus())&&Be(e)}function Be(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Le(e,t){let{$anchor:n,$head:o}=e.selection,r=t>0?n.max(o):n.min(o),s=r.parent.inlineContent?r.depth?e.doc.resolve(t>0?r.after():r.before()):null:r;return s&&i.Y1.findFrom(s,t)}function Pe(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Fe(e,t,n){let o=e.state.selection;if(!(o instanceof i.Bs)){if(o instanceof i.qv&&o.node.isInline)return Pe(e,new i.Bs(t>0?o.$to:o.$from));{let n=Le(e.state,t);return!!n&&Pe(e,n)}}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let n=Le(e.state,t);return!!(n&&n instanceof i.qv)&&Pe(e,n)}if(!(I&&n.indexOf("m")>-1)){let n,r=o.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText)return!1;let a=t<0?r.pos-s.nodeSize:r.pos;return!!(s.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(i.qv.isSelectable(s)?Pe(e,new i.qv(t<0?e.state.doc.resolve(r.pos-s.nodeSize):r)):!!N&&Pe(e,new i.Bs(e.state.doc.resolve(t<0?a:a+s.nodeSize))))}}function ze(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function He(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function je(e){let t=e.domSelectionRange(),n=t.focusNode,i=t.focusOffset;if(!n)return;let o,r,a=!1;for(E&&1==n.nodeType&&i<ze(n)&&He(n.childNodes[i])&&(a=!0);;)if(i>0){if(1!=n.nodeType)break;{let e=n.childNodes[i-1];if(He(e))o=n,r=--i;else{if(3!=e.nodeType)break;n=e,i=n.nodeValue.length}}}else{if(Ue(n))break;{let t=n.previousSibling;for(;t&&He(t);)o=n.parentNode,r=s(t),t=t.previousSibling;if(t)n=t,i=ze(n);else{if(n=n.parentNode,n==e.dom)break;i=0}}}a?$e(e,n,i):o&&$e(e,o,r)}function Ge(e){let t=e.domSelectionRange(),n=t.focusNode,i=t.focusOffset;if(!n)return;let o,r,a=ze(n);for(;;)if(i<a){if(1!=n.nodeType)break;if(!He(n.childNodes[i]))break;o=n,r=++i}else{if(Ue(n))break;{let t=n.nextSibling;for(;t&&He(t);)o=t.parentNode,r=s(t)+1,t=t.nextSibling;if(t)n=t,i=0,a=ze(n);else{if(n=n.parentNode,n==e.dom)break;i=a=0}}}o&&$e(e,o,r)}function Ue(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function $e(e,t,n){let i=e.domSelection();if(g(i)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),i.removeAllRanges(),i.addRange(e)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&Te(e)}),50)}function We(e,t,n){let o=e.state.selection;if(o instanceof i.Bs&&!o.empty||n.indexOf("s")>-1)return!1;if(I&&n.indexOf("m")>-1)return!1;let{$from:r,$to:s}=o;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Le(e.state,t);if(n&&n instanceof i.qv)return Pe(e,n)}if(!r.parent.inlineContent){let n=t<0?r:s,a=o instanceof i.C1?i.Y1.near(n,t):i.Y1.findFrom(n,t);return!!a&&Pe(e,a)}return!1}function Ve(e,t){if(!(e.state.selection instanceof i.Bs))return!0;let{$head:n,$anchor:o,empty:r}=e.state.selection;if(!n.sameParent(o))return!0;if(!r)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=e.state.tr;return t<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),e.dispatch(i),!0}return!1}function qe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ye(e,t){let n=t.keyCode,i=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||I&&72==n&&"c"==i?Ve(e,-1)||je(e):46==n||I&&68==n&&"c"==i?Ve(e,1)||Ge(e):13==n||27==n||(37==n||I&&66==n&&"c"==i?Fe(e,-1,i)||je(e):39==n||I&&70==n&&"c"==i?Fe(e,1,i)||Ge(e):38==n||I&&80==n&&"c"==i?We(e,-1,i)||je(e):40==n||I&&78==n&&"c"==i?function(e){if(!O||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;qe(e,n,"true"),setTimeout((()=>qe(e,n,"false")),20)}return!1}(e)||We(e,1,i)||Ge(e):i==(I?"m":"c")&&(66==n||73==n||89==n||90==n))}function Ke(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,s--;let e=i.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),i=e.content}let a=e.someProp("clipboardSerializer")||o.PW.fromSchema(e.state.schema),l=rt(),c=l.createElement("div");c.appendChild(a.serializeFragment(i,{document:l}));let d,h=c.firstChild,u=0;for(;h&&1==h.nodeType&&(d=it[h.nodeName.toLowerCase()]);){for(let e=d.length-1;e>=0;e--){let t=l.createElement(d[e]);for(;c.firstChild;)t.appendChild(c.firstChild);c.appendChild(t),u++}h=c.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${r} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ze(e,t,n,i,r){let s,a,l=r.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(i||l||!n);if(c){if(e.someProp("transformPastedText",(n=>{t=n(t,l||i,e)})),l)return t?new o.p2(o.HY.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):o.p2.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,r,i,e)));if(n)a=n;else{let n=r.marks(),{schema:i}=e.state,a=o.PW.fromSchema(i);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(i.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),s=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,i=rt().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&it[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(i.innerHTML=e,n)for(let e=0;e<n.length;e++)i=i.querySelector(n[e])||i;return i}(n),N&&function(e){let t=e.querySelectorAll(_?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let i=t[n];1==i.childNodes.length&&" "==i.textContent&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}(s);let d=s&&s.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let e=+h[3];e>0;e--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||o.aw.fromSchema(e.state.schema);a=t.parseSlice(s,{preserveWhitespace:!(!c&&!h),context:r,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Xe.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(h)a=function(e,t){if(!e.size)return e;let n,i=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}let{content:r,openStart:s,openEnd:a}=e;for(let e=n.length-2;e>=0;e-=2){let t=i.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;r=o.HY.from(t.create(n[e+1],r)),s++,a++}return new o.p2(r,s,a)}(nt(a,+h[1],+h[2]),h[4]);else if(a=o.p2.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i,r=t.node(n).contentMatchAt(t.index(n)),s=[];if(e.forEach((e=>{if(!s)return;let t,n=r.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&Qe(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=et(s[s.length-1],i.length));let t=Je(e,n);s.push(t),r=r.matchType(t.type),i=n}})),s)return o.HY.from(s)}return e}(a.content,r),!0),a.openStart||a.openEnd){let e=0,t=0;for(let t=a.content.firstChild;e<a.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=a.content.lastChild;t<a.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);a=nt(a,e,t)}return e.someProp("transformPasted",(t=>{a=t(a,e)})),a}const Xe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Je(e,t,n=0){for(let i=t.length-1;i>=n;i--)e=t[i].create(null,o.HY.from(e));return e}function Qe(e,t,n,i,r){if(r<e.length&&r<t.length&&e[r]==t[r]){let s=Qe(e,t,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==e.length-1?n.type:e[r+1]))return i.copy(i.content.append(o.HY.from(Je(n,e,r+1))))}}function et(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,et(e.lastChild,t-1)),i=e.contentMatchAt(e.childCount).fillBefore(o.HY.empty,!0);return e.copy(n.append(i))}function tt(e,t,n,i,r,s){let a=t<0?e.firstChild:e.lastChild,l=a.content;return r<i-1&&(l=tt(l,t,n,i,r+1,s)),r>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,e.childCount>1||s<=r).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(o.HY.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}function nt(e,t,n){return t<e.openStart&&(e=new o.p2(tt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new o.p2(tt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const it={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ot=null;function rt(){return ot||(ot=document.implementation.createHTMLDocument("title"))}const st={},at={},lt={touchstart:!0,touchmove:!0};class ct{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function dt(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ht(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>ut(e,t))}))}function ut(e,t){return e.someProp("handleDOMEvents",(n=>{let i=n[t.type];return!!i&&(i(e,t)||t.defaultPrevented)}))}function pt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function ft(e){return{left:e.clientX,top:e.clientY}}function gt(e,t,n,i,o){if(-1==i)return!1;let r=e.state.doc.resolve(i);for(let i=r.depth+1;i>0;i--)if(e.someProp(t,(t=>i>r.depth?t(e,n,r.nodeAfter,r.before(i),o,!0):t(e,n,r.node(i),r.before(i),o,!1))))return!0;return!1}function mt(e,t,n){e.focused||e.focus();let i=e.state.tr.setSelection(t);"pointer"==n&&i.setMeta("pointer",!0),e.dispatch(i)}function vt(e,t,n,o,r){return gt(e,"handleClickOn",t,n,o)||e.someProp("handleClick",(n=>n(e,t,o)))||(r?function(e,t){if(-1==t)return!1;let n,o,r=e.state.selection;r instanceof i.qv&&(n=r.node);let s=e.state.doc.resolve(t);for(let e=s.depth+1;e>0;e--){let t=e>s.depth?s.nodeAfter:s.node(e);if(i.qv.isSelectable(t)){o=n&&r.$from.depth>0&&e>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(e);break}}return null!=o&&(mt(e,i.qv.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&i.qv.isSelectable(o))&&(mt(e,new i.qv(n),"pointer"),!0)}(e,n))}function bt(e,t,n,i){return gt(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",(n=>n(e,t,i)))}function yt(e,t,n,o){return gt(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",(n=>n(e,t,o)))||function(e,t,n){if(0!=n.button)return!1;let o=e.state.doc;if(-1==t)return!!o.inlineContent&&(mt(e,i.Bs.create(o,0,o.content.size),"pointer"),!0);let r=o.resolve(t);for(let t=r.depth+1;t>0;t--){let n=t>r.depth?r.nodeAfter:r.node(t),s=r.before(t);if(n.inlineContent)mt(e,i.Bs.create(o,s+1,s+1+n.content.size),"pointer");else{if(!i.qv.isSelectable(n))continue;mt(e,i.qv.create(o,s),"pointer")}return!0}}(e,n,o)}function wt(e){return _t(e)}at.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!St(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!D||!_||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!M||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Ye(e,n)?n.preventDefault():dt(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,m(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},at.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},at.keypress=(e,t)=>{let n=t;if(St(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||I&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let o=e.state.selection;if(!(o instanceof i.Bs&&o.$from.sameParent(o.$to))){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,o.$from.pos,o.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const kt=I?"metaKey":"ctrlKey";st.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let i=wt(e),o=Date.now(),r="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}(n,e.input.lastClick)&&!n[kt]&&("singleClick"==e.input.lastClick.type?r="doubleClick":"doubleClick"==e.input.lastClick.type&&(r="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:r};let s=e.posAtCoords(ft(n));s&&("singleClick"==r?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new xt(e,s,n,!!i)):("doubleClick"==r?bt:yt)(e,s.pos,s.inside,n)?n.preventDefault():dt(e,"pointer"))};class xt{constructor(e,t,n,o){let r,s;if(this.view=e,this.pos=t,this.event=n,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[kt],this.allowDefault=n.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),s=t.inside;else{let n=e.state.doc.resolve(t.pos);r=n.parent,s=n.depth?n.before():0}const a=o?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||c instanceof i.qv&&c.from<=s&&c.to>s)&&(this.mightDrag={node:r,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!E||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),dt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Te(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ft(e))),this.updateAllowDefault(e),this.allowDefault||!t?dt(this.view,"pointer"):vt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||O&&this.mightDrag&&!this.mightDrag.node.isAtom||_&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(mt(this.view,i.Y1.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):dt(this.view,"pointer")}move(e){this.updateAllowDefault(e),dt(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function St(e,t){return!!e.composing||!!(O&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}st.touchstart=e=>{e.input.lastTouch=Date.now(),wt(e),dt(e,"pointer")},st.touchmove=e=>{e.input.lastTouch=Date.now(),dt(e,"pointer")},st.contextmenu=e=>wt(e);const Ct=D?5e3:-1;function Et(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>_t(e)),t))}function Tt(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function _t(e,t=!1){if(!(D&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Tt(e),t||e.docView&&e.docView.dirty){let t=Ce(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}at.compositionstart=at.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),_t(e,!0),e.markCursor=null;else if(_t(e),E&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,i=t.focusOffset;n&&1==n.nodeType&&0!=i;){let t=i<0?n.lastChild:n.childNodes[i-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,i=-1}}e.input.composing=!0}Et(e,Ct)},at.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,Et(e,20))};const At=S&&C<15||M&&R<604;function Ot(e,t,n,i,r){let s=Ze(e,t,n,i,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,r,s||o.p2.empty))))return!0;if(!s)return!1;let a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(s),l=a?e.state.tr.replaceSelectionWith(a,e.input.shiftKey):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}st.copy=at.cut=(e,t)=>{let n=t,i=e.state.selection,o="cut"==n.type;if(i.empty)return;let r=At?null:n.clipboardData,s=i.content(),{dom:a,text:l}=Ke(e,s);r?(n.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},at.paste=(e,t)=>{let n=t;if(e.composing&&!D)return;let i=At?null:n.clipboardData;i&&Ot(e,i.getData("text/plain"),i.getData("text/html"),e.input.shiftKey,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Ot(e,i.value,null,e.input.shiftKey,t):Ot(e,i.textContent,i.innerHTML,e.input.shiftKey,t)}),50)}(e,n)};class Mt{constructor(e,t){this.slice=e,this.move=t}}const It=I?"altKey":"ctrlKey";st.dragstart=(e,t)=>{let n=t,o=e.input.mouseDown;if(o&&o.done(),!n.dataTransfer)return;let r=e.state.selection,s=r.empty?null:e.posAtCoords(ft(n));if(s&&s.pos>=r.from&&s.pos<=(r instanceof i.qv?r.to-1:r.to));else if(o&&o.mightDrag)e.dispatch(e.state.tr.setSelection(i.qv.create(e.state.doc,o.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(i.qv.create(e.state.doc,t.posBefore)))}let a=e.state.selection.content(),{dom:l,text:c}=Ke(e,a);n.dataTransfer.clearData(),n.dataTransfer.setData(At?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",At||n.dataTransfer.setData("text/plain",c),e.dragging=new Mt(a,!n[It])},st.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},at.dragover=at.dragenter=(e,t)=>t.preventDefault(),at.drop=(e,t)=>{let n=t,s=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let a=e.posAtCoords(ft(n));if(!a)return;let l=e.state.doc.resolve(a.pos),c=s&&s.slice;c?e.someProp("transformPasted",(t=>{c=t(c,e)})):c=Ze(e,n.dataTransfer.getData(At?"Text":"text/plain"),At?null:n.dataTransfer.getData("text/html"),!1,l);let d=!(!s||n[It]);if(e.someProp("handleDrop",(t=>t(e,n,c||o.p2.empty,d))))return void n.preventDefault();if(!c)return;n.preventDefault();let h=c?(0,r.nj)(e.state.doc,l.pos,c):l.pos;null==h&&(h=l.pos);let u=e.state.tr;d&&u.deleteSelection();let p=u.mapping.map(h),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,g=u.doc;if(f?u.replaceRangeWith(p,p,c.content.firstChild):u.replaceRange(p,p,c),u.doc.eq(g))return;let m=u.doc.resolve(p);if(f&&i.qv.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))u.setSelection(new i.qv(m));else{let t=u.mapping.map(h);u.mapping.maps[u.mapping.maps.length-1].forEach(((e,n,i,o)=>t=o)),u.setSelection(Ne(e,m,u.doc.resolve(t)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))},st.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Te(e)}),20))},st.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},st.beforeinput=(e,t)=>{if(_&&D&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,m(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let e in at)st[e]=at[e];function Dt(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Nt{constructor(e,t){this.toDOM=e,this.spec=t||Ft,this.side=this.spec.side||0}map(e,t,n,i){let{pos:o,deleted:r}=e.mapResult(t.from+i,this.side<0?-1:1);return r?null:new Lt(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Dt(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Rt{constructor(e,t){this.attrs=e,this.spec=t||Ft}map(e,t,n,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,r=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return o>=r?null:new Lt(o,r,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Rt&&Dt(this.attrs,e.attrs)&&Dt(this.spec,e.spec)}static is(e){return e.type instanceof Rt}destroy(){}}class Bt{constructor(e,t){this.attrs=e,this.spec=t||Ft}map(e,t,n,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let r=e.mapResult(t.to+i,-1);return r.deleted||r.pos<=o.pos?null:new Lt(o.pos-n,r.pos-n,this)}valid(e,t){let n,{index:i,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(i)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Bt&&Dt(this.attrs,e.attrs)&&Dt(this.spec,e.spec)}destroy(){}}class Lt{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Lt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Lt(e,e,new Nt(t,n))}static inline(e,t,n,i){return new Lt(e,t,new Rt(n,i))}static node(e,t,n,i){return new Lt(e,t,new Bt(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Rt}}const Pt=[],Ft={};class zt{constructor(e,t){this.local=e.length?e:Pt,this.children=t.length?t:Pt}static create(e,t){return t.length?Wt(t,e,0,Ft):Ht}find(e,t,n){let i=[];return this.findInner(null==e?0:e,null==t?1e9:t,i,0,n),i}findInner(e,t,n,i,o){for(let r=0;r<this.local.length;r++){let s=this.local[r];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let r=0;r<this.children.length;r+=3)if(this.children[r]<t&&this.children[r+1]>e){let s=this.children[r]+1;this.children[r+2].findInner(e-s,t-s,n,i+s,o)}}map(e,t,n){return this==Ht||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Ft)}mapInner(e,t,n,i,o){let r;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,i);a&&a.type.valid(t,a)?(r||(r=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,i,o,r,s){let a=e.slice();for(let e=0,t=r;e<n.maps.length;e++){let i=0;n.maps[e].forEach(((e,n,r,s)=>{let l=s-r-(n-e);for(let s=0;s<a.length;s+=3){let c=a[s+1];if(c<0||e>c+t-i)continue;let d=a[s]+t-i;n>=d?a[s+1]=e<=d?-2:-1:r>=o&&l&&(a[s]+=l,a[s+1]+=l)}i+=l})),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+r),d=c-o;if(d<0||d>=i.content.size){l=!0;continue}let h=n.map(e[t+1]+r,-1)-o,{index:u,offset:p}=i.content.findIndex(d),f=i.maybeChild(u);if(f&&p==d&&p+f.nodeSize==h){let i=a[t+2].mapInner(n,f,c+1,e[t]+r+1,s);i!=Ht?(a[t]=d,a[t+1]=h,a[t+2]=i):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,i,o,r,s){function a(e,t){for(let r=0;r<e.local.length;r++){let a=e.local[r].map(i,o,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[r].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&a(e[n+2],t[n]+r+1);return n}(a,e,t,n,o,r,s),c=Wt(l,i,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new zt(t.sort(Vt),a)}(this.children,r||[],e,t,n,i,o):r?new zt(r.sort(Vt),Pt):Ht}add(e,t){return t.length?this==Ht?zt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,o=0;e.forEach(((e,r)=>{let s,a=r+n;if(s=Ut(t,e,a)){for(i||(i=this.children.slice());o<i.length&&i[o]<r;)o+=3;i[o]==r?i[o+2]=i[o+2].addInner(e,s,a+1):i.splice(o,0,r,r+e.nodeSize,Wt(s,e,a+1,Ft)),o+=3}}));let r=Gt(o?$t(t):t,-n);for(let t=0;t<r.length;t++)r[t].type.valid(e,r[t])||r.splice(t--,1);return new zt(r.length?this.local.concat(r).sort(Vt):this.local,i||this.children)}remove(e){return 0==e.length||this==Ht?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let i=0;i<n.length;i+=3){let o,r=n[i]+t,s=n[i+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>r&&t.to<s&&(e[n]=null,(o||(o=[])).push(t));if(!o)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(o,r+1);a!=Ht?n[i+2]=a:(n.splice(i,3),i-=3)}if(i.length)for(let n,o=0;o<e.length;o++)if(n=e[o])for(let e=0;e<i.length;e++)i[e].eq(n,t)&&(i==this.local&&(i=this.local.slice()),i.splice(e--,1));return n==this.children&&i==this.local?this:i.length||n.length?new zt(i,n):Ht}forChild(e,t){if(this==Ht)return this;if(t.isLeaf)return zt.empty;let n,i;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let o=e+1,r=o+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<r&&t.to>o&&t.type instanceof Rt){let e=Math.max(o,t.from)-o,n=Math.min(r,t.to)-o;e<n&&(i||(i=[])).push(t.copy(e,n))}}if(i){let e=new zt(i.sort(Vt),Pt);return n?new jt([e,n]):e}return n||Ht}eq(e){if(this==e)return!0;if(!(e instanceof zt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qt(this.localsInner(e))}localsInner(e){if(this==Ht)return Pt;if(e.inlineContent||!this.local.some(Rt.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof Rt||t.push(this.local[e]);return t}}zt.empty=new zt([],[]),zt.removeOverlap=qt;const Ht=zt.empty;class jt{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,Ft)));return jt.from(n)}forChild(e,t){if(t.isLeaf)return zt.empty;let n=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=Ht&&(o instanceof jt?n=n.concat(o.members):n.push(o))}return jt.from(n)}eq(e){if(!(e instanceof jt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?qt(n?t:t.sort(Vt)):Pt}static from(e){switch(e.length){case 0:return Ht;case 1:return e[0];default:return new jt(e.every((e=>e instanceof zt))?e:e.reduce(((e,t)=>e.concat(t instanceof zt?t:t.members)),[]))}}}function Gt(e,t){if(!t||!e.length)return e;let n=[];for(let i=0;i<e.length;i++){let o=e[i];n.push(new Lt(o.from+t,o.to+t,o.type))}return n}function Ut(e,t,n){if(t.isLeaf)return null;let i=n+t.nodeSize,o=null;for(let t,r=0;r<e.length;r++)(t=e[r])&&t.from>n&&t.to<i&&((o||(o=[])).push(t),e[r]=null);return o}function $t(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Wt(e,t,n,i){let o=[],r=!1;t.forEach(((t,s)=>{let a=Ut(e,t,s+n);if(a){r=!0;let e=Wt(a,t,n+s+1,i);e!=Ht&&o.push(s,s+t.nodeSize,e)}}));let s=Gt(r?$t(e):e,-n).sort(Vt);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(i.onRemove&&i.onRemove(s[e].spec),s.splice(e--,1));return s.length||o.length?new zt(s,o):Ht}function Vt(e,t){return e.from-t.from||e.to-t.to}function qt(e){let t=e;for(let n=0;n<t.length-1;n++){let i=t[n];if(i.from!=i.to)for(let o=n+1;o<t.length;o++){let r=t[o];if(r.from!=i.from){r.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,r.from),Yt(t,o,i.copy(r.from,i.to)));break}r.to!=i.to&&(t==e&&(t=e.slice()),t[o]=r.copy(r.from,i.to),Yt(t,o+1,r.copy(i.to,r.to)))}}return t}function Yt(e,t,n){for(;t<e.length&&Vt(n,e[t])>0;)t++;e.splice(t,0,n)}function Kt(e){let t=[];return e.someProp("decorations",(n=>{let i=n(e.state);i&&i!=Ht&&t.push(i)})),e.cursorWrapper&&t.push(zt.create(e.state.doc,[e.cursorWrapper.deco])),jt.from(t)}const Zt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xt=S&&C<=11;class Jt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Qt{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Jt,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);S&&C<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Xt&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Zt)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(Re(this.view)){if(this.suppressingSelectionUpdates)return Te(this.view);if(S&&C<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let t=e.focusNode;t;t=a(t))n.add(t);for(let i=e.anchorNode;i;i=a(i))if(n.has(i)){t=i;break}let i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let n=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Re(e)&&!this.ignoreSelectionChange(n),r=-1,s=-1,a=!1,l=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],l);n&&(r=r<0?n.from:Math.min(n.from,r),s=s<0?n.to:Math.max(n.to,s),n.typeOver&&(a=!0))}if(E&&l.length>1){let e=l.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let c=null;r<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&g(n)&&(c=Ce(e))&&c.eq(i.Y1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Te(e),this.currentSelection.set(n),e.scrollToSelection()):(r>-1||o)&&(r>-1&&(e.docView.markDirty(r,s),function(e){if(en.has(e))return;if(en.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=E,tn)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),tn=!0}}(e)),this.handleDOMChange(r,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Te(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,o=e.nextSibling;if(S&&C<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:r}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(i=n),(!r||Array.prototype.indexOf.call(e.addedNodes,r)<0)&&(o=r)}let r=i&&i.parentNode==e.target?s(i)+1:0,a=n.localPosFromDOM(e.target,r,-1),l=o&&o.parentNode==e.target?s(o):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let en=new WeakMap,tn=!1;function nn(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(O&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||O&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}function on(e,t,n,r,s){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Ce(e,t);if(n&&!e.state.selection.eq(n)){if(_&&D&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,m(13,"Enter")))))return;let i=e.state.tr.setSelection(n);"pointer"==t?i.setMeta("pointer",!0):"key"==t&&i.scrollIntoView(),e.dispatch(i)}return}let a=e.state.doc.resolve(t),l=a.sharedDepth(n);t=a.before(l+1),n=e.state.doc.resolve(n).after(l+1);let c,d,h=e.state.selection,u=function(e,t,n){let i,{node:r,fromOffset:s,toOffset:a,from:l,to:c}=e.docView.parseRange(t,n),d=e.domSelectionRange(),h=d.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(i=[{node:h,offset:d.anchorOffset}],g(d)||i.push({node:d.focusNode,offset:d.focusOffset})),_&&8===e.input.lastKeyCode)for(let e=a;e>s;e--){let t=r.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){a=e;break}if(!n||n.size)break}let u=e.state.doc,p=e.someProp("domParser")||o.aw.fromSchema(e.state.schema),f=u.resolve(l),m=null,v=p.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:i,ruleFromNode:nn,context:f});if(i&&null!=i[0].pos){let e=i[0].pos,t=i[1]&&i[1].pos;null==t&&(t=e),m={anchor:e+l,head:t+l}}return{doc:v,sel:m,from:l,to:c}}(e,t,n),p=e.state.doc,f=p.slice(u.from,u.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(c=e.state.selection.to,d="end"):(c=e.state.selection.from,d="start"),e.input.lastKeyCode=null;let v=function(e,t,n,i,o){let r=e.findDiffStart(t,n);if(null==r)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){i-=s+Math.max(0,r-Math.min(s,a))-r}if(s<r&&e.size<t.size){r-=i<=r&&i>=s?r-i:0,a=r+(a-s),s=r}else if(a<r){r-=i<=r&&i>=a?r-i:0,s=r+(s-a),a=r}return{start:r,endA:s,endB:a}}(f.content,u.doc.content,u.from,c,d);if((M&&e.input.lastIOSEnter>Date.now()-225||D)&&s.some((e=>"DIV"==e.nodeName||"P"==e.nodeName||"LI"==e.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",(t=>t(e,m(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!v){if(!(r&&h instanceof i.Bs&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){let t=rn(e,e.state.doc,u.sel);t&&!t.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(t))}return}v={start:h.from,endA:h.to,endB:h.to}}if(_&&e.cursorWrapper&&u.sel&&u.sel.anchor==e.cursorWrapper.deco.from&&u.sel.head==u.sel.anchor){let e=v.endB-v.start;u.sel={anchor:u.sel.anchor+e,head:u.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof i.Bs&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),S&&C<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>u.from&&"  "==u.doc.textBetween(v.start-u.from-1,v.start-u.from+1)&&(v.start--,v.endA--,v.endB--);let b,y=u.doc.resolveNoCache(v.start-u.from),w=u.doc.resolveNoCache(v.endB-u.from),k=p.resolve(v.start),x=y.sameParent(w)&&y.parent.inlineContent&&k.end()>=v.endA;if((M&&e.input.lastIOSEnter>Date.now()-225&&(!x||s.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!x&&y.pos<u.doc.content.size&&(b=i.Y1.findFrom(u.doc.resolve(y.pos+1),1,!0))&&b.head==w.pos)&&e.someProp("handleKeyDown",(t=>t(e,m(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>v.start&&function(e,t,n,i,o){if(!i.parent.isTextblock||n-t<=o.pos-i.pos||sn(i,!0,!1)<o.pos)return!1;let r=e.resolve(t);if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let s=e.resolve(sn(r,!0,!0));return!(!s.parent.isTextblock||s.pos>n||sn(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}(p,v.start,v.endA,y,w)&&e.someProp("handleKeyDown",(t=>t(e,m(8,"Backspace")))))return void(D&&_&&e.domObserver.suppressSelectionUpdates());_&&D&&v.endB==v.start&&(e.input.lastAndroidDelete=Date.now()),D&&!x&&y.start()!=w.start()&&0==w.parentOffset&&y.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==v.endA&&(v.endB-=2,w=u.doc.resolveNoCache(v.endB-u.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,m(13,"Enter"))}))}),20));let E,T,A,O=v.start,I=v.endA;if(x)if(y.pos==w.pos)S&&C<=11&&0==y.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Te(e)),20)),E=e.state.tr.delete(O,I),T=p.resolve(v.start).marksAcross(p.resolve(v.endA));else if(v.endA==v.endB&&(A=function(e,t){let n,i,r,s=e.firstChild.marks,a=t.firstChild.marks,l=s,c=a;for(let e=0;e<a.length;e++)l=a[e].removeFromSet(l);for(let e=0;e<s.length;e++)c=s[e].removeFromSet(c);if(1==l.length&&0==c.length)i=l[0],n="add",r=e=>e.mark(i.addToSet(e.marks));else{if(0!=l.length||1!=c.length)return null;i=c[0],n="remove",r=e=>e.mark(i.removeFromSet(e.marks))}let d=[];for(let e=0;e<t.childCount;e++)d.push(r(t.child(e)));if(o.HY.from(d).eq(e))return{mark:i,type:n}}(y.parent.content.cut(y.parentOffset,w.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start()))))E=e.state.tr,"add"==A.type?E.addMark(O,I,A.mark):E.removeMark(O,I,A.mark);else if(y.parent.child(y.index()).isText&&y.index()==w.index()-(w.textOffset?0:1)){let t=y.parent.textBetween(y.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,O,I,t))))return;E=e.state.tr.insertText(t,O,I)}if(E||(E=e.state.tr.replace(O,I,u.doc.slice(v.start-u.from,v.endB-u.from))),u.sel){let t=rn(e,E.doc,u.sel);t&&!(_&&D&&e.composing&&t.empty&&(v.start!=v.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==O||t.head==E.mapping.map(I)-1)||S&&t.empty&&t.head==O)&&E.setSelection(t)}T&&E.ensureMarks(T),e.dispatch(E.scrollIntoView())}function rn(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ne(e,t.resolve(n.anchor),t.resolve(n.head))}function sn(e,t,n){let i=e.depth,o=t?e.end():e.pos;for(;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,o++,t=!1;if(n){let t=e.node(i).maybeChild(e.indexAfter(i));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}class an{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ct,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(un),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=dn(this),cn(this),this.nodeViews=hn(this),this.docView=le(this.state.doc,ln(this),Kt(this),this.dom,this),this.domObserver=new Qt(this,((e,t,n,i)=>on(this,e,t,n,i))),this.domObserver.start(),function(e){for(let t in st){let n=st[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!pt(e,t)||ut(e,t)||!e.editable&&t.type in at||n(e,t)},lt[t]?{passive:!0}:void 0)}O&&e.dom.addEventListener("input",(()=>null)),ht(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ht(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(un),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(Tt(this),o=!0),this.state=e;let r=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(r||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=hn(this);(function(e,t){let n=0,i=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let e in t)i++;return n!=i})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(r||t.handleDOMEvents!=this._props.handleDOMEvents)&&ht(this),this.editable=dn(this),cn(this);let s=Kt(this),a=ln(this),l=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=i||!this.docView.matchesNode(e.doc,a,s);!c&&e.selection.eq(n.selection)||(o=!0);let h="preserve"==l&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,i=e.dom.getBoundingClientRect(),o=Math.max(0,i.top);for(let r=(i.left+i.right)/2,s=o+1;s<Math.min(innerHeight,i.bottom);s+=5){let i=e.root.elementFromPoint(r,s);if(!i||i==e.dom||!e.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=o-20){t=i,n=a.top;break}}return{refDOM:t,refTop:n,stack:z(e.dom)}}(this);if(o){this.domObserver.stop();let t=c&&(S||_)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(c){let n=_?this.trackWrites=this.domSelectionRange().focusNode:null;!i&&this.docView.update(e.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=le(e.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return d(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Te(this,t):(Ie(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():h&&function({refDOM:e,refTop:t,stack:n}){let i=e?e.getBoundingClientRect().top:0;H(n,0==i?0:i-t)}(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof i.qv){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&F(this,t.getBoundingClientRect(),e)}else F(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,i=this._props&&this._props[e];if(null!=i&&(n=t?t(i):i))return n;for(let i=0;i<this.directPlugins.length;i++){let o=this.directPlugins[i].props[e];if(null!=o&&(n=t?t(o):o))return n}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let r=o[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(S){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(j)return e.focus(j);let t=z(e);e.focus(null==j?{get preventScroll(){return j={preventScroll:!0},!0}}:void 0),j||(j=!1,H(t,0))}(this.dom),Te(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}posAtCoords(e){return W(this,e)}coordsAtPos(e,t=1){return Y(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return ne(this,t||this.state,e)}pasteHTML(e,t){return Ot(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ot(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){ut(e,t)||!st[t.type]||!e.editable&&t.type in at||st[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return O&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let i=t.startContainer,o=t.startOffset,r=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return d(a.node,a.offset,r,s)&&([i,o,r,s]=[r,s,i,o]),{anchorNode:i,anchorOffset:o,focusNode:r,focusOffset:s}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ln(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e&&(t.class+=" "+n[e]),"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),[Lt.node(0,e.state.doc.content.size,t)]}function cn(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Lt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function dn(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function hn(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function un(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},1202:e=>{"use strict";e.exports=JSON.parse('[{"text":"Atom Dark","value":"atom-dark"},{"text":"Atom One Dark","value":"atom-one-dark"},{"text":"Atom One Light","value":"atom-one-light"},{"text":"Atom One (Light/Dark Combo)","value":"atom-one.light-dark"},{"text":"Aura Dark","value":"aura-dark"},{"text":"Ayu Dark","value":"ayu-dark"},{"text":"Ayu Light","value":"ayu-light"},{"text":"Ayu Mirage","value":"ayu-mirage"},{"text":"Ayu Mirage (Light/Dark Combo)","value":"ayu-mirage.light-dark"},{"text":"Ayu (Light/Dark Combo)","value":"ayu.light-dark"},{"text":"Bearded Arc Blueberry","value":"bearded-arc-blueberry"},{"text":"Bearded Arc Blueberry (Light/Dark Combo)","value":"bearded-arc-blueberry.light-dark"},{"text":"Bearded Vivid Light","value":"bearded-vivid-light"},{"text":"Boola Dark","value":"boola-dark"},{"text":"Boola Light","value":"boola-light"},{"text":"Boola (Light/Dark Combo)","value":"boola.light-dark"},{"text":"Catppuccin Frappe","value":"catppuccin-frappe"},{"text":"Catppuccin Frappe (Light/Dark Combo)","value":"catppuccin-frappe.light-dark"},{"text":"Catppuccin Latte","value":"catppuccin-latte"},{"text":"Catppuccin Macchiato","value":"catppuccin-macchiato"},{"text":"Catppuccin Macchiato (Light/Dark Combo)","value":"catppuccin-macchiato.light-dark"},{"text":"Catppuccin Mocha","value":"catppuccin-mocha"},{"text":"Catppuccin Mocha (Light/Dark Combo)","value":"catppuccin-mocha.light-dark"},{"text":"Coldark Cold","value":"coldark-cold"},{"text":"Coldark Dark","value":"coldark-dark"},{"text":"Coldark (Light/Dark Combo)","value":"coldark.light-dark"},{"text":"Dark Frost","value":"dark-frost"},{"text":"Dark Space","value":"dark-space"},{"text":"Dracula","value":"dracula"},{"text":"Duotone Dark","value":"duotone-dark"},{"text":"Duotone Earth","value":"duotone-earth"},{"text":"Duotone Forest","value":"duotone-forest"},{"text":"Duotone Light","value":"duotone-light"},{"text":"Duotone Sea","value":"duotone-sea"},{"text":"Duotone Space","value":"duotone-space"},{"text":"Github Dark","value":"github-dark"},{"text":"Github Light","value":"github-light"},{"text":"Github (Light/Dark Combo)","value":"github.light-dark"},{"text":"Gruvbox Dark","value":"gruvbox-dark"},{"text":"Gruvbox Light","value":"gruvbox-light"},{"text":"Gruvbox (Light/Dark Combo)","value":"gruvbox.light-dark"},{"text":"Laserwave","value":"laserwave"},{"text":"Monochrome Dark Amplified","value":"monochrome-dark-amplified"},{"text":"Monochrome Dark Subtle","value":"monochrome-dark-subtle"},{"text":"Monochrome Dark","value":"monochrome-dark"},{"text":"Monochrome Light Amplified","value":"monochrome-light-amplified"},{"text":"Monochrome Light Subtle","value":"monochrome-light-subtle"},{"text":"Monochrome Light","value":"monochrome-light"},{"text":"Night Owl Light","value":"night-owl-light"},{"text":"Night Owl","value":"night-owl"},{"text":"Night Owl (Light/Dark Combo)","value":"night-owl.light-dark"},{"text":"Nightfall","value":"nightfall"},{"text":"Nord","value":"nord"},{"text":"Panda","value":"panda"},{"text":"Poimandres","value":"poimandres"},{"text":"Rose Pine Dawn","value":"rose-pine-dawn"},{"text":"Rose Pine","value":"rose-pine"},{"text":"Rose Pine (Light/Dark Combo)","value":"rose-pine.light-dark"},{"text":"Sakura Sun","value":"sakura-sun"},{"text":"Sea Shells Dark","value":"sea-shells-dark"},{"text":"Serendipity Midnight","value":"serendipity-midnight"},{"text":"Serendipity Midnight (Light/Dark Combo)","value":"serendipity-midnight.light-dark"},{"text":"Serendipity Morning","value":"serendipity-morning"},{"text":"Serendipity Sunset","value":"serendipity-sunset"},{"text":"Serendipity Sunset (Light/Dark Combo)","value":"serendipity-sunset.light-dark"},{"text":"Shades Of Purple","value":"shades-of-purple"},{"text":"Solarized Dark Atom","value":"solarized-dark-atom"},{"text":"Synthwave84","value":"synthwave84"},{"text":"Tailwind Ice","value":"tailwind-ice"},{"text":"Tailwind Moon Blue","value":"tailwind-moon-blue"},{"text":"Tailwind Moon Blue (Light/Dark Combo)","value":"tailwind-moon-blue.light-dark"},{"text":"Tokyo Night Light","value":"tokyo-night-light"},{"text":"Tokyo Night Storm","value":"tokyo-night-storm"},{"text":"Tokyo Night Storm (Light/Dark Combo)","value":"tokyo-night-storm.light-dark"},{"text":"Tokyo Night","value":"tokyo-night"},{"text":"Tokyo Night (Light/Dark Combo)","value":"tokyo-night.light-dark"},{"text":"Verdandi Alter","value":"verdandi-alter"},{"text":"Verdandi","value":"verdandi"},{"text":"Verdandi (Light/Dark Combo)","value":"verdandi.light-dark"},{"text":"Violet Dream","value":"violet-dream"},{"text":"Vsc Dark Plus","value":"vsc-dark-plus"}]')}}]);