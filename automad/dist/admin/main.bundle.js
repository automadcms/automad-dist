/*! Automad 2.0.0-alpha.39, (c) 2025 Marc Anton Dahmen, MIT license */(()=>{"use strict";var e,t={4373:(e,t,a)=>{const i=(e,t=[],a={},i=null,s=null,n=!1)=>{const o=document.createElement(e);t.forEach((e=>{o.classList.add(e)}));for(const[e,t]of Object.entries(a))void 0!==t&&o.setAttribute(e,t);return i&&(n?i.prepend(o):i.appendChild(o)),s&&(o.innerHTML=s),o},s=e=>{const[t,a]=e.split("::"),i=e=>e.replace(/([A-Z])/g," $1").trim().toLowerCase().replace(/\s/g,"-");return`${i(t.replace("Controller",""))}/${i(a)}`};var n;!function(e){e.setup="setup",e.login="login",e.resetpassword="resetpassword",e.search="search",e.home="home",e.system="system",e.shared="shared",e.packages="packages",e.page="page",e.trash="trash",e.inpage="inpage",e.components="components"}(n||(n={}));const o=(e,t=50)=>{let a;return(...i)=>{clearTimeout(a),a=setTimeout((()=>{e.apply(void 0,i)}),t)}},l=(e,t=document)=>t.querySelector(e),r=(e,t=document)=>Array.from(t.querySelectorAll(e)),c=(e,t)=>{const a=[];let i=(null==t?void 0:t.closest(e))||null;for(;null!==i;)a.push(i),i=i.parentNode.closest(e);return a};var d=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class m{static getState(e){return Kt.getInstance().get(e)}static get isCloud(){return m.getState("cloudMode")}static get allowedFileTypes(){return m.getState("allowedFileTypes")}static get fileTypesImage(){var e;return null===(e=m.getState("fileTypes"))||void 0===e?void 0:e.image}static get fileTypesVideo(){var e;return null===(e=m.getState("fileTypes"))||void 0===e?void 0:e.video}static get dashboardURL(){return m.getState("dashboard")}static get feedURL(){return m.getState("feed")}static get files(){return m.getState("files")}static get languages(){return m.getState("languages")}static get mainTheme(){return m.getState("mainTheme")}static get pages(){return m.getState("pages")}static get reservedFields(){return m.getState("reservedFields")}static get components(){return m.getState("components")}static get componentsPublicationState(){return m.getState("componentsPublicationState")}static get contentFields(){return m.getState("contentFields")}static get siteMTime(){return m.getState("siteMTime")}static get sharedPublicationState(){return m.getState("sharedPublicationState")}static get sitename(){return m.getState("sitename")}static get tags(){return m.getState("tags")}static get themes(){return m.getState("themes")}static get system(){return m.getState("system")}static get user(){return m.getState("user")}static get state(){return Kt.getInstance().data}static get root(){return Kt.getInstance().root}static get navigationIsLocked(){return Object.keys(this.navigationLocks).length>0}static get version(){return m.getState("version")}static bootstrap(e){return d(this,void 0,void 0,(function*(){m.baseIndex=e.elementAttributes["base-index"],m.baseURL=e.elementAttributes["base-url"],m.apiURL=`${m.baseIndex}/_api`;const{data:t}=yield Gt("AppController::bootstrap");Kt.getInstance().bootstrap(e,t),f(window,"AutomadAppStateRequireUpdate",this.updateState.bind(this))}))}static updateState(){return d(this,void 0,void 0,(function*(){const e=yield Gt("AppController::updateState",null,!1);Kt.getInstance().update(e.data)}))}static addNavigationLock(){const e=this.latestLockId++;return this.navigationLocks[e]=!0,e}static reload(){const e=l("am-filter input");e&&ha("filter",e.value),ha("scroll",String(window.scrollY)),window.location.reload()}static restoreFilterAndScroll(){const e=l("am-filter input"),t=ca("filter"),a=ca("scroll");t&&(e&&(e.value=t,b("input",e)),la("filter")),a&&(window.scrollTo(0,parseInt(a)),la("scroll"))}static removeNavigationLock(e){delete this.navigationLocks[e]}static text(e){return m.getState("text")[e]||""}static checkForSystemUpdate(){return d(this,void 0,void 0,(function*(){const e=yield Gt("SystemController::checkForUpdate",null,!0,null,!0);e.data&&(Kt.getInstance().set("systemUpdate",e.data),b("AutomadSystemUpdateCheck",window))}))}static checkForOutdatedPackages(){var e;return d(this,void 0,void 0,(function*(){const{data:t}=yield Gt("PackageManagerController::getOutdated",null,!0,null,!0);Kt.getInstance().set("outdatedPackages",(null===(e=null==t?void 0:t.outdated)||void 0===e?void 0:e.length)||0),b("AutomadPackagesUpdateCheck",window)}))}}m.navigationLocks={},m.latestLockId=0,m.apiURL="",m.baseIndex="",m.baseURL="",m.isReady=!1;class u{get value(){let e=this.input.value;if(this.storeValueAsObject&&("string"!=typeof e||""!=e)){e=JSON.parse(e).value}return this.modifier?this.modifier(e):e}set value(e){this.storeValueAsObject?this.input.value=JSON.stringify({value:e}):this.input.value=e,this.onChange&&this.onChange(e),b("input",this.input)}constructor(e,t={}){t=Object.assign({initial:null,input:null,modifier:null,onChange:null},t),this.modifier=t.modifier,this.storeValueAsObject=null===t.input,this.onChange=t.onChange,this.input=t.input||i("input",[],{}),p.add(e,this),null!==t.initial&&(this.value=t.initial)}}class h{static track(e,t){}}h.missing=[],h.unused=[],h.references=[],h.bindings=[];class p{static add(e,t){this._bindings[e]=t}static delete(e){delete this._bindings[e]}static get(e){return h.track(e,this._bindings[e]),this._bindings[e]}static getBindingNames(){return Object.keys(this._bindings)}static connectElements(e){r("[am-bind]",e).forEach((e=>{const t=e.getAttribute("am-bind"),a=this._bindings[t];if(h.track(t,a),!a)return;const i=e.getAttribute("am-bind-to");let s=[];i?(s=i.split(" "),e.removeAttribute("am-bind-to")):s=["textContent"],e.removeAttribute("am-bind");f(a.input,"change input",(()=>{s.forEach((t=>{switch(t){case"textContent":e.textContent=a.value;break;case"checked":e.checked=a.value;break;case"disabled":a.value?e.setAttribute("disabled",""):e.removeAttribute("disabled");break;case"value":e.value=a.value;break;default:e.setAttribute(t,a.value)}b("AutomadChangeByBinding",e)}))})),b("input",a.input)}))}static reset(){this._bindings={}}}p._bindings={};const g=e=>{const t=m.text("__lang__");return new Date(e).toLocaleDateString(t,{day:"2-digit",weekday:"short",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},b=(e,t=window)=>{t.dispatchEvent(new Event(e,{bubbles:!0}))},f=(e,t,a,i="")=>{const s=t.split(" ").filter((e=>e.length>0)),n=e=>{if(!i)return void a.apply(e.target,[e]);(e.path||e.composedPath&&e.composedPath()).forEach((t=>{try{if(t.matches(i))return void a.apply(e.target,[e])}catch(e){}}))};s.forEach((t=>{e.addEventListener(t,n)}));return{remove:()=>{s.forEach((t=>{e.removeEventListener(t,n)}))}}},v=(e,t,a=!0)=>{const i=new MutationObserver(((e,a)=>{e.forEach((function(e){"attributes"===e.type&&"class"===e.attributeName&&t.apply(e.target,[e])}))}));i.observe(e,{attributes:!0,childList:!1,subtree:a});return{remove:()=>{i.disconnect()}}};class x extends HTMLElement{constructor(){super(),this.elementAttributes={},this.listeners=[]}static get observedAttributes(){return[]}attributeChangedCallback(e,t,a){this.elementAttributes[e]=a||""}disconnectedCallback(){this.removeListeners()}addListener(e){this.listeners.push(e)}removeListeners(){this.listeners.forEach((e=>{e.remove()}))}}class y extends x{constructor(){super(...arguments),this.classes=["am-c-modal"]}get isOpen(){return this.matches("[am-modal-open]")}lockNavigation(){this.lockId=m.addNavigationLock()}unlockNavigation(){m.removeNavigationLock(this.lockId)}connectedCallback(){this.classList.add(...this.classes),this.hasAttribute("am-no-click")||f(this,"click",(e=>{this===e.target&&this.close()})),this.hasAttribute("am-no-esc")||this.addListener(f(window,"keydown",(e=>{this.isOpen&&27==e.keyCode&&this.close()})))}toggleBodyOverflow(){l("body").classList.toggle("am-u-overflow-hidden",null!=l("[am-modal-open]"))}toggle(){this.isOpen?this.close():this.open()}close(){this.removeAttribute("am-modal-open"),this.toggleBodyOverflow(),this.unlockNavigation(),this.restoreInitialFormData(),b("AutomadModalClose",this),this.focusTrap.remove(),setTimeout((()=>{r(".am-validate").forEach((e=>{e.classList.remove("am-validate")}))}),400),this.hasAttribute("am-destroy")&&setTimeout((()=>{this.remove()}),400)}open(){if(this.setAttribute("am-modal-open",""),this.toggleBodyOverflow(),this.lockNavigation(),this.saveInitialFormData(),b("AutomadModalOpen",this),this.focusTrap=(e=>{var t;const a='input:not([type="hidden"]), button, textarea, [contenteditable], [tabindex="0"]';return null===(t=l(a,e))||void 0===t||t.focus(),f(document,"keydown",(t=>{if("Tab"!==t.key&&9!==t.keyCode)return;const i=r(a,e);if(0===i.length)return void t.preventDefault();const s=i[0],n=i[i.length-1];t.shiftKey?document.activeElement===s&&(t.preventDefault(),n.focus()):document.activeElement===n&&(t.preventDefault(),s.focus())}))})(this),!this.hasAttribute("am-no-focus")){const e=l("input, textarea",this);if(e){const t=e.value;e.focus(),e.value="",e.value=t}}}saveInitialFormData(){this.formData=kt(this)}restoreInitialFormData(){At(this.formData,this)}}y.TAG_NAME="am-modal",customElements.define(y.TAG_NAME,y);class w extends x{set options(e){let t="";e.forEach((e=>{t+=Pt`<option value="${e.value}"> ${void 0!==e.text?e.text:e.value} </option>`})),this._select.innerHTML=t,setTimeout(this.updateLabel.bind(this),0)}get value(){return this.selectedOption.value}set value(e){this._select.value=e,this.updateLabel()}get select(){return this._select}get selectedOption(){return this._select.options[this._select.selectedIndex]}connectedCallback(){this.classList.add("am-f-select")}updateLabel(){try{this.label.textContent=this.selectedOption.text}catch(e){}}init(e,t,a,s){this.innerHTML=a,this.label=i("span",[],{},this),this._select=i("select",[],s,this),this.options=e,this.value=t;const n=()=>{this.classList.toggle("am-focus",this._select===document.activeElement)};f(this._select,"focus blur",n),n(),f(this._select,"change AutomadChangeByBinding",this.updateLabel.bind(this)),setTimeout((()=>{sa.attach({getValueProvider:()=>this._select,query:()=>this._select.value,mutate:e=>{this._select.value=`${e}`}})}),0)}}w.TAG_NAME="am-select",customElements.define(w.TAG_NAME,w);class _{static get enableLineBreaks(){return!1}static get isReadOnlySupported(){return!0}constructor({data:e,api:t,config:a,block:s,readOnly:n}){this.listeners=[],this.api=t,this.data=this.prepareData(e||{}),this.config=a,this.blockAPI=s,this.readOnly=n,this.wrapper=i("div",["cdx-block"])}prepareData(e){return e}addListener(e){this.listeners.push(e)}destroy(){this.listeners.forEach((e=>{e.remove()}))}}class k extends _{static get sanitize(){return{primaryText:{},primaryLink:!0,secondaryText:{},secondaryLink:!0}}static get toolbox(){return{title:m.text("buttonsBlockTitle"),icon:'<i class="bi bi-hand-index-thumb"></i>'}}prepareData(e){var t,a,i,s,n,o;const l={borderWidth:"2px",borderRadius:"0.5rem",paddingHorizontal:"1.5rem",paddingVertical:"0.5rem"};return{primaryText:e.primaryText||"Button",primaryLink:e.primaryLink||"",primaryStyle:null!==(t=e.primaryStyle)&&void 0!==t?t:l,primaryOpenInNewTab:null===(a=e.primaryOpenInNewTab)||void 0===a||a,secondaryText:e.secondaryText||"",secondaryLink:e.secondaryLink||"",secondaryStyle:null!==(i=e.secondaryStyle)&&void 0!==i?i:l,secondaryOpenInNewTab:null===(s=e.secondaryOpenInNewTab)||void 0===s||s,justify:null!==(n=e.justify)&&void 0!==n?n:"start",gap:null!==(o=e.gap)&&void 0!==o?o:"1rem"}}render(){if(this.wrapper.classList.add("am-u-flex"),this.wrapper.innerHTML=Pt`<div class="am-c-ed-bl-buttons"> ${this.readOnly?"":Pt`
							<div>
								<span
									class="__layout-edit ${"am-c-ed-bl-buttons__edit"}"
								>
									<am-icon-text
										${"am-icon"}="arrow-left-right"
										${"am-text"}="${m.text("buttonsBlockAlignment")}"
									></am-icon-text>
								</span>
							</div>
						`} <div class="__flex am-u-flex"><div class="am-u-flex am-u-flex--column am-u-flex--gap am-u-flex--center"><div class="__primary"></div> ${this.readOnly?"":Pt`
									<span
										class="__primary-edit ${"am-c-ed-bl-buttons__edit"}"
									>
										<am-icon-text
											${"am-icon"}="sliders"
											${"am-text"}="${m.text("buttonsBlockSettings")}"
										></am-icon-text>
									</span>
								`} </div><div class="am-u-flex am-u-flex--column am-u-flex--gap am-u-flex--center"><div class="__secondary"></div> ${this.readOnly?"":Pt`
									<span
										class="__secondary-edit ${"am-c-ed-bl-buttons__edit"}"
									>
										<am-icon-text
											${"am-icon"}="sliders"
											${"am-text"}="${m.text("buttonsBlockSettings")}"
										></am-icon-text>
									</span>
								`} </div></div></div>`,this.flex=l(".__flex",this.wrapper),this.previews={primary:null,secondary:null},this.previews.primary=l(".__primary",this.wrapper),this.previews.secondary=l(".__secondary",this.wrapper),this.renderButton("primary"),this.renderButton("secondary"),this.updateLayout(),!this.readOnly){const e=l(".__layout-edit",this.wrapper),t=l(".__primary-edit",this.wrapper),a=l(".__secondary-edit",this.wrapper);this.api.listeners.on(e,"click",this.renderLayoutModal.bind(this)),this.api.listeners.on(t,"click",(()=>{this.renderButtonModal("primary")})),this.api.listeners.on(a,"click",(()=>{this.renderButtonModal("secondary")}))}return this.wrapper}updateLayout(){this.wrapper.style.justifyContent=this.data.justify,this.flex.style.gap=this.data.gap}renderButton(e){const t=this.data[`${e}Text`];if(this.readOnly&&0==t.length)return;const a=this.data[`${e}Style`],s=Object.keys(a).reduce(((e,t)=>a[t]?`${e} --${t}: ${a[t]};`.trim():""),"");this.previews[e].innerHTML=i("div",["am-c-ed-bl-buttons__button"],{style:s,name:`${e}Text`,contenteditable:this.readOnly?"false":"true",placeholder:m.text("buttonsBlockPlaceholder")},null,Pt`${t}`).outerHTML}renderLayoutModal(){const{modal:e,body:t}=ht(m.text("buttonsBlockAlignment")),a=i("div",["am-l-grid","am-l-grid--auto"],{},t);vt(m.text("buttonsBlockAlignment"),ft([{text:m.text("alignLeft"),value:"start"},{text:m.text("alignCenter"),value:"center"},{text:m.text("alignRight"),value:"end"}],this.data.justify,null,"justify"),a),dt("am-number-unit-field",a,{name:"gap",value:this.data.gap,key:$a(),label:m.text("buttonsBlockGap")}),setTimeout((()=>{e.open()}),0),this.api.listeners.on(e,"change",o((()=>{this.data=Object.assign(Object.assign({},this.data),kt(t)),this.updateLayout(),this.blockAPI.dispatchChange()}),50))}renderButtonModal(e){const{modal:t,body:a}=ht(m.text("buttonsBlockSettings")),s=dt("am-url-field",a,{name:`${e}Link`,key:$a(),label:m.text("url"),value:this.data[`${e}Link`]}),n=dt("am-toggle-field",a,{name:`${e}OpenInNewTab`,key:$a(),label:m.text("openInNewTab"),value:this.data[`${e}OpenInNewTab`]}),l=i("div",[],{},a),r=(t,a,i,s=l,n=!1)=>{dt(t,s,{name:a,key:$a(),label:`${m.text(i)}${n?" (hover)":""}`,value:this.data[`${e}Style`][a]})};i("hr",[],{},l);const c=i("div",["am-l-grid","am-l-grid--auto"],{},l),d=i("div",[],{},c),u=i("div",[],{},c);r("am-color-field","color","color",d),r("am-color-field","background","backgroundColor",d),r("am-color-field","borderColor","borderColor",d),r("am-color-field","hoverColor","color",u,!0),r("am-color-field","hoverBackground","backgroundColor",u,!0),r("am-color-field","hoverBorderColor","borderColor",u,!0),i("hr",[],{},l);const h=i("div",["am-l-grid","am-l-grid--auto"],{},l);r("am-number-unit-field","borderWidth","borderWidth",h),r("am-number-unit-field","borderRadius","borderRadius",h),r("am-number-unit-field","paddingVertical","paddingVertical",h),r("am-number-unit-field","paddingHorizontal","paddingHorizontal",h),setTimeout((()=>{t.open()}),0),this.addListener(f(t,"change input",o((()=>{this.data=Object.assign(Object.assign({},this.data),{[`${e}Style`]:Object.fromEntries(Object.entries(kt(l)).filter((([e,t])=>t.length>0))),[`${e}Link`]:s.input.value,[`${e}OpenInNewTab`]:n.input.checked}),this.renderButton(e),this.blockAPI.dispatchChange()}),50)))}save(){return Object.assign(Object.assign({},this.data),{primaryText:l('[name="primaryText"]',this.flex).innerHTML,secondaryText:l('[name="secondaryText"]',this.flex).innerHTML})}}var $=a(9931),C=a(5660),A=a.n(C);const T={pattern:/('([^']|\\')*'|"([^"]|\\")*")/},L={pattern:new RegExp("@{.+}","s"),greedy:!0,inside:{punctuation:/[\|\(\)\{\}]+/,string:T}},E=A().languages.extend("html",{comment:{pattern:new RegExp("<#.+?#>","s")},function:{pattern:new RegExp("<@.+?@>","s"),inside:{keyword:{pattern:/(for|foreach|if|else|end|snippet|with)/},boolean:{pattern:/(true|false)/},property:{pattern:/[\w\:]+\:/},variable:L,string:T,punctuation:{pattern:/[\:\{\}\(\)]/}}},number:{pattern:/\d(.\d+)?/},operator:{pattern:/([\+\-\/\*\!]|not)/},tag:{pattern:/<\/?(?!\d)[^\s@>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},variable:L});a(6854),a(7533),a(4446),a(4279),a(9016),a(2731),a(7046),a(110),a(7117),a(2503),a(2356),a(319),a(7802),a(6841),a(4064),a(3436),a(9945),a(366),a(9385),a(767),a(9865),a(7874),a(5266),a(1029),a(6836),a(4438),a(3358);const S=["apacheconf","automad","bash","basic","c","clike","csharp","cpp","css","go","graphql","handlebars","html","java","javascript","jsx","latex","less","lua","markdown","nginx","none","php","powershell","python","ruby","rust","sass","sql","tsx","typescript","vim","yaml"];A().languages.automad=E;class P{constructor({element:e,code:t,language:a,onChange:s=(()=>{}),placeholder:n="",readonly:l=!1}){e.innerHTML="",this.codeFlask=new $.Z(e,{lineNumbers:!1,defaultTheme:!1,handleTabs:!0,handleNewLineIndentation:!0,handleSelfClosingCharacters:!0,tabSize:2,language:a,readonly:l}),i("pre",["am-f-codeflask__placeholder","codeflask__pre"],{},e,Pt`$${n}`),this.codeFlask.addLanguage(a,A().languages[a]),this.codeFlask.updateCode(t),It().log("Prism:",a,A().languages[a]),this.codeFlask.onUpdate(o((()=>{s(this.codeFlask.getCode())}),20))}}class M extends _{static get enableLineBreaks(){return!0}static get sanitize(){return{code:!0}}static get toolbox(){return{title:m.text("code"),icon:'<i class="bi bi-code-slash"></i>'}}prepareData(e){var t,a,i;return{code:null!==(t=e.code)&&void 0!==t?t:"",language:null!==(a=e.language)&&void 0!==a?a:"none",lineNumbers:null!==(i=e.lineNumbers)&&void 0!==i&&i}}render(){this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.readOnly||i("span",["am-u-text-muted","am-u-user-select-none"],{},this.wrapper,Pt`<am-icon-text am-icon="code-slash" am-text="${M.toolbox.title}"></am-icon-text>`);const e=i("div",["am-u-flex","am-u-flex--column","am-u-flex--gap"],{},this.wrapper);if(!this.readOnly){const a=i("div",["am-l-grid","am-l-grid--auto","am-u-flex--gap"],{},e);ft(S.map((e=>({value:e}))),this.data.language,a,"language");const s=$a();i("div",["am-f-toggle","am-f-toggle--button"],{},a,Pt`<input id="${s}" type="checkbox" name="lineNumbers" value="1" ${this.data.lineNumbers?"checked":""} /><label for="${s}"><i class="bi"></i><span>${m.text("codeBlockLineNumbers")}</span></label>`),this.api.listeners.on(a,"change",(()=>{const{language:e,lineNumbers:i}=kt(a);this.data.lineNumbers=i,this.data.language=e,this.initEditor(t)}))}const t=i("div",["am-f-codeflask"],{},e);return this.initEditor(t),this.wrapper}initEditor(e){this.editor=new P({element:e,code:this.data.code,language:this.data.language,onChange:e=>{this.data.code=e},readonly:this.readOnly}),this.api.listeners.on(l("textarea",e),"keydown",(e=>{e.stopImmediatePropagation()}))}save(){return{code:this.editor.codeFlask.getCode(),language:this.data.language,lineNumbers:this.data.lineNumbers}}}var I=a(2453),O=a(3416),R=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const H=e=>{const t={};for(const[a,i]of Object.entries(e))(i||!1===i)&&(t[a]=i);return t},B=(e,t,a=0)=>R(void 0,void 0,void 0,(function*(){const i=yield e.save();t.blocks.insert(i.tool,i.data,i.config,a,!0,!1,(0,O.x0)(32),i.tunes),t.blocks.getBlockByIndex(0).dispatchChange()}));class N{set data(e){const t=l(":scope > *",this.block.holder);this._data=e,this.wrap(t),this.block.dispatchChange(),b("change",t)}get data(){return this._data}static get isTune(){return!0}constructor({api:e,data:t,config:a,block:i}){this.sort=100,this.api=e,this.config=a,this.block=i,this._data=this.prepareData(null!=t?t:null)}sanitize(e){return e}filterBeforeSave(e){if("object"!=typeof e)return e;const t=H(e);return 0===Object.keys(t).length?null:t}render(){const e=this.renderLabel();return{icon:this.icon,label:e?`${e}<span class="am-u-display-none">${this.title}</span>`:`<span class="am-u-text-muted">${this.title}</span>`,closeOnActivate:!0,onActivate:this.onActivate.bind(this),sort:this.sort}}onActivate(){const{modal:e,body:t}=ht(this.title);t.appendChild(this.createForm()),f(t,"change",(()=>{this.data=this.sanitize(this.getFormData(t))})),setTimeout((()=>{e.open()}),0)}save(){return this.filterBeforeSave(this.data)}wrap(e){return e}}class F extends N{constructor(){super(...arguments),this.sort=202}get title(){return m.text("className")}get icon(){return'<i class="bi bi-asterisk"></i>'}prepareData(e){return null!=e?e:""}sanitize(e){return(e||"").replace(/[^\w_\s]+/g,"-").trim()}getFormData(e){const{className:t}=kt(e);return t}createForm(){return dt("am-input-field",null,{label:this.title,value:this.data,key:$a(),name:"className"},[],{pattern:"[\\w\\-\\s_:]*"})}renderLabel(){return this.data?Pt`<span class="am-e-badge">$${this.data}</span>`:""}wrap(e){var t;return(null!==(t=l(".__class",e))&&void 0!==t?t:i("span",["__class"],{},e,"",!0)).innerHTML=this.data?Pt`<span class="am-e-badge"> .${this.data.replace(/\s+/g,".")} </span>`:"",e}}var U=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class D{static get isTune(){return!0}constructor({api:e,block:t}){this.api=e,this.block=t}render(){return{icon:'<i class="bi bi-copy"></i>',sort:290,label:m.text("duplicate"),closeOnActivate:!0,onActivate:this.duplicate.bind(this)}}duplicate(){return U(this,void 0,void 0,(function*(){const e=this.api.blocks.getCurrentBlockIndex()+1;B(this.block,this.api,e)}))}}class j extends N{constructor(){super(...arguments),this.sort=201}get title(){return"ID"}get icon(){return'<span style="font-size: 1.2rem">#</span>'}prepareData(e){return null!=e?e:""}sanitize(e){return(e||"").replace(/[^\w_]+/g,"-").trim()}getFormData(e){const{id:t}=kt(e);return t}createForm(){return dt("am-input-field",null,{label:this.title,value:this.data,key:$a(),name:"id"},[],{pattern:"[\\w\\-_]*"})}renderLabel(){return this.data?Pt`<span class="am-e-badge">$${this.data}</span>`:""}wrap(e){var t;return(null!==(t=l(".__id",e))&&void 0!==t?t:i("span",["__id"],{},e,"",!0)).innerHTML=this.data?Pt`<span class="am-e-badge">#${this.data}</span>`:"",e}}class z{static get isTune(){return!0}constructor({api:e,data:t,config:a,block:i}){this.sort=100,this.api=e,this.config=a,this.block=i,this.data=this.prepareData(t),this.wrapper=this.renderSettings()}save(){return this.data}render(){return this.wrapper}}const G=["1/4","1/3","1/2","2/3","3/4","1/1"],V="stretched",q={"1/1":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="30" height="30" rx="1" fill="currentColor"/> </svg> ',"1/2":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="15" height="30" rx="1" fill="currentColor"/> </svg> ',"1/3":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="11" height="30" rx="1" fill="currentColor"/> </svg> ',"1/4":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="7" height="30" rx="1" fill="currentColor"/> </svg> ',"2/3":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="19" height="30" rx="1" fill="currentColor"/> </svg> ',"3/4":'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="23" height="30" rx="1" fill="currentColor"/> </svg> '},W=(e,t,a)=>{const s=(e.layout||"")===(t||""),n=["am-c-ed-tu-layout__option",...s?["am-c-ed-tu-layout__option--active"]:[]];i("input",[],{type:"radio",name:"layout",value:e.layout||""},i("label",n,{"am-tooltip":e.tooltip},a,e.icon)).checked=s};class J extends z{constructor(){super(...arguments),this.sort=1}get isStretchable(){var e,t;return null!==(t=null===(e=De(!1)[this.block.name])||void 0===e?void 0:e.stretchable)&&void 0!==t&&t}get isFlex(){return this.config.isSectionBlock||!1}get selected(){const{stretched:e,width:t}=this.data;return e?V:t||""}set selected(e){this.data.stretched=e===V,this.data.width=e&&e!==V?e:"",r("input",this.wrapper).forEach((e=>{e.parentElement.classList.toggle("am-c-ed-tu-layout__option--active",e.checked)})),this.apply()}apply(){this.data&&setTimeout((()=>{const e=this.block.holder,{stretched:t,width:a}=this.data;e.classList.toggle("am-style--stretched",t),a?e.setAttribute("am-width",a):e.removeAttribute("am-width")}),0)}wrap(e){return this.apply(),e}static updateToolbarPosition(e){if(!e)return;const t=l(":scope > .ce-block__content",e),a=e.closest(".codex-editor"),i=l(":scope > .ce-toolbar",a);if(!i)return;const s=l(".ce-settings",i);if((null==s?void 0:s.hasChildNodes())||a.matches(".codex-editor--toolbox-opened"))return;const n=t.getBoundingClientRect(),o=e.parentElement.getBoundingClientRect(),r=Math.round(n.x-o.x),c=Math.round(n.y-o.y);i.setAttribute("style",`--x: ${r}px; --y: ${c}px;`)}prepareData(e){return{stretched:(null==e?void 0:e.stretched)||!1,width:(null==e?void 0:e.width)||null}}renderSettings(){const e=i("div");if(!this.isFlex&&!this.isStretchable)return this.data=null,e;if(this.isStretchable){const t=i("div",["am-c-ed-tu-layout"],{},e);[{layout:"",tooltip:m.text("layoutDefault"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="none" viewBox="0 0 44 44"> <rect width="41" height="41" x="1.5" y="1.5" stroke="currentColor" stroke-width="3" rx="5.5"/> <rect width="20" height="30" x="12" y="7" fill="currentColor" rx="1"/> </svg> '},{layout:V,tooltip:m.text("layoutStretch"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="none" viewBox="0 0 44 44"> <rect width="41" height="41" x="1.5" y="1.5" stroke="currentColor" stroke-width="3" rx="5.5"/> <path fill="currentColor" d="M2 9h40v26H2z"/> </svg> '}].forEach((e=>{W(e,this.selected,t)}))}if(this.isFlex){const t=i("div",["am-c-ed-tu-layout"],{},e);G.map((e=>({layout:e,tooltip:`${m.text("layoutWidth")}: ${e}`,icon:q[e]}))).forEach((e=>{W(e,this.selected,t)}))}return f(e,"change",(()=>{const{layout:t}=kt(e);this.selected=t,this.block.dispatchChange()})),e}}class Z extends N{constructor(){super(...arguments),this.sort=102}get title(){return m.text("padding")}get icon(){return'<i class="bi bi-distribute-vertical"></i>'}prepareData(e){return{top:(null==e?void 0:e.top)||"",right:(null==e?void 0:e.right)||"",bottom:(null==e?void 0:e.bottom)||"",left:(null==e?void 0:e.left)||""}}sanitize(e){const t=e=>e.replace(/[^\w_\.\%]+/g,"").trim();return{top:t(e.top),right:t(e.right),bottom:t(e.bottom),left:t(e.left)}}getFormData(e){return kt(e)}createForm(){const e=i("div",["am-u-flex","am-u-flex--column","am-u-flex--gap-large"],{},null,Pt`<div class="am-u-flex am-u-flex--gap-large"><div class="top"></div><div class="bottom"></div></div><div class="am-u-flex am-u-flex--gap-large"><div class="left"></div><div class="right"></div></div>`);return dt("am-number-unit-field",l(".top",e),{label:m.text("paddingTop"),value:this.data.top,key:$a(),name:"top"}),dt("am-number-unit-field",l(".bottom",e),{label:m.text("paddingBottom"),value:this.data.bottom,key:$a(),name:"bottom"}),dt("am-number-unit-field",l(".left",e),{label:m.text("paddingLeft"),value:this.data.left,key:$a(),name:"left"}),dt("am-number-unit-field",l(".right",e),{label:m.text("paddingRight"),value:this.data.right,key:$a(),name:"right"}),e}renderLabel(){const{top:e,right:t,bottom:a,left:i}=this.data;return`${e||0} / ${t||0} / ${a||0} / ${i||0}`}wrap(e){const t={top:"paddingTop",right:"paddingRight",bottom:"paddingBottom",left:"paddingLeft"},a=l(":scope > .cdx-block",e);for(const[e,i]of Object.entries(this.data))a.style[t[e]]=i;return e}}const K=["layout","spacing","className","id","duplicate"],X=e=>({spacing:{class:Z},className:{class:F},id:{class:j},layout:{class:J,config:{isSectionBlock:e}},duplicate:{class:D}});class Y extends _{static get sanitize(){return{id:!1}}static get toolbox(){return{title:m.text("componentBlockTitle"),icon:'<i class="bi bi-boxes"></i>'}}prepareData(e){return{id:e.id||""}}render(){return this.data.id?(this.renderWrapper(),this.wrapper):this.wrapper}renderWrapper(){var e;const t=(a=null!==(e=this.data.id)&&void 0!==e?e:"",m.components.find((e=>e.id===a)));var a;t&&(this.wrapper.classList.add("am-c-ed-bl-component","am-u-user-select-none"),this.wrapper.innerHTML=Pt`<div class="am-c-ed-bl-component__label"> ${Y.toolbox.icon} <span>${t.name}</span></div><div class="am-c-ed-bl-component__overlay"><am-link class="am-e-button am-e-button--primary" am-target="${n.components}"> ${m.text("openComponentEditor")} </am-link></div>`,new I.Z({data:{blocks:t.blocks},holder:this.wrapper,minHeight:0,autofocus:!1,tools:Object.assign(Object.assign({},De(!0)),X(!1)),inlineToolbar:[],tunes:K,readOnly:!0}))}appendCallback(){const e=i(y.TAG_NAME,[],{},xa(),Pt`<am-modal-dialog><am-modal-header> ${m.text("selectComponent")} </am-modal-header><am-modal-body></am-modal-body><am-modal-footer><a href="${m.dashboardURL}/${n.components}" class="am-e-button"> ${m.text("openComponentEditor")} </a><button class="am-e-button am-e-button--primary"> ${m.text("add")} </button></am-modal-footer></am-modal-dialog>`),t=l("am-modal-body",e),a=l("am-modal-footer button",e),s=m.components.map((e=>({value:e.id,text:e.name})));if(s.length>0){const i=ft(s,s[0].value,t);f(a,"click",(()=>{this.data.id=i.value,e.close()}))}else a.setAttribute("disabled",""),t.textContent=m.text("noComponentsFound");e.open(),f(e,"AutomadModalClose",(()=>{this.data.id?this.renderWrapper():this.api.blocks.delete(this.api.blocks.getBlockIndex(this.blockAPI.id))}))}save(){return this.data}}class Q extends _{static get toolbox(){return{title:m.text("delimiter"),icon:'<i class="bi bi-hr"></i>'}}render(){return this.wrapper.classList.add("am-c-ed-bl-delimiter"),i("hr",[],{},this.wrapper),this.wrapper}save(){return{}}}var ee=a(7012);class te extends ee.Z{static get sanitize(){return{embed:!0}}}const ae="default";class ie extends _{static get sanitize(){return{file:!1,glob:!1,sortOrder:!1}}static get toolbox(){return{title:m.text("filelistBlockTitle"),icon:'<i class="bi bi-files"></i>'}}prepareData(e){var t;return{file:e.file||ae,glob:e.glob||"*.*",sortOrder:null!==(t=e.sortOrder)&&void 0!==t?t:"asc"}}render(){return this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.wrapper.innerHTML=Pt`<span class="am-u-text-muted am-u-user-select-none"><am-icon-text am-icon="files" am-text="${ie.toolbox.title}"></am-icon-text></span><div class="am-c-card __card"></div>`,this.renderForm(l(".__card",this.wrapper)),this.readOnly||f(this.wrapper,"change input",o((()=>{this.blockAPI.dispatchChange()}),50)),this.wrapper}renderForm(e){const t=m.files.filelist.reduce(((e,t)=>[...e,{value:t,text:ga(t)}]),[{value:ae,text:m.text("filelistBlockDefaultFile")}]),a=i("div",["am-c-card__form"],{},e),s=i("div",["am-c-card__form"],{},e),n=i("div",["am-l-grid","am-l-grid--auto"],{},s),o={};this.readOnly&&(o.disabled=""),vt(m.text("filelistBlockFile"),ft(t,this.data.file,null,"file",null,"",[],o),a),dt("am-input-field",n,{key:$a(),name:"glob",value:this.data.glob,label:`${m.text("filelistBlockPattern")} (Glob)`},[],o),vt(m.text("filelistBlockSortOrder"),ft([{value:"asc",text:"↑ asc"},{value:"desc",text:"↓ desc"}],this.data.sortOrder,null,"sortOrder",null,"",[],o),n)}save(){return kt(this.wrapper)}}var se=a(1474);class ne extends x{get images(){var e,t;return null!==(t=null===(e=this.sortable)||void 0===e?void 0:e.toArray())&&void 0!==t?t:[]}set images(e){this.render(e)}connectedCallback(){this.classList.add("am-c-image-collection")}render(e){this.removeListeners(),this.innerHTML="";const t=this.hasAttribute("disabled"),a=i("div",["am-c-image-collection__grid"],{},this);if(e.forEach((e=>{const s=i("div",["am-c-image-collection__item"],{"data-url":e,title:e},a,Pt`<am-img src="${da(e)}" class="am-c-image-collection__image"></am-img>`);if(!t){const e=i("span",["am-c-image-collection__delete"],{},s);this.addListener(f(e,"click",(()=>{s.remove(),b("change",this)})))}})),!t){this.sortable=new se.ZP(a,{dataIdAttr:"data-url",dragoverBubble:!1,ghostClass:"am-c-image-collection__item--ghost",dragClass:"am-c-image-collection__item--drag",chosenClass:"am-c-image-collection__item--chosen",animation:300,onSort:()=>{b("change",this)}}),this.addListener(f(a,"dragover",(e=>{e.preventDefault(),e.stopImmediatePropagation()}))),this.addListener(f(a,"click",(e=>{e.target===a&&this.add()})));const e=i("button",["am-e-button","am-c-image-collection__add"],{},this,m.text("addImage"));this.addListener(f(e,"click",this.add.bind(this)))}}add(){pt((e=>{this.images=[...this.images,e],b("change",this)}),m.text("addImage"))}}ne.TAG_NAME="am-image-collection",customElements.define(ne.TAG_NAME,ne);class oe extends _{static get sanitize(){return{layout:!1,columnWidthPx:!1,rowHeightPx:!1,gapPx:!1}}static get toolbox(){return{title:m.text("galleryBlockTitle"),icon:'<i class="bi bi-columns"></i>'}}prepareData(e){var t;return{files:e.files||[],layout:e.layout||"columns",columnWidthPx:e.columnWidthPx||250,rowHeightPx:e.rowHeightPx||250,gapPx:e.gapPx||5,cleanBottom:null!==(t=e.cleanBottom)&&void 0!==t&&t}}render(){this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),i("span",["am-u-text-muted","am-u-user-select-none"],{},this.wrapper,Pt`<am-icon-text am-icon="columns" am-text="${oe.toolbox.title}"></am-icon-text>`);const e=i("div",["am-c-image-collection-group"],{},this.wrapper);if(!this.readOnly){const t=i("button",["am-e-button"],{},e,m.text("galleryBlockLayout"));this.api.listeners.on(t,"click",this.renderModal.bind(this))}const t=i(ne.TAG_NAME,[],this.readOnly?{disabled:""}:{},e);return setTimeout((()=>{t.images=this.data.files,this.api.listeners.on(t,"change",(()=>{this.data.files=t.images,this.blockAPI.dispatchChange()}))}),0),this.wrapper}renderModal(){const{modal:e,body:t}=ht(m.text("galleryBlockLayout"));setTimeout((()=>{this.renderLayoutSettings(t),e.open()}),0),f(e,"change",(()=>{this.data=Object.assign(Object.assign(Object.assign({},this.data),{cleanBottom:!1}),kt(e))})),f(e,"AutomadModalClose",(()=>{this.blockAPI.dispatchChange()}))}renderLayoutSettings(e){e.innerHTML="";const t=ft([{text:m.text("galleryBlockLayoutColumns"),value:"columns"},{text:m.text("galleryBlockLayoutGrid"),value:"grid"},{text:m.text("galleryBlockLayoutRows"),value:"rows"}],this.data.layout,e,"layout"),a=i("div",["am-l-grid","am-l-grid--auto"],{},e);dt("am-number-field",a,{name:"gapPx",value:this.data.gapPx,key:$a(),label:`${m.text("galleryBlockLayoutGap")} (Pixel)`},[],{required:""}),"columns"==this.data.layout&&dt("am-toggle-field",a,{name:"cleanBottom",value:this.data.cleanBottom,key:$a(),label:m.text("galleryBlockLayoutCleanBottom")});const s=i("div",["am-l-grid","am-l-grid--auto"],{},e);["rows","grid"].includes(this.data.layout)&&dt("am-number-field",s,{name:"rowHeightPx",value:this.data.rowHeightPx,key:$a(),label:`${m.text("galleryBlockLayoutRowHeight")} (Pixel)`},[],{required:""}),["columns","grid"].includes(this.data.layout)&&dt("am-number-field",s,{name:"columnWidthPx",value:this.data.columnWidthPx,key:$a(),label:`${m.text("galleryBlockLayoutColumnWidth")} (Pixel)`},[],{required:""});const n=f(t,"change",(()=>{n.remove(),this.data.layout=t.value,this.renderLayoutSettings(e)}))}save(){return this.data}}class le extends _{static get conversionConfig(){return{export:"text",import:"text"}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get sanitize(){return{level:!1,text:{br:!0}}}static get enableLineBreaks(){return!1}static get toolbox(){return{title:m.text("heading"),icon:'<i class="bi bi-type-h1"></i>'}}prepareData(e){var t,a;return{text:null!==(t=e.text)&&void 0!==t?t:"",level:null!==(a=e.level)&&void 0!==a?a:2}}get content(){var e,t;return null!==(t=null===(e=l("[contenteditable]",this.wrapper))||void 0===e?void 0:e.innerHTML)&&void 0!==t?t:""}render(){return this.wrapper.innerHTML="",i("div",["am-c-ed-bl-header"],{contenteditable:this.readOnly?"false":"true"},i(`h${this.data.level}`,[],{},this.wrapper)).innerHTML=this.data.text,this.wrapper}save(){return{text:this.content,level:this.data.level}}renderSettings(){return[1,2,3,4,5,6].map((e=>({icon:Pt`<i class="bi bi-type-h${e}"></i>`,label:`${m.text("heading")} ${e}`,closeOnActivate:!0,onActivate:()=>{this.data.level=e,this.data.text=this.content,this.render()},toggle:"level",isActive:this.data.level==e})))}merge(e){const t=l("[contenteditable]",this.wrapper),a=this.api.blocks.getBlockIndex(this.blockAPI.id);t.innerHTML=`${t.innerHTML}${e.text}`,setTimeout((()=>{this.api.caret.setToBlock(a,"end")}),100)}validate(e){return""!==e.text.trim()}onPaste(e){var t;const a=e.detail.data;this.data={level:null!==(t=parseInt(a.tagName.replace("H","")))&&void 0!==t?t:2,text:a.textContent},this.render()}}class re extends x{set src(e){this.render(e)}static get observedAttributes(){return["src"]}connectedCallback(){this.classList.add("am-e-img")}attributeChangedCallback(e,t,a){"src"===e&&(this.src=a)}render(e){var t;if(this.innerHTML="",null===(t=this.listener)||void 0===t||t.remove(),0==e.length)return void(this.innerHTML=this.placeholder("slash-circle"));const a=i("img",[],{referrerpolicy:"no-referrer"},this);this.listener=f(a,"error",(()=>{this.innerHTML=this.placeholder("exclamation-triangle")})),a.src=e}placeholder(e){return Pt`<span class="am-e-img__error"><i class="bi bi-${e}"></i></span>`}}re.TAG_NAME="am-img",customElements.define("am-img",re);var ce=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class de extends _{static get sanitize(){return{url:!0,link:!1,openInNewTab:!1,caption:{}}}static get pasteConfig(){return{patterns:{image:new RegExp(`(https?:\\/\\/)?\\S+\\.(${m.fileTypesImage.join("|")})$`,"i")},files:{extensions:m.fileTypesImage}}}static get toolbox(){return{title:m.text("imageTool"),icon:'<i class="bi bi-image"></i>'}}prepareData(e){return{url:e.url||"",link:e.link||"",openInNewTab:e.openInNewTab||!1,caption:e.caption||""}}setImage(e){this.data.url=e,this.img.src=ma(e)}render(){if(this.wrapper.classList.add("am-c-ed-bl-image"),this.img=i(re.TAG_NAME,[],{},this.wrapper),this.setImage(this.data.url),!this.readOnly){const e=i("div",["am-c-ed-bl-image__buttons","am-f-group"],{},this.wrapper),t=i("button",["am-e-button","am-e-button--icon","am-f-group__item"],{"am-tooltip":m.text("selectImage")},e,'<i class="bi bi-images"></i>'),a=i("button",["am-e-button","am-e-button--icon","am-f-group__item"],{"am-tooltip":m.text("link")},e,'<i class="bi bi-link-45deg"></i>');f(t,"click",this.pickImage.bind(this)),f(a,"click",this.createLinkModal.bind(this))}return this.caption=i("div",["cdx-block","ce-paragraph"],{contenteditable:this.readOnly?"false":"true",placeholder:m.text("caption")},this.wrapper,Pt`${this.data.caption}`),f(this.caption,"input",(()=>{b("change",this.caption)})),this.wrapper}appendCallback(){this.pickImage()}onPaste(e){if("pattern"==e.type&&this.setImage(e.detail.data),"file"==e.type){const t=e.detail.file,a=new FileReader,i=t.type.split("/")[1],s=`image-${Date.now()}`;a.onload=e=>ce(this,void 0,void 0,(function*(){if(!i)return;this.wrapper.innerHTML="<am-spinner></am-spinner>";const{error:t}=yield Gt("ImageController::save",{url:ra(),name:s,extension:i,imageBase64:e.target.result},!1,(()=>{this.wrapper.innerHTML="",this.data.url=ra()?`${s}.${i}`:`/shared/${s}.${i}`,this.render(),b("AutomadFilesChangeOnServer")}));t&&Ft(t)})),a.readAsDataURL(t)}}pickImage(){pt(this.setImage.bind(this),m.text("selectImage"),this.data.url)}createLinkModal(){const{modal:e,body:t}=ht(m.text("link"));dt("am-url-field",t,{value:this.data.link,name:"link",key:$a(),label:m.text("link")}),dt("am-toggle-field",t,{value:this.data.openInNewTab,name:"newTab",key:$a(),label:m.text("openInNewTab")}),f(t,"input",o((()=>{const t=kt(e);this.data.link=t.link,this.data.openInNewTab=!!t.newTab,this.blockAPI.dispatchChange()}),200)),setTimeout((()=>{e.open()}))}save(){return this.data.caption=this.caption.innerHTML||"",this.data}}const me=["slide","fade","flip"],ue=e=>{const t={};return e.split(" ").forEach((e=>{const[a,i]=e.split(":");a&&i&&(t[a]={slidesPerView:parseInt(i)})})),t};class he extends _{static get sanitize(){return{effect:!1}}static get toolbox(){return{title:m.text("imageSlideshowBlockTitle"),icon:'<i class="bi bi-collection-play"></i>'}}prepareData(e){var t,a,i,s;return{files:e.files||[],imageWidthPx:e.imageWidthPx||1200,imageHeightPx:e.imageHeightPx||780,gapPx:e.gapPx||30,slidesPerView:e.slidesPerView||1,loop:null===(t=e.loop)||void 0===t||t,autoplay:null!==(a=e.autoplay)&&void 0!==a&&a,effect:null!==(i=e.effect)&&void 0!==i?i:"slide",breakpoints:null!==(s=e.breakpoints)&&void 0!==s?s:{600:{slidesPerView:2},900:{slidesPerView:3}}}}render(){this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),i("span",["am-u-text-muted","am-u-user-select-none"],{},this.wrapper,Pt`<am-icon-text am-icon="collection-play" am-text="${he.toolbox.title}"></am-icon-text>`);const e=i("div",["am-c-image-collection-group"],{},this.wrapper);if(!this.readOnly){const t=i("button",["am-e-button"],{},e,m.text("imageSlideshowBlockSettings"));this.api.listeners.on(t,"click",this.renderModal.bind(this))}const t=i(ne.TAG_NAME,[],this.readOnly?{disabled:""}:{},e);return setTimeout((()=>{t.images=this.data.files,this.readOnly||this.api.listeners.on(t,"change",(()=>{this.data.files=t.images,this.blockAPI.dispatchChange()}))}),0),this.wrapper}renderModal(){const{modal:e,body:t}=ht(m.text("imageSlideshowBlockSettings"));setTimeout((()=>{this.renderSliderSettings(t),e.open()}),0),f(e,"change",(()=>{var t,a;const i=kt(e);this.data={files:this.data.files,imageWidthPx:i.imageWidthPx,imageHeightPx:i.imageHeightPx,gapPx:i.gapPx,slidesPerView:i.slidesPerView,loop:null!==(t=i.loop)&&void 0!==t&&t,autoplay:null!==(a=i.autoplay)&&void 0!==a&&a,effect:i.effect,breakpoints:ue(i.breakpointsString)}})),f(e,"AutomadModalClose",(()=>{this.blockAPI.dispatchChange()}))}renderSliderSettings(e){e.innerHTML="",vt(m.text("imageSlideshowBlockEffect"),ft(me.map((e=>({value:e}))),this.data.effect,null,"effect"),e),dt("am-toggle-field",e,{name:"loop",value:this.data.loop,key:$a(),label:m.text("imageSlideshowBlockLoop")}),dt("am-toggle-field",e,{name:"autoplay",value:this.data.autoplay,key:$a(),label:m.text("imageSlideshowBlockAutoplay")});const t=i("div",["am-l-grid","am-l-grid--auto"],{},e),a=i("div",["am-l-grid","am-l-grid--auto"],{},e);var s;dt("am-number-field",t,{name:"imageWidthPx",value:this.data.imageWidthPx,key:$a(),label:`${m.text("imageSlideshowBlockImageWidth")} (Pixel)`},[],{required:""}),dt("am-number-field",t,{name:"imageHeightPx",value:this.data.imageHeightPx,key:$a(),label:`${m.text("imageSlideshowBlockImageHeight")} (Pixel)`},[],{required:""}),dt("am-number-field",a,{name:"slidesPerView",value:this.data.slidesPerView,key:$a(),label:m.text("imageSlideshowBlockSlidesPerView")},[],{required:""}),dt("am-number-field",a,{name:"gapPx",value:this.data.gapPx,key:$a(),label:`${m.text("imageSlideshowBlockSpaceBetween")} (Pixel)`},[],{required:""}),i("div",["am-c-field"],{"am-error":m.text("imageSlideshowBlockBreakpointsError")},e,Pt`<label class="am-c-field__label"> ${m.text("imageSlideshowBlockBreakpoints")} &mdash; <span class="am-u-text-mono">px:slides px:slides ...</span></label><input class="am-f-input am-u-text-mono" type="text" value="${s=this.data.breakpoints,Object.keys(s).reduce(((e,t)=>`${e} ${t}:${s[t].slidesPerView}`.trim()),"")}" name="breakpointsString" placeholder="600:2 900:3" pattern="([1-9][0-9]+:[0-9]+( |$))*" />`),i("p",[],{},e,m.text("imageSlideshowBlockBreakpointsHelp"))}save(){return this.data}}class pe extends _{static get sanitize(){return{to:!1,error:{},success:{},errorAddress:!1,labelAddress:!1,errorSubject:!1,labelSubject:!1,errorBody:!1,labelBody:!1,labelSend:!1}}static get toolbox(){return{title:m.text("mailBlockTitle"),icon:'<i class="bi bi-envelope"></i>'}}prepareData(e){return{to:e.to||m.user.email,error:e.error||"",success:e.success||"",errorAddress:e.errorAddress||"",labelAddress:e.labelAddress||"",errorSubject:e.errorSubject||"",labelSubject:e.labelSubject||"",errorBody:e.errorBody||"",labelBody:e.labelBody||"",labelSend:e.labelSend||""}}render(){const e=this.readOnly?{disabled:""}:{};return this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.wrapper.innerHTML=Pt`<span class="am-u-text-muted am-u-user-select-none"><am-icon-text am-icon="envelope" am-text="${pe.toolbox.title}"></am-icon-text></span><div class="am-c-card"><div class="am-c-card__form"> ${dt("am-input-field",null,{name:"to",key:$a(),label:m.text("mailBlockTo"),value:this.data.to,placeholder:"you@domain.com"},[],Object.assign({"am-error":m.text("emailRequiredError"),required:""},e)).outerHTML} <div class="am-l-grid am-l-grid--auto" style="--min: 20rem;"> ${dt("am-input-field",null,{name:"labelAddress",key:$a(),label:m.text("mailBlockAddressFieldLabel"),value:this.data.labelAddress,placeholder:m.text("mailBlockDefaultLabelAddress")},[],e).outerHTML} ${dt("am-input-field",null,{name:"errorAddress",key:$a(),label:m.text("mailBlockAddressFieldError"),value:this.data.errorAddress,placeholder:m.text("mailBlockDefaultErrorAddress")},[],e).outerHTML} ${dt("am-input-field",null,{name:"labelSubject",key:$a(),label:m.text("mailBlockSubjectFieldLabel"),value:this.data.labelSubject,placeholder:m.text("mailBlockDefaultLabelSubject")},[],e).outerHTML} ${dt("am-input-field",null,{name:"errorSubject",key:$a(),label:m.text("mailBlockSubjectFieldError"),value:this.data.errorSubject,placeholder:m.text("mailBlockDefaultErrorSubject")},[],e).outerHTML} ${dt("am-input-field",null,{name:"labelBody",key:$a(),label:m.text("mailBlockBodyFieldLabel"),value:this.data.labelBody,placeholder:m.text("mailBlockDefaultLabelBody")},[],e).outerHTML} ${dt("am-input-field",null,{name:"errorBody",key:$a(),label:m.text("mailBlockBodyFieldError"),value:this.data.errorBody,placeholder:m.text("mailBlockDefaultErrorBody")},[],e).outerHTML} </div> ${dt("am-input-field",null,{name:"labelSend",key:$a(),label:m.text("mailBlockSendButtonLabel"),value:this.data.labelSend,placeholder:m.text("mailBlockDefaultLabelSend")},[],e).outerHTML} ${dt("am-textarea-field",null,{name:"error",key:$a(),label:m.text("mailBlockError"),value:this.data.error,placeholder:m.text("mailBlockDefaultError")},[],e).outerHTML} ${dt("am-textarea-field",null,{name:"success",key:$a(),label:m.text("mailBlockSuccess"),value:this.data.success,placeholder:m.text("mailBlockDefaultSuccess")},[],e).outerHTML} </div></div>`,this.wrapper}save(){return kt(this.wrapper)}}var ge=a(9257),be=a.n(ge);class fe extends(be()){static get toolbox(){return{icon:'<i class="bi bi-list-ul"></i>',title:m.text("list")}}renderSettings(){const[e,t]=super.renderSettings();return[Object.assign(Object.assign({},e),{icon:'<i class="bi bi-list-ul"></i>',label:m.text("unorderedList")}),Object.assign(Object.assign({},t),{icon:'<i class="bi bi-list-ol"></i>',label:m.text("orderedList")})]}merge(e){this.appendItems(e.items,this.nodes.wrapper)}}const ve=["all","children","related","siblings"],xe="default";class ye extends _{static get sanitize(){return{file:!1,filter:!1,matchUrl:!1,template:!1,sortField:!1,sortOrder:!1,type:!1}}static get toolbox(){return{title:m.text("pagelistBlockTitle"),icon:'<i class="bi bi-columns-gap"></i>'}}prepareData(e){var t,a,i,s,n,o;return{type:e.type||ve[0],context:null!==(t=e.context)&&void 0!==t?t:"",excludeHidden:null===(a=e.excludeHidden)||void 0===a||a,excludeCurrent:null!==(i=e.excludeCurrent)&&void 0!==i&&i,matchUrl:e.matchUrl||"",filter:e.filter||"",template:e.template||"",limit:null!==(s=e.limit)&&void 0!==s?s:10,offset:e.offset||0,sortField:null!==(n=e.sortField)&&void 0!==n?n:":index",sortOrder:null!==(o=e.sortOrder)&&void 0!==o?o:"asc",file:e.file||xe}}render(){return this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.wrapper.innerHTML=Pt`<span class="am-u-text-muted am-u-user-select-none"><am-icon-text am-icon="columns-gap" am-text="${ye.toolbox.title}"></am-icon-text></span><div class="am-c-card __card"></div>`,this.renderForm(l(".__card",this.wrapper)),this.readOnly||f(this.wrapper,"change input",o((()=>{this.blockAPI.dispatchChange()}),50)),this.wrapper}renderForm(e){const t=this.readOnly?{disabled:""}:{},a=this.readOnly?'disabled=""':"",s=m.files.pagelist.reduce(((e,t)=>[...e,{value:t,text:ga(t)}]),[{value:xe,text:m.text("pagelistBlockDefaultFile")}]),n=ve.reduce(((e,t)=>[...e,{value:t}]),[]),o=i("div",["am-c-card__form"],{},e),r=i("div",["am-c-card__form"],{},e);vt(m.text("pagelistBlockFile"),ft(s,this.data.file,null,"file",null,"",[],t),o);const c=i("div",["am-l-grid","am-l-grid--auto"],{},r),d=i("div",["am-l-grid","am-l-grid--auto"],{},r),u=i("div",["am-l-grid","am-l-grid--auto"],{},r),h=(e,t)=>{const s=$a();i("div",["am-f-toggle","am-f-toggle--button"],{},c,Pt`<input id="${s}" type="checkbox" name="${e}" value="1" ${a} ${this.data[e]?"checked":""} /><label for="${s}"><i class="bi"></i><span>${t}</span></label>`)};h("excludeHidden",m.text("pagelistBlockExcludeHidden")),h("excludeCurrent",m.text("pagelistBlockExcludeCurrent")),i("div",["am-c-field"],{},d,Pt`<div><label class="am-c-field__label"> ${m.text("pagelistBlockSortField")} </label></div><am-autocomplete name="sortField" value="${this.data.sortField}" am-data=":index, :path, date, title" am-min="0" ${a}></am-autocomplete>`),vt(m.text("pagelistBlockSortOrder"),ft([{value:"asc",text:"↑ asc"},{value:"desc",text:"↓ desc"}],this.data.sortOrder,null,"sortOrder",null,"",[],t),d),vt(m.text("pagelistBlockType"),ft(n,this.data.type,null,"type",null,"",[],t),d),dt("am-url-field",d,{key:$a(),name:"context",value:this.data.context,label:m.text("pagelistBlockContext")},[],t),this.renderTagSelectField(d),i("div",["am-c-field"],{},d,Pt`<div><label class="am-c-field__label"> ${m.text("pagelistBlockOffset")} / ${m.text("pagelistBlockLimit")} </label></div><div class="am-f-group"><input type="number" class="am-f-input am-f-group__item" name="offset" value="${this.data.offset}" ${a} /><input type="number" class="am-f-input am-f-group__item" name="limit" value="${this.data.limit}" ${a} /></div>`),dt("am-input-field",u,{key:$a(),name:"matchUrl",value:this.data.matchUrl,label:`${m.text("pagelistBlockFilterByUrl")} (Regex)`},[],t),dt("am-input-field",u,{key:$a(),name:"template",value:this.data.template,label:`${m.text("pagelistBlockFilterByTemplate")} (Regex)`},[],t),this.readOnly||setTimeout((()=>{var e;null===(e=l(":focus",this.wrapper))||void 0===e||e.blur(),b("click",this.wrapper)}),50)}save(){const e=kt(this.wrapper);return Object.assign({excludeCurrent:!1,excludeHidden:!1},e)}renderTagSelectField(e){const t=()=>m.tags.reduce(((e,t)=>[...e,{value:t}]),[{value:"",text:"—"}]);let a=t();const{select:i}=vt(m.text("pagelistBlockFilter"),ft(a,this.data.filter,null,"filter",null,"",[],this.readOnly?{disabled:""}:{}),e);this.addListener(f(window,"AutomadAppStateChange",(()=>{const e=i.value;i.options=t(),m.tags.includes(e)&&(i.value=e)})))}}class we extends _{static get conversionConfig(){return{export:"text",import:"text"}}static get pasteConfig(){return{tags:["P"]}}static get sanitize(){return{large:!1,text:{br:!0}}}static get enableLineBreaks(){return!1}static get toolbox(){return{title:m.text("textTool"),icon:'<i class="bi bi-text-paragraph"></i>'}}prepareData(e){var t,a;return{text:null!==(t=e.text)&&void 0!==t?t:"",large:null!==(a=e.large)&&void 0!==a&&a}}get content(){var e,t;return null!==(t=null===(e=l("[contenteditable]",this.wrapper))||void 0===e?void 0:e.innerHTML)&&void 0!==t?t:""}render(){return this.wrapper.innerHTML="",this.wrapper.classList.toggle("am-style--large",this.data.large),i("div",["am-c-ed-bl-paragraph"],{contenteditable:this.readOnly?"false":"true",placeholder:0===this.api.blocks.getBlocksCount()&&this.config.placeholder||""},this.wrapper).innerHTML=this.data.text,this.wrapper}save(){return{text:this.content,large:this.data.large}}renderSettings(){return{icon:'<i class="bi bi-capslock"></i>',label:m.text("large"),closeOnActivate:!1,onActivate:()=>{this.data.large=!this.data.large,this.wrapper.classList.toggle("am-style--large",this.data.large)},isActive:this.data.large,toggle:"large"}}merge(e){const t=l("[contenteditable]",this.wrapper),a=this.api.blocks.getBlockIndex(this.blockAPI.id);t.innerHTML=`${t.innerHTML}${e.text}`,setTimeout((()=>{this.api.caret.setToBlock(a,"end")}),100)}validate(e){return""!==e.text.trim()}onPaste(e){const t={text:e.detail.data.innerHTML,large:!1};l("[contenteditable]",this.wrapper).innerHTML=t.text}}class _e extends _{static get conversionConfig(){return{import:"text",export:e=>e.caption?`${e.text} — ${e.caption}`:e.text}}static get enableLineBreaks(){return!0}static get sanitize(){return{text:{},caption:{}}}static get toolbox(){return{title:m.text("blockquote"),icon:'<i class="bi bi-quote"></i>'}}prepareData(e){return{text:e.text||"",caption:e.caption||""}}render(){return this.wrapper.classList.add("am-c-ed-bl-quote","am-u-flex","am-u-flex--column"),this.inputs={text:i("div",["am-c-ed-bl-quote__text","ce-paragraph"],{contenteditable:this.readOnly?"false":"true",placeholder:m.text("blockquote")},this.wrapper,Pt`${this.data.text}`),caption:i("div",["am-c-ed-bl-quote__caption","ce-paragraph"],{contenteditable:this.readOnly?"false":"true",placeholder:`— ${m.text("caption")}`},this.wrapper,Pt`${this.data.caption}`)},this.wrapper}save(){return{text:this.inputs.text.innerHTML,caption:this.inputs.caption.innerHTML}}}class ke extends _{static get enableLineBreaks(){return!0}static get sanitize(){return{code:!0}}static get toolbox(){return{title:m.text("rawHtmlMarkdown"),icon:'<i class="bi bi-markdown"></i>'}}prepareData(e){var t;return{code:null!==(t=e.code)&&void 0!==t?t:""}}render(){this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),i("span",["am-u-text-muted","am-u-user-select-none"],{},this.wrapper,Pt`<am-icon-text am-icon="markdown" am-text="${ke.toolbox.title}"></am-icon-text>`);const e=i("div",["am-f-codeflask"],{},this.wrapper);return this.initEditor(e),this.wrapper}initEditor(e){this.editor=new P({element:e,code:this.data.code,language:"html",onChange:e=>{this.data.code=e},readonly:this.readOnly}),this.readOnly||this.api.listeners.on(l("textarea",e),"keydown",(e=>{e.stopImmediatePropagation()}))}save(){return{code:this.editor.codeFlask.getCode()}}}var $e=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Ce={start:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="19" y="7" width="8" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexJustifyStart"},center:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="12" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="24" y="7" width="8" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexJustifyCenter"},end:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="17" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="29" y="7" width="8" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexJustifyEnd"},"space-between":{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="29" y="7" width="8" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexJustifyBetween"},"space-evenly":{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="10" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="26" y="7" width="8" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexJustifyEvenly"},"fill-row":{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="7" y="7" width="13" height="30" rx="1" fill="currentColor"/> <rect x="24" y="7" width="13" height="30" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexFillRow"}},Ae={start:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="12" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="24" y="7" width="8" height="19" rx="1" fill="currentColor"/> <rect x="7" y="7" width="30" height="2" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexAlignStart"},center:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="12" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="24" y="13" width="8" height="18" rx="1" fill="currentColor"/> <rect x="7" y="21" width="30" height="2" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexAlignCenter"},end:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="12" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="24" y="18" width="8" height="19" rx="1" fill="currentColor"/> <rect x="7" y="35" width="30" height="2" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexAlignEnd"},stretch:{icon:'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="1.5" y="1.5" width="41" height="41" rx="5.5" stroke="currentColor" stroke-width="3"/> <rect x="12" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="24" y="7" width="8" height="30" rx="1" fill="currentColor"/> <rect x="8" y="7" width="28" height="2" rx="1" fill="currentColor"/> <rect x="8" y="35" width="28" height="2" rx="1" fill="currentColor"/> </svg> ',tooltip:"flexAlignStretch"}},Te=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Le=["none","solid","dashed","dotted","double","groove","ridge"],Ee={card:!1,shadow:!1,matchRowHeight:!1,color:"",backgroundColor:"",backgroundBlendMode:"normal",borderColor:"",borderWidth:"",borderRadius:"",borderStyle:"none",backgroundImage:"",paddingTop:"",paddingBottom:"",overflowHidden:!1},Se=(e,t,a,s,n,o)=>{i("input",[],{type:"radio",name:e,value:t},i("label",["am-c-ed-bl-section__radio",...t===n?["am-c-ed-bl-section__radio--active"]:[]],{"am-tooltip":m.text(s)},o,a)).checked=t===n},Pe=e=>{r("input",e).forEach((e=>{e.parentElement.classList.toggle("am-c-ed-bl-section__radio--active",e.checked)}))};class Me extends _{constructor(){super(...arguments),this.holder=null,this.section=null}static get enableLineBreaks(){return!0}static get sanitize(){return{content:!0,style:!1}}static get toolbox(){return{title:m.text("sectionBlockTitle"),icon:'<i class="bi bi-layout-three-columns"></i>'}}prepareData(e){return{content:e.content||{},style:Object.assign({},Ee,e.style),justify:e.justify||"start",align:e.align||"start",gap:void 0!==e.gap?e.gap:"",minBlockWidth:void 0!==e.minBlockWidth?e.minBlockWidth:""}}render(){this.section=i("div",this.readOnly?[]:["am-c-ed-bl-section"],{},this.wrapper),this.readOnly||i("span",["am-u-flex"],{},this.section,Pt`<span class="am-c-ed-bl-section__label"> ${Me.toolbox.icon} <span>${m.text("sectionBlockTitle")}</span></span>`);return(()=>{$e(this,void 0,void 0,(function*(){this.holder=ct(this.section,this.data.content,{onChange:e=>$e(this,void 0,void 0,(function*(){if(this.readOnly)return;const{blocks:t}=yield e.saver.save();this.data.content={blocks:t},this.blockAPI.dispatchChange()}))},!0,this.readOnly),yield this.holder.editor.isReady,this.readOnly||(this.holder.editor.focus(),f(this.holder,"paste",(e=>{e.stopPropagation()})),this.renderToolbar()),this.setStyle()}))})(),this.wrapper}save(){return this.data}renderToolbar(){const e=i("div",["am-c-ed-bl-section__toolbar"],{},this.section),t=i("div",["am-c-ed-bl-section__toolbar-section"],{},e),a=i("div",["am-c-ed-bl-section__toolbar-section"],{},e),s=i("div",["am-c-ed-bl-section__toolbar-section"],{},e),n=i("div",["am-c-ed-bl-section__toolbar-section"],{},e);this.renderStylesButton(t),this.renderJustifySelect(a),this.renderAlignSelect(s),this.renderNumberUnitInput(n,"gap",'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="14" width="4" height="44" rx="1" fill="currentColor"/> <rect x="26" width="4" height="44" rx="1" fill="currentColor"/> <line x1="10" y1="22.1213" x2="2.12132" y2="30" stroke="currentColor" stroke-width="3" stroke-linecap="round"/> <line x1="1.5" y1="-1.5" x2="12.6421" y2="-1.5" transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 10 24)" stroke="currentColor" stroke-width="3" stroke-linecap="round"/> <line x1="1.5" y1="-1.5" x2="12.6421" y2="-1.5" transform="matrix(0.707107 0.707107 0.707107 -0.707107 34 20)" stroke="currentColor" stroke-width="3" stroke-linecap="round"/> <line x1="34" y1="21.8787" x2="41.8787" y2="14" stroke="currentColor" stroke-width="3" stroke-linecap="round"/> </svg> '),this.renderNumberUnitInput(n,"minBlockWidth",'<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect y="31.2695" width="44" height="3" rx="1" fill="currentColor"/> <path d="M40 7.10286C40.5523 7.10286 41 7.55057 41 8.10286V20.0724C41 20.6247 40.5523 21.0724 40 21.0724H39.2733C38.945 21.0724 38.6376 20.9113 38.4509 20.6413L32.1894 11.5898C32.1752 11.5693 32.1518 11.557 32.1268 11.557V11.557C32.0848 11.557 32.0508 11.5911 32.0508 11.6331V20.0724C32.0508 20.6247 31.6031 21.0724 31.0508 21.0724H30.5201C29.9679 21.0724 29.5201 20.6247 29.5201 20.0724V8.10286C29.5201 7.55058 29.9679 7.10286 30.5201 7.10286H31.26C31.5886 7.10286 31.8962 7.26426 32.0829 7.53463L38.3363 16.5903C38.3513 16.6121 38.3761 16.6251 38.4025 16.6251V16.6251C38.447 16.6251 38.4831 16.589 38.4831 16.5446V8.10286C38.4831 7.55058 38.9308 7.10286 39.4831 7.10286H40Z" fill="currentColor"/> <path d="M23.8589 7.10286C24.4112 7.10286 24.8589 7.55057 24.8589 8.10286V20.0724C24.8589 20.6247 24.4112 21.0724 23.8589 21.0724H23.3282C22.776 21.0724 22.3282 20.6247 22.3282 20.0724V8.10286C22.3282 7.55058 22.776 7.10286 23.3282 7.10286H23.8589Z" fill="currentColor"/> <path d="M3 8.10286C3 7.55058 3.44772 7.10286 4 7.10286H5.42581C5.83167 7.10286 6.19728 7.34817 6.35116 7.72374L10.213 17.1496C10.2317 17.1954 10.2763 17.2253 10.3259 17.2253V17.2253C10.3754 17.2253 10.42 17.1954 10.4387 17.1496L14.3006 7.72374C14.4544 7.34817 14.82 7.10286 15.2259 7.10286H16.6517C17.204 7.10286 17.6517 7.55057 17.6517 8.10286V20.0724C17.6517 20.6247 17.204 21.0724 16.6517 21.0724H16.2234C15.6711 21.0724 15.2234 20.6247 15.2234 20.0724V11.5526C15.2234 11.5098 15.1888 11.4752 15.146 11.4752V11.4752C15.1145 11.4752 15.0861 11.4943 15.0742 11.5236L11.4857 20.4061C11.333 20.7841 10.9662 21.0315 10.5585 21.0315H10.0937C9.6858 21.0315 9.31877 20.7837 9.16625 20.4054L5.57744 11.5032C5.56564 11.4739 5.53724 11.4547 5.50568 11.4547V11.4547C5.46295 11.4547 5.42831 11.4894 5.42831 11.5321V20.0724C5.42831 20.6247 4.9806 21.0724 4.42831 21.0724H4C3.44771 21.0724 3 20.6247 3 20.0724V8.10286Z" fill="currentColor"/> <rect x="41" y="26.2695" width="3" height="13" rx="1" fill="currentColor"/> <rect y="26.2695" width="3" height="13" rx="1" fill="currentColor"/> </svg> '),i("input",["am-u-display-none"],{},e),f(e,"change",(()=>{this.setStyle()}));f(this.wrapper,"click",(t=>{t.stopPropagation(),r(".am-c-ed-bl-section__toolbar").forEach((t=>{t.classList.toggle("am-active",t==e)})),e.style.transform="translateX(0)",setTimeout((()=>{const t=e.getBoundingClientRect(),a=document.body.offsetWidth;if(a<t.right){const i=a-t.right-10;e.style.transform=`translateX(${i}px)`}}),0)})),this.addListener(f(document,"click",(t=>{const a=t.target;this.wrapper.contains(a)||e.classList.remove("am-active")})))}renderStylesButton(e){const t=i("am-modal-toggle",["am-e-button","am-e-button--icon","am-e-button--primary"],{"am-tooltip":m.text("editStyle")},e,'<i class="bi bi-palette2"></i>');f(t,"click",(()=>{this.renderStylesModal()}))}renderJustifySelect(e){const t=i("div",["am-c-ed-bl-section__radios"],{},e);for(const[e,{icon:a,tooltip:i}]of Object.entries(Ce))Se("justify",e,a,i,this.data.justify,t);f(t,"change",(()=>{const{justify:e}=kt(t);this.data.justify=e,this.blockAPI.dispatchChange(),Pe(t)}))}renderAlignSelect(e){const t=i("div",["am-c-ed-bl-section__radios"],{},e);for(const[e,{icon:a,tooltip:i}]of Object.entries(Ae))Se("align",e,a,i,this.data.align,t);f(t,"change",(()=>{const{align:e}=kt(t);this.data.align=e,this.blockAPI.dispatchChange(),Pe(t)}))}renderNumberUnitInput(e,t,a){const s=i("span",["am-f-group"],{},e,Pt`<span class="am-f-group__item am-f-group__icon"> ${a} </span>`),n=i("am-number-unit-input",["am-f-group__item"],{value:this.data[t]},s);f(n,"change",(()=>{this.data[t]=n.value,this.blockAPI.dispatchChange()}))}renderStylesModal(){const{modal:e,body:t}=ht(m.text("editStyle")),a=(e,t,a,i)=>{dt(e,i,{name:t,value:this.data.style[t],key:$a(),label:m.text(a)})};a("am-toggle-field","card","optimizeContentForCards",t),a("am-toggle-field","matchRowHeight","matchRowHeight",t);const s=i("div",["am-l-grid","am-l-grid--auto"],{},t);a("am-toggle-field","overflowHidden","overflowHidden",s),a("am-toggle-field","shadow","addShadow",s);const n=i("div",["am-l-grid","am-l-grid--auto"],{},t);a("am-color-field","color","textColor",n),a("am-color-field","backgroundColor","backgroundColor",n);const o=i("div",["am-l-grid","am-l-grid--auto"],{},t),l=$a(),r=i("div",["am-c-field"],{},o,Pt`<div><label for="${l}" class="am-c-field__label"> ${m.text("borderStyle")} </label></div>`);ft(Le.reduce(((e,t)=>[...e,{value:t}]),[]),this.data.style.borderStyle,r,"borderStyle",l),a("am-color-field","borderColor","borderColor",o),a("am-image-field","backgroundImage","backgroundImage",t);const c=$a(),d=i("div",["am-c-field"],{},t,Pt`<div><label for="${c}" class="am-c-field__label"> Background Blendmode </label></div>`);ft(Te.reduce(((e,t)=>[...e,{value:t}]),[]),this.data.style.backgroundBlendMode,d,"backgroundBlendMode",c);const u=i("div",["am-l-grid","am-l-grid--auto"],{},t);a("am-number-unit-field","borderWidth","borderWidth",u),a("am-number-unit-field","borderRadius","borderRadius",u);const h=i("div",["am-l-grid","am-l-grid--auto"],{},t);a("am-number-unit-field","paddingTop","paddingTop",h),a("am-number-unit-field","paddingBottom","paddingBottom",h),p.connectElements(t),this.api.listeners.on(t,"change",(()=>{this.data.style=kt(t),this.setStyle(),this.blockAPI.dispatchChange()})),setTimeout((()=>{e.open()}))}setStyle(){const{style:e,gap:t,justify:a,align:i,minBlockWidth:s}=this.data,n="am-style",o=["am-c-ed-bl-section__editor"];o.push(`${n}--justify-${a}`),o.push(`${n}--align-${i}`),e.card&&o.push(`${n}--card`),e.shadow&&o.push(`${n}--shadow`),e.overflowHidden&&o.push(`${n}--overflow-hidden`),e.matchRowHeight&&o.push(`${n}--match-height`),this.holder.className=o.join(" ");const l=[];if(["color","backgroundColor","backgroundBlendMode","borderColor","borderWidth","borderRadius","borderStyle","paddingTop","paddingBottom"].forEach((t=>{const a=e[t];a.toString().length&&l.push(`--${t}: ${a};`)})),e.backgroundImage){const t=ma(e.backgroundImage);l.push(`--backgroundImage: url(${t});`)}else l.push("--backgroundImage: none;");t&&l.push(`--gap: ${t};`),s&&l.push(`--minBlockWidth: ${s};`),this.holder.setAttribute("style",l.join(" "))}}class Ie extends _{static get sanitize(){return{file:!1,snippet:!0}}static get toolbox(){return{title:m.text("snippetBlockTitle"),icon:'<i class="bi bi-code-square"></i>'}}static get enableLineBreaks(){return!0}prepareData(e){return{file:e.file||"",snippet:e.snippet||""}}render(){return this.wrapper.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.wrapper.innerHTML=Pt`<span class="am-u-text-muted am-u-user-select-none"><am-icon-text am-icon="files" am-text="${Ie.toolbox.title}"></am-icon-text></span><div class="am-c-card __card"></div>`,this.renderForm(l(".__card",this.wrapper)),this.readOnly||f(this.wrapper,"change input",o((()=>{this.blockAPI.dispatchChange()}),50)),this.wrapper}renderForm(e){const t=this.readOnly?{disabled:""}:{},a=m.files.snippets.reduce(((e,t)=>[...e,{value:t,text:ga(t)}]),[{value:"",text:"—"}]),s=i("div",["am-c-card__form"],{},e),n=i("div",["am-c-card__form"],{},e);dt("am-textarea-field",s,{key:$a(),name:"snippet",value:this.data.snippet,label:m.text("snippetBlockSnippet")},[],t),vt(m.text("snippetBlockFile"),ft(a,this.data.file,null,"file",null,"",[],t),n)}save(){return kt(this.wrapper)}}var Oe=a(9896),Re=a.n(Oe);class He extends(Re()){static get toolbox(){return{title:m.text("table"),icon:'<i class="bi bi-grid-3x3"></i>'}}renderSettings(){const[e,t]=super.renderSettings();return[Object.assign(Object.assign({},e),{icon:'<i class="bi bi-table"></i>',label:m.text("tableWithHeadings")}),Object.assign(Object.assign({},t),{icon:'<i class="bi bi-grid-3x3"></i>',label:m.text("tableWithoutHeadings")})]}}class Be extends _{static get toolbox(){return{title:m.text("tableOfContentsBlockTitle"),icon:'<i class="bi bi-list-columns"></i>'}}prepareData(e){var t;return{type:null!==(t=e.type)&&void 0!==t?t:"ordered"}}render(){return this.wrapper.innerHTML=Pt`<div class="am-c-card"><div class="am-c-card__icon"><i class="bi bi-list-${"ordered"==this.data.type?"ol":"ul"}"></i></div><div class="am-c-card__title"> ${Be.toolbox.title} </div></div>`,this.wrapper}save(){return this.data}renderSettings(){return[{icon:'<i class="bi bi-list-ol"></i>',label:m.text("orderedList"),closeOnActivate:!0,onActivate:()=>{this.data.type="ordered",this.render()},toggle:"level",isActive:"ordered"==this.data.type},{icon:'<i class="bi bi-list-ul"></i>',label:m.text("unorderedList"),closeOnActivate:!0,onActivate:()=>{this.data.type="unordered",this.render()},toggle:"level",isActive:"unordered"==this.data.type}]}}var Ne=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class Fe extends _{static get sanitize(){return{url:!0,autoplay:!1,loop:!1,muted:!1,controls:!1,caption:{}}}static get pasteConfig(){return{patterns:{image:new RegExp(`(https?:\\/\\/)?\\S+\\.(${m.fileTypesVideo.join("|")})$`,"i")}}}static get toolbox(){return{title:m.text("videoTool"),icon:'<i class="bi bi-film"></i>'}}prepareData(e){var t;return{url:e.url||"",autoplay:e.autoplay||!1,loop:e.loop||!1,muted:e.muted||!1,controls:null===(t=e.controls)||void 0===t||t,caption:e.caption||""}}setVideo(e){this.data.url=e,this.videoSource.src=ma(e),this.videoSource.type=`video/${e.split(".").pop()}`,this.video.load()}toggleProp(e,t){t?this.video.setAttribute(e,""):this.video.removeAttribute(e)}render(){if(this.video=i("video",[],{playsinline:""}),this.videoSource=i("source",[],{},this.video),this.toggleProp("autoplay",this.data.autoplay),this.toggleProp("loop",this.data.loop),this.toggleProp("muted",this.data.muted),this.toggleProp("controls",this.data.controls),this.setVideo(this.data.url),this.wrapper.appendChild(this.video),this.wrapper.classList.add("am-c-ed-bl-video"),!this.readOnly){const e=i("button",["am-e-button","am-e-button--icon","am-f-group__item"],{"am-tooltip":m.text("selectVideo")},this.wrapper,'<i class="bi bi-film"></i>');f(e,"click",this.pickVideo.bind(this))}return this.caption=i("div",["cdx-block","ce-paragraph"],{contenteditable:this.readOnly?"false":"true",placeholder:m.text("caption")},this.wrapper,Pt`${this.data.caption}`),f(this.caption,"input",(()=>{b("change",this.caption)})),this.wrapper}renderSettings(){return[{icon:'<i class="bi bi-play-fill"></i>',label:m.text("videoAutoplay"),closeOnActivate:!1,onActivate:()=>{this.data.autoplay=!this.data.autoplay,this.toggleProp("autoplay",this.data.autoplay)},isActive:this.data.autoplay,toggle:"autoplay"},{icon:'<i class="bi bi-repeat"></i>',label:m.text("videoLoop"),closeOnActivate:!1,onActivate:()=>{this.data.loop=!this.data.loop,this.toggleProp("loop",this.data.loop)},isActive:this.data.loop,toggle:"loop"},{icon:'<i class="bi bi-volume-mute"></i>',label:m.text("videoMuted"),closeOnActivate:!1,onActivate:()=>{this.data.muted=!this.data.muted,this.toggleProp("muted",this.data.muted)},isActive:this.data.muted,toggle:"muted"},{icon:'<i class="bi bi-pause-btn"></i>',label:m.text("videoControls"),closeOnActivate:!1,onActivate:()=>{this.data.controls=!this.data.controls,this.toggleProp("controls",this.data.controls)},isActive:this.data.controls,toggle:"controls"}]}appendCallback(){this.pickVideo()}onPaste(e){"pattern"==e.type&&this.setVideo(e.detail.data)}createVideoList(e,t,a=null){return Ne(this,void 0,void 0,(function*(){const s=m.text(a?"pageVideos":"sharedVideos"),n=a?"":"/shared/",o=i("div",["am-c-field"],{},t),l=()=>Ne(this,void 0,void 0,(function*(){var t;const{data:l}=yield Gt("VideoCollectionController::list",{url:a});if(o.innerHTML="",i("label",["am-c-field__label"],{},o,s),!(null===(t=l.videos)||void 0===t?void 0:t.length))return void i("span",[],{},o,m.text("noVideosFound"));const r=i("div",["am-c-ed-bl-video__list"],{},o);l.videos.forEach((t=>{const a=i("span",["am-c-ed-bl-video__list-item"],{},r,Pt`<am-icon-text am-icon="film" am-text="${t.name}"></am-icon-text><small>(${t.size})</small>`);f(a,"click",(()=>{this.setVideo(`${n}${t.name}`),e.close()}))}))}));l(),this.addListener(f(window,"AutomadFilesChangeOnServer",l))}))}pickVideo(){return Ne(this,void 0,void 0,(function*(){const{modal:e,body:t}=ht(m.text("selectVideo")),a=ra();t.innerHTML=Pt`<p>${m.text("linkVideo")}</p><span class="am-f-group"><input type="text" class="am-f-input am-f-group__item" value="${this.data.url}" placeholder="${m.text("url")}" /><button class="am-e-button am-f-group__item"> ${m.text("ok")} </button></span><hr />`;const s=l("button",t),n=l("input",t),o=i("div",[],{},t,Pt`<p>${m.text("useUploadedVideo")}</p><am-upload></am-upload>`);f(s,"click",(()=>{this.setVideo(n.value),e.close()})),a&&(yield this.createVideoList(e,o,a)),yield this.createVideoList(e,o),e.open()}))}save(){return this.data.caption=this.caption.innerHTML||"",this.data}}const Ue={codepen:{regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:e=>e.join("/embed/")},dailymotion:{regex:/https?:\/\/www\.dailymotion\.com\/video\/(\w+)(\?.*?)?$/,embedUrl:"https://www.dailymotion.com/embed/video/<%= remote_id %>/",html:'<iframe width="640" height="360" frameborder="0" allowFullScreen></iframe>',height:360,width:640},facebook:{regex:/https?:\/\/www.facebook.com\/([^\/\?\&]*)\/(.*)/,embedUrl:"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/<%= remote_id %>&width=500",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='margin: 0 auto; width: 500px; min-height: 500px; max-height: 1000px;'></iframe>",id:e=>e.join("/")},giphy:{regex:/https?:\/\/giphy\.com\/(?:gifs|videos)\/(?:[^\/]*\-)?([a-zA-Z0-9]+)$/,embedUrl:"https://giphy.com/embed/<%= remote_id %>/",html:'<iframe width="600" height="480" frameborder="0" allowFullScreen></iframe>',height:480,width:600},github:{regex:/https?:\/\/gist.github.com\/([^\/\?\&]*)\/([^\/\?\&]*)/,embedUrl:'data:text/html;charset=utf-8,<head><base target="_blank" /></head><body><script src="https://gist.github.com/<%= remote_id %>" ><\/script></body>',html:'<iframe width="100%" height="350" frameborder="0" style="margin: 0 auto;"></iframe>',height:300,width:600,id:e=>`${e.join("/")}.js`},imgur:{regex:/https?:\/\/(?:i\.)?imgur\.com(?:\/gallery)?\/([\w-]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>",html:'<am-embed-service type="imgur"></am-embed-service>',height:500,width:540},instagram:{regex:/https?:\/\/www\.instagram\.com\/p\/([^\/\?\&]+)\/?/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400},mixcloud:{regex:/https?:\/\/www\.mixcloud\.com\/(.+)\/$/,embedUrl:"https://www.mixcloud.com/widget/iframe/?hide_cover=1&feed=/<%= remote_id %>/",html:'<iframe height="180" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;"></iframe>',height:180,width:0},soundcloud:{regex:/(https:\/\/soundcloud\.com\/.+)$/,embedUrl:"https://w.soundcloud.com/player/?url=<%= remote_id %>",html:'<iframe height="180" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;"></iframe>',height:180,width:0},twitter:{regex:/^https?:\/\/(?:www\.)?(?:twitter\.com|x\.com)\/(.+?)\/status\/(\d+)(?:\?.*)?$/,embedUrl:"https://twitter.com/<%= remote_id %>",html:'<am-embed-service type="twitter"></am-embed-service>',height:0,width:0,id:e=>e.join("/status/")},vimeo:{regex:/^https?:\/\/(?:www\.)?vimeo\.com\/(\d+).*$/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%; aspect-ratio: 16/9;" frameborder="0"></iframe>',height:9,width:16},youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width: 100%; aspect-ratio: 16/9;" frameborder="0" allowfullscreen></iframe>',height:9,width:16,id:([e,t])=>{if(!t&&e)return e;const a={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};return t=t.slice(1).split("&").map((t=>{const[i,s]=t.split("=");if(e||"v"!==i){if(a[i])return`${a[i]}=${s}`}else e=s})).filter((e=>!!e)),e+"?"+t.join("&")}}},De=e=>{let t={component:{class:Y,stretchable:!0}};return e&&(t={}),Object.assign(Object.assign({paragraph:{class:we,inlineToolbar:!0},header:{class:le,inlineToolbar:!0},section:{class:Me,stretchable:!0}},t),{nestedList:{class:fe,inlineToolbar:!0},table:{class:He,inlineToolbar:!0,stretchable:!0},quote:{class:_e,inlineToolbar:!0},delimiter:{class:Q,stretchable:!0},image:{class:de,inlineToolbar:!0,stretchable:!0},video:{class:Fe,inlineToolbar:!0,stretchable:!0},gallery:{class:oe,inlineToolbar:!1,stretchable:!0},imageSlideshow:{class:he,inlineToolbar:!1,stretchable:!0},buttons:{class:k,inlineToolbar:!0},tableOfContents:{class:Be},code:{class:M,inlineToolbar:!1,stretchable:!0},raw:{class:ke,inlineToolbar:!1,stretchable:!0},mail:{class:pe,inlineToolbar:!0},pagelist:{class:ye,stretchable:!0},filelist:{class:ie,stretchable:!0},snippet:{class:Ie,tunes:[]},embed:{class:te,inlineToolbar:!0,config:{services:Ue},stretchable:!0}})};class je{static get isInline(){return!0}get state(){return this._state}set state(e){this._state=e,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,e)}constructor({api:e}){this._state=!1,this.api=e,this.button=i("button",[this.api.styles.inlineToolButton],{type:"button"},null,this.icon)}render(){return this.button}surround(e){this.state?this.unwrap():this.wrap(e)}wrap(e){const t=e.extractContents(),a=i(this.tag,[],{});a.appendChild(t),e.insertNode(a),this.api.selection.expandToTag(a)}unwrap(){this.restoreSelection();const e=this.api.selection.findParentTag(this.tag);this.api.selection.expandToTag(e);const t=window.getSelection().getRangeAt(0),a=t.extractContents();e.remove(),t.insertNode(a)}checkState(){const e=this.api.selection.findParentTag(this.tag);return this.state=!!e,this.state?(this.saveSelection(),setTimeout((()=>{this.showActions(e)}),0)):this.hideActions(),this.state}saveSelection(){this.range=window.getSelection().getRangeAt(0)}restoreSelection(){const e=window.getSelection();e.removeAllRanges(),e.addRange(this.range)}showActions(e){}hideActions(){}}class ze extends je{get shortcut(){return"CMD+B"}static get title(){return m.text("bold")}static get sanitize(){return{strong:!0}}get icon(){return'<i class="bi bi-type-bold"></i>'}get tag(){return"STRONG"}}class Ge extends je{static get title(){return m.text("inlineCode")}static get sanitize(){return{code:!0}}get icon(){return'<i class="bi bi-code"></i>'}get tag(){return"CODE"}}class Ve extends je{constructor(){super(...arguments),this.listener=null}static get title(){return m.text("color")}static get sanitize(){return{"am-inline-color":!0}}get tag(){return"AM-INLINE-COLOR"}get icon(){return'<i class="bi bi-paint-bucket"></i>'}renderActions(){return this.wrapper=i("div",["am-l-grid","am-l-grid--auto"],{}),this.textColorPicker=dt("am-color-field",this.wrapper,{key:$a(),value:"",name:"color",label:m.text("textColor")}),this.backgroundColorPicker=dt("am-color-field",this.wrapper,{key:$a(),value:"",name:"backgroundColor",label:m.text("backgroundColor")}),this.wrapper}showActions(e){const{color:t,backgroundColor:a}=e.style;t&&(this.textColorPicker.mutate(fa(t)),b("change",this.textColorPicker.input)),a&&(this.backgroundColorPicker.mutate(fa(a)),b("change",this.backgroundColorPicker.input)),this.listener=f(this.wrapper,"keyup change",(()=>{e.style.color=this.textColorPicker.query(),e.style.backgroundColor=this.backgroundColorPicker.query()})),this.wrapper.hidden=!1}hideActions(){this.wrapper.hidden=!0}clear(){var e;null===(e=this.listener)||void 0===e||e.remove()}}class qe extends je{constructor(){super(...arguments),this.options=[],this.default="",this.property="",this.listener=null}static get title(){return""}renderActions(){this.wrapper=i("div",[],{});const e=i("div",["am-c-field"],{},this.wrapper,Pt`<label class="am-c-field__label"> ${this.constructor.title} </label>`);return this.select=ft(this.options.reduce(((e,t)=>[...e,{value:t}]),[]),this.default,e),this.wrapper}showActions(e){this.wrapper.hidden=!1;const t=e.style.getPropertyValue(this.property);t&&(this.select.value=t),this.listener=f(this.wrapper,"change",(()=>{e.style.setProperty(this.property,this.select.value)}))}hideActions(){this.wrapper.hidden=!0}clear(){var e;null===(e=this.listener)||void 0===e||e.remove()}}class We extends qe{constructor(){super(...arguments),this.options=["70%","80%","90%","100%","110%","120%","130%","150%","175%","200%","250%","300%","350%","400%","450%","500%"],this.default="100%",this.property="font-size"}static get title(){return m.text("fontSize")}static get sanitize(){return{"am-inline-font-size":!0}}get tag(){return"AM-INLINE-FONT-SIZE"}get icon(){return'<i class="bi bi-fonts"></i>'}}class Je extends je{get shortcut(){return"CMD+I"}static get title(){return m.text("italic")}static get sanitize(){return{i:!0}}get icon(){return'<i class="bi bi-type-italic"></i>'}get tag(){return"I"}}class Ze extends qe{constructor(){super(...arguments),this.options=["normal","100%","105%","110%","115%","120%","125%","130%","135%","140%","145%","150%","155%","160%","165%","170%","175%","180%"],this.default="normal",this.property="line-height"}static get title(){return m.text("lineHeight")}static get sanitize(){return{"am-inline-line-height":!0}}get tag(){return"AM-INLINE-LINE-HEIGHT"}get icon(){return'<i class="bi bi-distribute-vertical"></i>'}}class Ke extends je{constructor(){super(...arguments),this.listener=null}static get title(){return m.text("link")}static get sanitize(){return{a:!0}}get tag(){return"A"}get icon(){return'<i class="bi bi-link-45deg"></i>'}renderActions(){this.wrapper=i("div",[],{});const e=i("div",["am-c-field"],{},this.wrapper,Pt`<label class="am-c-field__label">${Ke.title}</label>`);return this.autocomplete=i("am-autocomplete-url",[],{},e),this.targetToggle=dt("am-toggle-field",this.wrapper,{key:$a(),value:!1,name:"target",label:m.text("openInNewTab")}),this.wrapper}showActions(e){var t;this.wrapper.hidden=!1;const a=this.autocomplete.input,i=this.targetToggle.input;a.value=null!==(t=e.getAttribute("href"))&&void 0!==t?t:"",i.checked="_blank"==e.getAttribute("target"),this.listener=f(this.wrapper,"input AutomadAutocompleteSelect",(()=>{e.href=a.value,i.checked?e.setAttribute("target","_blank"):e.removeAttribute("target")})),setTimeout((()=>{a.value||a.focus()}),0)}hideActions(){this.wrapper.hidden=!0}clear(){var e;null===(e=this.listener)||void 0===e||e.remove()}}class Xe extends je{static get title(){return m.text("strikeThrough")}static get sanitize(){return{s:!0}}get icon(){return'<i class="bi bi-type-strikethrough"></i>'}get tag(){return"S"}}class Ye extends je{static get title(){return m.text("underline")}static get sanitize(){return{u:!0}}get icon(){return'<i class="bi bi-type-underline"></i>'}get tag(){return"U"}}var Qe=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const et=e=>Array.from(e.parentNode.children).indexOf(e),tt=e=>e.closest(rt.TAG_NAME),at=e=>{if(!e)return;const t=document.createRange(),a=window.getSelection();t.setStart(e.childNodes[0],0),t.collapse(!0),a.removeAllRanges(),a.addRange(t),e.focus()};class it{constructor(e){this.component=e,this.editor=e.editor,this.initListeners()}initListeners(){const e=l(":scope > .codex-editor > .ce-toolbar .ce-toolbar__settings-btn",this.component);e.setAttribute("draggable","true"),f(e,"dragstart",(()=>{const e=this.getCurrentBlock();it.CURRENT={block:e,index:et(e.holder)}})),f(e,"drag",(()=>{this.editor.toolbar.close()})),f(this.component,"dragover",(e=>{e.stopImmediatePropagation();const t=e.target,a=t.closest(".ce-block");if(a)return it.TARGET=a,void at(it.TARGET);if(!t.closest(rt.TAG_NAME))return;const i=l(".ce-block");i&&(it.TARGET=i,at(it.TARGET))})),f(this.component,"drop",(e=>Qe(this,void 0,void 0,(function*(){e.stopImmediatePropagation(),yield it.move()}))))}getCurrentBlock(){return this.editor.blocks.getBlockByIndex(this.editor.blocks.getCurrentBlockIndex())}static move(){var e,t;return Qe(this,void 0,void 0,(function*(){if((null===(e=it.CURRENT)||void 0===e?void 0:e.block.holder)==it.TARGET)return;if(null===(t=it.CURRENT)||void 0===t?void 0:t.block.holder.contains(it.TARGET))return;if(!it.TARGET||!it.CURRENT)return;const a=tt(it.CURRENT.block.holder),i=it.CURRENT.index,s=it.TARGET,n=tt(s),o=et(s);a===n?(a.editor.blocks.move(o,i),a.editor.caret.setToBlock(o,"end")):(a.editor.blocks.delete(i),B(it.CURRENT.block,n.editor,o),n.editor.caret.setToBlock(o,"end")),it.CURRENT=null,it.TARGET=null}))}}class st{static get isInline(){return!0}get state(){return this._state}set state(e){this._state=e,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,e)}static get sanitize(){return{"am-inline-align":!0}}constructor({api:e}){this.tag="AM-INLINE-ALIGN",this.api=e,this.button=i("button",[this.api.styles.inlineToolButton],{type:"button"},null)}render(){return this.button.innerHTML=`<i class="bi bi-text-${this.align}"></i>`,this.button}surround(){var e;if(this.saveSelection(),this.state){const e=this.api.selection.findParentTag(this.tag);if(e){this.api.selection.expandToTag(e);const t=window.getSelection().getRangeAt(0),a=t.extractContents();e.remove(),t.insertNode(a)}}else{const t=()=>{const e=this.api.selection.findParentTag("DIV");this.api.selection.expandToTag(e);const t=window.getSelection().getRangeAt(0),a=t.extractContents(),s=i(this.tag,[],{});return s.appendChild(a),t.insertNode(s),s};let a=null!==(e=this.api.selection.findParentTag(this.tag))&&void 0!==e?e:t();a.style.textAlign=this.align,a.style.display="block"}this.restoreSelection()}checkState(){const e=this.api.selection.findParentTag(this.tag);if(e){const t=e.getAttribute("style"),a=new RegExp(this.align,"g");if(null==t?void 0:t.match(a))return void(this.state=!0)}this.state=!1}saveSelection(){const e=window.getSelection();this.selection={start:e.anchorOffset,end:e.focusOffset,div:this.api.selection.findParentTag("DIV")}}restoreSelection(){const e=window.getSelection();e.removeAllRanges();const t=l(`:scope> ${this.tag.toLowerCase()}`,this.selection.div),a=null!=t?t:this.selection.div;e.setBaseAndExtent(a.childNodes[0],this.selection.start,a.childNodes[0],this.selection.end)}}class nt extends st{constructor(){super(...arguments),this.align="left"}static get title(){return m.text("alignLeft")}}class ot extends st{constructor(){super(...arguments),this.align="center"}static get title(){return m.text("alignLeft")}}class lt extends st{constructor(){super(...arguments),this.align="right"}static get title(){return m.text("alignLeft")}}class rt extends x{get isComponentEditor(){return Wt()===n.components}prepareData(e){return this.removeDeleteComponents(e)}removeDeleteComponents(e){var t,a;const i=m.components.map((e=>e.id));return Object.assign(Object.assign({},e),{blocks:null!==(a=null===(t=null==e?void 0:e.blocks)||void 0===t?void 0:t.filter((e=>{var t;return"component"!=e.type||i.includes(null!==(t=e.data.id)&&void 0!==t?t:"")})))&&void 0!==a?a:[]})}init(e,t,a,i=!1){this.style.position="relative",this.classList.add("am-e-contents");const s=this.createEditor.bind(this,t,a,i);try{this.editor=s(e)}catch(t){It().error("Error creating a new EditorJS instance with given data. Creating a fresh instance without data.",e),this.editor=s()}}createEditor(e,t,a,i){return new I.Z(Object.assign({data:this.prepareData(null!=i?i:null),holder:this,minHeight:a?0:50,autofocus:!1,readOnly:a,placeholder:t?"":m.text("editorPlaceholder"),tools:Object.assign(Object.assign(Object.assign({},De(this.isComponentEditor)),X(t)),this.getInlineTools()),tunes:K,inlineToolbar:["alignLeft","alignCenter","alignRight","bold","italic","fontSize","lineHeight","link","codeInline","underline","strikeThrough","color"],i18n:{messages:this.getI18nDictionary()},onReady:()=>{this.onRender()}},e))}getInlineTools(){return{alignLeft:{class:nt},alignCenter:{class:ot},alignRight:{class:lt},bold:{class:ze},italic:{class:Je},link:{class:Ke},codeInline:{class:Ge},underline:{class:Ye},strikeThrough:{class:Xe},color:{class:Ve},fontSize:{class:We},lineHeight:{class:Ze}}}getI18nDictionary(){return{ui:{blockTunes:{toggler:{"Click to tune":m.text("tuneOrMove")}},inlineToolbar:{converter:{"Convert to":m.text("convertTo")}},toolbar:{toolbox:{Add:m.text("add")}}},toolNames:{},tools:{table:{"Add column to left":m.text("tableAddColumnLeft"),"Add column to right":m.text("tableAddColumnRight"),"Delete column":m.text("tableDeleteColumn"),"Add row above":m.text("tableAddRowAbove"),"Add row below":m.text("tableAddRowBelow"),"Delete row":m.text("tableDeleteRow")},embed:{"Enter a caption":m.text("caption")}},blockTunes:{delete:{Delete:m.text("delete"),"Click to delete":m.text("clickToDelete")},moveUp:{"Move up":m.text("moveUp")},moveDown:{"Move down":m.text("moveDown")}}}}onRender(){window.requestIdleCallback((()=>{new it(this)}))}}rt.TAG_NAME="am-editor-js",customElements.define(rt.TAG_NAME,rt);const ct=(e,t,a,s,n=!1)=>{const o=i(rt.TAG_NAME,[],{},e);return o.init(t,a,s,n),o},dt=(e,t,a,s=[],n={},o=!1)=>{const l=i(e,s,n,o?i("am-modal-field",[],{"am-page":ra(),"am-no-click":""},t):t);return l.data=a,l},mt=e=>{const t=t=>i("am-switcher-section",[],{name:t},e);return{settings:t("settings"),text:t("text"),customizations:t("customizations")}},ut=(e,t="",a="",s=m.text("submit"))=>{const n=i(y.TAG_NAME,[],{"am-destroy":""},xa(),Pt`<am-modal-dialog> ${a?`<am-modal-header>${a}</am-modal-header>`:""} <am-modal-body><am-form am-api="${e}" ${t?`am-event="${t}"`:""}></am-form></am-modal-body><am-modal-footer><am-modal-close class=am-e-button> ${m.text("cancel")} </am-modal-close><am-submit class="am-e-button am-e-button--primary" am-form="${e}"> ${s} </am-submit></am-modal-footer></am-modal-dialog>`);return{modal:n,form:l("am-form",n)}},ht=(e,t=m.text("close"),a=!0)=>{const s={};a&&(s["am-destroy"]="");const n=i(y.TAG_NAME,[],s,xa(),Pt`<am-modal-dialog><am-modal-header>${e}</am-modal-header><am-modal-body></am-modal-body><am-modal-footer><am-modal-close class="am-e-button am-e-button--primary"> ${t} </am-modal-close></am-modal-footer></am-modal-dialog>`);return{modal:n,body:l("am-modal-body",n),button:l("am-modal-footer am-modal-close",n)}},pt=(e,t,a="")=>{const s=i(y.TAG_NAME,[],{"am-destroy":""},xa()),n=`imagePickerModal-temp-${$a()}`,o=$a(),r=$a(),c=$a(),d=ra();new u(n,{onChange:t=>{const a=l(`#${r}`),i=l(`#${c}`),o=a.value,d=i.value,m=o&&d&&!t.match(/\:\/\//)?`?${o}x${d}`:"";e(`${t}${m}`),p.delete(n),s.close()}});const h=d?Pt`<am-image-picker am-page="${d}" am-label="${m.text("pageImages")}" am-binding-name="${n}"></am-image-picker>`:"";i("am-modal-dialog",["am-c-modal__dialog--large"],{},s,Pt`<am-modal-header>${t}</am-modal-header><am-modal-body><p>${m.text("linkImage")}</p><span class="am-f-group"><input id="${o}" type="text" class="am-f-input am-f-group__item" value="${a}" placeholder="${m.text("url")}" /><button class="am-e-button am-f-group__item"> ${m.text("ok")} </button></span><hr /><div><p>${m.text("useUploadedImage")}</p><am-upload></am-upload><div class="am-u-flex am-u-flex--gap"><div class="am-u-flex__item-grow"><div class="am-c-field"><label class="am-c-field__label"> ${m.text("resizeWidthTitle")} </label><input type="number" class="am-f-input" id="${r}" /></div></div><div class="am-u-flex__item-grow"><div class="am-c-field am-u-flex__item-grow"><label class="am-c-field__label"> ${m.text("resizeHeightTitle")} </label><input type="number" class="am-f-input" id="${c}" /></div></div></div> ${h} <am-image-picker am-label="${m.text("sharedImages")}" am-binding-name="${n}"></am-image-picker></div></am-modal-body>`),f(l("button",s),"click",(()=>{const t=l(`#${o}`,s);e(t.value),p.delete(n),s.close()})),setTimeout((()=>{s.open()}),0)},gt=(e,t)=>{const a=i(y.TAG_NAME,[],{"am-destroy":""},xa()),s=i("am-modal-dialog",[],{},a,Pt`<am-modal-header>$${t}</am-modal-header>`),n=i("am-modal-body",[],{},s),o=i("am-modal-footer",[],{},s),l=p.get(e),r=i("am-autocomplete-url",[],{},n);i("am-modal-close",["am-e-button"],{},o,m.text("cancel"));const c=i("button",["am-e-button","am-e-button--primary"],{},o,m.text("ok"));f(a,"AutomadModalOpen",(()=>{r.input.value=""}));const d=()=>{l.value=r.input.value,a.close()};f(r,"AutomadAutocompleteSelect",d),f(c,"click",d),setTimeout((()=>{a.open()}),0)},bt=e=>{const t=i(y.TAG_NAME,[],{"am-no-esc":"","am-no-click":"","am-destroy":""},xa());return t.innerHTML=Pt`<am-modal-dialog><span class="am-c-modal__spinner"><span class="am-c-modal__spinner-icon"></span><span class="am-c-modal__spinner-text">${e}</span></span></am-modal-dialog>`,t},ft=(e,t,a=null,s=null,n=null,o="",l=[],r={})=>{const c=i(w.TAG_NAME,l,{},a);return s&&(r.name=s),n&&(r.id=n),c.init(e,t,o,r),c},vt=(e,t,a)=>{const s=i("div",["am-c-field"],{},a,Pt`<div><label class="am-c-field__label">${e}</label></div>`);return s.appendChild(t),{select:t,field:s}};class xt{static get selector(){return this._controls.map((e=>`${e}:not(:scope am-editor-field ${e})`)).join(", ")}static add(e){this._controls.includes(e)||this._controls.push(e)}}xt._controls=["input","textarea","select"];const yt=(e,t,a={})=>{const s=(t,i,s=!0)=>{var n;const o=m.reservedFields[t];return{key:o,label:i,value:e[o],name:`data[${o}]`,placeholder:s&&null!==(n=a[o])&&void 0!==n?n:""}};i("p",[],{},t.customizations,m.text("customization")),ra()&&i("div",["am-c-alert"],{},t.customizations,Pt`<div class="am-c-alert__icon"><i class="bi bi-file-earmark-medical-fill"></i></div><div class="am-c-alert__text am-u-flex am-u-flex--column"><div>${m.text("customizationMerge")}</div><div><am-link am-target="${n.shared}?section=customizations" class="am-e-button am-e-button--primary"> ${m.text("sharedTitle")} </am-link></div></div>`),dt("am-code-field",t.customizations,s("CUSTOM_HTML_HEAD",m.text("customHTMLHead"),!1)),dt("am-code-field",t.customizations,s("CUSTOM_HTML_BODY_END",m.text("customHTMLBodyEnd"),!1)),dt("am-code-field",t.customizations,s("CUSTOM_JS_HEAD",m.text("customJSHead"),!1)),dt("am-code-field",t.customizations,s("CUSTOM_JS_BODY_END",m.text("customJSBodyEnd"),!1)),dt("am-code-field",t.customizations,s("CUSTOM_CSS",m.text("customCSS"),!1)),i("hr",[],{},t.customizations),i("p",[],{},t.customizations,m.text("customOpenGraphInfo"));const o=i("div",["am-l-grid","am-l-grid--auto"],{},t.customizations);dt("am-color-field",o,s("CUSTOM_OPEN_GRAPH_IMAGE_COLOR_TEXT",m.text("customOpenGraphImageColorText"))),dt("am-color-field",o,s("CUSTOM_OPEN_GRAPH_IMAGE_COLOR_BACKGROUND",m.text("customOpenGraphImageColorBackground"))),i("hr",[],{},t.customizations),i("p",[],{},t.customizations,m.text("customConsentInfo")),dt("am-input-field",t.customizations,s("CUSTOM_CONSENT_TEXT",m.text("customConsentText")));const l=i("div",["am-l-grid","am-l-grid--auto"],{style:"--min: 24rem;"},t.customizations);dt("am-input-field",l,s("CUSTOM_CONSENT_ACCEPT",m.text("customConsentAccept"))),dt("am-input-field",l,s("CUSTOM_CONSENT_DECLINE",m.text("customConsentDecline"))),dt("am-input-field",l,s("CUSTOM_CONSENT_REVOKE",m.text("customConsentRevoke"))),dt("am-input-field",l,s("CUSTOM_CONSENT_TOOLTIP",m.text("customConsentTooltip"))),dt("am-color-field",t.customizations,s("CUSTOM_CONSENT_COLOR_TEXT",m.text("customConsentColorText")));const r=i("div",["am-l-grid","am-l-grid--auto"],{style:"--min: 24rem;"},t.customizations);dt("am-color-field",r,s("CUSTOM_CONSENT_COLOR_BACKGROUND",m.text("customConsentColorBackground"))),dt("am-color-field",r,s("CUSTOM_CONSENT_COLOR_BORDER",m.text("customConsentColorBorder"))),dt("am-input-field",t.customizations,s("CUSTOM_CONSENT_PLACEHOLDER_TEXT",m.text("customConsentPlaceholderText")));const c=i("div",["am-l-grid","am-l-grid--auto"],{},t.customizations);dt("am-color-field",c,s("CUSTOM_CONSENT_PLACEHOLDER_COLOR_TEXT",m.text("customConsentPlaceholderColorText"))),dt("am-color-field",c,s("CUSTOM_CONSENT_PLACEHOLDER_COLOR_BACKGROUND",m.text("customConsentPlaceholderColorBackground"))),i("div",["am-u-display-last-none"],{},t.customizations,Pt`<hr /><p>${m.text("customizationTemplate")}</p>`)},wt=e=>ka(e.replace("+","")).replace(/^Color /,"").replace(/^Checkbox /,"").replace(/^Number /,"").replace(/^Select /,""),_t=({section:e,fields:t,tooltips:a,themeOptions:s,labels:n,renderEmptyAlert:o,shared:l})=>{if(0==Object.values(t).length&&o)return void i("am-alert",[],{"am-icon":"slash-circle","am-text":m.text("sectionHasNoFields")},e);const r=$t(!!l);Object.keys(t).forEach((i=>{var o,c;if(Object.values(m.reservedFields).includes(i)||i.startsWith(":"))return;let d="am-textarea-field",u="";for(const[e,t]of Object.entries(r))if(i.startsWith(e)){d=t;break}l&&(u=l[i]),dt(d,e,{key:i,value:t[i],tooltip:a[i],options:null!==(o=s[i])&&void 0!==o?o:null,label:null!==(c=n[i])&&void 0!==c?c:null,name:`data[${i}]`,placeholder:u},[],{},["am-editor-field","am-markdown-field"].includes(d))}))},kt=e=>{const t={};return r(xt.selector,e).forEach((e=>{const a=e.getAttribute("type"),i=e.getAttribute("name"),s=["checkbox","radio"].includes(a);if((!s||e.checked)&&i){let a=!(!s||"1"!==e.value)||e.value;"string"==typeof a&&(a=a.trim()),t[i]=a}})),t},$t=e=>({"+":"am-editor-field",checkbox:e?"am-toggle-select-field":"am-toggle-field",color:"am-color-field",date:"am-date-field",image:"am-image-field",number:"am-number-field",select:"am-select-field",text:"am-markdown-field",url:"am-url-field"}),Ct=e=>{const t={settings:{},text:{},customizations:{}};return Object.keys(e).forEach((a=>{switch(a.match(/^(\+|text|color|.)/)[1]){case"+":case"text":t.text[a]=e[a];break;case"color":t.customizations[a]=e[a];break;default:t.settings[a]=e[a]}})),t},At=(e,t)=>{e&&(r('[type="radio"], [type="input"]').forEach((e=>{e.checked=!1})),Object.keys(e).forEach((a=>{const i=l(`[name="${a}"]`,t);if(i){const t=i.getAttribute("type");["checkbox","radio"].includes(t)?i.checked=!0:i.value=e[a]}})))},Tt=e=>{f(e,"keydown",(t=>{if(9===t.keyCode){t.preventDefault(),t.stopPropagation();const a=e.selectionStart,i=e.selectionEnd,s=e.value;e.value=`${s.substring(0,a)}\t${s.substring(i)}`,e.selectionStart=a+1,e.selectionEnd=a+1}}))};var Lt=a(7856),Et=a.n(Lt);const St={CUSTOM_ELEMENT_HANDLING:{tagNameCheck:/^(am|sortable)-/,attributeNameCheck:/^am-/,allowCustomizedBuiltInElements:!0},ADD_ATTR:["am-bind","am-bind-to","am-publication-state","am-tooltip","am-tooltip-options","am-toggle","target"],ADD_URI_SAFE_ATTR:["am-tooltip-options"],SANITIZE_DOM:!1},Pt=(e,...t)=>{let a=e.raw,i="";return t.forEach(((e,t)=>{let s=a[t];s.endsWith("$")&&(e=Mt(e),s=s.slice(0,-1)),i+=s+e})),i+=a[a.length-1],Et().sanitize(i,St)},Mt=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#8203;/&#8203;"};return e.toString().replace(/[&<>"'\/]/g,(e=>t[e]))},It=()=>new Ot;class Ot{error(...e){console.error(...e)}log(){}request(){}response(){}bindingInfo(){}bindingSuccess(){}}var Rt=a(8588),Ht=a.n(Rt);const Bt={close:!1,gravity:"top",position:"right",stopOnFocus:!0,escapeMarkup:!1,destination:null},Nt=({message:e,icon:t,duration:a,className:s})=>{const n=l("html.am-ui > body, body .am-ui"),o=i("div",["am-c-notify__node"],{});i("i",["am-c-notify__icon","bi",`bi-${t}`],{},o),i("span",["am-c-notify__text"],{},o).innerHTML=e,i("span",["am-c-notify__close"],{},o);const r=Ht()(Object.assign(Bt,{node:o,duration:a,className:null!=s?s:"am-c-notify",selector:n,onClick:function(){r.hideToast()}}));r.showToast()},Ft=e=>{Nt({message:e,duration:-1,icon:"x-circle",className:"am-c-notify am-c-notify--danger"})},Ut=(e,t=3e3)=>{Nt({message:e,duration:t,icon:"check-circle"})};var Dt=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const jt=()=>l('meta[name="csrf"]').content||"",zt=e=>{const t={};return Object.keys(e).forEach((a=>{((e,t,a)=>{const i=t.split(/(\[[^\[\]]*\])/g).filter((e=>e)).map((e=>e.replace(/[\[\]]/g,"")));let s=e;i.forEach(((e,t)=>{const n=e||Object.keys(s).length||0;i.length===t+1?"string"==typeof a?a.length&&(s[n]=a):s[n]=a:(s[n]=s[n]||{},s=s[n])}))})(t,a,e[a])})),t},Gt=(e,t=null,a=!0,i=null,n=!1)=>Dt(void 0,void 0,void 0,(function*(){if(!a)for(;!qt.idle;)yield Vt();qt.add();let o,l=(null==t?void 0:t.formData)||t;l&&(l=zt(l));const r=new AbortController,c=f(window,"AutomadBeforeUpdateView",(()=>{n&&r.abort(),c.remove()})),d=s(e);try{const e=yield((e,t=null,a=null)=>Dt(void 0,void 0,void 0,(function*(){const i={method:"GET",signal:a};if(null!==t){const e=new FormData;e.append("__csrf__",jt()),e.append("__json__",JSON.stringify(t)),i.method="POST",i.body=e,i.headers={}}return fetch(e,i)})))(`${m.apiURL}/${d}`,l,r.signal);o=yield e.json(),"function"==typeof i&&i.apply(this,[o])}catch(e){e.message.includes("aborted")||Ft(`${m.text("fetchingDataError")} (${d})`),o={code:500,time:0}}c.remove(),qt.remove();const u=It();return u.request(e,l),u.response(e,o),void 0!==o.exception&&(Ft(o.exception.message),u.error(e,o.exception)),o})),Vt=()=>Dt(void 0,void 0,void 0,(function*(){return new Promise(((e,t)=>{const a=()=>{qt.idle&&(e(!0),window.removeEventListener(qt.EVENT_NAME,a))};window.addEventListener(qt.EVENT_NAME,a),a()}))}));class qt{static get idle(){return this.count<=0}static add(){l("am-spinner")||i("am-spinner",[],{},document.body),this.count++,b(this.EVENT_NAME)}static remove(){const e=l("am-spinner");setTimeout((()=>{this.count--,this.idle&&e&&e.remove(),b(this.EVENT_NAME)}),0)}}qt.EVENT_NAME="AutomadPendingRequestsChange",qt.count=0;const Wt=()=>{const e=new RegExp(`^${m.dashboardURL}/`,"i");return window.location.pathname.replace(e,"")},Jt=()=>{const e=Wt();if((t=e)&&t in n)return e;var t;window.location.href=`${m.dashboardURL}/${n.home}`},Zt=e=>`am-${e}`;class Kt{static getInstance(){return Kt.instance||(Kt.instance=new Kt,It().log("Created new State instance")),Kt.instance}get root(){return this._root}get data(){return this._data}constructor(){this._root=null,this._data=null}bootstrap(e,t){this._root=e,this._data=t}update(e){this._data=Object.assign({},this._data,e),b("AutomadAppStateChange")}get(e){return this._data[e]}set(e,t){this._data[e]=t}}var Xt;Kt.instance=null,function(e){e.light="light",e.lowContrast="low-contrast",e.dark="dark"}(Xt||(Xt={}));const Yt="am-dashboard-theme",Qt=()=>{const e=localStorage.getItem(Yt);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Xt.dark:void 0)},ea=e=>{const t=l(".am-ui");Object.values(Xt).forEach((a=>{t.classList.toggle(a,e===a)}))};var ta=a(7545),aa=a.n(ta);const ia=()=>{r(".ct").forEach((e=>{e.remove()}));const e=l(".am-ui"),t=new(aa());f(e,"mouseover",(e=>{const a=e.path||e.composedPath&&e.composedPath();let s=null;if(a.forEach((e=>{try{e.matches("[am-tooltip]")&&(s=e)}catch(e){}})),s){const e=Object.assign({placement:"bottom",delay:150,hidingDelay:100},(e=>{const t=e.getAttribute("am-tooltip-options")||"",a={};t&&t.split(",").forEach((e=>{const[t,i]=e.split(":");isNaN(parseInt(i))?a[t.trim()]=i.trim():a[t.trim()]=parseInt(i)}));return a})(s));let a=s.getAttribute("am-tooltip");a&&t.show(s,i("span",[],{},null,a),e)}else t.hide()}))};class sa{static get size(){return{undo:sa.undoStack.length,redo:sa.redoStack.length}}static undoHandler(){const e=sa.undoStack.pop();e&&(e.undo(),sa.redoStack.push(e))}static redoHandler(){const e=sa.redoStack.pop();e&&(e.redo(),sa.undoStack.push(e))}static addListeners(){wa("z",sa.undoHandler),wa("y",sa.redoHandler)}static new(){sa.undoStack=new na,sa.redoStack=new na,b("AutomadUndoStackUpdate")}static addEntry(e){sa.redoStack=new na,sa.undoStack.push(e)}static attach(e){setTimeout((()=>{new oa(e)}),0)}}class na{get length(){return this._stack.length}constructor(){this._stack=[]}push(e){this._stack.push(e),this._stack=this._stack.slice(-na.LIMIT),b("AutomadUndoStackUpdate")}pop(){const e=this._stack.pop();return b("AutomadUndoStackUpdate"),e}}na.LIMIT=50;class oa{constructor(e){this.ignoreEventFeedback=!1;const t=()=>{this.ignoreEventFeedback=!0,b("change",e.getValueProvider())},a=o((()=>{if(this.ignoreEventFeedback)return void(this.ignoreEventFeedback=!1);const a=e.query(),i=this.undoState;JSON.stringify(a)!==JSON.stringify(i)&&(sa.addEntry({undo:()=>{e.mutate(i),t()},redo:()=>{e.mutate(a),t()}}),this.undoState=a)}),500);this.undoState=e.query(),f(e.getValueProvider(),"change input",a.bind(this))}}const la=e=>{const t=new URL(window.location.href);t.searchParams.delete(e),window.history.replaceState(null,null,t)},ra=()=>ca("url")||ca("context"),ca=e=>new URLSearchParams(window.location.search).get(e)||"",da=(e,t=250,a=250)=>{if(!e)return"";const i=encodeURIComponent(ma(e));return`${m.baseIndex}/_resize?url=${i}&w=${t}&h=${a}`},ma=e=>{if(!e)return"";if(e.match(/^\//))return`${m.baseURL}${e}`;if(e.match(/:\/\//g))return e;const t=ra();if(t){const a=m.pages[t];if(a)return`${m.baseURL}/pages${a.path}${e}`}return""},ua=e=>{if(e)return e.match(/^\//)?`${m.baseIndex}${e}`:e},ha=(e,t)=>{const a=new URL(window.location.href);a.searchParams.set(e,t),window.history.replaceState(null,null,a)};var pa=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const ga=e=>`${ka((e=>e.split("/").reverse()[0])(e).replace(".php",""))} &mdash; ${va(va(va(e))).replace(/^\//,"")}`,ba=e=>pa(void 0,void 0,void 0,(function*(){let t=i("am-modal",[],{"am-destroy":"","am-no-click":"","am-no-esc":"",style:"z-index: 2000;"},xa());return t.innerHTML=Pt`<am-modal-dialog><am-modal-body>${e}</am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("cancel")} </am-modal-close><am-modal-close am-confirm class="am-e-button am-e-button--primary"> ${m.text("ok")} </am-modal-close></am-modal-footer></am-modal-dialog>`,setTimeout((()=>{t.open()}),0),new Promise(((e,a)=>{f(t,"click",(a=>{let i=!1;t.close(),t=null;try{const e=a.target;i=e.matches("[am-confirm]")||null!=e.closest("[am-confirm]")}catch(e){}e(i)}),"am-modal-close")}))})),fa=e=>{const t=e.match(/(\d+)/g);let a=parseInt(t[0]).toString(16),i=parseInt(t[1]).toString(16),s=parseInt(t[2]).toString(16);return a=1===a.length?"0"+a:a,i=1===i.length?"0"+i:i,s=1===s.length?"0"+s:s,"#"+a+i+s},va=e=>e.replace(/\/[^\/]+$/,""),xa=()=>l("body .am-ui, .am-ui body"),ya=()=>-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"⌘":"Ctrl",wa=(e,t)=>f(window,"keydown",(a=>{if(a.ctrlKey||a.metaKey){const i=String.fromCharCode(a.which).toLowerCase();if(e==i)return a.preventDefault(),void t.apply(a.target,[a])}})),_a=e=>{document.title=`${e} — Automad`},ka=e=>e.replace(/\//g," / ").replace(/(?!^)([A-Z]+)/g," $1").replace(/_/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),$a=()=>{const e=(0,O.kP)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",2),t=(0,O.kP)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",30);return`${e()}${t()}`};class Ca extends x{connectedCallback(){this.classList.add("am-l-dashboard__section","am-l-dashboard__section--breadcrumbs"),this.addListener(f(window,"scroll",(()=>{this.classList.toggle("am-l-dashboard__section--breadcrumbs-hidden",window.scrollY>40)})))}}var Aa=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-breadcrumbs-page",class extends Ca{constructor(){super();const e=i("div",["am-c-breadcrumbs"],{},i("div",["am-l-dashboard__content"],{},this));i("am-link",["am-c-breadcrumbs__item"],{"am-target":n.home},e,m.text("dashboardTitle")),this.init(e)}connectedCallback(){super.connectedCallback()}init(e){return Aa(this,void 0,void 0,(function*(){const t=ra(),a=yield Gt("PageController::breadcrumbs",{url:t});this.render(e,a.data)}))}render(e,t){t&&t.forEach(((a,s)=>{const o=`${n.page}?url=${encodeURIComponent(a.url)}`,l=i("am-link",["am-c-breadcrumbs__item"],{"am-target":o},e);s==t.length-1?l.innerHTML=Pt`<span am-bind="title"> $${a.title} </span>`:l.textContent=a.title}))}});customElements.define("am-breadcrumbs-route",class extends Ca{static get observedAttributes(){return["am-target","am-text","am-icon"]}connectedCallback(){super.connectedCallback();const e=this.hasAttribute("am-narrow");this.innerHTML=Pt`<div class="am-l-dashboard__content ${e?"am-l-dashboard__content--narrow":""}"><div class="am-c-breadcrumbs"><am-link class="am-c-breadcrumbs__item" am-target="${n.home}"><span>${m.text("dashboardTitle")}</span></am-link><am-link class="am-c-breadcrumbs__item" am-target="${this.elementAttributes["am-target"]}"><span>${this.elementAttributes["am-text"]}</span></am-link></div></div>`}});class Ta extends x{constructor(){super(...arguments),this.linkLabel=!0}get isSpellchecked(){return this.hasAttribute("spellcheck")}get input(){return l("[name]",this)}set data({key:e,value:t,name:a,id:i,tooltip:s,options:n,label:o,placeholder:l,isInPage:r}){i=null!=i?i:(e=>{if(e)return`am-field__${e.replace(/\s+/g,"_")}`})(e),t=void 0===t?"":t,s=Mt(s||""),o=o||wt(e),l=l||"",r=null!=r&&r,this._data={name:a,id:i,label:o,value:t,tooltip:s,options:n,placeholder:l,isInPage:r},this.create()}connectedCallback(){this.classList.add("am-c-field")}getValueProvider(){return this.input}mutate(e){this.input.value=e}query(){return this.input.value}create(){this.createLabel(),this.createInput(),this.applyAttributes(),sa.attach(this)}createLabel(){const{label:e,tooltip:t,isInPage:a}=this._data;if(a)return;if(!e)return;const s={};this.linkLabel&&(s.for=this._data.id);const n=i("div",[],{},this),o=i("label",["am-c-field__label"],s,n);i("span",[],{},o).textContent=e,t&&(i("i",["bi","bi-lightbulb"],{},o),o.setAttribute("am-tooltip",t))}applyAttributes(){r("input, textarea",this).forEach((e=>{this.hasAttribute("required")&&(e.setAttribute("pattern",".*\\S.*"),e.setAttribute("required",""),this.removeAttribute("required"),this.hasAttribute("am-error")||this.setAttribute("am-error",m.text("requiredField"))),e.setAttribute("spellcheck",this.isSpellchecked?"true":"false"),["am-bind","am-bind-to","am-toggle","disabled","pattern"].forEach((t=>{this.hasAttribute(t)&&(e.setAttribute(t,this.getAttribute(t)),this.removeAttribute(t))}))}))}}var La=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};xt.add("am-code-field"),customElements.define("am-code-field",class extends Ta{constructor(){super(...arguments),this.value="",this.getLanguageFromName=e=>{const t=e.replace(/\W+/g,"");return t.match(/html/i)?"html":t.match(/js/i)?"javascript":"css"}}createInput(){const{name:e,id:t,value:a,placeholder:s}=this._data;this.setAttribute("name",e),this.value=a,this.editor=new P({element:i("div",["am-f-codeflask"],{id:t},this),code:a,language:this.getLanguageFromName(e),onChange:e=>this.value=e,placeholder:s})}getValueProvider(){return this}mutate(e){return La(this,void 0,void 0,(function*(){this.editor.codeFlask.updateCode(e),this.value=e}))}query(){return this.value}});customElements.define("am-color-field",class extends Ta{createInput(){const{name:e,id:t,value:a}=this._data,s=i("div",["am-f-input-combo"],{},this),n=i("input",["am-f-input","am-u-text-mono"],{id:t,name:e,value:a,type:"text"},s),o=i("input",[],{type:"color",value:a},i("span",["am-f-input-combo__color"],{},s));f(o,"change",(()=>{n.value=o.value,b("change",n)})),f(n,"keyup change",(()=>{o.value=n.value}))}});customElements.define("am-date-field",class extends Ta{createInput(){var e,t;const{name:a,id:s,value:n,placeholder:o}=this._data,l=null!==(t=null===(e=n.match(/[\d-]+T\d\d:\d\d/))||void 0===e?void 0:e[0])&&void 0!==t?t:"";i("input",["am-f-input"],{id:s,name:a,value:l,type:"datetime-local",placeholder:o},this)}});var Ea=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};xt.add("am-editor-field"),customElements.define("am-editor-field",class extends Ta{constructor(){super(...arguments),this.linkLabel=!1}createInput(){const{name:e,id:t,value:a}=this._data;this.setAttribute("name",e),this.value=a;const s=i("div",[],{id:t},this);i("am-alert",["am-u-display-small"],{"am-icon":"window","am-text":"editorSmallDisplayAlert"},s),this.editorJS=ct(s,{blocks:this.value.blocks},{onChange:e=>Ea(this,void 0,void 0,(function*(){const{blocks:t}=yield e.saver.save(),a=t.map((e=>(e.tunes=H(e.tunes),e)));JSON.stringify(this.value.blocks)!==JSON.stringify(a)&&(this.value={blocks:[...a],automadVersion:m.version},b("input",this))}))},!1),this.attachToolbarPositionObservers(),this.attachPopupHeightObservers()}getValueProvider(){return this}mutate(e){var t;return Ea(this,void 0,void 0,(function*(){this.value=e,(null===(t=e.blocks)||void 0===t?void 0:t.length)>0?yield this.editorJS.editor.render(e):this.editorJS.editor.clear(),this.editorJS.onRender()}))}query(){return this.value}attachPopupHeightObservers(){this.addListener(v(this,(e=>{const t=e.target;if(!t.classList.contains("codex-editor"))return;if(!t.classList.contains("codex-editor--toolbox-opened"))return void this.style.removeProperty("min-height");const a=l(".ce-popover--opened",t);setTimeout((()=>{const e=a.getBoundingClientRect(),t=this.getBoundingClientRect(),i=e.top-t.top+e.height;this.style.minHeight=`${i}px`}),0)}))),this.addListener(v(this,(e=>{const t=e.target;t.classList.contains("ce-popover")&&t.closest(".ce-settings")&&(t.classList.contains("ce-popover--opened")?setTimeout((()=>{const e=t.getBoundingClientRect(),a=this.getBoundingClientRect(),i=e.top-a.top+e.height;this.style.minHeight=`${i}px`}),0):this.style.removeProperty("min-height"))})))}attachToolbarPositionObservers(){this.addListener(f(this,"keydown",(e=>{if("/"!=e.key)return;const t=e.target.closest(".ce-block");J.updateToolbarPosition(t)}))),this.addListener(f(this,"mouseover",o((e=>{e.stopPropagation();const t=e.target.closest(".ce-block");J.updateToolbarPosition(t)}),10),".ce-block"))}});class Sa extends Ta{get inputType(){return"text"}createInput(){const{name:e,id:t,value:a,placeholder:s}=this._data;i("input",["am-f-input"],{id:t,name:e,value:a,type:this.inputType,placeholder:s},this)}}customElements.define("am-input-field",Sa);customElements.define("am-email-field",class extends Sa{get inputType(){return"email"}});const Pa={group:"feedFields",direction:"vertical",animation:200,dataIdAttr:"data-field",draggable:".am-c-feed-field-select__item",handle:".am-c-feed-field-select__item",ghostClass:"am-c-feed-field-select__item--ghost",chosenClass:"am-c-feed-field-select__item--chosen",dragClass:"am-c-feed-field-select__item--drag"};customElements.define("am-feed-field-select-field",class extends Ta{connectedCallback(){super.connectedCallback(),setTimeout((()=>{this.init(),f(this.input,"change AutomadChangeByBinding",this.init.bind(this))}),0)}createLabel(){}createInput(){const{name:e,value:t}=this._data;i("input",[],{type:"hidden",name:e,value:t},this)}init(){let e=l("section",this);e&&e.remove(),e=i("section",[],{},this);const t=JSON.parse(this.input.value||"[]"),a=m.contentFields.filter((e=>!t.includes(e))),s=this.createSortable(t,m.text("systemRssFeedFieldsInfoUsed"),[],e);i("div",["am-c-feed-field-select__arrows"],{},e,'<i class="bi bi-arrow-down-up"></i>');const n=this.createSortable(a,m.text("systemRssFeedFieldsInfoUnused"),["am-c-feed-field-select--muted"],e),o=new se.ZP(s,Object.assign({},Pa,{onSort:e=>{this.input.value=JSON.stringify(o.toArray()),b("input",this.input)}}));new se.ZP(n,Pa)}createSortable(e,t,a,s){const n=i("div",[].concat(a,["am-c-feed-field-select"]),{"data-text":t},s);return e.forEach((e=>{i("div",["am-c-feed-field-select__item"],{[Pa.dataIdAttr]:e},n).innerHTML=Pt`<span>${wt(e)}</span><i class="bi bi-grip-vertical"></i>`})),n}});customElements.define("am-image-field",class extends Ta{createInput(){const{name:e,id:t,value:a,placeholder:s}=this._data,n=i("span",["am-c-image-select"],{},this),o=i("input",["am-f-input"],{id:t,name:e,type:"text",placeholder:s,value:a}),l=this.createPreview(n,o,t),r=i("div",["am-c-image-select__combo"],{},n);r.appendChild(o);const c=this.createModalButton(r),d=()=>{pt((e=>{o.value=e,b("change",o)}),this._data.label,o.value)};f(c,"click",d.bind(this)),f(l,"click",d.bind(this))}createPreview(e,t,a){const s=`imageSelectComponent_preview_${a}`;return new u(s,{input:t,modifier:e=>da(e.split("?")[0])}),i(re.TAG_NAME,["am-c-image-select__preview"],{"am-bind":s,"am-bind-to":"src"},e)}createModalButton(e){return i("button",["am-e-button"],{},e,Pt`<i class="bi bi-folder"></i><span>${m.text("browseFiles")}</span>`)}});customElements.define("am-main-theme-field",class extends Ta{createInput(){var e;const{name:t,id:a,value:s,label:o}=this._data,r=Object.values(m.themes),c=null!==(e=m.themes[s])&&void 0!==e?e:Object.values(m.themes)[0],d=[];r.forEach((e=>{d.push({text:e.name,value:e.path})}));const u=$a(),h=i(y.TAG_NAME,[],{id:u},this,Pt`<am-modal-dialog><am-modal-header>${o}</am-modal-header><am-modal-body><p>${m.text("themePurgeUnusedInfo")}</p></am-modal-body></am-modal-dialog>`);ft(d,c.path,l("am-modal-body",h),t,a,'<i class="bi bi-box-seam"></i>'),i("am-modal-toggle",["am-f-input","am-u-flex","am-u-flex--align-center","am-u-flex--gap","am-u-cursor-pointer"],{"am-modal":`#${u}`},this,`<i class="bi bi-box-seam"></i>${c.name}`);const p=i("div",["am-u-flex","am-u-flex--column"],{},this);i("am-icon-text",[],{"am-icon":"file-earmark-text","am-text":m.text("themeReadme")},i("a",[],{href:c.readme,target:"_blank"},p)),i("am-icon-text",[],{"am-icon":"cloud-download","am-text":m.text("moreThemes")},i("am-link",["am-u-text-link"],{"am-target":n.packages},p))}});var Ma=a(471),Ia=a(9582),Oa=a.n(Ia);const Ra=(e,t,a)=>{const s=i("button",["toastui-editor-toolbar-icons",e],{});return f(s,"click",a),{el:s,name:t,tooltip:t,onUpdated({disabled:e}){e?s.setAttribute("disabled",""):s.removeAttribute("disabled")}}},Ha={image(e,t){const{origin:a,entering:i}=t,s=a();return i&&(s.attributes={src:ma(e.destination)}),s},link(e,t){const{origin:a,entering:i}=t,s=a();return i&&(s.attributes={href:ua(e.destination),target:"_blank"}),s}};xt.add("am-markdown-field"),customElements.define("am-markdown-field",class extends Ta{constructor(){super(...arguments),this.linkLabel=!1}createInput(){const{name:e,id:t,value:a,placeholder:s}=this._data,n=i("div",["am-c-md-editor","am-e-contents"],{id:t},this);this.setAttribute("name",e),this.value=a;const o=`markdownComponents_link_${t}`,c=Ra("image",m.text("insertImage"),(()=>{pt((e=>{e&&this.editor.insertText(`\r\n![](${e})`)}),m.text("insertImage"))})),d=Ra("link",m.text("insertLink"),(()=>{gt(o,"insertLink")}));Ma.ZP.setLanguage("en-US",{Write:m.text("write"),Preview:m.text("preview"),Headings:m.text("headings"),Heading:m.text("heading"),Paragraph:m.text("paragraph"),Strike:m.text("strikeThrough"),Bold:m.text("bold"),Italic:m.text("italic"),Code:m.text("inlineCode"),"Insert CodeBlock":m.text("insertCodeBlock"),Blockquote:m.text("blockquote"),"Unordered list":m.text("unorderedList"),"Ordered list":m.text("orderedList"),Line:m.text("insertHorizontalLine"),"Insert table":m.text("insertTable"),Indent:m.text("indent"),Outdent:m.text("outdent")}),this.editor=new Ma.ZP({el:n,initialValue:a,autofocus:!1,usageStatistics:!1,height:"auto",hideModeSwitch:!0,initialEditType:"markdown",previewStyle:"tab",placeholder:s,previewHighlight:!0,toolbarItems:[["heading","bold","italic","strike","code","quote"],["ul","ol","indent","outdent"],["table",c,d,"hr","codeblock"]],customHTMLRenderer:Ha,events:{change:()=>{this.value=this.editor.getMarkdown(),b("input",this)},focus:()=>{n.classList.add("am-c-md-editor--focus")},blur:()=>{n.classList.remove("am-c-md-editor--focus")}},plugins:[[Oa(),{highlighter:A()}]]}),new u(o,{onChange:e=>{e&&this.editor.insertText(`[${this.editor.getSelectedText()||e}](${e})`)}});const h=l(".toastui-editor-tabs",this),p=i("div",["tab-item"],{},h),g=r("div",h);p.textContent=m.text("vertical"),f(h,"click",(e=>{const t=e.target;let a=0;g.forEach(((e,i)=>{e.isSameNode(t)&&(a=i),e.classList.toggle("active",e.isSameNode(t))})),this.editor.changePreviewStyle(2===a?"vertical":"tab"),t.click()}),"div")}getValueProvider(){return this}query(){return this.value}mutate(e){this.editor.setMarkdown(e)}});customElements.define("am-number-field",class extends Ta{createInput(){const{name:e,id:t,value:a}=this._data;i("input",["am-f-input"],{type:"number",id:t,name:e,value:a},this)}});customElements.define("am-number-unit-field",class extends Ta{constructor(){super(...arguments),this.linkLabel=!1}createInput(){const{name:e,id:t,value:a}=this._data;i("am-number-unit-input",[],{id:t,name:e,value:a},this)}});var Ba=a(8634),Na=a.n(Ba);customElements.define("am-page-tags-field",class extends Ta{createInput(){const{name:e,id:t,value:a}=this._data,s=i("textarea",["am-f-input"],{name:e,id:t},this);s.innerHTML=a;const n=new(Na())(s,{whitelist:m.tags,originalInputValueFormat:e=>e.map((e=>e.value)).join(", "),dropdown:{enabled:0,maxItems:8,position:"text",closeOnSelect:!0}});n.on("change",(e=>{this.closest("am-page-data-form").onChange()})),n.on("change",o((()=>{const e=Kt.getInstance(),t=s.value.split(",").map((e=>e.trim()));e.set("tags",[...new Set([...e.get("tags"),...t])].sort())}),500))}});const Fa=(e,t="")=>[t,e.split("/").reverse()[0].replace(/\.php$/g,"")].filter((e=>e.length)).join("/"),Ua=(e,t,a,s="*",n="")=>{e.forEach((e=>{const o=Fa(e,n),l=i("option",[],{value:o},t);l.textContent=((e,t="")=>{const a=e.split("/").reverse()[0].replace(/\.php$/g,"");return ka([t,a].join("/"))})(o,s),a==o&&l.setAttribute("selected","")}))};customElements.define("am-page-template-field",class extends x{set data({fields:e,template:t,themeKey:a,readme:i}){this.render({fields:e,template:t,themeKey:a,readme:i})}connectedCallback(){this.classList.add("am-c-field")}render({fields:e,template:t,themeKey:a,readme:s}){const{buttonLabel:n,buttonIcon:o,selectedTemplate:r}=(({fields:e,template:t,themeKey:a})=>{const i=m.themes;let s=i[m.mainTheme];void 0===s&&(s=Object.values(i)[0]);let n=!1,o=s,l=Fa(t),r=ka(l),c="code-slash";return void 0!==i[e[a]]&&(o=i[e[a]],r=ka(`${o.name}/${l}`),l=Fa(t,o.path)),n=-1!==(null==o?void 0:o.templates.indexOf(t)),n||(c="question-circle"),{buttonLabel:r,buttonIcon:c,selectedTemplate:l}})({fields:e,template:t,themeKey:a,readme:s});if(this.innerHTML=Pt`<label class="am-c-field__label">${m.text("pageTemplate")}</label><am-modal-toggle am-modal="#am-page-template-modal" class="am-f-input am-u-flex am-u-flex--align-center am-u-flex--between am-u-cursor-pointer"><am-icon-text am-icon="${o}" am-text="${n}"></am-icon-text><i class="bi bi-pen"></i></am-modal-toggle>`,s){const e=i("a",[],{href:s,target:"_blank"},this);i("am-icon-text",[],{"am-icon":"file-earmark-text","am-text":m.text("themeReadme")},e)}i("am-modal",[],{id:"am-page-template-modal"},this,Pt`<am-modal-dialog><am-modal-header> ${m.text("pageTemplate")} </am-modal-header><am-modal-body></am-modal-body></am-modal-dialog>`);const c=l("am-modal-body",this);Object.keys(m.themes).length>0?c.innerHTML=Pt`<p>${m.text("pageTemplatePurgeUnusedInfo")}</p><am-page-template-select value="${r}"></am-page-template-select>`:c.textContent=m.text("noThemesFound")}}),customElements.define("am-page-template-select",class extends x{connectedCallback(){var e;this.classList.add("am-f-select");const t=this.getAttribute("value"),a=m.themes[m.mainTheme]||m.themes[Object.keys(m.themes)[0]],s=m.themes,n=i("span",[],{},this),o=i("select",[],{name:"theme_template"},this),l=i("optgroup",[],{label:"*"},o);Ua(null!==(e=null==a?void 0:a.templates)&&void 0!==e?e:[],l,t),Object.values(s).forEach((e=>{const a=i("optgroup",[],{label:e.name},o);Ua(e.templates,a,t,e.name,e.path)}));const r=()=>{n.textContent=o.options[o.selectedIndex].text};f(o,"change",r),setTimeout(r,0)}});customElements.define("am-password-field",class extends Sa{get inputType(){return"password"}});customElements.define("am-platform-select-field",class extends Ta{get input(){return l("[name]:checked",this)}createInput(){const e=i("div",["am-f-platform-select"],{},this);this.addOption(e,"github","GitHub"),this.addOption(e,"gitlab","GitLab")}addOption(e,t,a){const{name:s,id:n,value:o}=this._data,l=i("span",["am-f-platform-select__option"],{},e);i("input",[],Object.assign({id:`${n}-${t}`,name:s,value:t,type:"radio"},o==t?{checked:""}:{}),l);const r=i("label",[],{for:`${n}-${t}`},l);i("span",["am-f-platform-select__icon"],{},r,Pt`<i class="bi bi-${t}"></i>`),i("span",[],{},r,a),i("i",["am-f-platform-select__active-icon","bi","bi-check-circle"],{},r)}});customElements.define("am-select-field",class extends Ta{createInput(){const{name:e,id:t,value:a,options:i,placeholder:s}=this._data,n=Object.keys(i).map((e=>({value:e,text:i[e]}))),o=ft([{text:ra()?`${m.text("useSharedDefault")} ${s?`(${i[String(s)]})`:""}`:"&mdash;",value:""},...n],`${a}`,this,e,t,'<i class="bi bi-ui-radios"></i> ',a?[]:["am-u-text-muted"]);f(o,"change",(()=>{o.classList.toggle("am-u-text-muted",!this.input.value)}))}});var Da=a(1202);customElements.define("am-syntax-theme-select-field",class extends Ta{createInput(){const{name:e,id:t,value:a}=this._data,s=!!ra(),n=a||(s?"":"automad.light-dark");let o=[{text:"&mdash;",value:"none"},...Da];s&&(o=[{text:m.text("useSharedDefault"),value:""},...o]),this.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),ft(o,n,this,e,t),i("div",[],{},this,Pt`<a href="https://automadcms.github.io/automad-prism-themes/" target="_blank"><am-icon-text am-icon="palette2" am-text="${m.text("visitSyntaxGallery")}"></am-icon-text></a>`)}});customElements.define("am-textarea-field",class extends Ta{createInput(){const{name:e,id:t,value:a,placeholder:s}=this._data,n=i("textarea",["am-f-input"],{id:t,name:e,placeholder:s,wrap:"off"},this);n.textContent=a,this.initAutoResize(n),Tt(n)}initAutoResize(e){const t=o((()=>{this.fitContent(e)}),50);f(e,"keyup focus focusout drop paste",t),this.addListener(f(window,"resize",t)),t()}fitContent(e){const t=i("div",["am-f-input"],{style:`position: absolute; height: auto; width: ${e.offsetWidth}; white-space: pre-line; opacity: 0;`},this);t.textContent=e.value+"-",e.style.height=`${t.offsetHeight+15}px`,t.remove()}});customElements.define("am-title-field",class extends Ta{createInput(){const{name:e,id:t,value:a}=this._data;i("input",["am-f-input","am-f-input--title"],{id:t,name:e,value:a,type:"text"},this)}});class ja extends Ta{constructor(){super(...arguments),this.classes=["am-f-toggle","am-f-toggle--button"]}createInput(){const{name:e,id:t,value:a,label:s}=this._data;i("div",this.classes,{},this,Pt`<input type="checkbox" name="${e}" id="${t}" value="1" ${a?"checked":""} /><label for="${t}"><i class="bi"></i><span>${s}</span></label>`)}query(){return this.input.checked}mutate(e){this.input.checked=e}}customElements.define("am-toggle-field",ja);customElements.define("am-toggle-large-field",class extends ja{constructor(){super(...arguments),this.classes=["am-f-toggle","am-f-toggle--large"]}createLabel(){}});customElements.define("am-toggle-select-field",class extends Ta{createInput(){const{name:e,id:t,value:a,label:s,placeholder:n}=this._data,o=i("div",["am-f-toggle","am-f-toggle--select"],{},this,Pt`<label for="${t}"><i class="bi"></i><span>${s}</span></label><select name="${e}" id="${t}"><option value="">${m.text("useSharedDefault")}</option><option value="0">${m.text("disable")}</option><option value="1">${m.text("enable")}</option></select>`),r=()=>{o.classList.toggle("am-f-toggle--off","0"===c.value),o.classList.toggle("am-f-toggle--on","1"===c.value)};o.classList.toggle("am-f-toggle--default-on",""!=n);const c=l("select",o);c.value=a||"",this.addListener(f(c,"change",r.bind(this))),r()}});customElements.define("am-url-field",class extends Ta{createInput(){const{name:e,id:t,value:a,placeholder:s,label:n}=this._data,o=i("div",["am-f-input-combo"],{},this),l=`urlComponent_${t}`,r=i("input",["am-f-input"],{id:t,name:e,value:a,type:"text",placeholder:s},o),c=i("span",["am-f-input-combo__button"],this.hasAttribute("disabled")?{disabled:""}:{},o,'<i class="bi bi-link"></i>');new u(l,{input:r}),f(c,"click",(()=>{gt(l,n)}))}});customElements.define("am-file-card",class extends x{set data(e){this.render(e)}connectedCallback(){this.classList.add("am-c-card")}render(e){let t="",a="";e.width&&e.height&&(t=Pt`<div class="am-c-icon-text"><i class="bi bi-aspect-ratio"></i><span> ${e.width} ✗ ${e.height} </span></div>`),e.caption&&m.fileTypesImage.includes(e.extension)&&(a=Pt`<am-icon-text am-icon="chat-square-text" am-text="$${e.caption}"></am-icon-text>`),this.innerHTML=Pt`${this.renderPreview(e)} <am-file-info class="am-u-flex__item-grow am-u-flex am-u-flex--column am-u-flex--gap am-u-cursor-pointer"><div class="am-c-card__title" am-tooltip="$${e.basename}"> $${e.basename} </div><div class="am-c-card__body"> ${a} ${t} <am-icon-text am-icon="calendar2-date" am-text="${e.mtime||"-"}"></am-icon-text><am-icon-text am-icon="hdd" am-text="${e.size||"-"}"></am-icon-text></div></am-file-info><div class="am-c-card__footer"> ${this.renderDropdown(e)} <am-checkbox name="selected[$${e.basename}]"></am-checkbox></div>`,r("am-file-info",this).forEach((t=>{t.data=e}))}renderPreview(e){if(e.thumbnail)return Pt`<am-file-robot am-file="${m.baseURL}${e.url}?${Date.now()}" class="am-c-card__teaser am-u-cursor-pointer" am-tooltip="$${e.basename}"><img src="${e.thumbnail}" /></am-file-robot>`;const t=m.fileTypesVideo.includes(e.extension)?"film":`filetype-${e.extension}`;return Pt`<am-file-info class="am-c-card__teaser am-u-cursor-pointer" am-tooltip="$${e.basename}"><i class="bi bi-file-earmark bi-${t}"></i></am-file-info>`}renderDropdown(e){let t="";return e.thumbnail&&(t=Pt`<am-file-robot am-file="${m.baseURL}${e.url}" class="am-c-dropdown__link"><am-icon-text am-icon="pencil" am-text="${m.text("editImage")}"></am-icon-text></am-file-robot>`),Pt`<am-dropdown><i class="bi bi-three-dots"></i><div class="am-c-dropdown__items"> ${t} <am-file-info class="am-c-dropdown__link"><am-icon-text am-icon="card-heading" am-text="${m.text("editFileInfo")}"></am-icon-text></am-file-info><am-copy class="am-c-dropdown__link" value="${e.url}"><am-icon-text am-icon="clipboard-plus" am-text="${m.text("copyUrlClipboard")}"></am-icon-text></am-copy><a href="${m.baseURL}${e.url}" class="am-c-dropdown__link" target="_blank"><am-icon-text am-icon="box-arrow-down" am-text="${m.text("downloadFile")}"></am-icon-text></a></div></am-dropdown>`}});customElements.define("am-file-count",class extends x{connectedCallback(){const e=i("span",[],{},this),t=()=>{const t=r("am-file-card").length;e.textContent=`${t}`};this.addListener(f(window,"AutomadFileCollectionRender",t.bind(this))),setTimeout(t.bind(this),0)}});customElements.define("am-file-info",class extends x{connectedCallback(){f(this,"click",(()=>{if(!this.data)return;const e=this.createModal(this.data);setTimeout((()=>{e.open()}),0)}))}createModal(e){const t=i("am-modal",[],{"am-destroy":""},document.body);return t.innerHTML=this.renderModal(e),t}renderModal(e){let t="";return m.fileTypesImage.includes(e.extension)&&(t=dt("am-textarea-field",null,{key:"caption",value:e.caption,name:"caption",label:m.text("imageCaption")},[]).outerHTML),Pt`<am-form am-api="FileController::editInfo" am-event="AutomadFilesChangeOnServer" class="am-c-modal__dialog"><am-modal-header>${m.text("editFileInfo")}</am-modal-header><input type="hidden" name="old-name" value="${e.basename}" /><am-modal-body> ${dt("am-input-field",null,{key:"new-name",value:e.basename,name:"new-name",label:m.text("fileName")},[]).outerHTML} ${t} </am-modal-body><am-modal-footer><a href="${m.baseURL}${e.url}" class="am-e-button" target="_blank"> ${m.text("downloadFile")} </a><am-submit class="am-e-button am-e-button--primary"> ${m.text("save")} </am-submit></am-modal-footer></am-form>`}});var za=a(8858);const Ga={palette:{"txt-primary":"hsl(var(--am-clr-text-paragraph))","txt-primary-invert":"hsl(var(--am-clr-background))","txt-secondary":"hsl(var(--am-clr-text-paragraph))","txt-secondary-invert":"hsl(var(--am-clr-background))","txt-placeholder":"hsl(var(--am-clr-text-muted))","accent-primary":"hsl(var(--am-clr-text-link))","accent-primary-hover":"hsl(var(--am-clr-text-link-hover))","accent-primary-active":"hsl(var(--am-clr-text-active))","accent-primary-disabled":"hsl(var(--am-clr-background-faded))","bg-primary":"hsl(var(--am-clr-background))","bg-primary-hover":"hsl(var(--am-clr-background))","bg-primary-active":"hsl(var(--am-clr-background))","bg-primary-0-5-opacity":"hsl(var(--am-clr-background))","bg-secondary":"hsl(var(--am-clr-background))","icons-primary":"hsl(var(--am-clr-text-primary))","icons-primary-opacity-0-6":"hsl(var(--am-clr-text-muted))","icons-secondary":"hsl(var(--am-clr-text-paragraph))","btn-primary-text":"hsl(var(--am-clr-text-primary))","btn-disabled-text":"hsl(var(--am-clr-text-muted))","link-primary":"hsl(var(--am-clr-text-link))","link-hover":"hsl(var(--am-clr-text-link-hover))","link-active":"hsl(var(--am-clr-text-active))","borders-primary":"hsl(var(--am-clr-border))","borders-secondary":"hsl(var(--am-clr-border))","borders-strong":"hsl(var(--am-clr-border))","borders-invert":"hsl(var(--am-clr-border))","border-active-bottom":"hsl(var(--am-clr-text))","active-secondary":"hsl(var(--am-clr-background-primary))","active-secondary-hover":"hsl(var(--am-clr-background-primary-hover))","active-secondary-active":"hsl(var(--am-clr-background-primary-hover))","light-shadow":"0 4px 20px rgba(0,0,0,0.1)",tag:"hsl(var(--am-clr-text-paragraph))",error:"hsl(var(--am-clr-text-paragraph))",success:"hsl(var(--am-clr-text-paragraph))",warning:"hsl(var(--am-clr-text-paragraph))",info:"hsl(var(--am-clr-text-paragraph))"},typography:{fontFamily:"InterVariable"}};var Va=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-file-robot",class extends x{static get observedAttributes(){return["am-file"]}connectedCallback(){f(this,"click",(()=>{const e=this.createModal();setTimeout((()=>{e.open()}),0)}))}createModal(){const e=i("am-modal",[],{"am-destroy":"","am-no-esc":""},document.body),t=i("am-form",["am-c-modal__dialog","am-c-modal__dialog--fullscreen"],{"am-api":"ImageController::save"},e);return this.initFileRobot(t,e),e}initFileRobot(e,t){const a={source:this.elementAttributes["am-file"],savingPixelRatio:1,previewPixelRatio:window.devicePixelRatio,useBackendTranslations:!1,theme:Ga,translations:m.state.text,onSave:(t,a)=>Va(this,void 0,void 0,(function*(){e.additionalData=t,yield e.submit(),b("AutomadFilesChangeOnServer"),s()})),onClose:(e,t)=>Va(this,void 0,void 0,(function*(){t&&!(yield ba(m.text("discardImageChanges")))||s()}))},i=new za.Z(e,a),s=()=>{i.terminate(),t.close()};i.render()}});var qa=a(247);customElements.define("am-upload",class extends x{constructor(){super(...arguments),this.dropzone=null,this.form=null,this.modal=null,this.queue=null}get options(){const e=m.allowedFileTypes.map((e=>`.${e}`)).join(", ");return{clickable:[this.form],paramName:"file",hiddenInputContainer:this,uploadMultiple:!1,parallelUploads:2,maxFilesize:512,acceptedFiles:e,previewsContainer:this.queue,addRemoveLinks:!0,dictInvalidFileType:m.text("unsupportedFileTypeError"),dictCancelUpload:m.text("cancel"),dictUploadCanceled:m.text("uploadCancelled"),dictCancelUploadConfirmation:m.text("confirmCancelUpload"),chunking:!0,forceChunking:!0,parallelChunkUploads:!1,thumbnailWidth:150,thumbnailHeight:150}}connectedCallback(){this.classList.add("am-c-upload"),this.form=this.createForm(),this.modal=i("am-modal",[],{"am-no-click":"","am-no-esc":""},this.form),this.queue=i("am-modal-dialog",["am-c-upload__previews"],{},this.modal),this.dropzone=new qa.Z(this.form,this.options),this.dropzone.on("success",this.onSuccess.bind(this)),this.dropzone.on("error",this.onError.bind(this)),this.dropzone.on("addedfiles",this.onAddedFiles.bind(this)),this.dropzone.on("queuecomplete",this.onQueueComplete.bind(this))}onError(e,t){this.dropzone.removeFile(e),"string"!=typeof t&&t.error&&(t=t.error),Ft(Pt`${t}`)}onSuccess(e){var t;this.dropzone.removeFile(e),Ut(Pt`${m.text("uploadedSuccess")}:<br />$${e.name}`),b("AutomadFilesChangeOnServer"),null===(t=l("am-file-collection-list-form"))||void 0===t||t.refresh()}onAddedFiles(){this.modal.open()}onQueueComplete(){this.modal.close()}createForm(){const e=i("form",["am-c-upload__dropzone"],{action:`${m.apiURL}/${s("FileCollectionController::upload")}`},this);e.innerHTML=Pt`<span>${m.text("dropFilesOrClick")}</span>`;const t=ra();return t&&i("input",[],{type:"hidden",name:"url",value:t},e),i("input",[],{type:"hidden",name:"__csrf__",value:jt()},e),e}});class Wa extends x{static get observedAttributes(){return["am-form"]}get relatedForms(){let e=r(`[am-api="${this.elementAttributes["am-form"]}"]`);return 0==e.length&&(e=c("[am-api]",this)),e}connectedCallback(){this.setAttribute("tabindex","0"),f(this,"click",(()=>{if(this.hasAttribute("disabled"))return!1;this.relatedForms.forEach((e=>{e.submit()}))}).bind(this))}}customElements.define("am-submit",Wa);class Ja extends Wa{connectedCallback(){this.setAttribute("tabindex","0"),this.toggleAttribute("disabled",!0),this.relatedForms.forEach((e=>{const t=()=>{this.toggleAttribute("disabled",0==r(":checked",e).length)};this.addListener(f(window,"AutomadFileCollectionRender",t)),this.addListener(f(e,"change",t))})),f(this,"click",this.submit.bind(this))}}var Za=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-file-collection-delete",class extends Ja{submit(){return Za(this,void 0,void 0,(function*(){this.hasAttribute("disabled")||(yield ba(m.text("confirmDeleteSelectedFiles")))&&this.relatedForms.forEach((e=>{e.additionalData={action:"delete"},e.submit()}))}))}});var Ka=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-file-collection-move",class extends Ja{submit(){return Ka(this,void 0,void 0,(function*(){if(this.hasAttribute("disabled"))return;const{modal:e,body:t,button:a}=ht(m.text("selectTargetMovePage"),m.text("ok"));t.innerHTML=Pt`<label class="am-c-nav__item"><input type="radio" name="targetPage" value="" tabindex="0" /><span class="am-c-nav__link"><am-icon-text am-icon="folder2" am-text="${m.text("sharedTitle")}"></am-icon-text></span></label><hr /><am-page-select-tree></am-page-select-tree>`;let i=ra();f(t,"change",(()=>{const{targetPage:e}=kt(t);i=e})),f(a,"click",(()=>{this.relatedForms.forEach((e=>{e.additionalData={action:"move",target:i},e.submit()}))})),e.setAttribute("am-no-focus",""),e.open(),setTimeout((()=>{var e;null===(e=l(":focus",t))||void 0===e||e.blur()}),0)}))}});class Xa extends x{set message(e){this.classList.toggle("am-c-alert",e.length>0),this.classList.toggle("am-c-alert--danger",e.length>0),this.innerHTML=Pt`${e}`}}Xa.TAG_NAME="am-form-error",customElements.define(Xa.TAG_NAME,Xa);var Ya=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Qa=o((e=>Ya(void 0,void 0,void 0,(function*(){e()}))),750);class ei extends x{get deduplicationSettings(){return{getFormData:null,enabled:!1}}get parallel(){return!0}get api(){return this.getAttribute("am-api")}get auto(){return this.hasAttribute("am-auto")}get confirm(){return this.getAttribute("am-confirm")}get watch(){return this.hasAttribute("am-watch")}get initSelf(){return!1}get submitButtons(){const e=r(`am-submit[am-form="${this.api}"]`),t=r("am-submit:not([am-form])",this);return e.concat(t)}get formData(){const e=Object.assign({},this.additionalData,kt(this)),t=ra();return t&&(e.url=t),e}get parentModal(){return this.closest("am-modal")||null}constructor(){super(),this.additionalData={},this.lastSubmittedFormData="",this.init()}init(){this.initSelf&&this.submit(!0),this.hasAttribute("am-focus")&&setTimeout((()=>{l("input").focus()}),0),this.hasAttribute("am-enter")&&f(this,"keydown",(e=>{13==e.which&&(e.preventDefault(),this.submit())}),".am-f-input"),this.disableSubmitButtons(),this.watchChanges()}disableSubmitButtons(){this.watch&&setTimeout((()=>{this.submitButtons.forEach((e=>{e.setAttribute("disabled",""),e.blur()}))}),0)}isDuplicateSubmission(){if(!this.deduplicationSettings.enabled)return!1;const e=this.deduplicationSettings.getFormData(this);return Object.keys(e).length&&JSON.stringify(e)===this.lastSubmittedFormData?(It().log("Form data has not changed"),!0):(this.lastSubmittedFormData=JSON.stringify(e),!1)}submit(e=!1){return Ya(this,void 0,void 0,(function*(){if(!e&&this.confirm){if(!(yield ba(this.confirm)))return}if(this.isDuplicateSubmission())return;const t=m.addNavigationLock();this.submitButtons.forEach((e=>{e.classList.contains("am-e-button")&&e.classList.add("am-e-button--loading")})),r('input:not([type="hidden"], textarea, [contenteditable])',this).forEach((e=>{e.classList.add("am-validate")})),this.verifyRequired()?(r(".am-validate",this).forEach((e=>{e.classList.remove("am-validate")})),yield Gt(this.api,this,this.parallel,(e=>Ya(this,void 0,void 0,(function*(){yield this.processResponse(e),this.hasAttribute("am-event")&&b(this.getAttribute("am-event")),m.removeNavigationLock(t)}))))):m.removeNavigationLock(t),this.submitButtons.forEach((e=>{e.classList.remove("am-e-button--loading")}))}))}processResponse(e){var t;return Ya(this,void 0,void 0,(function*(){const{redirect:a,reload:i,error:s,success:n,debug:o}=e;void 0!==a&&m.root.setView(a),i&&m.reload(),setTimeout((()=>{const e=l(Xa.TAG_NAME,this);e&&(e.message=null!=s?s:""),s&&(e||Ft(s),It().error(s))}),0),n&&Ut(n),o&&o instanceof Array&&o.forEach((e=>{It().log(this.api,e)})),s||(this.disableSubmitButtons(),null===(t=this.parentModal)||void 0===t||t.close())}))}onChange(){if(m.isReady){if(this.auto){Qa((()=>Ya(this,void 0,void 0,(function*(){const e=m.addNavigationLock();yield this.submit(),m.removeNavigationLock(e)}))));const e=m.addNavigationLock();setTimeout((()=>{m.removeNavigationLock(e)}),760)}this.watch&&this.submitButtons.forEach((e=>{e.removeAttribute("disabled")}))}}watchChanges(){f(this,"change keydown cut paste drop input",this.onChange.bind(this),xt.selector)}verifyRequired(){const e=r("[required]",this),t=[];return e.forEach((e=>{e.value.trim()||t.push(e)})),!t.length||(t[0].focus(),!1)}}customElements.define("am-form",ei);var ti=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-file-collection-list-form",class extends ei{get initSelf(){return!0}init(){super.init(),this.classList.add("am-l-grid"),this.setAttribute("style","--min: 11.5rem; --aspect: 1.25;"),this.addListener(f(window,"AutomadAppStateChange AutomadFilesChangeOnServer",this.refresh.bind(this)))}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return ti(this,void 0,void 0,(function*(){yield t.processResponse.call(this,e),void 0!==e.data&&(this.innerHTML="",void 0!==e.data.files&&(e.data.files.forEach((e=>{i("am-file-card",[],{},this).data=e})),b("AutomadFileCollectionRender")))}))}refresh(){r('[type="checkbox"]',this).forEach((e=>{e.checked=!1})),this.submit(!0)}});var ai=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const ii=e=>{e.hasAttribute("disabled")&&e.removeAttribute("disabled"),e.classList.remove("am-u-text-muted")},si=e=>{e.setAttribute("disabled",""),e.classList.add("am-u-text-muted")};class ni extends x{connectedCallback(){this.stateBinding=new u("publicationState",{initial:this.initialState()}),this.classList.add("am-c-navbar__group");const e=i("am-form",["am-u-display-small-none"],{"am-watch":"","am-confirm":m.text("discardDraftConfirm"),"am-api":this.controllers().discard,"am-event":"AutomadContentPublished"},this);this.discardButton=i("am-submit",["am-c-navbar__item","am-c-navbar__item--glyph","am-u-text-muted"],{disabled:"","am-tooltip":m.text("discardDraftTooltip")},e,"↺");const t=i("am-form",[],{"am-watch":"","am-api":this.controllers().publish,"am-event":"AutomadContentPublished"},this);this.publishButton=i("am-submit",["am-e-button"],{disabled:""},t,m.text("publish")),this.tooltip=new(aa()),this.addListener(f(this.publishButton,"mouseover",(()=>{this.tooltip&&this.lastPublished&&this.tooltip.show(this.publishButton,i("span",[],{},null,`${m.text("lastPublished")}:<br>${g(this.lastPublished)}`),{})}))),this.addListener(f(this.publishButton,"mouseleave",(()=>{this.tooltip.hide()}))),this.addListener(f(window,"AutomadContentSaved AutomadContentPublished",this.update.bind(this))),setTimeout((()=>{this.update()}),0)}update(){return ai(this,void 0,void 0,(function*(){const{data:e}=yield Gt(this.controllers().state,this.additionalRequestData());if(this.lastPublished=null==e?void 0:e.lastPublished,this.stateBinding.value=(null==e?void 0:e.isPublished)?"published":"draft",null==e?void 0:e.isPublished)return si(this.discardButton),void si(this.publishButton);(null==e?void 0:e.lastPublished)&&ii(this.discardButton),ii(this.publishButton)}))}}ni.TAG_NAME="am-publish-form";customElements.define("am-component-publish-form",class extends ni{additionalRequestData(){return{}}initialState(){return m.componentsPublicationState}controllers(){return{state:"ComponentController::getPublicationState",discard:"ComponentController::discardDraft",publish:"ComponentController::publish"}}});customElements.define("am-page-publish-form",class extends ni{additionalRequestData(){return{url:ra()}}initialState(){return m.pages[ra()].publicationState}controllers(){return{state:"PageController::getPublicationState",discard:"PageController::discardDraft",publish:"PageController::publish"}}});customElements.define("am-shared-publish-form",class extends ni{additionalRequestData(){return{}}initialState(){return m.sharedPublicationState}controllers(){return{state:"SharedController::getPublicationState",discard:"SharedController::discardDraft",publish:"SharedController::publish"}}});var oi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-config-file-form",class extends ei{get parallel(){return!1}get initSelf(){return!0}init(){super.init(),this.addListener(f(window,"AutomadAppStateChange",(()=>{this.innerHTML="",this.submit()})))}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});var a;return oi(this,void 0,void 0,(function*(){t.processResponse.call(this,e),(null===(a=e.data)||void 0===a?void 0:a.content)&&this.render(e.data.content)}))}render(e){this.innerHTML=Pt`<am-modal-toggle class="am-e-button am-e-button--primary" am-modal="#am-config-file-form-modal"> ${m.text("systemConfigFileEdit")} </am-modal-toggle><am-modal id="am-config-file-form-modal"><am-modal-dialog class="am-c-modal__dialog--large"><div class="am-c-modal__header am-u-flex am-u-flex--align-center am-u-flex--gap"><span>${m.text("systemConfigFileEdit")}</span><span class="am-u-flex am-u-flex--align-center am-u-flex--gap"><am-modal-close class="am-e-button"> ${m.text("cancel")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("save")} </am-submit></span></div><textarea class="am-c-modal__code" name="content"></textarea></am-modal-dialog></am-modal>`;const t=l("textarea",this);t.value=e,Tt(t),sa.attach({getValueProvider:()=>t,query:()=>t.value,mutate:e=>{t.value=e}})}});customElements.define("am-delete-users-form",class extends ei{init(){const e=()=>{this.innerHTML=m.system.users.reduce(((e,t)=>{const a=m.user.name==t.name?Pt`<span class="am-u-text-muted"> ${m.text("systemUsersYou")} </span>`:Pt`<am-checkbox name="delete[${t.name}]"></am-checkbox>`;return Pt`${e} <span class="am-c-card"><span class="am-c-card__body am-c-card__body--large"><span class="am-u-flex am-u-flex--gap am-u-flex--align-center"><span class="am-u-flex__item-grow"> ${t.name} (${t.email}) </span> ${a} </span></span></span>`}),"")};super.init(),this.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),this.addListener(f(window,"AutomadAppStateChange",e.bind(this))),e()}});var li=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class ri extends x{connectedCallback(){let e="";"/"==ra()&&(e=`am-confirm="${m.text("pageHistoryRestoreHomeConfirm")}"`);const t=i(y.TAG_NAME,[],{id:ri.MODAL_ID},this,Pt`<am-form class="am-c-modal__dialog" am-api="HistoryController::restore" ${e}><am-modal-header> ${m.text("pageHistory")} </am-modal-header><am-modal-body class="am-u-flex--gap-large"></am-modal-body><am-modal-footer><am-modal-close class="am-e-button">${m.text("cancel")}</am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("pageHistoryRestore")} </am-submit></am-modal-footer></am-form>`),a=l("am-modal-body",t);this.addListener(f(t,"AutomadModalOpen",(()=>{this.init(a)})))}init(e){return li(this,void 0,void 0,(function*(){e.innerHTML="<am-spinner></am-spinner>";const{data:t}=yield Gt("HistoryController::log",{url:ra()});if(!t)return void(e.innerHTML=m.text("pageHistoryNoRevision"));e.innerHTML=`<span>${"/"==ra()?m.text("pageHistoryRestoreHomeText"):m.text("pageHistoryRestoreText")}</span>`;const a=t.reduce(((e,t)=>{const a=g(t.time);return e.push({text:a,value:t.hash}),e}),[]);ft(a,a[0].value,e,"revision")}))}}ri.MODAL_ID="am-history-modal",customElements.define("am-history-modal-form",ri);var ci=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-inpage-form",class extends ei{get api(){return"InPageController::edit"}get parallel(){return!1}get watch(){return!0}get initSelf(){return!0}init(){var e,t,a,i;const s=new URLSearchParams(document.location.search);this.field=s.get("field"),this.page=s.get("page"),this.context=s.get("context"),this.additionalData={field:this.field,context:this.context,init:!0},this.setAttribute("am-api",this.api),_a(`${null!==(t=null===(e=m.pages[this.context])||void 0===e?void 0:e.title)&&void 0!==t?t:"404"} (${this.field})`),this.bindings={inPageReturnUrlBinding:new u("inPageReturnUrl",{initial:this.page,modifier:e=>`${m.baseIndex}${e}`}),inPageTitleBinding:new u("inPageTitle",{initial:null!==(i=null===(a=m.pages[this.context])||void 0===a?void 0:a.title)&&void 0!==i?i:"404"}),inPageContextUrlBinding:new u("inPageContextUrl",{initial:this.context,modifier:e=>`${m.baseIndex}${e}`}),inPageFieldBinding:new u("inPageField",{initial:this.field,modifier:e=>wt(e)})},p.connectElements(m.root),f(window,"keydown",(e=>{27===e.keyCode&&(l("[am-modal-open]")||(e.preventDefault(),e.stopImmediatePropagation(),window.location.href=this.bindings.inPageReturnUrlBinding.value))})),f(document,"click",(e=>{var t,a;e.target.contains(this)&&(null===(t=l("[contenteditable], input, textarea",this))||void 0===t||t.focus(),null===(a=l(rt.TAG_NAME))||void 0===a||a.editor.caret.setToLastBlock("end"))})),super.init()}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return ci(this,void 0,void 0,(function*(){this.additionalData.init=!1,yield t.processResponse.call(this,e),200===e.code&&e.data&&(e.data.saved&&(window.location.href=this.bindings.inPageReturnUrlBinding.value),void 0!==e.data.value&&this.render(e))}))}render(e){const t=$t(!0);let a="am-textarea-field";for(const[e,i]of Object.entries(t))if(this.field.startsWith(e)){a=i;break}this.innerHTML="",dt(a,this,{key:this.field,value:e.data.value,name:"value",isInPage:!0}),this.additionalData.dataFetchTime=e.time}});var di=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const mi=["sendmail","smtp"];customElements.define("am-mail-config-form",class extends ei{constructor(){super(...arguments),this._config=null}get watch(){return!0}get config(){return this._config}set config(e){this._config=e,this.render()}connectedCallback(){this.config=m.system.mail,this.addListener(f(window,"AutomadAppStateChange",(()=>{this.config=m.system.mail})))}render(){const e=this.config;this.innerHTML="",this.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap-large");const t=i("div",[],{},this),a=ft(mi.map((e=>({value:e}))),e.transport,t,"transport");dt("am-email-field",t,{key:"from",name:"from",value:e.from,label:`${m.text("emailFrom")} (From)`,placeholder:e.fromDefault});const s=i("div",["am-c-card"],{},this),n=()=>{s.classList.toggle("am-u-display-none","smtp"!==a.value)},o=i("div",["am-c-card__form"],{},s),l=i("div",["am-l-grid","am-l-grid--auto"],{},o);dt("am-input-field",l,{key:"smtpServer",name:"smtpServer",value:e.smtpServer,label:"SMTP Server"},[],{pattern:"^\\S*$"}),dt("am-input-field",l,{key:"smtpPort",name:"smtpPort",value:e.smtpPort,label:"SMTP Port"},[],{pattern:"^\\d{0,5}$"}),dt("am-input-field",o,{key:"smtpUsername",name:"smtpUsername",value:e.smtpUsername,label:`SMTP ${m.text("username")}`},[],{pattern:"^\\S*$"}),dt("am-input-field",o,{key:"smtpPassword",name:"smtpPassword",value:"",label:`SMTP ${m.text("password")}`,placeholder:m.system.mail.smtpPasswordIsSet?m.text("systemMailSmtpPasswordPlaceholder"):""}),n(),this.addListener(f(a,"change",n));const r=i("div",["am-u-flex","am-u-flex--gap"],{},this);i("am-submit",["am-e-button","am-e-button--primary"],{disabled:"true"},r,m.text("save"));const c=i("button",["am-e-button","am-e-button--danger"],{},r,m.text("reset"));this.addListener(f(c,"click",(()=>di(this,void 0,void 0,(function*(){(yield ba(m.text("systemMailReset")))&&Gt("MailConfigController::reset",{},!0,(()=>{b("AutomadAppStateRequireUpdate"),sa.new()}))})))))}});var ui=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-page-data-form",class extends ei{get deduplicationSettings(){return{getFormData:e=>{const t=kt(e);return t.dataFetchTime=null,t},enabled:!0}}get parallel(){return!1}get auto(){return!0}get initSelf(){return!0}init(){this.sections=mt(this),super.init(),this.addListener(f(window,"AutomadContentPublished",(()=>{this.bindings&&(this.bindings.pageDataFetchTimeBinding.value=Math.ceil((new Date).getTime()/1e3))})))}mainSettings({section:e,url:t,fields:a,template:s,readme:n}){const o=(t,i,s="",n={},o=e)=>{const l={key:i,value:a[i],name:`data[${i}]`,label:s};return dt(t,o,l,[],n)},l=i("div",["am-u-flex","am-u-flex--column","am-u-flex--gap"],{},e),r=o("am-title-field",m.reservedFields.TITLE,"",{required:""},l);new u("title",{input:r.input,modifier:e=>(_a(e),e)}),i("a",[],{href:`${m.baseIndex}${t}`},l).innerHTML=Pt`<span class="am-c-icon-text"><i class="bi bi-link"></i><span>${m.baseIndex}${t}</span></span>`,o("am-toggle-large-field",m.reservedFields.PRIVATE,m.text("keepPagePrivate"));i("am-page-template-field",[],{},e).data={fields:a,template:s,themeKey:m.reservedFields.THEME,readme:n},o("am-syntax-theme-select-field",m.reservedFields.SYNTAX_THEME,wt(m.reservedFields.SYNTAX_THEME)),o("am-toggle-field",m.reservedFields.HIDDEN,m.text("hidePage")),o("am-date-field",m.reservedFields.DATE,m.text("date")),"/"!=t&&dt("am-input-field",e,{key:m.reservedFields.SLUG,value:a[m.reservedFields.SLUG],name:`data[${m.reservedFields.SLUG}]`,label:m.text("pageSlug")},[],{"am-bind":"pageSlug","am-bind-to":"value"}),o("am-url-field",m.reservedFields.URL,m.text("redirectPage")),o("am-page-tags-field",m.reservedFields.TAGS,m.text("pageTags")),o("am-input-field",m.reservedFields.META_TITLE,m.text("metaTitle")),o("am-textarea-field",m.reservedFields.META_DESCRIPTION,m.text("metaDescription")),o("am-image-field",m.reservedFields.OPEN_GRAPH_IMAGE,m.text("openGraphImage"))}pageNotFound(){this.innerHTML=Pt`<am-alert am-icon="x-circle" am-text="${m.text("pageNotFoundError")} ⟶ ${ra()}"></am-alert>`}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});var a;return ui(this,void 0,void 0,(function*(){if(yield t.processResponse.call(this,e),404===e.code)return this.pageNotFound(),void It().error("Page not found");if(200===e.code&&(b("AutomadContentSaved"),this.bindings&&(this.bindings.pageDataFetchTimeBinding.value=e.time),e.data)){if(this.bindings||(this.bindings=(e=>{const t=new u("pageDataFetchTime",{initial:e.time});return{slugBinding:new u("pageSlug",{initial:e.data.fields[m.reservedFields.SLUG]}),pageDataFetchTimeBinding:t}})(e)),e.data.updateUI)return this.bindings.slugBinding.value=null!==(a=e.data.slug)&&void 0!==a?a:"",void(yield m.updateState());this.render(e)}}))}render(e){var t,a,s;const{url:n,fields:o,shared:l,template:r,readme:c}=e.data;if(!o)return;i("input",[],{type:"hidden","am-bind":"pageDataFetchTime","am-bind-to":"value",name:"dataFetchTime"},this);const d=m.reservedFields.THEME,u=m.themes;_a(o.title);let h=null;h=o[d]?u[o[d]]:u[l[d]];const p=null!==(t=null==h?void 0:h.labels)&&void 0!==t?t:{},g=null!==(a=null==h?void 0:h.tooltips)&&void 0!==a?a:{},b=null!==(s=null==h?void 0:h.options)&&void 0!==s?s:{},f=Ct(o);this.mainSettings({section:this.sections.settings,url:n,fields:o,template:r,readme:c}),yt(o,this.sections,l),Object.keys(this.sections).forEach((e=>{_t({section:this.sections[e],fields:f[e],labels:p,tooltips:g,themeOptions:b,renderEmptyAlert:"customizations"!=e,shared:l})}))}});var hi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-reset-password-form",class extends ei{get states(){return{success:this.renderSuccess,setPassword:this.renderSetPassword,requestToken:this.renderRequestToken}}get initSelf(){return!0}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return hi(this,void 0,void 0,(function*(){if(t.processResponse.call(this,e),!e.data)return;const a=e.data;a.state&&Object.keys(this.states).includes(a.state)&&this.states[a.state].apply(this,[a])}))}renderRequestToken(e){this.innerHTML=Pt`<h2>${m.text("resetPassword")}</h2><am-form-error></am-form-error><div class="am-c-card"><div class="am-c-card__body am-c-card__body--large"> ${m.text("passwordResetEnterNameOrEmail")} </div><div class="am-c-card__form"><input type="text" class="am-f-input" name="name-or-email" value="$${ca("username")}" placeholder="${m.text("usernameOrEmail")}" /><div class="am-c-card__form-buttons"><am-link class="am-e-button" am-target="${n.login}"> ${m.text("cancel")} </am-link><am-submit class="am-e-button am-e-button--primary"> ${m.text("submit")} </am-submit></div></div></div>`}renderSetPassword(e){this.innerHTML=Pt`<h2>${m.text("resetPassword")}</h2><am-form-error></am-form-error><div class="am-c-card"><div class="am-c-card__body am-c-card__body--large"> ${m.text("passwordResetEnterNewPassword")} </div><div class="am-c-card__form"><input type="text" class="am-f-input" name="token" autocomplete="reset-token" placeholder="${m.text("passwordResetToken")}" am-tooltip="${m.text("passwordResetToken")}" am-tooltip-options="placement: top" required /><input type="password" class="am-f-input" name="password1" autocomplete="new-password-1" placeholder="${m.text("password")}" am-tooltip="${m.text("password")}" am-tooltip-options="placement: top" required /><input type="password" class="am-f-input" name="password2" autocomplete="new-password-2" placeholder="${m.text("repeatPassword")}" am-tooltip="${m.text("repeatPassword")}" am-tooltip-options="placement: top" required /><input type="hidden" name="username" value="${e.username}" /><div class="am-c-card__form-buttons"><am-link class="am-e-button" am-target="${n.login}"> ${m.text("cancel")} </am-link><am-submit class="am-e-button am-e-button--primary"> ${m.text("passwordResetSave")} </am-submit></div></div></div>`}renderSuccess(e){this.innerHTML=Pt`<h2>${m.text("resetPassword")}</h2><div class="am-c-card"><div class="am-c-card__body am-c-card__body--large"> ${m.text("passwordChangedSuccess")} </div><div class="am-c-card__form"><am-link class="am-e-button am-e-button--primary" am-target="${n.login}"> ${m.text("signIn")} </am-link></div></div>`}});var pi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const gi=e=>{const{path:t,fieldResultsArray:a,url:i}=e,s=a.reduce(((e,t)=>e.concat([t.field])),[]);return Pt`<div class="am-c-card"><div class="am-c-card__list"><div class="am-c-card__list-item am-c-card__list-item--faded am-u-flex am-u-flex--between am-u-flex--align-center"><am-link am-target="${t?`${n.page}?url=${i}`:n.shared}" class="am-c-icon-text am-u-text-link"><i class="bi bi-file-earmark-text"></i><span>${i||m.text("sharedTitle")}</span></am-link><am-checkbox name="${t}" value="${s.join()}"></am-checkbox></div> ${(e=>e.reduce(((e,t)=>Pt`${e} <div class="am-c-card__list-item am-u-flex am-u-flex--column am-u-flex--gap"><span><span class="am-e-badge"> ${wt(t.field)} </span></span><span>${t.context}</span></div>`),""))(a)} </div></div>`};class bi extends x{get api(){return"SearchController::searchReplace"}connectedCallback(){this.classList.add("am-u-flex","am-u-flex--gap-large","am-u-flex--column");const e=i("section",["am-u-flex","am-u-flex--column","am-u-flex--gap"],{},this),{searchBar:t,search:a,isRegex:s,isCaseSensitive:n,replace:l}=this.createForm(e),{replaceButton:c,checkAll:d,unCheckAll:m}=this.createButtons(e),u=i("section",["am-u-flex","am-u-flex--column","am-u-flex--gap-large"],{},this),h=(e={})=>pi(this,void 0,void 0,(function*(){const t=Object.assign({searchValue:a.value,isRegex:s.checked,isCaseSensitive:n.checked},e),i=yield Gt(this.api,t);this.createResults(i,u)})),p=o((()=>pi(this,void 0,void 0,(function*(){const e=new URL(window.location.href);e.searchParams.set(bi.SEARCH_PARAM,a.value),window.history.replaceState(null,null,e),h()}))),200);f(t,"input",p,"input"),f(c,"click",(()=>{const e=JSON.stringify(kt(u));h({replaceValue:l.value,replaceSelected:!0,files:e})}));const g=e=>{r("input",u).forEach((t=>{t.checked=e,b("input",t)}))};f(d,"click",(()=>{g(!0)})),f(m,"click",(()=>{g(!1)})),p()}createResults(e,t){const a=e.data;a.length?t.innerHTML=a.reduce(((e,t)=>Pt`${e} ${gi(t)}`),""):t.innerHTML=ca(bi.SEARCH_PARAM)?Pt`<am-alert am-icon="slash-circle" am-text="searchNoResults"></am-alert>`:""}createForm(e){const t=i("div",["am-u-flex","am-u-flex--gap"],{},e);return{searchBar:t,search:i("input",["am-f-input"],{type:"text",name:"searchValue",value:ca(bi.SEARCH_PARAM),placeholder:m.text("searchPlaceholder")},t),isRegex:i("am-custom-icon-checkbox",[],{name:"isRegex","am-icon":"regex","am-tooltip":m.text("searchIsRegex")},t),isCaseSensitive:i("am-custom-icon-checkbox",[],{name:"isCaseSensitive","am-icon":"type","am-tooltip":m.text("searchIsCaseSensitive")},t),replace:i("input",["am-f-input"],{type:"text",name:"replaceValue",placeholder:m.text("searchReplacePlaceholder")},e)}}createButtons(e){const t=i("div",["am-u-flex","am-u-flex--between"],{},e),a=i("span",["am-e-button","am-e-button--primary"],{},t);a.textContent=m.text("searchReplaceSelected");const s=i("div",["am-f-group"],{},t),n=i("span",["am-e-button","am-f-group__item"],{},s);n.textContent=m.text("searchReplaceCheckAll");const o=i("span",["am-e-button","am-f-group__item"],{},s);return o.textContent=m.text("searchReplaceUncheckAll"),{replaceButton:a,checkAll:n,unCheckAll:o}}}bi.SEARCH_PARAM="search",customElements.define("am-search-form",bi);var fi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-setup-form",class extends ei{connectedCallback(){this.renderForm()}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return fi(this,void 0,void 0,(function*(){const{data:a}=e;if((null==a?void 0:a.php)&&(null==a?void 0:a.filename)&&(null==a?void 0:a.configDir)){this.renderSuccess(a.configDir,a.filename);const e=window.URL.createObjectURL(new Blob([a.php],{type:"application/octet-stream"}));i("a",[],{href:e,target:"_blank",download:a.filename}).click()}t.processResponse.call(this,e)}))}renderForm(){this.innerHTML=Pt`<h2>Create User &mdash; Step 1/2</h2><am-form-error></am-form-error><div class="am-c-card"><div class="am-c-card__body am-c-card__body--large"><p> Create the first user account using the form below and download the account file to your computer. </p></div><div class="am-c-card__form"><input class="am-f-input" type="text" name="username" pattern="^[a-z0-9]([a-z0-9_]|-)+[a-z0-9]$" placeholder="Username" am-tooltip='A username must start and end with a letter or number and can only contain the characters "a-z", "0-9", "_" or "-".' am-tooltip-options="placement:right" required /><input class="am-f-input" type="email" name="email" placeholder="Email" required /><input class="am-f-input" type="password" name="password1" placeholder="Password" required /><input class="am-f-input" type="password" name="password2" placeholder="Repeat Password" required /><div class="am-c-card__form-buttons"><am-submit class="am-e-button am-e-button--primary"> Create Account and Download File </am-submit></div></div></div>`}renderSuccess(e,t){this.innerHTML=Pt`<h2>Create User &mdash; Step 2/2</h2><div class="am-c-card"><div class="am-c-card__body am-c-card__body--large"><p> Now, upload the downloaded <code>${t}</code> to your webserver and place it inside <code>${e}</code>. After the file is uploaded, hit the button below in order to sign in. </p></div><div class="am-c-card__form"><div class="am-c-card__form-buttons"><a href="./${n.login}" class="am-e-button am-e-button--primary"> I have uploaded the file, let me sign in! </a></div></div></div>`}});var vi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class xi extends x{get data(){return this._data.blocks=this.editor.value.blocks,this._data}set data(e){this._data=e,setTimeout(this.init.bind(this),0)}init(){var e,t,a,s;const n=this._data.name.length>0,o=`component-name-${this._data.id}-${null!==(s=null===(a=Array.from(null!==(t=null===(e=this.parentNode)||void 0===e?void 0:e.childNodes)&&void 0!==t?t:[]))||void 0===a?void 0:a.indexOf(this))&&void 0!==s?s:0}`,r=new u(o,{onChange:e=>{this._data.name=e,b("change",this.editor)},initial:this._data.name}),c=()=>vi(this,void 0,void 0,(function*(){this.classList.add("am-c-component-editor"),this.innerHTML=Pt`<div class="am-c-component-editor__header"><div class="am-c-component-editor__name" am-bind="${o}" am-bind-to="title"><i></i><span am-bind="${o}"> ${this._data.name} </span></div><div class="am-c-component-editor__tools"></div><div class="am-c-component-editor__handle"><i class="bi bi-grip-vertical"></i></div></div><div class="am-c-component-editor__main"></div>`,p.connectElements(this);const e=l(".am-c-component-editor__tools",this),t=l(".am-c-component-editor__main",this),a=l(".am-c-component-editor__name",this),s=i("span",[],{},e,'<i class="bi bi-pencil"></i>'),n=i("span",[],{},e,'<i class="bi bi-copy"></i>'),c=i("span",[],{},e,'<i class="bi bi-trash3"></i>');this.toggleEditor(t,a,this._data.collapsed),f(a,"click",(()=>{this.toggleEditor(t,a,!this._data.collapsed)})),f(n,"click",(()=>{this.closest(_i.TAG_NAME).add({id:$a(),name:`${this._data.name} (${m.text("componentCopy")})`,blocks:this.data.blocks,collapsed:!1},this).fireOnReady()})),f(s,"click",(()=>{this.setName((e=>{r.value=e}))})),f(c,"click",(()=>vi(this,void 0,void 0,(function*(){if(yield ba(`${m.text("componentConfirmRemoval")} (${this._data.name})`)){const e=this.closest(_i.TAG_NAME);this.remove(),e.submit()}})))),this.editor=dt("am-editor-field",t,{value:{blocks:this._data.blocks},name:"",key:"",label:""})}));n?c():this.setName((e=>{r.value=e,c(),this.fireOnReady()}))}fireOnReady(){setTimeout((()=>vi(this,void 0,void 0,(function*(){yield this.editor.editorJS.editor.isReady,b("change",this.editor)}))),0)}toggleEditor(e,t,a){const i=l("i",t);this._data.collapsed=a,e.classList.toggle("am-u-display-none",this._data.collapsed),i.className="bi bi-chevron-"+(this._data.collapsed?"right":"down"),b("change",this.editor)}setName(e){var t;const{modal:a,body:s,button:n}=ht(m.text("componentName"),m.text("ok")),l=i("input",["am-f-input"],{value:null!==(t=this._data.name)&&void 0!==t?t:""},s);n.setAttribute("disabled",""),a.open(),f(l,"input paste cut",o((()=>{l.value.length>0?n.removeAttribute("disabled"):n.setAttribute("disabled","")}),100)),f(n,"click",(()=>{const t=l.value;t.length&&(e(t),a.close())})),f(a,"AutomadModalClose",(()=>{0==l.value.length&&this.remove()}))}}xi.TAG_NAME="am-component-editor",customElements.define(xi.TAG_NAME,xi);var yi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const wi="am-new-component-button";class _i extends ei{constructor(){super(...arguments),this.isInitialized=!1}get initSelf(){return!0}get auto(){return!0}get deduplicationSettings(){return{getFormData:()=>{const e=this.formData;return e.fetchTime=null,e},enabled:!0}}get formData(){if(!this.isInitialized)return{};return{components:r(xi.TAG_NAME,this).map((e=>e.data)),fetchTime:this.fetchTime}}connectedCallback(){this.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap"),r(`.${wi}`).forEach((e=>{this.addListener(f(e,"click",(()=>{this.add({id:$a(),name:"",blocks:[],collapsed:!1})})))}))}add(e,t=null){const a=i(xi.TAG_NAME,[],{},this);return null!==t&&t.insertAdjacentElement("afterend",a),a.data=e,a}init(){super.init(),this.addListener(f(window,"AutomadContentPublished",(()=>{this.fetchTime=Math.ceil((new Date).getTime()/1e3)})))}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});var a,i;return yi(this,void 0,void 0,(function*(){yield t.processResponse.call(this,e),(null===(a=e.data)||void 0===a?void 0:a.components)?(null===(i=this.sortable)||void 0===i||i.destroy(),this.innerHTML="",e.data.components.forEach((e=>{this.add(e)})),this.sortable=new se.ZP(this,{handle:".am-c-component-editor__handle, .am-c-component-editor__name",animation:200,draggable:xi.TAG_NAME,ghostClass:"am-c-component-editor--ghost",chosenClass:"am-c-component-editor--chosen",dragClass:"am-c-component-editor--drag",direction:"vertical",onStart:()=>{r("am-editor-field",this).forEach((e=>{e.style.pointerEvents="none"}))},onEnd:()=>{r("am-editor-field",this).forEach((e=>{e.style.removeProperty("pointer-events")}))},onChange:()=>{this.submit()}})):(b("AutomadContentSaved"),b("AutomadAppStateRequireUpdate")),this.fetchTime=e.time,this.isInitialized=!0}))}}_i.TAG_NAME="am-component-collection-form",customElements.define(_i.TAG_NAME,_i);var ki=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-shared-data-form",class extends ei{get deduplicationSettings(){return{getFormData:e=>{const t=kt(e);return t.dataFetchTime=null,t},enabled:!0}}get parallel(){return!1}get auto(){return!0}get initSelf(){return!0}init(){this.sections=mt(this),super.init(),this.addListener(f(window,"AutomadContentPublished",(()=>{this.bindings&&(this.bindings.sharedDataFetchTimeBinding.value=Math.ceil((new Date).getTime()/1e3))})))}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return ki(this,void 0,void 0,(function*(){yield t.processResponse.call(this,e),200===e.code&&(b("AutomadContentSaved"),this.bindings&&(this.bindings.sharedDataFetchTimeBinding.value=e.time),e.data&&(this.bindings||(this.bindings=(e=>({sharedDataFetchTimeBinding:new u("sharedDataFetchTime",{initial:e.time})}))(e)),this.render(e)))}))}render(e){var t,a,s,n,o,l;const{fields:r}=e.data,c=m.reservedFields.THEME,d=r[c]||Object.keys(m.themes)[0],h=null!==(a=null===(t=m.themes[d])||void 0===t?void 0:t.labels)&&void 0!==a?a:{},p=null!==(n=null===(s=m.themes[d])||void 0===s?void 0:s.tooltips)&&void 0!==n?n:{},g=null!==(l=null===(o=m.themes[d])||void 0===o?void 0:o.options)&&void 0!==l?l:{},b=Ct(r);i("input",[],{type:"hidden","am-bind":"sharedDataFetchTime","am-bind-to":"value",name:"dataFetchTime"},this);const f=dt("am-title-field",this.sections.settings,{key:m.reservedFields.SITENAME,value:r[m.reservedFields.SITENAME],name:`data[${m.reservedFields.SITENAME}]`},[],{required:""});new u("sitename",{input:f.input,modifier:e=>e}),dt("am-main-theme-field",this.sections.settings,{key:c,value:d,name:`data[${c}]`}),dt("am-syntax-theme-select-field",this.sections.settings,{key:m.reservedFields.SYNTAX_THEME,value:r[m.reservedFields.SYNTAX_THEME],name:`data[${m.reservedFields.SYNTAX_THEME}]`}),dt("am-image-field",this.sections.settings,{key:m.reservedFields.OPEN_GRAPH_IMAGE,value:r[m.reservedFields.OPEN_GRAPH_IMAGE],name:`data[${m.reservedFields.OPEN_GRAPH_IMAGE}]`,label:m.text("openGraphImageShared")}),yt(r,this.sections),Object.keys(this.sections).forEach((e=>{_t({section:this.sections[e],fields:b[e],labels:h,tooltips:p,themeOptions:g,renderEmptyAlert:"customizations"!=e})}))}});var $i=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-system-update-form",class extends ei{get states(){return{disabled:this.renderDisabled,notSupported:this.renderNotSupported,success:this.renderSuccess,connectionError:this.renderConnectionError,pending:this.renderPending,upToDate:this.renderUpToDate}}get parallel(){return!1}get initSelf(){return!0}processResponse(e){const t=Object.create(null,{processResponse:{get:()=>super.processResponse}});return $i(this,void 0,void 0,(function*(){if(t.processResponse.call(this,e),this.progressModal&&this.progressModal.close(),!e.data)return;const a=e.data;a.state&&Object.keys(this.states).includes(a.state)&&this.states[a.state].apply(this,[a])}))}renderDisabled(e){this.innerHTML=Pt`<am-alert am-icon="slash-circle" am-text="systemUpdateDisabled"></am-alert>`}renderNotSupported(e){this.innerHTML=Pt`<am-alert am-icon="slash-circle" am-text="systemUpdateNotSupportedError"></am-alert>`}renderSuccess(e){this.renderUpToDate(e);const t=i("am-modal",[],{"am-no-esc":"","am-no-click":"","am-destroy":""},this);t.innerHTML=Pt`<am-modal-dialog><am-modal-body> ${m.text("systemUpdateSuccess")} <br /><span> ${m.text("systemUpdateCurrentVersion")}: <strong>${e.current}</strong></span></am-modal-body><am-modal-footer><a href="${m.dashboardURL}" class="am-e-button am-e-button--primary"> ${m.text("systemUpdateSuccessReload")} </a></am-modal-footer></am-modal-dialog>`,t.open()}renderConnectionError(e){this.innerHTML=Pt`<am-alert am-icon="hdd-network" am-text="systemUpdateConnectionError"></am-alert>`}renderPending(e){this.innerHTML=Pt`<div class="am-c-alert"><input type="hidden" name="update" value="run" /><div class="am-c-alert__icon"><i class="bi bi-download"></i></div><div class="am-c-alert__text"><div> ${m.text("systemUpdateCurrentVersion")} <strong>${e.current}</strong>. <br /> ${m.text("systemUpdateAvailable")} </div><div class="am-u-flex am-u-flex--gap"><am-submit class="am-e-button am-e-button--primary"> ${m.text("systemUpdateTo")} <span class="am-e-badge">${e.latest}</span></am-submit><a href="https://automad.org/release-notes" class="am-e-button am-u-display-small-none" target="_blank"> Release Notes </a></div></div></div><div><p>${m.text("systemUpdateItems")}</p> ${(e=>{let t="";return e.forEach((e=>{t+=Pt`<li>${e}</li>`})),Pt`<ul class="am-u-text-paragraph am-u-text-mono"> ${t} </ul>`})(e.items)} </div>`;const t=l("am-submit",this);f(t,"click",(()=>{this.progressModal=i("am-modal",[],{"am-no-esc":"","am-no-click":"","am-destroy":""},xa()),this.progressModal.innerHTML=Pt`<am-modal-dialog><div class="am-c-modal__spinner"><span class="am-c-modal__spinner-icon"></span><span class="am-c-modal__spinner-text"> ${m.text("systemUpdateProgress")} </span></div></am-modal-dialog>`,this.progressModal.open()}))}renderUpToDate(e){this.innerHTML=Pt`<am-alert am-icon="check-circle" am-text="systemUpToDate"></am-alert>`}});var Ci=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-trash-form",class extends x{connectedCallback(){this.init()}init(){return Ci(this,void 0,void 0,(function*(){this.innerHTML="";const{data:e}=yield Gt("PageTrashController::list"),t=i("div",["am-u-flex","am-u-flex--column","am-u-flex--gap"],{},this);e.length?e.forEach((e=>{((e,t)=>{const a=new Date(e.lastModified);i("div",["am-c-card"],{},t,Pt`<div class="am-c-card__header"><div><am-icon-text class="am-c-card__title" am-icon="file-earmark-text" am-text="${e.title}"></am-icon-text><div class="am-c-card__body"> ${a.toLocaleString()} </div></div><div><am-dropdown class="am-c-card__header-dropdown" am-right><i class="bi bi-three-dots"></i><div class="am-c-dropdown__items"><am-form am-api="PageTrashController::restore"><input type="hidden" name="path" value="${e.path}" /><am-submit class="am-c-dropdown__link"><i class="bi bi-arrow-counterclockwise"></i><span>${m.text("trashRestore")}</span></am-submit></am-form><am-form am-api="PageTrashController::permanentlyDelete" am-confirm="${m.text("trashPermanentlyDeleteConfirm")}"><input type="hidden" name="path" value="${e.path}" /><am-submit class="am-c-dropdown__link"><i class="bi bi-x-lg"></i><span> ${m.text("trashPermanentlyDelete")} </span></am-submit></am-form></div></am-dropdown></div></div>`)})(e,t)})):i("am-alert",[],{"am-icon":"slash-circle","am-text":m.text("trashIsEmpty")},t)}))}});var Ai=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-recently-edited-pages",class extends x{connectedCallback(){this.init()}init(){return Ai(this,void 0,void 0,(function*(){this.innerHTML="<am-spinner></am-spinner>";const{data:e}=yield Gt("PageCollectionController::getRecentlyEdited");this.innerHTML="",this.classList.add("am-l-grid"),this.setAttribute("style","--min: 12rem;"),e.forEach((e=>{const t=`${n.page}?url=${e.url}`,a=ua(e.url);i("div",["am-c-card","am-c-card--hover"],{},this,Pt`<am-link am-target="${t}&section=files" class="am-c-card__teaser"> ${""!=e.thumbnail?`<img src="${ma(e.thumbnail)}" />`:'<i class="bi bi-file-earmark-text"></i>'} </am-link><am-link am-target="${t}" class="am-c-card__title"> ${e.title} </am-link><am-link am-target="${t}" class="am-c-card__body"><span>${g(e.lastModified)}</span><span> ${e.fileCount} ${m.text(1===e.fileCount?"file":"files")} </span></am-link><div class="am-c-card__buttons"><am-link am-target="${t}"><span class="am-u-flex am-u-flex--gap am-u-flex--align-center"><span>${m.text("edit")}</span></span></am-link><a href="${a}" target="_blank"><span class="am-u-flex am-u-flex--gap am-u-flex--align-center"><span>${m.text("visit")}</span></span></a></div>`)}))}))}});var Ti=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-server-info",class extends x{connectedCallback(){this.init()}init(){return Ti(this,void 0,void 0,(function*(){const{data:e}=yield Gt("AppController::getServerInfo");this.innerHTML=Pt`<table><tr><td>Host Name</td><td>${e.hostName}</td></tr><tr><td>Host IP</td><td>${e.hostIp}</td></tr><tr><td>Server OS</td><td>${e.serverOs}</td></tr><tr><td>Server Software</td><td>${e.serverSoftware}</td></tr><tr><td>PHP Version</td><td>${e.phpVersion}</td></tr><tr><td>PHP Sapi</td><td>${e.phpSapiName}</td></tr><tr><td>Memory Limit</td><td>${e.memoryLimit}</td></tr><tr><td>Disk Usage</td><td>${e.diskUsage}M / ${e.diskQuota}M</td></tr></table>`}))}});customElements.define("am-private-indicator",class extends x{connectedCallback(){this.classList.add("am-c-privacy-indicator"),this.addListener(f(window,"AutomadAppStateChange",this.render.bind(this))),this.render()}render(){var e;const t=ra();this.innerHTML="",(null===(e=m.pages[t])||void 0===e?void 0:e.private)?i("i",["bi","bi-eye-slash-fill"],{},this):i("i",["bi","bi-eye"],{},this)}});class Li extends x{connectedCallback(){this.render(),this.addListener(f(window,"AutomadAppStateChange",this.render.bind(this)))}}customElements.define("am-navbar-debug-indicator",class extends Li{render(){this.classList.toggle("am-u-display-none",!m.system.debug),m.system.debug?this.innerHTML=Pt`<am-link class="am-c-navbar__item" am-target="${n.system}?section=debug" am-tooltip="${m.text("debugEnabled")}"><i class="bi bi-bug"></i></am-link>`:this.innerHTML=""}});class Ei extends x{connectedCallback(){this.render(),this.addListener(f(window,"AutomadPackagesUpdateCheck",this.render.bind(this)))}}customElements.define("am-navbar-outdated-packages-indicator",class extends Ei{render(){const e=m.state.outdatedPackages;this.classList.toggle("am-u-display-none",!e),this.innerHTML=e>0?Pt`<am-link class="am-c-navbar__item" am-target="${n.packages}" am-tooltip="${m.text("packagesUpdatesAvailable")}"><i class="bi bi-box-seam"></i></am-link>`:""}});class Si extends x{connectedCallback(){this.render(),this.addListener(f(window,"AutomadSystemUpdateCheck",this.render.bind(this)))}}customElements.define("am-navbar-update-indicator",class extends Si{render(){var e,t;this.classList.toggle("am-u-display-none",!(null===(e=m.state.systemUpdate)||void 0===e?void 0:e.pending)),(null===(t=m.state.systemUpdate)||void 0===t?void 0:t.pending)?this.innerHTML=Pt`<am-link class="am-c-navbar__item" am-target="${n.system}?section=update" am-tooltip="${m.text("systemUpdateTooltip")}"><i class="bi bi-download"></i></am-link>`:this.innerHTML=""}});customElements.define("am-sidebar-outdated-packages-indicator",class extends Ei{render(){const e=m.state.outdatedPackages;this.classList.toggle("am-e-badge",e>0),this.innerHTML=e?Pt`↓ ${e}`:""}});class Pi extends Li{render(){this.state?this.innerHTML=Pt`<am-icon-text class="am-u-text-active" am-icon="check-circle" am-text="${this.textOn}"></am-icon-text>`:this.innerHTML=Pt`<am-icon-text class="am-u-text-muted" am-icon="slash-circle" am-text="${this.textOff}"></am-icon-text>`}}customElements.define("am-system-cache-indicator",class extends Pi{get textOn(){return m.text("cacheEnabled")}get textOff(){return m.text("cacheDisabled")}get state(){return m.system.cache.enabled}});customElements.define("am-system-debug-indicator",class extends Pi{get textOn(){return m.text("debugEnabled")}get textOff(){return m.text("debugDisabled")}get state(){return m.system.debug}});customElements.define("am-system-feed-indicator",class extends Pi{get textOn(){return m.text("feedEnabled")}get textOff(){return m.text("feedDisabled")}get state(){return m.system.feed.enabled}});customElements.define("am-system-i18n-indicator",class extends Pi{get textOn(){return m.text("i18nEnabled")}get textOff(){return m.text("i18nDisabled")}get state(){return m.system.i18n}});customElements.define("am-system-mail-indicator",class extends Li{render(){this.innerHTML=`<am-icon-text class="${"smtp"===m.system.mail.transport?"am-u-text-active":"am-u-text-muted"}" am-icon="send" am-text="${m.system.mail.transport}"></am-icon-text>`}});customElements.define("am-system-update-indicator",class extends Si{render(){var e,t;(null===(e=m.state.systemUpdate)||void 0===e?void 0:e.pending)?this.innerHTML=Pt`<span class="am-u-text-active am-c-icon-text"><i class="bi bi-download"></i><span> ${m.text("systemUpdateTo")} ${null===(t=m.state.systemUpdate)||void 0===t?void 0:t.latest} </span></span>`:this.innerHTML=Pt`<am-icon-text class="am-u-text-muted" am-icon="check-circle" am-text="${m.text("systemUpToDate")}"></am-icon-text>`}});customElements.define("am-user-count-indicator",class extends Li{render(){this.textContent=`${m.system.users.length}`}});customElements.define("am-modal-body",class extends x{connectedCallback(){this.classList.add("am-c-modal__body")}});customElements.define("am-modal-close",class extends x{connectedCallback(){f(this,"click",(()=>{const e=this.closest(y.TAG_NAME);this.hasAttribute("disabled")||e instanceof y&&e.close()}).bind(this))}});customElements.define("am-modal-dialog",class extends x{connectedCallback(){this.classList.add("am-c-modal__dialog")}});customElements.define("am-modal-footer",class extends x{connectedCallback(){this.classList.add("am-c-modal__footer")}});customElements.define("am-modal-header",class extends x{connectedCallback(){this.classList.add("am-c-modal__header"),i("am-modal-close",["am-c-modal__close"],{},this)}});class Mi extends y{constructor(){super(...arguments),this.classes=["am-c-modal-field"]}connectedCallback(){super.connectedCallback(),this.render(),this.addListener(f(this,"click",(()=>{r(Mi.TAG_NAME).forEach((e=>{e.removeAttribute("style")})),this.style.zIndex="40"})))}render(){const e=this.getAttribute("am-page")||m.text("sharedTitle");i("div",["am-c-modal-field__header"],{},this,Pt`<am-icon-text am-icon="file-earmark-text" am-text="${e}"></am-icon-text><span class="am-c-modal-field__toggle">↙</span>`),i("div",["am-c-modal-field__toggle","am-u-display-small-none"],{},this).innerHTML="↗",f(this,"click",(()=>{this.toggle()}),".am-c-modal-field__toggle")}}Mi.TAG_NAME="am-modal-field",customElements.define(Mi.TAG_NAME,Mi);customElements.define("am-modal-jumpbar",class extends y{connectedCallback(){super.connectedCallback(),i("am-modal-jumpbar-dialog",[],{placeholder:"jumpbarButtonText"},this),this.addListener(wa("j",(()=>{m.navigationIsLocked||this.open()}))),f(this,"focusout",(()=>{this.close()}),"input")}lockNavigation(){}unlockNavigation(){}saveInitialFormData(){}restoreInitialFormData(){}});class Ii extends x{constructor(){super(...arguments),this.items=[],this.selectedIndex=null,this.initialIndex=null,this.maxItems=8,this.elementClasses=["am-c-dropdown"],this.inputClasses=["am-f-input"],this.itemsClasses=["am-c-dropdown__items","am-c-dropdown__items--autocomplete"],this.linkClass="am-c-dropdown__link",this.linkActiveClass="am-active"}static get observedAttributes(){return["placeholder","name","value"]}get data(){var e;const t=[];return(null!==(e=this.getAttribute("am-data"))&&void 0!==e?e:"").split(",").forEach((e=>{const a=e.trim();t.push({value:a,title:a})})),t}get minInputLength(){var e;return parseInt(null!==(e=this.getAttribute("am-min"))&&void 0!==e?e:"1")}connectedCallback(){this.classList.add(...this.elementClasses),this.addListener(f(window,"AutomadAppStateChange",this.init.bind(this))),this.init()}init(){void 0!==this.data&&(this.innerHTML="",this.items=[],this.input=this.createInput(),this.hasAttribute("disabled")||(this.dropdown=i("div",this.itemsClasses,{},this),this.data.forEach((e=>{this.items.push({element:this.createItemElement(e),value:this.createItemValue(e),item:e})})),this.itemsFiltered=this.items,this.registerDropdownEvents(),this.registerInputEvents(),this.update()))}createInput(){const e=this.hasAttribute("disabled")?{disabled:""}:{},t=Object.assign({type:"text"},e),a=m.text(this.elementAttributes.placeholder);return a&&(t.placeholder=a),this.elementAttributes.name&&(t.name=this.elementAttributes.name),this.elementAttributes.value&&(t.value=this.elementAttributes.value),i("input",this.inputClasses,t,this)}createItemElement(e){return i("a",[this.linkClass],{},null,Pt`$${e.title}`)}createItemValue(e){return e.value.toLowerCase()}renderDropdown(){this.dropdown.innerHTML="",this.itemsFiltered.forEach((e=>{this.dropdown.appendChild(e.element)}))}update(){const e=this.input.value.toLowerCase().split(" ");let t=0;this.itemsFiltered=[],this.items.forEach((a=>{var i=!0;if(t<this.maxItems){for(var s=0;s<e.length;s++)if(-1==a.value.indexOf(e[s])){i=!1;break}i&&(this.itemsFiltered.push(a),t++)}})),this.selectedIndex=this.initialIndex,this.renderDropdown(),this.toggleActiveItemStyle()}onKeyDownEvent(e){switch(e.keyCode){case 38:this.prev(e);break;case 40:this.next(e);break;case 13:this.select(e);break;case 9:case 27:this.input.blur(),this.close()}}onKeyUpEvent(e){[38,40,13,9,27].includes(e.keyCode)||(this.update(),this.open())}onMouseOverEvent(e){let t=e.target;t.matches(`.${this.linkClass}`)||(t=t.closest(`.${this.linkClass}`)),this.selectedIndex=Array.from(this.dropdown.children).indexOf(t),this.toggleActiveItemStyle()}registerInputEvents(){f(this.input,"keydown",this.onKeyDownEvent.bind(this)),f(this.input,"keyup",o(this.onKeyUpEvent.bind(this))),f(this.input,"focus",this.open.bind(this)),f(document,"click",(e=>{this.contains(e.target)||this.close()}))}registerDropdownEvents(){f(this.dropdown,"mouseover",(e=>{this.onMouseOverEvent(e)}),`.${this.linkClass}`),f(this.dropdown,"click",(e=>{this.select(e)}),`.${this.linkClass}`)}toggleActiveItemStyle(){this.itemsFiltered.forEach(((e,t)=>{e.element.classList.toggle(this.linkActiveClass,t==this.selectedIndex)}))}close(){this.selectedIndex=this.initialIndex,this.toggleActiveItemStyle(),this.classList.remove("am-c-dropdown--open")}open(){this.input.value.length>=this.minInputLength&&(this.update(),this.classList.add("am-c-dropdown--open"))}prev(e){e.stopImmediatePropagation(),e.preventDefault(),this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.itemsFiltered.length-1),this.toggleActiveItemStyle()}next(e){e.stopImmediatePropagation(),e.preventDefault(),null===this.selectedIndex?this.selectedIndex=0:(this.selectedIndex++,this.selectedIndex>this.itemsFiltered.length-1&&(this.selectedIndex=0)),this.toggleActiveItemStyle()}select(e){e.stopImmediatePropagation(),e.preventDefault(),null!==this.selectedIndex&&(this.input.value=this.itemsFiltered[this.selectedIndex].value),this.close(),b("AutomadAutocompleteSelect",this)}}customElements.define("am-autocomplete",Ii);const Oi=()=>[].concat([{target:n.search,value:m.text("searchTitle"),title:m.text("searchTitle"),icon:"search",cls:["am-c-modal__jumpbar-divider"]}],[{external:m.baseIndex||"/",value:m.text("inPageEdit"),title:m.text("inPageEdit"),icon:"window-desktop",cls:["am-c-modal__jumpbar-divider"]}],(()=>{const e=(e,t,a)=>({target:`${n.system}?section=${e}`,value:`${m.text("systemTitle")} ${m.text(t)}`,title:m.text(t),subtitle:m.text("systemTitle"),icon:a,cls:["am-c-modal__jumpbar-divider-system"]}),t=m.isCloud?[]:[e("mail","systemMail","envelope")],a=m.isCloud?[]:[e("debug","systemDebug","bug")];return[e("cache","systemCache","device-ssd"),e("users","systemUsers","person-badge"),e("feed","systemRssFeed","rss"),...t,e("i18n","systemI18n","globe"),e("language","systemLanguage","translate"),...a,e("update","systemUpdate","arrow-repeat")]})(),[{target:n.shared,value:m.text("sharedTitle"),title:m.text("sharedTitle"),icon:"file-earmark-medical",cls:["am-c-modal__jumpbar-divider"]}],[{target:n.components,value:m.text("componentsTitle"),title:m.text("componentsTitle"),icon:"boxes",cls:["am-c-modal__jumpbar-divider"]}],[{target:`${n.packages}?section=packages`,value:m.text("packagesSwitcherTitle"),title:m.text("packagesSwitcherTitle"),icon:"box-seam",cls:["am-c-modal__jumpbar-divider-packages"]},{target:`${n.packages}?section=repositories`,value:`${m.text("repositoriesSwitcherTitle")} (packages)`,title:m.text("repositoriesSwitcherTitle"),icon:"git",cls:["am-c-modal__jumpbar-divider-packages"]}],[{target:n.trash,value:m.text("trashTitle"),title:m.text("trashTitle"),icon:"trash3",cls:["am-c-modal__jumpbar-divider"]}],(()=>{const e=[],t=Object.values(m.pages);return t.sort(((e,t)=>e.lastModified<t.lastModified?1:t.lastModified<e.lastModified?-1:0)),t.forEach((t=>{const a=t.private?"eye-slash-fill":"file-earmark-text";e.push({target:`${n.page}?url=${t.url}`,value:`${t.title} ${t.url}`,title:t.title,subtitle:t.url,icon:a})})),e})());customElements.define("am-modal-jumpbar-dialog",class extends Ii{constructor(){super(...arguments),this.initialIndex=0,this.elementClasses=["am-c-modal__dialog"],this.inputClasses=["am-c-modal__jumpbar-input"],this.itemsClasses=["am-c-modal__jumpbar-items"],this.linkClass="am-c-modal__jumpbar-link",this.linkActiveClass="am-active"}get data(){return Oi()}get minInputLength(){return 0}createItemElement(e){const t={};e.external&&(t["am-external"]=e.external),e.target&&(t["am-target"]=e.target);const a=e.cls||[],s=i("am-link",a.concat("am-c-modal__jumpbar-link"),t);return s.innerHTML=this.itemHtml(e.icon,e.title,e.subtitle),s}createItemValue(e){return e.value.toLowerCase()}itemHtml(e,t,a){return Pt`<span class="am-c-icon-text"><i class="bi bi-${e}"></i><span>$${t}</span><span class="am-u-text-muted">$${a||""}</span></span>`}update(){const e=this.itemsFiltered[0];e.element.setAttribute("am-target",`${n.search}?search=${encodeURIComponent(this.input.value).replace(/%20/g,"+")}`),e.value=`${e.value} ${this.input.value.toLowerCase()}`,e.element.innerHTML=this.itemHtml(e.item.icon,e.item.title,this.input.value),this.maxItems=Math.floor((window.innerHeight-150)/46),super.update()}close(){this.selectedIndex=this.initialIndex,this.toggleActiveItemStyle()}open(){this.update()}select(e){e.preventDefault(),null!==this.selectedIndex&&this.itemsFiltered[this.selectedIndex].element.click(),this.close()}});customElements.define("am-modal-toggle",class extends x{static get observedAttributes(){return["am-modal"]}connectedCallback(){f(this,"click",(()=>{l(this.elementAttributes["am-modal"]).toggle()}).bind(this))}});var Ri=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class Hi extends x{connectedCallback(){const e=i("button",["am-e-button","am-e-button--primary"],{},this,m.text("repositoryAdd"));f(e,"click",(()=>Ri(this,void 0,void 0,(function*(){const{modal:e,form:t}=ut("PackageManagerController::addRepository","AutomadRepositoriesChange",m.text("repositoryAddTitle"),m.text("repositoryAddButton"));i("p",[],{},t,m.text("repositoryAddInfo")),dt("am-platform-select-field",t,{key:"platform",value:"github",name:"platform",label:"Platform Type"}),dt("am-input-field",t,{key:"name",value:"",name:"name",placeholder:"vendor/package"},[],{required:""}),dt("am-input-field",t,{key:"repositoryUrl",value:"",name:"repositoryUrl",label:"Repository URL",placeholder:"https://github.com/user/repository"},[],{required:""}),dt("am-input-field",t,{key:"branch",value:"",name:"branch",placeholder:"main"},[],{required:""}),setTimeout((()=>{e.open()}),0)}))))}}Hi.TAG_NAME="am-add-repository",customElements.define(Hi.TAG_NAME,Hi);var Bi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Ni=()=>{const{modal:e,form:t}=ut("PackageManagerController::saveAuth","",m.text("composerAuth"),m.text("save"));setTimeout((()=>Bi(void 0,void 0,void 0,(function*(){t.innerHTML="<am-spinner></am-spinner>",t.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap-large"),e.open(),i("div",[],{},t,m.text("composerAuthInfo"));let a=Object.assign(Object.assign({},{githubToken:"",githubTokenIsSet:!1,gitlabUrl:"",gitlabToken:"",gitlabTokenIsSet:!1}),(yield Gt("PackageManagerController::getSafeAuth")).data);const s=i("div",["am-c-card"],{},t,Pt`<div class="am-c-card__icon"><i class="bi bi-github"></i></div><div class="am-c-card__title">GitHub</div>`),n=i("div",["am-c-card__form"],{},s);dt("am-input-field",n,{key:"githubToken",value:"",name:"githubToken",placeholder:a.githubTokenIsSet?"**********":"",label:'Fine-grained access token "Contents: Read"'},[]);const o=i("div",["am-c-card"],{},t,Pt`<div class="am-c-card__icon"><i class="bi bi-gitlab"></i></div><div class="am-c-card__title">GitLab</div>`),l=i("div",["am-c-card__form"],{},o);dt("am-input-field",l,{key:"gitlabToken",value:"",name:"gitlabToken",placeholder:a.gitlabTokenIsSet?"**********":"",label:'Personal access token "read_api"'},[]),dt("am-input-field",l,{key:"gitlabUrl",value:a.gitlabUrl||"gitlab.com",name:"gitlabUrl",placeholder:"gitlab.com",label:"GitLab URL"},[])}))),0)},Fi=()=>Bi(void 0,void 0,void 0,(function*(){if(!(yield ba(m.text("composerAuthResetConfirm"))))return;const{success:e}=yield Gt("PackageManagerController::resetAuth",{},!0);e&&Ut(e)}));class Ui extends x{connectedCallback(){this.classList.add("am-f-group");const e=i("button",["am-e-button","am-f-group__item"],{},this,m.text("composerAuth")),t=i("am-dropdown",["am-e-button","am-e-button--icon","am-f-group__item"],{"am-right":""},this,'<i class="bi bi-three-dots-vertical"></i>'),a=i("div",["am-c-dropdown__items"],{},t),s=i("button",["am-c-dropdown__link"],{},a,Pt`<am-icon-text am-icon="key" am-text="${m.text("composerAuthConfig")}"></am-icon-text>`),n=i("button",["am-c-dropdown__link"],{},a,Pt`<am-icon-text am-icon="x-lg" am-text="${m.text("composerAuthReset")}"></am-icon-text>`);f(e,"click",Ni.bind(this)),f(s,"click",Ni.bind(this)),f(n,"click",Fi.bind(this))}}Ui.TAG_NAME="am-composer-auth",customElements.define(Ui.TAG_NAME,Ui);var Di=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const ji=(e,t,a)=>Di(void 0,void 0,void 0,(function*(){const i=bt(a);i.open();const{error:s,success:n}=yield Gt(t,{package:e.name});s&&Ft(s),n&&Ut(n),i.close(),b("AutomadPackagesChange"),m.checkForOutdatedPackages()})),zi=(e,t)=>{const a=i("div",["am-c-card__buttons"],{},t);e.installed?(((e,t)=>{const a=i("span",[],{},t);if(i("span",[],{},a).textContent=m.text("packageRemove"),e.isDependency)return a.setAttribute("disabled",""),void a.setAttribute("title",m.text("packageIsDependency"));f(a,"click",(()=>{ji(e,"PackageManagerController::remove",m.text("packageRemoving"))}))})(e,a),e.outdated&&((e,t)=>{const a=i("span",[],{},t);i("span",[],{},a).textContent=m.text("packageUpdate"),f(a,"click",(()=>{ji(e,"PackageManagerController::update",m.text("packageUpdating"))}))})(e,a)):((e,t)=>{const a=i("span",[],{},t);i("span",[],{},a).textContent=m.text("packageInstall"),f(a,"click",(()=>{ji(e,"PackageManagerController::install",m.text("packageInstalling"))}))})(e,a)};customElements.define("am-package-card",class extends x{set data(e){this.render(e)}render(e){return Di(this,void 0,void 0,(function*(){this.classList.add("am-c-card"),this.classList.toggle("am-c-card--active",e.installed),((e,t)=>{i("div",["am-c-card__header"],{},t,Pt`<div class="am-c-card__title"> $${e.name.split("/")[0]} /<br />$${e.name.split("/")[1]} </div><am-dropdown class="am-c-card__header-dropdown" am-right><i class="bi bi-three-dots"></i><div class="am-c-dropdown__items"><a href="${e.documentation}" class="am-c-dropdown__link" target="_blank"><am-icon-text am-icon="file-richtext" am-text="${m.text("packageDocumentation")}"></am-icon-text></a><a href="${e.repository}" class="am-c-dropdown__link" target="_blank"><am-icon-text am-icon="git" am-text="Repository"></am-icon-text></a><a href="${e.issues}" class="am-c-dropdown__link" target="_blank"><am-icon-text am-icon="bug" am-text="Issues"></am-icon-text></a></div></am-dropdown>`)})(e,this),((e,t)=>{const a=e=>{i("i",["bi","bi-box-seam"],{},e)},s=i("a",["am-c-card__teaser"],{href:e.documentation,target:"_blank"},t);if(e.version){const t=["am-e-badge"],a=[e.version];e.outdated&&(a.push(""),a.push(e.latest)),i("span",t,{},s,a.join(" "))}if(e.thumbnail){const t=i("img",[],{src:e.thumbnail},s);f(t,"error",(()=>{t.remove(),a(s)}))}else a(s)})(e,this),((e,t)=>{i("span",["am-u-text-limit-rows"],{},i("div",["am-c-card__body"],{},t)).textContent=e.description})(e,this),zi(e,this)}))}});var Gi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-package-list",class extends x{connectedCallback(){this.innerHTML=Pt`<div class="am-u-flex am-u-flex--gap"><am-update-all-packages></am-update-all-packages><am-filter placeholder="packagesFilter"></am-filter></div>`,this.listContainer=i("div",["am-l-grid"],{},this,"<am-spinner></am-spinner>"),this.init(),this.addListener(f(window,"AutomadPackagesChange",this.init.bind(this)))}init(){return Gi(this,void 0,void 0,(function*(){const e=yield Gi(void 0,void 0,void 0,(function*(){const{data:e,error:t}=yield Gt("PackageManagerController::getPackageCollection");if(!e||t)return Ft(t),[];const a=e.packages;return a.sort(((e,t)=>e.installed<t.installed?1:t.installed<e.installed?-1:0)),a}));this.listContainer.innerHTML="",e.forEach((e=>{i("am-package-card",[],{},this.listContainer).data=e}))}))}});var Vi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};class qi extends x{set data(e){this.render(e)}render(e){this.classList.add("am-c-card"),i("div",["am-u-flex__item-grow"],{},this,Pt`<span class="am-c-card__icon"><i class="bi bi-${e.platform}"></i></span><div class=am-c-card__title>${e.name}</div><a href="${e.repositoryUrl}" class="am-c-card__body" target="_blank"><am-icon-text am-icon="chat-left" am-text="${e.description}" title="${e.description}"></am-icon-text><am-icon-text am-icon="box-seam" am-text="${e.repositoryUrl}" title="${e.repositoryUrl}"></am-icon-text><am-icon-text am-icon="tag" am-text="${e.branch}"></am-icon-text></a>`);const t=i("div",["am-c-card__buttons"],{},this),a=i("button",[],{},t,Pt`<span>${m.text("repositoryRemove")}</span>`);f(a,"click",(()=>Vi(this,void 0,void 0,(function*(){const{modal:t,form:a}=ut("PackageManagerController::removeRepository","AutomadRepositoriesChange","",m.text("repositoryRemove"));a.textContent=m.text("repositoryRemoveConfirm"),a.additionalData={name:e.name},setTimeout((()=>{t.open()}),0)}))));const s=i("button",[],{},t,Pt`<span>${m.text("repositoryUpdate")}</span>`);f(s,"click",(()=>Vi(this,void 0,void 0,(function*(){const t=bt(m.text("repositoryUpdating"));t.open();const{error:a,success:i}=yield Gt("PackageManagerController::updateRepository",{name:e.name});t.close(),b("AutomadRepositoriesChange"),a&&Ft(a),i&&Ut(i)}))))}}qi.TAG_NAME="am-repository-card",customElements.define(qi.TAG_NAME,qi);var Wi=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-repository-list",class extends x{connectedCallback(){this.init()}init(){return Wi(this,void 0,void 0,(function*(){const e=i("div",["am-u-flex","am-u-flex--gap"],{},this);i(Hi.TAG_NAME,[],{},e),i(Ui.TAG_NAME,[],{},e),i("p",[],{},this,m.text("repositoriesInfo")),this.listContainer=i("div",["am-l-grid"],{style:"--min: 24rem;"},this,"<am-spinner></am-spinner>"),this.renderList(),this.addListener(f(window,"AutomadRepositoriesChange",this.renderList.bind(this)))}))}renderList(){var e,t;return Wi(this,void 0,void 0,(function*(){const a=null!==(t=null===(e=yield Gt("PackageManagerController::getRepositoryCollection"))||void 0===e?void 0:e.data)&&void 0!==t?t:[];this.listContainer.innerHTML="",a.forEach((e=>{i(qi.TAG_NAME,[],{},this.listContainer).data=e}))}))}});var Ji=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-update-all-packages",class extends x{connectedCallback(){this.classList.add("am-u-display-none","am-e-button"),this.textContent=m.text("packagesUpdateAll"),this.init(),this.addListener(f(window,"AutomadPackagesUpdateCheck",this.init.bind(this))),f(this,"click",(()=>Ji(this,void 0,void 0,(function*(){const e=bt(m.text("packagesUpdatingAll"));e.open();const{error:t,success:a}=yield Gt("PackageManagerController::updateAll");t&&Ft(t),a&&Ut(a),e.close(),b("AutomadPackagesChange"),m.checkForOutdatedPackages()}))))}init(){return Ji(this,void 0,void 0,(function*(){const e=m.state.outdatedPackages>0;this.classList.toggle("am-u-display-none",!e)}))}});class Zi extends x{constructor(){super(...arguments),this.partials={}}init(){return _a(this.pageTitle),this.innerHTML=this.template(this.partials),this}}const Ki=({main:e,publishForm:t})=>Pt`<div class="am-l-dashboard"><div class="am-l-dashboard__navbar am-l-dashboard__navbar--left"><div class="am-c-navbar"><am-link am-target="${n.home}" class="am-c-navbar__item"><am-logo></am-logo></am-link><am-modal-toggle am-modal="#am-add-page-modal" class="am-c-navbar__item" am-tooltip="${m.text("addPage")}"><span>${m.text("new")}</span><i class="bi bi-plus-lg"></i></am-modal-toggle></div></div><div class="am-l-dashboard__navbar am-l-dashboard__navbar--right"><div class="am-c-navbar"><am-link am-target="${n.home}" class="am-u-display-medium am-c-navbar__item"><am-logo></am-logo></am-link><am-modal-toggle class="am-c-navbar__item am-u-display-medium-none" am-modal="#am-jumpbar-modal"><span> ${m.text("jumpbarButtonText")} </span><am-key-combo-badge am-key="J"></am-key-combo-badge></am-modal-toggle><span class="am-c-navbar__group"><am-navbar-update-indicator class="am-u-display-small-none"></am-navbar-update-indicator><am-navbar-outdated-packages-indicator class="am-u-display-small-none"></am-navbar-outdated-packages-indicator><am-navbar-debug-indicator class="am-u-display-small-none"></am-navbar-debug-indicator><am-undo-buttons class="am-u-display-small-none"></am-undo-buttons> ${t} <am-modal-toggle class="am-c-navbar__item am-u-display-medium" am-modal="#am-jumpbar-modal"><i class="bi bi-menu-button-wide"></i></am-modal-toggle><am-sidebar-toggle class="am-c-navbar__item am-u-display-medium"><i class="bi bi-list"></i></am-sidebar-toggle><am-dropdown class="am-u-display-medium-none" am-right><span class="am-c-navbar__item"><i class="bi bi-three-dots"></i></span><div class="am-c-dropdown__items"><span class="am-c-dropdown__content am-c-dropdown__divider"><am-dashboard-theme-toggle></am-dashboard-theme-toggle></span><am-modal-toggle class="am-c-dropdown__link" am-modal="#am-about-modal"><i class="bi bi-info-circle"></i><span>${m.text("aboutAutomad")}</span></am-modal-toggle><a href="https://automad.org" target="_blank" class="am-c-dropdown__link am-c-dropdown__divider"><i class="bi bi-book"></i><span>${m.text("documentation")}</span></a><am-link class="am-c-dropdown__link am-c-dropdown__divider" am-target="${n.system}?section=users"><i class="bi bi-people"></i><span>${m.text("systemUsers")}</span></am-link><span class="am-c-dropdown__label"> ${m.text("signedInAs")} ${m.user.name} </span><am-submit class="am-c-dropdown__link" am-form="SessionController::logout"><i class="bi bi-box-arrow-right"></i><span> ${m.text("signOut")} </span></am-submit></div></am-dropdown></span></div></div><am-sidebar-toggle class="am-l-dashboard__sidebar-backdrop"></am-sidebar-toggle><am-sidebar class="am-l-dashboard__sidebar"><div class="am-l-dashboard__sidebar-navbar"><div class="am-c-navbar"><am-modal-toggle am-modal="#am-add-page-modal" class="am-c-navbar__item" am-tooltip="${m.text("addPage")}"><span>${m.text("new")}</span><i class="bi bi-plus-lg"></i></am-modal-toggle></div></div><nav class="am-c-nav"><span class="am-c-nav__item"><a href="${m.baseIndex||"/"}" class="am-c-nav__link"><span class="am-c-icon-text"><i class="bi bi-window-desktop"></i><span am-bind="sitename" am-bind-to="textContent"> $${m.sitename} </span></span></a></span><am-nav-item am-page="${n.search}" am-icon="search" am-text="searchTitle"></am-nav-item><am-nav-item am-page="${n.system}" am-icon="sliders" am-text="systemTitle"></am-nav-item><am-nav-item am-page="${n.shared}" am-icon="asterisk" am-text="sharedTitle" am-publication-state="${m.sharedPublicationState}" ${Wt()==n.shared?'\n\t\t\t\t\t\t\t\tam-bind="publicationState"\n\t\t\t\t\t\t\t\tam-bind-to="am-publication-state"\n\t\t\t\t\t\t\t':""}></am-nav-item><am-nav-item am-page="${n.components}" am-icon="boxes" am-text="componentsTitle" am-publication-state="${m.componentsPublicationState}" ${Wt()==n.components?'\n\t\t\t\t\t\t\t\tam-bind="publicationState"\n\t\t\t\t\t\t\t\tam-bind-to="am-publication-state"\n\t\t\t\t\t\t\t':""}></am-nav-item><am-nav-item am-page="${n.packages}" am-icon="box-seam" am-text="packagesTitle" am-badge="am-sidebar-outdated-packages-indicator"></am-nav-item><am-nav-item am-page="${n.trash}" am-icon="trash3" am-text="trashTitle"></am-nav-item></nav><am-nav-tree></am-nav-tree><div class="am-c-nav am-u-display-medium"><span class="am-c-nav__item"><am-modal-toggle class="am-c-nav__link" am-modal="#am-about-modal"><i class="bi bi-info-circle"></i><span>${m.text("aboutAutomad")}</span></am-modal-toggle></span><span class="am-c-nav__item"><am-submit class="am-c-nav__link" am-form="SessionController::logout"><i class="bi bi-box-arrow-right"></i><span> ${m.text("signOut")} ${m.user.name} </span></am-submit></span><am-dashboard-theme-toggle></am-dashboard-theme-toggle></div></am-sidebar><div class="am-l-dashboard__main">${e}</div><footer class="am-l-dashboard__footer"><am-modal-toggle class="am-u-cursor-pointer am-u-flex am-u-flex--gap" am-modal="#am-about-modal"><span class="am-e-badge am-e-badge--muted"> ${m.version} </span></am-modal-toggle></footer></div><!-- Sign out form --><am-form am-api="SessionController::logout"></am-form><!-- Jumpbar Modal --><am-modal-jumpbar id="am-jumpbar-modal"></am-modal-jumpbar><!-- New Page Modal --><am-modal id="am-add-page-modal"><am-modal-dialog><am-form am-api="PageController::add"><am-modal-header>${m.text("addPage")}</am-modal-header><am-modal-body> ${dt("am-input-field",null,{key:`new-${m.reservedFields.TITLE}`,name:m.reservedFields.TITLE,label:ka(m.reservedFields.TITLE),value:m.text("newPageTitle")},[],{required:""}).outerHTML} <div class="am-c-field"><label class="am-c-field__label">${m.text("pageTemplate")}</label><am-page-template-select value=""></am-page-template-select></div> ${dt("am-toggle-large-field",null,{key:`new-${m.reservedFields.PRIVATE}`,name:m.reservedFields.PRIVATE,label:m.text("keepPagePrivate"),value:!0}).outerHTML} <div class="am-c-field"><label class="am-c-field__label">${m.text("selectTargetNewPage")}</label><am-page-select-tree></am-page-select-tree></div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("cancel")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("addPage")} </am-submit></am-modal-footer></am-form></am-modal-dialog></am-modal><!-- About Automad Modal --><am-modal id="am-about-modal"><am-modal-dialog class="am-c-modal__dialog--small"><am-modal-body><am-logo></am-logo><hr /> Automad is a modern flat-file content management system and templating engine <hr /><span class="am-u-flex am-u-flex--between"><a href="https://automad.org" target="_blank" class="am-u-text-link">Open Website</a><a href="https://automad.org/release-notes" class="am-e-badge" target="_blank"> ${m.version} </a></span></am-modal-body></am-modal-dialog></am-modal>`;class Xi extends Zi{constructor(){super(...arguments),this.template=Ki,this.partials={main:this.renderMainPartial(),publishForm:this.renderPublishForm()}}renderPublishForm(){return""}}customElements.define(Zt(n.components),class extends Xi{get pageTitle(){return m.text("componentsTitle")}renderMainPartial(){return Pt`<am-breadcrumbs-route am-target="${n.components}" am-text="${this.pageTitle}"></am-breadcrumbs-route><section class="am-c-components__sticky-section am-l-dashboard__section am-l-dashboard__section--sticky"><div class="am-l-dashboard__content am-l-dashboard__content--row am-u-flex--gap"><am-filter placeholder="componentFilter" am-target="${xi.TAG_NAME}"></am-filter><button class="${wi} am-e-button am-e-button--primary"> ${m.text("add")} </button></div></section><section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><div class="am-c-components__hint"><p>${m.text("componentsHint")}</p><button class="${wi} am-e-button am-e-button--primary"> ${m.text("newComponent")} </button></div><am-component-collection-form am-api="ComponentController::data"></am-component-collection-form></div></section>`}renderPublishForm(){return Pt`<am-component-publish-form></am-component-publish-form>`}});customElements.define(Zt(n.home),class extends Xi{get pageTitle(){return m.text("dashboardTitle")}renderMainPartial(){return Pt`<am-missing-email-alert></am-missing-email-alert><section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><div class="am-u-flex am-u-flex--column am-u-flex--gap-large"><div class="am-u-flex am-u-flex--gap am-u-flex--align-baseline"><h1 class="am-e-base-home-h1">${m.sitename}</h1><am-link class="am-u-text-muted" am-target="${n.shared}"><i class="bi bi-pencil"></i></am-link></div> ${Pt`<div class="am-u-flex am-u-flex--column am-u-flex--gap-large"><div class="am-u-flex am-u-flex--column"><am-icon-text am-icon="hdd-network" am-text="${location.hostname}" class="am-u-text-muted"></am-icon-text><am-icon-text am-icon="clock-history" am-text="${m.text("latestActivity")} ${g(m.siteMTime)}" class="am-u-text-muted"></am-icon-text><am-link am-target="${n.system}?section=cache"><am-system-cache-indicator></am-system-cache-indicator></am-link></div><div class="am-u-display-small"><a href="${m.baseIndex||"/"}" class="am-e-button"> ${m.text("inPageEdit")} </a></div><div class="am-f-group am-u-display-small-none"><a href="${m.baseIndex||"/"}" class="am-e-button am-f-group__item"> ${m.text("inPageEdit")} </a><am-modal-toggle am-modal="#am-server-info-modal" class="am-e-button am-f-group__item"> ${m.text("serverInfo")} </am-modal-toggle></div></div><am-modal id="am-server-info-modal"><am-modal-dialog><am-modal-header>${m.text("serverInfo")}</am-modal-header><am-modal-body><am-server-info></am-server-info></am-modal-body></am-modal-dialog></am-modal>`} <div><h2>${m.text("recentlyEditedPages")}</h2><div><am-recently-edited-pages></am-recently-edited-pages></div></div></div></div></section>`}});const Yi=({main:e})=>Pt`<div class="am-l-inpage"><div class="am-l-inpage__navbar"><nav class="am-c-navbar"><span class="am-c-navbar__group am-u-flex--gap"><a class="am-c-navbar__item" am-bind="inPageContextUrl" am-bind-to="href"><span am-bind="inPageTitle"></span></a><span class="am-e-badge" am-bind="inPageField"></span></span><span class="am-u-flex am-u-flex--gap am-u-flex--align-center"><span class="am-c-navbar__group"><am-undo-buttons class="am-u-display-small-none"></am-undo-buttons><am-submit class="am-e-button" am-form="InPageController::edit" disabled> ${m.text("save")} </am-submit><am-link href="${m.baseIndex||"/"}" class="am-c-navbar__item" am-bind="inPageReturnUrl" am-bind-to="am-external"><i class="bi bi-x"></i></am-link></span></span></nav></div><div class="am-l-inpage__main"><div class="am-l-inpage__content">${e}</div></div></div>`;customElements.define(Zt(n.inpage),class extends Zi{constructor(){super(...arguments),this.template=Yi,this.partials={main:this.renderMainPartial()}}get pageTitle(){return"InPage"}renderMainPartial(){return"<am-inpage-form></am-inpage-form>"}});const Qi=({main:e})=>Pt`<div class="am-l-centered"><div class="am-l-centered__navbar"><nav class="am-c-navbar"><a href="${m.baseIndex||"/"}" class="am-c-navbar__item"><am-logo></am-logo></a><a href="${m.baseIndex||"/"}" class="am-c-navbar__item" am-tooltip="${m.text("close")}"><i class="bi bi-x"></i></a></nav></div><div class="am-l-centered__main"><div class="am-l-centered__content">${e}</div></div></div>`;class es extends Zi{constructor(){super(...arguments),this.template=Qi,this.partials={main:this.renderMainPartial()}}}customElements.define(Zt(n.login),class extends es{get pageTitle(){return m.text("signIn")}renderMainPartial(){return Pt`<h2>$${m.sitename} &mdash; ${m.text("signIn")}</h2><am-form am-api="SessionController::login" am-focus am-enter><am-form-error></am-form-error><div class="am-c-card"><div class="am-c-card__form"><input class="am-f-input" type="text" name="name-or-email" placeholder="${m.text("usernameOrEmail")}" required /><input class="am-f-input" type="password" name="password" placeholder="${m.text("password")}" required /><div class="am-c-card__form-buttons"><am-link am-target="${n.resetpassword}" class="am-e-button"> ${m.text("forgotPassword")} </am-link><am-submit class="am-e-button am-e-button--primary"> ${m.text("signIn")} </am-submit></div></div></div></am-form>`}});customElements.define(Zt(n.packages),class extends Xi{get pageTitle(){return m.text("packagesTitle")}renderMainPartial(){const e=i("am-switcher-dropdown");return e.data={overview:{icon:"grid",section:"overview"},items:[{title:m.text("packagesSwitcherTitle"),section:"packages"},{title:m.text("repositoriesSwitcherTitle"),section:"repositories"}]},Pt`<am-breadcrumbs-route am-target="${n.packages}" am-text="${this.pageTitle}"></am-breadcrumbs-route> ${e.outerHTML} <section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><am-switcher-section name="overview"><p>${m.text("packagesOverview")}</p><div class="am-l-grid am-l-grid--auto" style="--min: 24rem;"><am-switcher-link class="am-c-card am-c-card--hover" am-section="packages"><span class="am-c-card__icon"><i class="bi bi-box-seam"></i></span><span class="am-c-card__title"> ${m.text("packagesSwitcherTitle")} </span><span class="am-c-card__body"><span class="am-u-text-limit-rows"> ${m.text("packagesInfo")} </span></span></am-switcher-link><am-switcher-link class="am-c-card am-c-card--hover" am-section="repositories"><span class="am-c-card__icon"><i class="bi bi-git"></i></span><span class="am-c-card__title"> ${m.text("repositoriesSwitcherTitle")} </span><span class="am-c-card__body"><span class="am-u-text-limit-rows"> ${m.text("repositoriesInfo")} </span></span></am-switcher-link></div></am-switcher-section><am-switcher-section name="packages"><p>${m.text("packagesInfo")}</p><am-package-list></am-package-list></am-switcher-section><am-switcher-section name="repositories"><am-repository-list></am-repository-list></am-switcher-section></div></section>`}});const ts=()=>Pt`<am-modal id="am-file-import-modal"><am-modal-dialog><am-form am-api="FileController::import" am-event="AutomadFilesChangeOnServer"><am-modal-body><div class="am-c-field"><input class="am-f-input" name="importUrl" type="text" placeholder="URL" /></div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("cancel")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("importFromUrl")} </am-submit></am-modal-footer></am-form></am-modal-dialog></am-modal>`,as=()=>Pt`<am-breadcrumbs-page></am-breadcrumbs-page>`,is=()=>Pt`<section class="am-l-dashboard__section am-l-dashboard__section--sticky"><div class="am-l-dashboard__content am-l-dashboard__content--row"><am-switcher><div class="am-c-menu am-u-display-small-none"><am-switcher-link class="am-c-menu__item" am-section="settings"> ${m.text("fieldsSettings")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="text"> ${m.text("fieldsContent")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="customizations"> ${m.text("fieldsCustomizations")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="files"> ${m.text("uploadedFiles")} <span class="am-e-badge"><am-file-count></am-file-count></span></am-switcher-link></div><am-dropdown class="am-u-display-small am-e-button"><span class="am-c-icon-text"><am-switcher-label></am-switcher-label><span class="am-e-dropdown-arrow"></span></span><div class="am-c-dropdown__items"><am-switcher-link class="am-c-dropdown__link" am-section="settings"> ${m.text("fieldsSettings")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="text"> ${m.text("fieldsContent")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="customizations"> ${m.text("fieldsCustomizations")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="files"> ${m.text("uploadedFiles")} </am-switcher-link></div></am-dropdown></am-switcher><am-filter placeholder="filterContent"></am-filter><am-private-indicator class="am-u-display-small-none"></am-private-indicator> ${(()=>{let e="";return"/"!=ra()&&(e=Pt`<am-form am-api="PageController::duplicate"><am-submit class="am-c-dropdown__link"><am-icon-text am-icon="files" am-text="${m.text("duplicatePage")}"></am-icon-text></am-submit></am-form><am-modal-toggle class="am-c-dropdown__link" am-modal="#am-move-page-modal"><am-icon-text am-icon="arrows-move" am-text="${m.text("movePage")}"></am-icon-text></am-modal-toggle><am-copy class="am-c-dropdown__link am-c-dropdown__divider" value="${ra()}"><am-icon-text am-icon="clipboard-plus" am-text="${m.text("copyUrlClipboard")}"></am-icon-text></am-copy><am-form am-api="PageController::delete" am-confirm="${m.text("confirmDeletePage")}"><am-submit class="am-c-dropdown__link"><am-icon-text am-icon="trash3" am-text="${m.text("deletePage")}"></am-icon-text></am-submit></am-form>`),Pt`<am-dropdown am-right><span class="am-c-menu__item"><span class="am-u-display-small-none">${m.text("more")}</span><span class="am-u-display-small-none am-e-dropdown-arrow"></span><span class="am-u-display-small am-e-button am-e-button--icon"><i class="bi bi-three-dots-vertical"></i></span></span><div class="am-c-dropdown__items"><am-modal-toggle class="am-c-dropdown__link" am-modal="#${ri.MODAL_ID}"><am-icon-text am-icon="clock-history" am-text="${m.text("pageHistory")}"></am-icon-text></am-modal-toggle><span class="am-c-dropdown__divider"></span><a href="${m.baseIndex}${ra()}" class="am-c-dropdown__link"><am-icon-text am-icon="pencil" am-text="${m.text("inPageEdit")}"></am-icon-text></a> ${e} </div></am-dropdown>`})()} </div></section>`;customElements.define(Zt(n.page),class extends Xi{get pageTitle(){return ra()}renderMainPartial(){return m.system.i18n&&"/"===ra()?Pt`${as()} <section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><am-alert am-icon="globe" am-text="i18nEnabled"></am-alert><am-link am-target="${n.system}?section=i18n" class="am-e-button"> ${m.text("systemI18n")} </am-link></div></section>`:Pt`${as()}${is()} <section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><am-page-data-form am-api="PageController::data"></am-page-data-form><am-switcher-section name="files"><am-upload></am-upload><div class="am-u-flex am-u-flex--gap"><am-modal-toggle class="am-e-button am-e-button--primary" am-modal="#am-file-import-modal"> ${m.text("importFromUrl")} </am-modal-toggle><am-dropdown class="am-u-display-small"><span class="am-e-button am-e-button--icon"><i class="bi bi-three-dots"></i></span><div class="am-c-dropdown__items"><am-file-collection-move class="am-c-dropdown__link" am-form="FileCollectionController::list"><am-icon-text am-icon="folder-symlink" am-text="${m.text("moveSelection")}"></am-icon-text></am-file-collection-move><am-file-collection-delete class="am-c-dropdown__link" am-form="FileCollectionController::list"><am-icon-text am-icon="trash3" am-text="${m.text("deleteSelection")}"></am-icon-text></am-file-collection-delete></div></am-dropdown><am-file-collection-move class="am-e-button am-u-display-small-none" am-form="FileCollectionController::list"> ${m.text("moveSelection")} </am-file-collection-move><am-file-collection-delete class="am-e-button am-e-button--danger am-u-display-small-none" am-form="FileCollectionController::list"> ${m.text("deleteSelection")} </am-file-collection-delete></div><am-file-collection-list-form am-api="FileCollectionController::list"></am-file-collection-list-form></am-switcher-section></div></section> ${"/"===ra()?"":Pt`<am-modal id="am-move-page-modal"><am-modal-dialog><am-form am-api="PageController::move"><am-modal-header>${m.text("movePage")}</am-modal-header><am-modal-body><div class="am-c-field"><label class="am-c-field__label"> ${m.text("selectTargetMovePage")} </label><am-page-select-tree am-hide-current></am-page-select-tree></div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("cancel")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("movePage")} </am-submit></am-modal-footer></am-form></am-modal-dialog></am-modal>`}${ts()} ${Pt`<am-history-modal-form></am-history-modal-form>`}`}renderPublishForm(){return Pt`<am-page-publish-form></am-page-publish-form>`}});customElements.define(Zt(n.resetpassword),class extends es{get pageTitle(){return m.text("resetPassword")}renderMainPartial(){return Pt`<am-reset-password-form am-api="UserController::resetPassword"></am-reset-password-form>`}});customElements.define(Zt(n.search),class extends Xi{get pageTitle(){return m.text("searchTitle")}renderMainPartial(){return Pt`<am-breadcrumbs-route am-target="${n.search}" am-text="${this.pageTitle}" am-narrow></am-breadcrumbs-route><section class="am-l-dashboard__section"><div class="am-l-dashboard__content am-l-dashboard__content--narrow"><am-search-form></am-search-form></div></section>`}});customElements.define(Zt(n.setup),class extends es{get pageTitle(){return"Create User"}renderMainPartial(){return Pt`<am-setup-form am-api="UserCollectionController::createFirstUser" am-focus am-enter></am-setup-form>`}});customElements.define(Zt(n.shared),class extends Xi{get pageTitle(){return m.text("sharedTitle")}renderMainPartial(){return Pt`<am-breadcrumbs-route am-target="${n.shared}" am-text="${this.pageTitle}"></am-breadcrumbs-route> ${Pt`<section class="am-l-dashboard__section am-l-dashboard__section--sticky"><div class="am-l-dashboard__content am-l-dashboard__content--row"><am-switcher><div class="am-c-menu am-u-display-small-none"><am-switcher-link class="am-c-menu__item" am-section="settings"> ${m.text("fieldsSettings")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="text"> ${m.text("fieldsContent")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="customizations"> ${m.text("fieldsCustomizations")} </am-switcher-link><am-switcher-link class="am-c-menu__item" am-section="files"> ${m.text("uploadedFiles")} <span class="am-e-badge"><am-file-count></am-file-count></span></am-switcher-link></div><am-dropdown class="am-u-display-small am-e-button"><span class="am-c-icon-text"><am-switcher-label></am-switcher-label><span class="am-e-dropdown-arrow"></span></span><div class="am-c-dropdown__items"><am-switcher-link class="am-c-dropdown__link" am-section="settings"> ${m.text("fieldsSettings")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="text"> ${m.text("fieldsContent")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="customizations"> ${m.text("fieldsCustomizations")} </am-switcher-link><am-switcher-link class="am-c-dropdown__link" am-section="files"> ${m.text("uploadedFiles")} </am-switcher-link></div></am-dropdown></am-switcher><am-filter placeholder="filterContent"></am-filter></div></section>`} <section class="am-l-dashboard__section"><div class="am-l-dashboard__content"><am-shared-data-form am-api="SharedController::data"></am-shared-data-form><am-switcher-section name="files"><am-upload></am-upload><div class="am-u-flex am-u-flex--gap"><am-modal-toggle class="am-e-button am-e-button--primary" am-modal="#am-file-import-modal"> ${m.text("importFromUrl")} </am-modal-toggle><am-dropdown class="am-u-display-small"><span class="am-e-button am-e-button--icon"><i class="bi bi-three-dots"></i></span><div class="am-c-dropdown__items"><am-file-collection-move class="am-c-dropdown__link" am-form="FileCollectionController::list"><am-icon-text am-icon="folder-symlink" am-text="${m.text("moveSelection")}"></am-icon-text></am-file-collection-move><am-file-collection-delete class="am-c-dropdown__link" am-form="FileCollectionController::list"><am-icon-text am-icon="trash3" am-text="${m.text("deleteSelection")}"></am-icon-text></am-file-collection-delete></div></am-dropdown><am-file-collection-move class="am-e-button am-u-display-small-none" am-form="FileCollectionController::list"> ${m.text("moveSelection")} </am-file-collection-move><am-file-collection-delete class="am-e-button am-e-button--danger am-u-display-small-none" am-form="FileCollectionController::list"> ${m.text("deleteSelection")} </am-file-collection-delete></div><am-file-collection-list-form am-api="FileCollectionController::list"></am-file-collection-list-form></am-switcher-section></div></section> ${ts()}`}renderPublishForm(){return Pt`<am-shared-publish-form></am-shared-publish-form>`}});const ss=()=>Pt`<div class="am-u-flex am-u-flex--column am-u-flex--gap-large"> ${m.isCloud?"":Pt`
						<am-form
							class="${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}"
							${"am-api"}="${"ConfigController::update"}"
							${"am-event"}="${"AutomadAppStateRequireUpdate"}"
							${"am-auto"}
						>
							<input type="hidden" name="type" value="cache" />
							<div>
								<p>${m.text("systemCacheInfo")}</p>
								<am-cache-enable></am-cache-enable>
							</div>
							<div class="am-cache-settings">
								<p>${m.text("systemCacheMonitorInfo")}</p>
								<am-cache-monitor></am-cache-monitor>
								<p>${m.text("systemCacheLifetimeInfo")}</p>
								<am-cache-lifetime></am-cache-lifetime>
							</div>
						</am-form>
					`} <am-form class="am-cache-settings" am-api="CacheController::clear"><p>${m.text("systemCacheClearInfo")}</p><am-submit class="am-e-button am-e-button--primary"> ${m.text("systemCacheClear")} </am-submit></am-form><am-form class="am-cache-settings" am-api="CacheController::purge"><p>${m.text("systemCachePurgeInfo")}</p><am-submit class="am-e-button"> ${m.text("systemCachePurge")} </am-submit></am-form></div>`,ns=()=>Pt`<am-form am-api="ConfigController::update" am-event="AutomadAppStateRequireUpdate" am-auto><input type="hidden" name="type" value="debug" /><div><p>${m.text("systemDebugInfo")}</p><am-debug-enable></am-debug-enable></div></am-form>`,os=()=>Pt`<am-form class="am-u-flex am-u-flex--column am-u-flex--gap-large" am-api="ConfigController::update" am-event="AutomadAppStateRequireUpdate" am-auto><input type="hidden" name="type" value="feed" /><div><p>${m.text("systemRssFeedInfo")}</p><am-feed-enable></am-feed-enable></div><div id="am-feed-settings"><p>${m.text("systemRssFeedUrl")}</p><div class="am-f-group"><input class="am-f-input am-u-flex__item-grow am-f-group__item" value="${m.feedURL}" disabled /><am-copy class="am-e-button am-e-button--icon am-f-group__item" value="${m.feedURL}" am-tooltip="${m.text("copyUrlClipboard")}"><i class="bi bi-clipboard"></i></am-copy></div><p>${m.text("systemRssFeedFields")}</p><am-feed-fields></am-feed-fields></div></am-form>`,ls=()=>Pt`<am-form am-api="ConfigController::update" am-event="AutomadAppStateRequireUpdate" am-auto><input type="hidden" name="type" value="i18n" /><div><p>${m.text("systemI18nInfo")}</p><am-i18n-enable></am-i18n-enable></div></am-form>`,rs=()=>Pt`<am-form am-api="ConfigController::update" am-event="AutomadAppStateRequireUpdate" am-auto><input type="hidden" name="type" value="translation" /><div><p>${m.text("systemLanguageInfo")}</p><am-language-select></am-language-select></div></am-form>`,cs=()=>Pt`<am-system-update-form am-api="SystemController::update"></am-system-update-form>`,ds=()=>Pt`<div class="am-u-flex am-u-flex--column am-u-flex--gap-large"><am-form am-api="UserController::edit" am-event="AutomadAppStateRequireUpdate" am-watch><am-form-error></am-form-error><span class="am-c-card"><span class="am-c-card__body am-c-card__body--large"> ${m.text("systemUsersInfo")} </span><span class="am-c-card__form am-u-flex am-u-flex--column am-u-flex--gap-large"><span class="am-u-flex am-u-flex--column"><am-user-name value="${m.user.name}"></am-user-name><am-user-email value="${m.user.email}"></am-user-email></span><span class="am-c-card__form-buttons"><am-submit class="am-e-button"><span>${m.text("save")}</span></am-submit><am-modal-toggle class="am-e-button am-e-button--primary" am-modal="#am-change-password-modal"><span> ${m.text("systemUsersChangePassword")} </span></am-modal-toggle></span></span></span></am-form><span class="am-c-card"><span class="am-c-card__body am-c-card__body--large"> ${m.text("systemUsersRegisteredInfo")} </span><span class="am-c-card__form"><span class="am-c-card__form-buttons"><am-modal-toggle class="am-e-button" am-modal="#am-registered-users-modal"><span class="am-c-icon-text"><span class="am-u-flex am-u-flex--align-center am-u-flex--gap"><span> ${m.text("systemUsersRegistered")} </span><span class="am-e-badge"><am-user-count-indicator></am-user-count-indicator></span></span></span></am-modal-toggle></span><span class="am-c-card__form-buttons"><am-modal-toggle class="am-e-button" am-modal="#am-add-user-modal"><span>${m.text("systemUsersAdd")}</span></am-modal-toggle><am-modal-toggle class="am-e-button" am-modal="#am-invite-user-modal"><span>${m.text("systemUsersInvite")}</span></am-modal-toggle></span></span></span></div><!-- Modals --><am-modal id="am-change-password-modal"><am-form class="am-c-modal__dialog" am-api="UserController::changePassword"><am-modal-header> ${m.text("systemUsersChangePassword")} </am-modal-header><am-modal-body><am-form-error></am-form-error><div> ${dt("am-password-field",null,{key:"currentPassword",value:"",name:"currentPassword",label:m.text("currentPassword")},[],{}).outerHTML} ${dt("am-password-field",null,{key:"newPassword1",value:"",name:"newPassword1",label:m.text("newPassword")},[],{}).outerHTML} ${dt("am-password-field",null,{key:"newPassword2",value:"",name:"newPassword2",label:m.text("repeatPassword")},[],{}).outerHTML} </div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("close")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("save")} </am-submit></am-modal-footer></am-form></am-modal><am-modal id="am-registered-users-modal" nofocus><am-modal-dialog><am-modal-header> ${m.text("systemUsersRegistered")} </am-modal-header><am-modal-body><am-delete-users-form am-api="UserCollectionController::edit" am-event="AutomadAppStateRequireUpdate" am-watch></am-delete-users-form></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("close")} </am-modal-close><am-submit class="am-e-button am-e-button--danger" am-form="UserCollectionController::edit" disabled> ${m.text("deleteSelection")} </am-submit></am-modal-footer></am-modal-dialog></am-modal><am-modal id="am-add-user-modal"><am-form class="am-c-modal__dialog" am-api="UserCollectionController::createUser" am-event="AutomadAppStateRequireUpdate"><am-modal-header> ${m.text("systemUsersAdd")} </am-modal-header><am-modal-body><am-form-error></am-form-error><div><am-user-name></am-user-name><am-user-email></am-user-email> ${dt("am-password-field",null,{key:"password1",id:"am-field__create-password1",value:"",name:"password1",label:m.text("password")},[],{required:""}).outerHTML} ${dt("am-password-field",null,{key:"password2",id:"am-field__create-password2",value:"",name:"password2",label:m.text("repeatPassword")},[],{required:""}).outerHTML} </div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("close")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("systemUsersAdd")} </am-submit></am-modal-footer></am-form></am-modal><am-modal id="am-invite-user-modal"><am-form class="am-c-modal__dialog" am-api="UserCollectionController::inviteUser" am-event="AutomadAppStateRequireUpdate"><am-modal-header> ${m.text("systemUsersInvite")} </am-modal-header><am-modal-body><am-form-error></am-form-error><div><am-user-name></am-user-name><am-user-email></am-user-email></div></am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("close")} </am-modal-close><am-submit class="am-e-button am-e-button--primary"> ${m.text("systemUsersSendInvitation")} </am-submit></am-modal-footer></am-form></am-modal>`,ms=()=>`<p>${m.text("systemMailInfo")}</p><div class="am-u-flex am-u-flex--column am-u-flex--gap-large"><am-mail-config-form am-api="MailConfigController::save" am-event="AutomadAppStateRequireUpdate"></am-mail-config-form><am-form am-api=MailConfigController::test><am-submit class="am-e-button"> ${m.text("systemMailSendTest")} </am-submit></am-form></div>`;customElements.define(Zt(n.system),class extends Xi{constructor(){super(...arguments),this.sectionData=null}get pageTitle(){return m.text("systemTitle")}get menuData(){const e=[];return this.sectionData.forEach((t=>{e.push({title:t.title,section:t.section})})),{overview:{icon:"grid",section:"overview"},items:e}}renderMainPartial(){const e=i("am-switcher-dropdown",[],{"am-narrow":""});return this.sectionData=(()=>{const e=m.isCloud?[]:[{section:"mail",icon:"envelope-at",title:m.text("systemMail"),info:m.text("systemMailCardInfo"),state:"<am-system-mail-indicator></am-system-mail-indicator>",render:ms,narrowIcon:!1}],t=m.isCloud?[]:[{section:"debug",icon:"bug",title:m.text("systemDebug"),info:m.text("systemDebugCardInfo"),state:"<am-system-debug-indicator></am-system-debug-indicator>",render:ns}];return[{section:"cache",icon:"device-ssd",title:m.text("systemCache"),info:m.text("systemCacheCardInfo"),state:"<am-system-cache-indicator></am-system-cache-indicator>",render:ss,narrowIcon:!0},{section:"users",icon:"person-badge",title:m.text("systemUsers"),info:m.text("systemUsersCardInfo"),state:Pt`<span class="am-u-text-muted"> ${m.text("systemUsersRegistered")}: <am-user-count-indicator></am-user-count-indicator></span>`,render:ds,narrowIcon:!0},{section:"feed",icon:"rss",title:m.text("systemRssFeed"),info:m.text("systemRssFeedCardInfo"),state:"<am-system-feed-indicator></am-system-feed-indicator>",render:os},...e,{section:"i18n",icon:"globe",title:m.text("systemI18n"),info:m.text("systemI18nCardInfo"),state:"<am-system-i18n-indicator></am-system-i18n-indicator>",render:ls},{section:"language",icon:"translate",title:m.text("systemLanguage"),info:m.text("systemLanguageCardInfo"),state:Pt`<span class="am-u-text-muted"> ${Object.keys(m.languages).find((e=>m.languages[e]==m.system.translation))} </span>`,render:rs},...t,{section:"update",icon:"arrow-repeat",title:m.text("systemUpdate"),info:m.text("systemUpdateCardInfo"),state:"<am-system-update-indicator></am-system-update-indicator>",render:cs}]})(),e.data=this.menuData,Pt`<am-breadcrumbs-route am-target="${n.system}" am-text="${this.pageTitle}" am-narrow></am-breadcrumbs-route> ${e.outerHTML} <section class="am-l-dashboard__section"><div class="am-l-dashboard__content am-l-dashboard__content--narrow"> ${this.renderSections()}${this.renderOverviewSection()} </div></section>`}renderSections(){let e="";return this.sectionData.forEach((t=>{e+=Pt`<am-switcher-section name="${t.section}"> ${t.render()} </am-switcher-section>`})),e}renderOverviewSection(){return Pt`<am-switcher-section name="overview"><div class="am-l-grid" style="--min: 17rem;"> ${this.renderOverviewCards(this.sectionData.slice(0,2))} </div><div class="am-l-grid" style="--min: ${m.isCloud?"17":"13"}rem;"> ${this.renderOverviewCards(this.sectionData.slice(2,8))} </div></am-switcher-section>`}renderOverviewCards(e){let t="";return e.forEach((e=>{t+=Pt`<am-switcher-link class="am-c-card am-c-card--hover" am-section="${e.section}"><div class="am-u-flex__item-grow"><span class="am-c-card__icon am-u-display-small-none ${e.narrowIcon?"am-c-card__icon--narrow":""}"><i class="bi bi-${e.icon}"></i></span><div class="am-c-card__title">${e.title}</div><div class="am-c-card__body">${e.info}</div></div> ${e.state?`<div class="am-c-card__state">${e.state}</div>`:""} </am-switcher-link>`})),t}});customElements.define(Zt(n.trash),class extends Xi{get pageTitle(){return m.text("trashTitle")}renderMainPartial(){return Pt`<am-breadcrumbs-route am-target="${n.trash}" am-text="${this.pageTitle}" am-narrow></am-breadcrumbs-route><section class="am-l-dashboard__section am-l-dashboard__section--sticky"><div class="am-l-dashboard__content am-l-dashboard__content--narrow am-l-dashboard__content--row am-u-flex--gap"><am-filter placeholder="trashFilter"></am-filter><am-form am-api="PageTrashController::clear" am-confirm="${m.text("trashClearConfirm")}"><am-submit class="am-e-button am-e-button--danger"> ${m.text("trashClear")} </am-submit></am-form></div></section><section class="am-l-dashboard__section"><div class="am-l-dashboard__content am-l-dashboard__content--narrow"><am-trash-form></am-trash-form></div></section>`}});class us extends x{static toggle(e){const t=null!=e?e:!us.open;document.body.classList.toggle("am-body-sidebar-open",t),document.body.classList.toggle("am-u-overflow-hidden",t),us.open=t}connectedCallback(){this.setHeight(),setTimeout(this.setHeight.bind(this),0),this.addListener(f(window,"resize",o(this.setHeight.bind(this),200)))}setHeight(){this.style.setProperty("height",`${window.innerHeight}px`)}}us.open=!1,customElements.define("am-sidebar",us);customElements.define("am-sidebar-toggle",class extends x{connectedCallback(){this.addListener(f(this,"click",(()=>{us.toggle()})))}});class hs extends x{static get observedAttributes(){return["am-section"]}connectedCallback(){this.addListener(f(window,"AutomadSwitcherChange",this.toggle.bind(this))),this.addListener(f(this,"click",this.select.bind(this)))}toggle(){this.classList.toggle("am-active",this.elementAttributes["am-section"]==ps())}select(){m.navigationIsLocked||gs(this.elementAttributes["am-section"])}}hs.TAG_NAME="am-switcher-link",customElements.define(hs.TAG_NAME,hs);const ps=()=>ca("section"),gs=e=>{ha("section",e),b("AutomadSwitcherChange")};customElements.define("am-switcher",class extends x{connectedCallback(){setTimeout((()=>{this.onChange(),window.dispatchEvent(new Event("AutomadSwitcherChange"))}),0),this.addListener(f(window,"AutomadSwitcherChange",this.onChange.bind(this)))}onChange(){let e=ps();const t=[];r(hs.TAG_NAME,this).forEach((e=>{t.push(e.getAttribute("am-section"))})),-1==t.indexOf(e)&&gs(t[0]),l("html").scrollTop=0,sa.new()}});customElements.define("am-switcher-dropdown",class extends x{set data(e){this.init(e)}connectedCallback(){this.classList.add("am-l-dashboard__section","am-l-dashboard__section--sticky");const e=()=>{this.classList.toggle("am-u-display-none","overview"==ps())};this.addListener(f(window,"AutomadSwitcherChange",e.bind(this))),e()}init(e){const t=i("div",["am-l-dashboard__content","am-l-dashboard__content--row",...this.hasAttribute("am-narrow")?["am-l-dashboard__content--narrow"]:[]],{},this),a=i("am-switcher",["am-f-group","am-u-flex__item-grow"],{},t);i("am-switcher-link",["am-f-group__item","am-e-button","am-e-button--icon"],{"am-section":e.overview.section},a).innerHTML=`<i class="bi bi-${e.overview.icon}"></i>`;const s=i("am-dropdown",["am-u-flex__item-grow","am-u-flex"],{},a);i("am-switcher-label",["am-f-group__item","am-u-flex__item-grow","am-f-group__item","am-f-select"],{},s);const n=i("div",["am-c-dropdown__items"],{},s);e.items.forEach((e=>{n.innerHTML+=Pt`<am-switcher-link class="am-c-dropdown__link" am-section="${e.section}"> ${e.title} </am-switcher-link>`}))}});customElements.define("am-switcher-label",class extends x{connectedCallback(){const e=()=>`${hs.TAG_NAME}[am-section="${ps()}"]`;this.addListener(f(window,"AutomadSwitcherChange",(()=>{this.innerHTML=(l(`.am-c-dropdown__items ${e()}`)||l(`.am-c-menu ${e()}`)||l(e())).innerHTML})))}});customElements.define("am-switcher-section",class extends x{static get observedAttributes(){return["name"]}connectedCallback(){this.classList.add("am-c-switcher-section"),this.toggle(),this.addListener(f(window,"AutomadSwitcherChange",this.toggle.bind(this)))}toggle(){this.classList.toggle("am-c-switcher-section--active",this.elementAttributes.name==ps()),l("html").scrollTop=0}});customElements.define("am-cache-enable",class extends x{connectedCallback(){const e=new u("cacheEnabled",{initial:m.system.cache.enabled});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.cache.enabled}))),dt("am-toggle-large-field",this,{key:"cacheEnabled",value:m.system.cache.enabled,name:"cacheEnabled",label:m.text("systemCacheEnable")},[],{"am-toggle":".am-cache-settings","am-bind":"cacheEnabled","am-bind-to":"checked"})}});customElements.define("am-cache-lifetime",class extends x{connectedCallback(){const e=new u("cacheLifetime",{initial:m.system.cache.lifetime});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.cache.lifetime}))),ft([{value:3600,text:"1 h"},{value:21600,text:"6 h"},{value:43200,text:"12 h"},{value:86400,text:"24 h"}],`${m.system.cache.lifetime}`,this,"cacheLifetime","",m.text("systemCacheLifetime"),["am-f-select--inline"],{"am-bind":"cacheLifetime","am-bind-to":"value"})}});customElements.define("am-cache-monitor",class extends x{connectedCallback(){const e=new u("cacheMonitorDelay",{initial:m.system.cache.monitorDelay});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.cache.monitorDelay}))),ft([{value:60,text:"1 min"},{value:120,text:"2 min"},{value:300,text:"5 min"},{value:600,text:"10 min"}],`${m.system.cache.monitorDelay}`,this,"cacheMonitorDelay","",m.text("systemCacheMonitor"),["am-f-select--inline"],{"am-bind":"cacheMonitorDelay","am-bind-to":"value"})}});customElements.define("am-debug-enable",class extends x{connectedCallback(){const e=new u("debugEnabled",{initial:m.system.debug});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.debug}))),dt("am-toggle-large-field",this,{key:"debugEnabled",value:m.system.debug,name:"debugEnabled",label:m.text("systemDebugEnable")},[],{"am-bind":"debugEnabled","am-bind-to":"checked"})}});customElements.define("am-feed-enable",class extends x{connectedCallback(){const e=new u("feedEnabled",{initial:m.system.feed.enabled});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.feed.enabled}))),dt("am-toggle-large-field",this,{key:"feedEnabled",value:m.system.feed.enabled,name:"feedEnabled",label:m.text("systemRssFeedEnable")},[],{"am-bind":"feedEnabled","am-bind-to":"checked","am-toggle":"#am-feed-settings"})}});customElements.define("am-feed-fields",class extends x{connectedCallback(){const e=new u("feedFields",{initial:JSON.stringify(m.system.feed.fields)});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=JSON.stringify(m.system.feed.fields)}))),dt("am-feed-field-select-field",this,{key:"feedFields",value:JSON.stringify(m.system.feed.fields),name:"feedFields"},[],{"am-bind":"feedFields","am-bind-to":"value"})}});customElements.define("am-i18n-enable",class extends x{connectedCallback(){const e=new u("i18nEnabled",{initial:m.system.i18n});this.addListener(f(window,"AutomadAppStateChange",(()=>{e.value=m.system.i18n}))),dt("am-toggle-large-field",this,{key:"i18nEnabled",value:m.system.i18n,name:"i18nEnabled",label:m.text("systemI18nEnable")},[],{"am-bind":"i18nEnabled","am-bind-to":"checked"})}});customElements.define("am-language-select",class extends x{connectedCallback(){const e=[];for(const[t,a]of Object.entries(m.languages))e.push({text:t,value:a});ft(e,m.system.translation,this,"translation","","",["am-f-select--inline"])}});customElements.define("am-user-email",class extends x{connectedCallback(){var e;this.classList.add("am-c-field"),dt("am-email-field",this,{id:$a(),key:"email",value:null!==(e=this.getAttribute("value"))&&void 0!==e?e:"",name:"email",label:m.text("email")},[],{"am-error":m.text("emailRequiredError"),required:""})}});customElements.define("am-user-name",class extends x{connectedCallback(){var e;this.classList.add("am-c-field"),dt("am-input-field",this,{id:$a(),key:"username",value:null!==(e=this.getAttribute("value"))&&void 0!==e?e:"",name:"username",label:m.text("username")},[],{pattern:"^[a-z0-9]([a-z0-9_]|-)+[a-z0-9]$",required:"","am-error":m.text("invalidUsernameError")})}});customElements.define("am-alert",class extends x{static get observedAttributes(){return["am-icon","am-text"]}connectedCallback(){const e=this.elementAttributes["am-icon"],t=this.elementAttributes["am-text"];this.classList.add("am-c-alert"),this.innerHTML=Pt`<div class="am-c-alert__icon"><i class="bi bi-${e||"fire"}"></i></div><div class="am-c-alert__text">${m.text(t)||t}</div>`}});customElements.define("am-autocomplete-url",class extends Ii{get data(){return(()=>{const e=[],t=Object.values(m.pages);return t.sort(((e,t)=>e.lastModified<t.lastModified?1:t.lastModified<e.lastModified?-1:0)),t.forEach((t=>{e.push({value:t.url,title:t.title})})),e})()}createItemElement(e){return i("a",[this.linkClass],{},null,Pt`<am-icon-text am-icon="link" am-text="$${e.title}"></am-icon-text>`)}});customElements.define("am-checkbox",class extends x{connectedCallback(){this.render(),this.removeAttribute("name"),this.removeAttribute("checkbox");const e=()=>{this.closest(".am-c-card").classList.toggle("am-c-card--active",l("input",this).checked)};f(this,"input",e,"input"),e()}render(){this.classList.add("am-f-checkbox"),i("label",[],{},this,Pt`<input type="checkbox" name="${this.getAttribute("name")}" ${this.hasAttribute("checked")?"checked":""} ${this.hasAttribute("value")?`value="${this.getAttribute("value")}"`:""} /><i class="bi"></i>`),this.removeAttribute("checked"),this.removeAttribute("name"),this.removeAttribute("value")}});var bs=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-copy",class extends x{static get observedAttributes(){return["value"]}connectedCallback(){f(this,"click",(()=>bs(this,void 0,void 0,(function*(){yield navigator.clipboard.writeText(this.elementAttributes.value),Ut(this.elementAttributes.value)}))))}});customElements.define("am-custom-icon-checkbox",class extends x{get checked(){return l("input",this).checked}connectedCallback(){this.classList.add("am-f-custom-icon-checkbox"),i("label",[],{},this,Pt`<input type="checkbox" name="${this.getAttribute("name")}" value="1" ${this.hasAttribute("checked")?"checked":""} /><span><i class="bi bi-${this.getAttribute("am-icon")}"></i></span>`),this.removeAttribute("am-icon"),this.removeAttribute("name"),this.removeAttribute("checked")}});customElements.define("am-dashboard-theme-toggle",class extends x{constructor(){super(...arguments),this.renderThemeToggle=(e,t)=>{const a=["am-c-dashboard-theme-toggle__button"];e==Qt()&&a.push("am-c-dashboard-theme-toggle__button--active");const s=`${ka(e.replace("-"," "))} Theme`,n=i("span",a,{"am-tooltip":s},this);n.innerHTML=`<i class="bi bi-${t}"></i>`,f(n,"click",(()=>{setTimeout((()=>{(e=>{localStorage.setItem(Yt,e),ea(e),b("AutomadDashboardThemeChange")})(e),this.render()}),400)}))}}connectedCallback(){this.classList.add("am-c-dashboard-theme-toggle"),this.render(),this.addListener(f(window,"AutomadDashboardThemeChange",this.render.bind(this)))}render(){document.documentElement.classList.add("am-u-no-transition"),this.innerHTML="",this.renderThemeToggle(Xt.light,"sun-fill"),this.renderThemeToggle(Xt.dark,"moon-stars"),this.renderThemeToggle(Xt.lowContrast,"shadows"),setTimeout((()=>{document.documentElement.classList.remove("am-u-no-transition")}),800)}});class fs extends x{connectedCallback(){this.classList.add("am-c-dropdown"),this.classList.toggle("am-c-dropdown--right",this.hasAttribute("am-right")),this.addListener(f(window,"click",(e=>{e.target===this||c(fs.TAG_NAME,e.target).includes(this)?this.classList.toggle("am-c-dropdown--open"):this.classList.remove("am-c-dropdown--open")})))}}fs.TAG_NAME="am-dropdown",customElements.define(fs.TAG_NAME,fs);const vs={twitter:{cls:["twitter-tweet","tw-align-center"],script:"https://platform.twitter.com/widgets.js",getId:e=>`https://platform.twitter.com/embed/Tweet.html?id=${e.split(/\//).pop()}`},imgur:{cls:["imgur-embed-pub"],script:"https://s.imgur.com/min/embed.js",getId:e=>e.replace(/^.+\/imgur.com\//,"")}};customElements.define("am-embed-service",class extends x{get type(){return this.getAttribute("type")}get src(){return this.getAttribute("src")}connectedCallback(){const e=vs[this.type];e&&(this.classList.add("am-u-flex","am-u-flex--center"),this.innerHTML="",i("blockquote",e.cls,{"data-id":e.getId(this.src)},this,Pt`<a href="${this.src}"></a>`),setTimeout((()=>{i("script",[],{src:e.script,async:"",charset:"utf-8"},this)}),500))}});customElements.define("am-filter",class extends x{static get observedAttributes(){return["placeholder"]}get targetSelector(){return this.getAttribute("am-target")||"section [am-api] .am-c-field:not(am-title-field):not(.am-c-card .am-c-field), .am-c-card"}connectedCallback(){const e=this.render();this.classList.add("am-c-filter"),f(e,"input",o((()=>{this.filter(e)}),200)),this.addListener(f(window,"AutomadSwitcherChange",(()=>{e.value="",this.filter(e)}))),this.addListener(wa("k",(()=>{e.focus()}))),f(e,"keydown",(t=>{27==t.keyCode&&e.blur()}))}filter(e){const t=e.value.toLowerCase().split(" ");r(this.targetSelector).forEach((e=>{for(var a=!1,i=0;i<t.length;i++)if(-1==e.textContent.toLowerCase().indexOf(t[i])){a=!0;break}e.classList.toggle("am-u-display-none",a)}))}render(){const e=m.text(this.elementAttributes.placeholder),t=i("input",["am-c-filter__input","am-f-input"],{placeholder:e},this),a=i("span",["am-c-filter__key-combo"],{},this);return i("am-key-combo-badge",[],{"am-key":"K"},a),t}});customElements.define("am-icon-text",class extends x{connectedCallback(){const e=this.getAttribute("am-icon"),t=this.getAttribute("am-text");this.removeAttribute("am-icon"),this.removeAttribute("am-text"),e&&t&&(this.classList.add("am-c-icon-text"),i("i",["bi",`bi-${e}`],{},this),i("span",[],{},this).textContent=t)}});var xs=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-image-picker",class extends x{constructor(){super(...arguments),this.binding=null}static get observedAttributes(){return["am-page","am-label","am-binding-name"]}connectedCallback(){this.binding=p.get(this.elementAttributes["am-binding-name"]),this.init(),this.addListener(f(window,"AutomadFilesChangeOnServer",this.init.bind(this)))}init(){var e;return xs(this,void 0,void 0,(function*(){this.classList.add("am-c-field"),this.elementAttributes["am-label"]&&(i("label",["am-c-field__label"],{},this).textContent=this.elementAttributes["am-label"],this.removeAttribute("am-label")),this.wrapper=null!==(e=this.wrapper)&&void 0!==e?e:i("div",[],{},this,"<am-spinner></am-spinner>");const{data:t}=yield Gt("ImageCollectionController::list",{url:this.elementAttributes["am-page"]||""});this.wrapper.innerHTML="";const{images:a}=t;a.length?this.renderGrid(a,this.wrapper):this.wrapper.innerHTML=Pt`<am-icon-text am-icon="folder-x" am-text="${m.text("noImagesFound")}"></am-icon-text>`}))}renderGrid(e,t){const a=i("div",["am-c-image-picker"],{},t),s=this.elementAttributes["am-page"]?"":"/shared/",n=this.closest("am-modal")||null;e.forEach((e=>{const t=i("img",["am-c-image-picker__image"],{src:e.thumbnail,value:`${s}${e.name}`,"am-tooltip":e.name},a);f(t,"click",(()=>{this.binding.value=t.getAttribute("value"),n&&n.close()}))}))}});customElements.define("am-key-combo-badge",class extends x{static get observedAttributes(){return["am-key"]}connectedCallback(){this.classList.add("am-e-key-combo");const e=ya();this.textContent=`${e} + ${this.elementAttributes["am-key"]}`,this.removeAttribute("am-key")}});customElements.define("am-link",class extends x{static get observedAttributes(){return["am-target","am-external"]}connectedCallback(){f(this,"click",(e=>{if(this.elementAttributes["am-external"])return void(window.location.href=this.elementAttributes["am-external"]);if(m.navigationIsLocked)return;const t=`${window.location.origin}${m.dashboardURL}/`,a=new URL(this.elementAttributes["am-target"],t);e.stopImmediatePropagation(),m.root.setView(a)}))}});customElements.define("am-logo",class extends x{connectedCallback(){this.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="994px" height="1170px" viewBox="0 0 994 1170" style="enable-background:new 0 0 994 1170" preserveAspectRatio="xMinYMin meet" xml:space="preserve" fill="currentColor"> <path d="M626.1,345.8L60.7,567.5l-57.4-143L269.6,4.7H724l266.7,419.8l-78.5,195.4L626.1,345.8z M876.2,452.9l7.4-18.5\n\t\tl-96.4-151.8l-62.9,24.7L876.2,452.9z M114.1,443.7l620.8-243.4l-63.4-99.9H322.2L110.4,434.4L114.1,443.7z"/> <path d="M300.7,1165.3l-48.3-120.2l-224.6,62.6l-25.7-92.2l307.2-85.6l56.1,139.7h262.8l56.2-139.7l307.4,85.6\n\t\tl-25.7,92.2l-224.9-62.6l-48.3,120.2H300.7z"/> </svg> '}});customElements.define("am-maintenance",class extends x{connectedCallback(){ea(Qt());const e=this.getAttribute("base-index");this.setAttribute("hidden",""),setTimeout((()=>{const t=this.innerHTML;this.innerHTML=Pt`<div class="am-l-centered"><div class="am-l-centered__navbar"><nav class="am-c-navbar"><a href="${e||"/"}" class="am-c-navbar__item"><am-logo></am-logo></a><a href="${e||"/"}" class="am-c-navbar__item"><i class="bi bi-x"></i></a></nav></div><div class="am-l-centered__main"><div class="am-l-centered__content"><div class="am-c-card"><div class="am-c-card__icon"><i class="bi bi-cup-hot-fill"></i></div><div class="am-c-card__body am-c-card__body--large"> ${t} </div></div></div></div></div>`,this.removeAttribute("hidden")}),0),setInterval((()=>{window.location.reload()}),1e4)}});customElements.define("am-missing-email-alert",class extends x{connectedCallback(){if(m.user.email)return;const e=`missing-email-notified-${m.user.name.replace(/[^\w\-\_]+/g,"-").toLowerCase()}`;if(localStorage.getItem(e))return;const t=i(y.TAG_NAME,[],{"am-no-esc":"","am-no-click":"","am-destroy":""},xa(),Pt`<am-modal-dialog><am-modal-header> ${m.text("missingEmailAlertTitle")} </am-modal-header><am-modal-body> ${m.text("missingEmailAlertBody")} </am-modal-body><am-modal-footer><am-modal-close class="am-e-button"> ${m.text("missingEmailAlertIgnore")} </am-modal-close><a class="am-e-button am-e-button--primary" href="${m.dashboardURL}/${n.system}?section=users"> ${m.text("missingEmailAlertOpenSettings")} </a></am-modal-footer></am-modal-dialog>`);f(l("am-modal-footer am-modal-close",t),"click",(()=>{localStorage.setItem(e,"ignore")})),t.open()}});class ys extends x{static get observedAttributes(){return["am-page","am-icon","am-text","am-badge"]}connectedCallback(){this.classList.add("am-c-nav__item"),this.classList.toggle("am-c-nav__item--active",(e=>{const t=new RegExp(`/${e}$`,"i");return null!=window.location.pathname.match(t)})(this.elementAttributes["am-page"])),this.innerHTML=this.render(),ys.observedAttributes.forEach((e=>{this.removeAttribute(e)}))}render(){const e=this.elementAttributes["am-badge"],t=this.elementAttributes["am-icon"],a=this.elementAttributes["am-page"],i=this.elementAttributes["am-text"];return Pt`<am-link am-target="${a}" class="am-c-nav__link"><span class="am-c-icon-text"><i class="bi bi-${t}"></i><span>${m.text(i)}</span> ${e?`<${e}></${e}>`:""} </span></am-link>`}}customElements.define("am-nav-item",ys);var ws=a(616),_s=a.n(ws);const ks=e=>{const t=$s(e),a=(e,i)=>{const s=t[e.url]||[],n=[],o=e;return s.sort(((e,t)=>e.index>t.index?1:t.index>e.index?-1:0)),s.forEach((e=>{a(e,n)})),i.push({data:o,nodes:n}),i};return a(m.pages["/"],[])},$s=e=>{const t={};return e.forEach((e=>{const a=e.parentUrl;a&&(void 0===t[a]&&(t[a]=[]),t[a].push(e))})),t},Cs={tree:"am-c-tree",node:"am-c-tree__node",nodeHover:"am-c-tree__node--hover",nodeDragging:"am-c-tree__node--dragging",nodeDropBefore:"am-c-tree__node--drop-before",nodeDropInside:"am-c-tree__node--drop-inside",nodeDropAfter:"am-c-tree__node--drop-after",label:"am-c-tree__label",subnodes:"am-c-tree__subnodes",collapse:"am-c-tree__collapse"};var As=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};const Ts=e=>{e.error&&Ft(e.error),e.reload&&m.reload(),e.redirect&&m.root.setView(e.redirect)},Ls=e=>{const t=e.url==ra()?"am-c-nav__item--active":"",a=m.system.i18n&&"/"===e.url?"globe":m.system.i18n&&"/"===e.parentUrl?"translate":e.private?"eye-slash-fill":"file-earmark-text",i=t?'am-bind="title" am-bind-to="textContent"':"",s=t?'am-bind="publicationState" am-bind-to="am-publication-state"':"";return Pt`<span class="am-c-nav__item ${t}" title="${e.url}" am-publication-state="${e.publicationState}" ${s}><am-link class="am-c-nav__link" am-target="${n.page}?url=${encodeURIComponent(e.url)}"><i class="bi bi-${a}"></i><span> ${m.system.i18n&&"/"===e.parentUrl?`${e.url.replace("/","")} &mdash; `:""}<span ${i}>$${e.title}</span></span></am-link></span>`},Es=e=>As(void 0,void 0,void 0,(function*(){const{movedNode:t,targetParentNode:a,srcParentNode:i}=e,s=a.data,n=i.data,o=t.data.url,c=[],d=r("sortable-tree-node",l(Ms.TAG_NAME)),u=e=>{d.forEach((t=>{t.setAttribute("draggable",e)}))};if(u("false"),a.subnodesData.forEach((e=>{c.push(e.path)})),s.path!=n.path){const e=m.addNavigationLock(),t=s.url,a=yield Gt("PageController::move",{url:o,targetPage:t,layout:JSON.stringify(c)});return u("true"),m.removeNavigationLock(e),void Ts(a)}const h=m.addNavigationLock(),p=s.path,g=yield Gt("PageController::updateIndex",{url:o,parentPath:p,layout:JSON.stringify(c)});u("true"),m.removeNavigationLock(h),Ts(g)})),Ss=()=>As(void 0,void 0,void 0,(function*(){return!m.navigationIsLocked})),Ps=o((e=>{e.target.closest("sortable-tree-node").collapse(!1)}),1200);class Ms extends x{connectedCallback(){this.addListener(f(window,"AutomadAppStateChange",this.init.bind(this))),this.init(),f(this,"dragenter",Ps,"sortable-tree-node")}init(){this.classList.add("am-c-nav"),this.innerHTML="";const e=Object.values(m.pages);i("span",["am-c-nav__label"],{},this,Pt`<span class="am-u-flex am-u-flex--gap am-u-flex--align-center"> ${m.text("sidebarPages")} &mdash; ${e.length} </span>`);const t=ra(),a=ks(e);if(this.tree=new(_s())({nodes:a,element:this,initCollapseLevel:1,styles:Cs,stateId:"nav",renderLabel:Ls,onChange:Es,confirm:Ss}),t){const e=this.tree.findNode("url",t);null==e||e.reveal(),null==e||e.scrollIntoView({block:"end"})}p.connectElements(this)}disconnectedCallback(){super.disconnectedCallback(),this.tree.destroy()}}Ms.TAG_NAME="am-nav-tree",customElements.define(Ms.TAG_NAME,Ms);class Is extends x{connectedCallback(){this.value=this.getAttribute("value"),this.removeAttribute("value"),this.render(this.value)}render(e){var t;this.classList.add("am-f-group","am-f-number-unit");const a=null!==(t=null==e?void 0:e.replace(/([^\d\.]+)/g,""))&&void 0!==t?t:"",s=(null==e?void 0:e.replace(/.+?(px|em|rem|%|vh|vw)/g,"$1"))||"px",n=i("input",["am-f-input","am-f-group__item"],{type:"number",step:"1",value:a},this),l=ft([{value:"px"},{value:"%"},{value:"rem"},{value:"em"},{value:"vh"},{value:"vw"}],s,this,null,null,"",["am-f-group__item"]);f(this,"change input",o((e=>{e.stopPropagation(),this.value=n.value.length>0?n.value+l.value:"",b("change",this)}),100),"input, select")}}Is.TAG_NAME="am-number-unit-input",xt.add(Is.TAG_NAME),customElements.define(Is.TAG_NAME,Is);const Os=e=>{const t=e.private?"eye-slash-fill":"folder2";return Pt`<label class="am-c-nav__item"><input type="radio" name="targetPage" value="${e.url}" tabindex="0" /><span class="am-c-nav__link"><am-icon-text am-icon="${t}" am-text="$${e.title}"></am-icon-text></span></label>`};customElements.define("am-page-select-tree",class extends x{get hideCurrent(){return this.hasAttribute("am-hide-current")}connectedCallback(){this.addListener(f(window,"AutomadAppStateChange",this.init.bind(this))),this.init()}init(){this.innerHTML="";const e=this.filterPages(Object.values(m.pages)),t=ks(e),a=new(_s())({nodes:t,element:this,initCollapseLevel:1,disableSorting:!0,styles:Cs,renderLabel:Os}),i=a.findNode("url",ra())||a.findNode("url","/");i.reveal();const s=this.closest(y.TAG_NAME);s&&f(s,"AutomadModalOpen",(()=>{l("input",i.label).checked=!0}))}filterPages(e){if(this.hideCurrent){const t=ra(),a=new RegExp(`^${t}(/|$)`);return e.filter((e=>null==e.url.match(a)))}return e}});var Rs=function(e,t,a,i){return new(a||(a=Promise))((function(s,n){function o(e){try{r(i.next(e))}catch(e){n(e)}}function l(e){try{r(i.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}r((i=i.apply(e,t||[])).next())}))};customElements.define("am-root",class extends x{static get observedAttributes(){return["base-index","base-url"]}connectedCallback(){this.init()}setView(e){us.toggle(!1),e&&window.history.pushState(null,null,e),this.update()}init(){return Rs(this,void 0,void 0,(function*(){this.classList.add("am-c-root"),this.addListener((()=>{const e=["InvalidStateError","TypeError"];return f(window,"error",(t=>{e.includes(t.error.name)&&(It().log(t.error),t.preventDefault())}))})()),ea(Qt()),this.progressBar(10),yield m.bootstrap(this),yield this.update(),this.addListener(f(window,"popstate",(()=>{m.root.update()}))),this.addListener(f(document,"keydown",(e=>{13==e.keyCode&&document.activeElement.click()}))),this.addListener(f(document,"change",(e=>{e.target.classList.add("am-validate")}),"input, textarea, [contenteditable]")),this.validateSession(),sa.addListeners()}))}update(){return Rs(this,void 0,void 0,(function*(){b("AutomadBeforeUpdateView",window);const e=r("[am-modal-open]");e&&(e.forEach((e=>{e.close()})),yield new Promise((e=>setTimeout(e,250)))),this.progressBar(20),m.isReady=!1,ia(),p.reset(),sa.new(),yield m.updateState(),this.progressBar(40);const t=Jt();if(!t)return;const a=i(Zt(t),[],{}).init();this.progressBar(60),yield Vt(),this.progressBar(80),this.innerHTML="",this.appendChild(a),yield Vt(),p.connectElements(this),r("input[am-toggle]",this).forEach((e=>{const t=r(e.getAttribute("am-toggle")),a=()=>{t.forEach((t=>{t.classList.toggle("am-u-display-none",!e.checked)}))};f(e,"change AutomadChangeByBinding",a),a()})),m.checkForSystemUpdate(),m.checkForOutdatedPackages(),m.restoreFilterAndScroll(),this.progressBar(100),m.isReady=!0}))}validateSession(){return Rs(this,void 0,void 0,(function*(){const e=()=>Rs(this,void 0,void 0,(function*(){if("visible"===document.visibilityState){const e=yield Gt("SessionController::validate",{csrfTokenValidation:1});403===(e.code||403)&&m.reload(),e.redirect&&this.setView(e.redirect)}}));this.addListener(f(document,"visibilitychange",e.bind(this))),this.addListener(f(window,"focus",e.bind(this)))}))}progressBar(e){this.classList.toggle("am-c-root--loading",e>0&&e<100),e>0?this.style.setProperty("--progress",`${e}%`):setTimeout((()=>{this.style.setProperty("--progress",`${e}%`)}),0)}});customElements.define("am-spinner",class extends x{connectedCallback(){this.classList.add("am-c-spinner")}});customElements.define("am-undo-buttons",class extends x{connectedCallback(){this.classList.add("am-u-flex"),this.render(),this.addListener(f(window,"AutomadUndoStackUpdate",this.render.bind(this)))}render(){this.innerHTML="";const e=ya(),t=i("span",["am-c-navbar__item","am-c-navbar__item--glyph"],{"am-tooltip":`${m.text("undoTitle")}<br>${e} + Z`},this,"↩"),a=i("span",["am-c-navbar__item","am-c-navbar__item--glyph"],{"am-tooltip":`${m.text("redoTitle")}<br>${e} + Y`},this,"↪"),{undo:s,redo:n}=sa.size;0==s&&(t.classList.add("am-u-text-muted"),t.setAttribute("disabled","")),0==n&&(a.classList.add("am-u-text-muted"),a.setAttribute("disabled","")),f(t,"click",sa.undoHandler),f(a,"click",sa.redoHandler)}})}},a={};function i(e){var s=a[e];if(void 0!==s)return s.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=t,e=[],i.O=(t,a,s,n)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){for(var[a,s,n]=e[d],l=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(i.O).every((e=>i.O[e](a[r])))?a.splice(r--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,s,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var s,n,[o,l,r]=a,c=0;if(o.some((t=>0!==e[t]))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(r)var d=r(i)}for(t&&t(a);c<o.length;c++)n=o[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},a=self.webpackChunkautomad=self.webpackChunkautomad||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),i.nc=void 0;var s=i.O(void 0,[459,777,703,736],(()=>i(4373)));s=i.O(s)})();