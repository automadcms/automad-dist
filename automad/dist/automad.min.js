/*
 *                    ....
 *                  .:   '':.
 *                  ::::     ':..
 *                  ::.         ''..
 *       .:'.. ..':.:::'    . :.   '':.
 *      :.   ''     ''     '. ::::.. ..:
 *      ::::.        ..':.. .''':::::  .
 *      :::::::..    '..::::  :. ::::  :
 *      ::'':::::::.    ':::.'':.::::  :
 *      :..   ''::::::....':     ''::  :
 *      :::::.    ':::::   :     .. '' .
 *   .''::::::::... ':::.''   ..''  :.''''.
 *   :..:::'':::::  :::::...:''        :..:
 *   ::::::. '::::  ::::::::  ..::        .
 *   ::::::::.::::  ::::::::  :'':.::   .''
 *   ::: '::::::::.' '':::::  :.' '':  :
 *   :::   :::::::::..' ::::  ::...'   .
 *   :::  .::::::::::   ::::  ::::  .:'
 *    '::'  '':::::::   ::::  : ::  :
 *              '::::   ::::  :''  .:
 *               ::::   ::::    ..''
 *               :::: ..:::: .:''
 *                 ''''  '''''
 * 
 *
 * AUTOMAD
 * 
 * version 1.10.1
 *
 * Copyright (c) 2014-2021 by Marc Anton Dahmen
 * https://marcdahmen.de
 *
 * Licensed under the MIT license.
 * https://automad.org/license
 */
!function(t,e,i){t.AddVariable={selectors:{container:"#am-add-variable-container",modal:"#am-add-variable-modal",modalInput:"#am-add-variable-input",submit:"#am-add-variable-submit"},dataAttr:{errorName:"data-am-error-name",errorExists:"data-am-error-exists"},append:function(a){var o=t.AddVariable,n=t.Util,r=e(a.target),s=e(o.selectors.container),l=e(o.selectors.modalInput),d="am-input-data-",c=l.val().replace(/[^\w\.\-]/g,"_");0==e("#"+d+c).length?c?e.post("?controller=UI::field",{name:c
},(function(t){i.modal(o.selectors.modal).hide(),l.val(""),s.append(t.html),e("#"+d+c).focus()})):t.Notify.error(r.data(n.dataCamelCase(o.dataAttr.errorName))):t.Notify.error(r.data(n.dataCamelCase(o.dataAttr.errorExists)))}},e(document).on("click",t.AddVariable.selectors.submit,t.AddVariable.append)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.BlockEditor={dataAttr:"data-am-block-editor",makeReadOnly:function(t){
const e=t.configuration.holder,i=e.querySelectorAll("input, select"),a=e.querySelectorAll("[contenteditable]");Array.from(i).forEach((t=>{t.setAttribute("readonly",!0),t.setAttribute("disabled",!0)})),Array.from(a).forEach((t=>{t.removeAttribute("contenteditable")}))},createEditor:function(i){const a=AutomadEditorTranslation.get;i=Object.assign({holder:!1,input:!1,autofocus:!1,readOnly:!1,placeholder:"",flex:!1,onReady:function(){}},i);var o=e(i.input);try{
var n=JSON.parse(o.val().replace(/&amp;/g,"&"))}catch(t){n={}}if(void 0===n.blocks&&i.readOnly)return;const r=new AutomadLegacyData(n);n=r.convert(n);const s=new EditorJS({holder:i.holder,logLevel:"ERROR",data:n,tools:AutomadEditorConfig.tools(i.readOnly,i.flex),tunes:["layout"],readOnly:i.readOnly,minHeight:!1,autofocus:i.autofocus,placeholder:i.placeholder,i18n:{messages:{ui:{blockTunes:{toggler:{"Click to tune":a("ui_settings")}},inlineToolbar:{converter:{"Convert to":a("ui_convert")}},
toolbar:{toolbox:{Add:a("ui_add")}}},tools:{lists:{Unordered:a("list_unordered"),Ordered:a("list_ordered")},table:{"Add column to left":a("table_add_col_left"),"Add column to right":a("table_add_col_right"),"Delete column":a("table_delete_col"),"Add row above":a("table_add_row_above"),"Add row below":a("table_add_row_below"),"Delete row":a("table_delete_row"),"With headings":a("table_with_headings"),"Without headings":a("table_without_headings")}},blockTunes:{delete:{Delete:a("ui_delete")},
moveUp:{"Move up":a("ui_move_up")},moveDown:{"Move down":a("ui_move_down")}}}},onChange:function(e,a){t.BlockEditor.save(s,o.get(0),i.readOnly)},onReady:function(){const a=new AutomadLayout(s);a.applyLayout(n,(function(){i.readOnly?t.BlockEditor.makeReadOnly(s,n):(new AutomadEditorUndo({editor:s,data:n}),new DragDrop(s),a.settingsButtonObserver(),a.initPasteHandler()),i.onReady()}));let r=s.configuration.holder;("string"==typeof r||r instanceof String)&&(r=document.getElementById(r))
;const l=()=>{t.BlockEditor.save(s,o.get(0),i.readOnly)};e(r).on("click",`.${AutomadEditorConfig.cls.settingsButton}`,l),e(r).on("change keyup keydown",`.${AutomadEditorConfig.cls.input}, .${AutomadEditorConfig.cls.block} input, .${AutomadEditorConfig.cls.block} select`,l)}});return s},save:function(t,i,a){if(!a){const a=e(i);try{t.save().then((function(t){t.automadVersion=window.AM_VERSION;var e=JSON.stringify(t.blocks);try{var i=JSON.stringify(JSON.parse(a.val()).blocks)}catch(t){i=""}
i!=e&&a.val(JSON.stringify(t,null,4)).trigger("change")}))}catch(t){}}},initErrorHandler:function(){e(window).on("error",(function(t){let e=t.originalEvent.message;(e.includes("closest")||e.includes("updateCurrentInput")||e.includes("normalize")||e.includes("DOMException"))&&t.preventDefault()}))},init:function(){const t=`[${this.dataAttr}]`,i=Array.from(document.querySelectorAll(t));this.initErrorHandler(),i.forEach((t=>{const i=t.getAttribute(this.dataAttr),a=t.querySelector("input")
;t.removeAttribute(this.dataAttr),this.createEditor({holder:i,input:a,placeholder:AutomadEditorTranslation.get("ui_placeholder"),flex:!1,onReady:()=>{e(".ct").toggleClass("init",!0)}})}))}},e(document).on("ajaxComplete",(function(e,i,a){(a.url.includes("Page::data")||a.url.includes("Shared::data")||a.url.includes("InPage::edit"))&&t.BlockEditor.init()}))}(window.Automad=window.Automad||{},jQuery),function(t,e){t.Clipboard={dataAttr:"data-am-clipboard",copy:function(i){i.preventDefault()
;var a,o=e(this).data(t.Util.dataCamelCase(t.Clipboard.dataAttr)),n=e('<input type="text" />').css({position:"fixed",top:-1e3}).attr("contenteditable","true").appendTo(e("body")).val(o);if(navigator.userAgent.match(/ipad|ipod|iphone/i)){var r=n.get(0),s=document.createRange(),l=window.getSelection();s.selectNodeContents(r),l.removeAllRanges(),l.addRange(s),r.setSelectionRange(0,999999)}else n.select();a=document.execCommand("copy"),n.remove(),a&&t.Notify.success(o)}},
e(document).on("click","["+t.Clipboard.dataAttr+"]",t.Clipboard.copy)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.ColorPicker={selector:"[data-am-colorpicker]",init:function(){var i=e(document),a=t.ColorPicker;i.on("change keyup",a.selector+" input",a.update),i.on("focus",a.selector+' input[type="text"]',(function(t){var i=e(t.target);i.on("blur.automad",(function(){i.off("blur.automad")}))}))},update:function(i){
var a=e(i.target),o=t.ColorPicker,n=a.val(),r=a.closest(o.selector),s=r.find('[type="color"]'),l=r.find('[type="text"]');l.val(n).trigger("keydown"),s.val(n),n||(n=l.attr("placeholder"),s.val(n))}},t.ColorPicker.init()}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.CopyResized={dataAttr:{fileInfo:"data-am-file-info",url:"data-am-url"},selectors:{modal:"#am-copy-resized-modal",button:"#am-copy-resized-submit",filename:"#am-copy-resized-filename",width:"#am-copy-resized-width",
height:"#am-copy-resized-height",crop:"#am-copy-resized-crop"},destroy:function(){var i=t.CopyResized.selectors;e(i.filename).val(""),e(i.width).val(""),e(i.height).val("")},init:function(){var i=t.CopyResized,a=i.dataAttr,o=i.selectors,n=e(this).closest("["+a.fileInfo+"]").data(t.Util.dataCamelCase(a.fileInfo)),r=e(o.modal);e(o.filename).val(n.filename),e(o.width).val(n.img.originalWidth),e(o.height).val(n.img.originalHeight),r.off("hide.uk.modal.automad.copyResized"),
r.on("hide.uk.modal.automad.copyResized",i.destroy)},submit:function(a){var o=t.CopyResized,n=o.selectors,r=e(a.target),s={url:e(n.modal).data(t.Util.dataCamelCase(o.dataAttr.url)),filename:e(n.filename).val(),width:e(n.width).val(),height:e(n.height).val(),crop:Number(e(n.crop).is(":checked"))};r.prop("disabled",!0),e.post("?controller=Image::copyResized",s,(function(a){r.prop("disabled",!1),a.error&&t.Notify.error(a.error),a.success&&t.Notify.success(a.success),
e(n.modal).on("hide.uk.modal.automad.copyResized",(function(){o.destroy(),e(n.modal).closest("form").empty().submit()})),i.modal(n.modal).hide()}),"json")}},e(document).on("click",'a[href="'+t.CopyResized.selectors.modal+'"]',t.CopyResized.init),e(document).on("click",t.CopyResized.selectors.button,t.CopyResized.submit)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.Count={dataAttr:"data-am-count",get:function(i){var a=t.Count;e("["+a.dataAttr+"]").each((function(){
var i=e(this),o=i.data(t.Util.dataCamelCase(a.dataAttr));i.text(e(o).length)}))},init:function(){var i=t.Count;e(document).on("ready ajaxComplete count.automad",i.get)}},t.Count.init()}(window.Automad=window.Automad||{},jQuery),function(t,e){t.CreateUser={dataAttr:"data-am-create-user",init:function(){const t=document.querySelector(`[${this.dataAttr}]`);if(t){t.querySelector("form").addEventListener("submit",(()=>{
const e=Array.from(t.querySelectorAll("input")),i=Array.from(t.querySelectorAll(".am-u-panel"));e.forEach((t=>{t.removeAttribute("required"),t.setAttribute("type","hidden")})),i.forEach((t=>{t.classList.toggle("am-u-hidden")}))}))}}},e(document).on("ready",(()=>{t.CreateUser.init()}))}(window.Automad=window.Automad||{},jQuery),function(t,e){t.DateTime={selector:"[data-am-datetime]",init:function(){var i=e(document),a=t.DateTime;i.on("change",a.selector+" [data-am-u-datepicker]",a.update.date),
i.on("change",a.selector+" [data-am-u-timepicker]",a.update.time),i.on("focus",a.selector+" input",(function(t){var i=e(t.target),o=i.closest(a.selector);o.addClass("am-u-active"),i.on("blur.automad",(function(){o.removeClass("am-u-active"),i.off("blur.automad")}))})),i.on("click",a.selector+" [data-am-clear-date]",(function(){var t=e(this).closest(a.selector);t.find("[data-am-u-timepicker]").val(""),t.find("[data-am-u-datepicker]").val("").trigger("change")}))},today:function(){
var t=new Date,e=t.getMonth()+1,i=t.getDate();return t.getFullYear()+"-"+((""+e).length<2?"0":"")+e+"-"+((""+i).length<2?"0":"")+i},update:{date:function(i){var a=e(i.target),o=t.DateTime,n=a.closest(o.selector),r=n.find('input[type="hidden"]'),s=a.val(),l=n.find("[data-am-u-timepicker]");time=l.val(),s?(time||(time="12:00",l.val(time)),r.val(s+" "+time+":00")):(r.val(""),l.val("")),r.trigger("change")},time:function(i){
var a=e(i.target),o=t.DateTime,n=a.closest(o.selector),r=n.find('input[type="hidden"]'),s=a.val(),l=n.find("[data-am-u-datepicker]");date=l.val(),s||(s="12:00",a.val(s)),date||(date=o.today(),l.val(date)),r.val(date+" "+s+":00").trigger("change")}}},t.DateTime.init()}(window.Automad=window.Automad||{},jQuery),function(t,e){t.Debug={init:function(){e(document).ajaxComplete((function(t,i,a){if(void 0!==i.responseJSON&&i.responseJSON.hasOwnProperty("debug")&&!e.isEmptyObject(i.responseJSON.debug)){
var o={};o["Ajax: "+a.url]=i.responseJSON.debug,console.log(o)}}))}},t.Debug.init()}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.EditFileInfo={dataAttr:{fileInfo:"data-am-file-info",url:"data-am-url",ext:"data-am-extension"},selectors:{modal:"#am-edit-file-info-modal",button:"#am-edit-file-info-submit",img:"#am-edit-file-info-img",icon:"#am-edit-file-info-icon",oldName:"#am-edit-file-info-old-name",newName:"#am-edit-file-info-new-name",caption:"#am-edit-file-info-caption",
download:"#am-edit-file-info-download"},destroy:function(){var i=t.EditFileInfo,a=i.dataAttr,o=i.selectors;e(o.img).attr("src","").removeAttr("width").removeAttr("height"),e(o.icon).attr(a.ext,"").html(""),e(o.download).attr("href",""),e(o.oldName).val(""),e(o.newName).val(""),e(o.caption).val("").trigger("keyup")},init:function(){var i=t.EditFileInfo,a=t.Util,o=i.dataAttr,n=i.selectors,r=e(this).closest("["+o.fileInfo+"]").data(a.dataCamelCase(o.fileInfo)),s=e(n.modal)
;r.img?e(n.img).attr("src",r.img.src).attr("width",r.img.width).attr("height",r.img.height):e(n.icon).attr(o.ext,r.extension).append(e("<i></i>",{class:"am-u-icon-file-o am-files-icon-"+r.extension})),e(n.oldName).val(r.filename),e(n.newName).val(r.filename),e(n.caption).val(r.caption).trigger("keyup"),e(n.download).attr("href",r.download),s.off("hide.uk.modal.automad.editFileInfo"),s.on("hide.uk.modal.automad.editFileInfo",i.destroy)},submit:function(a){
var o=t.EditFileInfo,n=o.selectors,r=e(a.target),s={url:e(n.modal).data(t.Util.dataCamelCase(o.dataAttr.url)),"old-name":e(n.oldName).val(),"new-name":e(n.newName).val(),caption:e(n.caption).val()};r.prop("disabled",!0),e.post("?controller=File::editInfo",s,(function(a){r.prop("disabled",!1),a.error&&t.Notify.error(a.error),e(n.modal).on("hide.uk.modal.automad.editFileInfo",(function(){o.destroy(),e(n.modal).closest("form").empty().submit()})),i.modal(n.modal).hide()}),"json")}},
e(document).on("click",'a[href="'+t.EditFileInfo.selectors.modal+'"]',t.EditFileInfo.init),e(document).on("click",t.EditFileInfo.selectors.button,t.EditFileInfo.submit)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.Feed={dataAttr:"data-am-feed-fields",init:function(){Array.from(document.querySelectorAll(`[${this.dataAttr}]`)).forEach((t=>{const i=t.closest("form");Sortable.create(t,{group:"feed",animation:200,draggable:".am-feed-field",handle:".am-feed-field",forceFallback:!0,
ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",onSort:a=>{if(i){const a=i.querySelector("input");console.log(t.childElementCount),e(a).trigger("change")}}}),t.removeAttribute(this.dataAttr)}))}},e(document).on("ajaxComplete load",(()=>{t.Feed.init()}))}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Form={unsavedClassPrefix:"am-unsaved-",unsavedClassInput:"am-form-changed",dataAttr:{controller:"data-am-controller",dashboard:"data-am-dashboard",
url:"data-am-url",submit:"data-am-submit",init:"data-am-init",initOn:"data-am-init-on",autoSubmit:"data-am-auto-submit",close:"data-am-close-on-success",confirm:"data-am-confirm",enter:"data-am-enter",watchExclude:"data-am-watch-exclude",modalOnChange:"data-am-modal-on-change",slug:"data-am-slug"},ajaxPost:function(a){
var o=t.Form,n=e(a.target),r=n.data(t.Util.dataCamelCase(o.dataAttr.controller)),s=n.data(t.Util.dataCamelCase(o.dataAttr.dashboard)),l=n.data(t.Util.dataCamelCase(o.dataAttr.url)),d=n.serializeArray();l&&d.push({name:"url",value:l}),void 0===s&&(s=""),e.post(s+"?controller="+r,d,(function(a){if(a.redirect&&(window.location.href=a.redirect),a.reload&&window.location.reload(),a.redirect||a.reload)return!1;if(a.html&&n.html(a.html),a.trigger&&e("html").trigger(a.trigger),
a.error&&t.Notify.error(a.error),a.success&&t.Notify.success(a.success),!a.error){var r=n.data(t.Util.dataCamelCase(o.dataAttr.close));r&&i.modal(r).hide()}}),"json").fail((function(i){var a=i.responseJSON;a&&(a.trigger&&e("html").trigger(a.trigger),a.error&&t.Notify.error(a.error))}))},confirm:function(a){a.preventDefault();var o=t.Form,n=e(a.target),r=n.data(t.Util.dataCamelCase(o.dataAttr.confirm));r&&n.find("input").length>0?i.modal.confirm(r,(function(){o.ajaxPost(a)})):o.ajaxPost(a)},
init:function(){var a=e(document),o=t.Form,n=o.dataAttr;a.on("submit","["+n.controller+"]",o.confirm),a.on("click","["+n.submit+"]",(function(i){var a=e(this).data(t.Util.dataCamelCase(n.submit));i.preventDefault(),e("form["+n.controller+'="'+a+'"]').submit()})),a.ready((function(){e("["+t.Form.dataAttr.init+"]").trigger("submit")})),a.on("ready ajaxComplete",(function(){var i=".automadFormInitOn";e("html").off(i),e("["+n.initOn+"]").each((function(){
var a=e(this),o=a.data(t.Util.dataCamelCase(n.initOn));e("html").on(o+i,(function(){a.empty().submit()}))}))})),a.on("keydown","["+n.controller+"] input",(function(t){13==t.which&&t.preventDefault()})),a.on("keydown","["+n.enter+"]",(function(i){if(13==i.which){var a=e(i.target).data(t.Util.dataCamelCase(n.enter));e(a).click()}})),a.on("change drop cut paste","["+n.autoSubmit+"] input, ["+n.autoSubmit+"] textarea, ["+n.autoSubmit+"] select",(function(t){e(t.target).closest("form").submit()})),
a.on("ready",(function(){e("button["+n.submit+"]").prop("disabled",!0)})),a.on("ajaxComplete",(function(t,i,a){var r=a.url.replace("?controller=","");e("button["+n.submit+'="'+r+'"]').prop("disabled",!0),e("["+n.controller+'="'+r+'"]').find("."+o.unsavedClassInput).removeClass(o.unsavedClassInput)}));var r=function(){var i=e(this).closest("["+n.controller+"]").data(t.Util.dataCamelCase(n.controller));e("html").addClass(o.unsavedClassPrefix+i),
e("button["+n.submit+'="'+i+'"]:disabled, .am-inpage [type="submit"]').prop("disabled",!1),e(this).closest(".am-u-form-row, .am-inpage form").find(".am-u-form-label").addClass(o.unsavedClassInput)},s=`[${n.controller}]:not([${n.autoSubmit}])`,l=`:not([${n.watchExclude}])`;a.on("drop cut paste keydown",`${s} input${l}, \n\t\t\t\t ${s} textarea${l}, \n\t\t\t\t .am-inpage form *`,r),
a.on("change",`${s} [type="hidden"]${l}, \n\t\t\t\t ${s} [type="checkbox"]${l},\n\t\t\t\t ${s} [type="radio"]${l},\n\t\t\t\t ${s} [type="color"]${l},\n\t\t\t\t ${s} select${l},  \n\t\t\t\t .am-inpage form *`,r),a.on("submit","["+n.controller+"], .am-inpage form",(function(){var i=e(this).data(t.Util.dataCamelCase(n.controller));e("html").removeClass(o.unsavedClassPrefix+i)})),window.onbeforeunload=function(){if(e('html[class*="am-unsaved-"]').length)return"You have unsaved chages!"},
a.on("change","["+n.modalOnChange+"]",(function(){i.modal(e(this).data(t.Util.dataCamelCase(n.modalOnChange))).show()})),a.on("keyup paste drop",`input[${n.slug}]`,(t=>{const i=t.target;i.value=i.value.toLowerCase().replace(/[^\w\-]/g,"-"),i.value=i.value.replace(/\-+/g,"-"),e(i).trigger("change")})),a.on("ready ajaxComplete",o.modalEvents),a.on("ready ajaxComplete",(function(){setTimeout((function(){e(".CodeMirror:not(.am-change-event)").each((function(){
var t=e(this),i=t[0].CodeMirror,a=t.prev();t.addClass("am-change-event"),i.on("change",(function(){a.trigger("change")}))}))}),500)}))},modalEvents:function(){var i=e(".am-u-modal");i.off("show.uk.modal.automad.form"),i.off("hide.uk.modal.automad.form"),i.on({"show.uk.modal.automad.form":function(){if(e(this).find("["+t.Form.dataAttr.init+"]").each((function(){e(this).empty().html('<i class="am-u-icon-circle-o-notch am-u-icon-spin am-u-icon-small"></i>').submit()})),e("html.am-u-notouch").length){
var i=e(this);setTimeout((function(){i.find('textarea, input:not(:disabled, [type="hidden"], [type="search"])').first().focus()}),500)}},"hide.uk.modal.automad.form":function(){e(this).find("form").each((function(){var i=e(this).data(t.Util.dataCamelCase(t.Form.dataAttr.controller));e("html").removeClass(t.Form.unsavedClassPrefix+i),this.reset()}))}})}},t.Form.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){e.on("beforeready.uk.dom",(function(){
t.extend(e.components.formSelect.prototype.defaults,{activeClass:""})}))}(jQuery,UIkit),function(t,e){t.Fullscreen={classes:{fullscreenWrapper:"am-fullscreen",fullscreenHtml:"am-fullscreen-page"},dataAttr:{toggle:"data-am-fullscreen"},init:function(){var i=t.Fullscreen,a=i.classes;e(document).on("click","["+i.dataAttr.toggle+"]",(function(){var t=e("html");t.hasClass(a.fullscreenHtml)?(t.removeClass(a.fullscreenHtml),
e("."+a.fullscreenWrapper).removeClass(a.fullscreenWrapper)):(t.addClass(a.fullscreenHtml),e(this).parent().addClass(a.fullscreenWrapper)),e(window).trigger("resize"),setTimeout((function(){e(window).trigger("resize")}),500)}))}},t.Fullscreen.init()}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Import={selectors:{modal:"#am-import-modal",button:"#am-import-modal .am-u-form button",input:'#am-import-modal [name="importUrl"]'},dataAttr:{url:"data-am-url"},init:function(){
var a=t.Import;e(document).on("click",a.selectors.button,(function(){var o=e(a.selectors.modal),n=e(a.selectors.input).val(),r=o.closest("form"),s=o.data(t.Util.dataCamelCase(a.dataAttr.url));e.post("?controller=File::import",{url:s,importUrl:n},(function(e){e.error?t.Notify.error(e.error):(o.on("hide.uk.modal.automad.import",(function(){o.off("automad.import"),r.empty().submit()})),i.modal(a.selectors.modal).hide())}),"json")}))}},t.Import.init()
}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.InPage={selectors:{modal:"#am-inpage-edit-modal",fields:"#am-inpage-edit-fields",menubar:".am-inpage-menubar",dragHandle:".am-drag-handle"},dataAttr:{content:"data-am-inpage-content",controller:"data-am-inpage-controller"},modal:{init:function(){var i=e(this),a=t.InPage,o=t.Util,n=i.data(o.dataCamelCase(a.dataAttr.content)),r=e(a.selectors.modal).find("form"),s=r.data(o.dataCamelCase(a.dataAttr.controller)),l=e("<i></i>",{
class:"am-u-icon-circle-o-notch am-u-icon-spin am-u-icon-small"}).appendTo(r);e(a.selectors.fields).remove(),e.post(s,n,(function(t){if(t.html){var i=e(t.html).appendTo(r).hide();setTimeout((function(){e(window).resize()}),400),setTimeout((function(){l.remove(),i.fadeIn(300,(function(){e(window).resize(),i.find(".am-u-form-controls, textarea, [contenteditable]").first().focus()}))}),600)}}),"json")},submit:function(i){i.preventDefault()
;var a=e(i.target),o=a.data(t.Util.dataCamelCase(t.InPage.dataAttr.controller)),n=a.serializeArray();e.post(o,n,(function(t){t.redirect&&(window.location.href=t.redirect)}),"json")}},menubar:{init:function(){var i=t.InPage.selectors;e(i.menubar).draggabilly({handle:i.dragHandle})}}},e(document).on("click",'[href="'+t.InPage.selectors.modal+'"]',t.InPage.modal.init),e(document).on("submit","["+t.InPage.dataAttr.controller+"]",t.InPage.modal.submit),e(document).on("ready",t.InPage.menubar.init)
}(window.Automad=window.Automad||{},jQuery),function(t){t(document).ready((function(){t("#am-no-js").remove()}))}(jQuery),function(t,e,i){t.Jumpbar={selector:"[data-am-jumpbar]",init:function(){const t=Array.from(document.querySelectorAll(`${this.selector}`));t.length>0&&(t.forEach((t=>{t.querySelector("input").setAttribute("disabled",!0)})),e.post("?controller=UI::autocompleteJump",(function(a){const o=Object.assign({},a.autocomplete[0]);t.forEach((t=>{(t=>{const n=t.querySelector("input")
;n.removeAttribute("disabled");const r=t.querySelector(".am-u-autocomplete"),s={source:a.autocomplete,minLength:0,delay:0,
template:'\n\t\t\t\t\t\t\t\t<ul class="am-u-nav am-u-nav-autocomplete am-u-autocomplete-results">\n\t\t\t\t\t\t\t\t\t{{~items}}\n\t\t\t\t\t\t\t\t\t\t<li data-value="{{$item.url}}">\n\t\t\t\t\t\t\t\t\t\t\t<a>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="am-u-icon-{{$item.icon}} am-u-icon-justify"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{$item.title}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{$item.subtitle}}</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t{{/items}}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t'
},l=i.autocomplete(e(r),s),d=l.options.source[0];n.addEventListener("focus",(()=>{l.show(),n.dispatchEvent(new Event("keyup")),setTimeout((()=>{i.tooltip(".am-u-tooltip").hide()}),5)})),n.addEventListener("keyup",(()=>{d.url=`${o.url}&search=${encodeURIComponent(n.value)}`,d.value=`${o.value} ${n.value}`,d.subtitle=n.value})),l.on("show.uk.autocomplete",(()=>{l.pick("next",!0)})),l.on("selectitem.uk.autocomplete",(()=>{n.value=l.selected[0].dataset.value,e(t).submit(),setTimeout((()=>{n.value=""
}),20)}))})(t)}))}),"json"))}},e(document).on("ready",(()=>{t.Jumpbar.init()}))}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.KeyCombos={init:function(){e(window).bind("keydown",(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e('.am-navbar [data-am-submit], .am-inpage .am-u-open [type="submit"]').click();break;case"j":return e('.am-navbar-jump [name="target"]').blur().focus(),!1}}))}},t.KeyCombos.init()
}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Link={dataAttr:{form:"data-am-link",field:"data-am-link-field"},modalSelector:"#am-link-modal",init:function(){var i=t.Link,a=i.dataAttr;e(document).on("click","["+a.field+"] button",(function(){i.click(this)}))},click:function(i){var a=e(i).parent().find("input");t.Link.dialog(a,(function(t){a.val(t).trigger("keydown").trigger("change")}))},dialog:function(a,o){var n=i.modal(t.Link.modalSelector);n.show().find("input").val(""),
n.on("click.automad.link",".am-u-form button",(function(){var t;t=e(this).parent().find("input").val(),n.isActive()&&("function"==typeof o&&o(t),n.hide())})),n.on("hide.uk.modal.automad.link",(function(){a.focus(),n.off(".automad.link")}))},autocomplete:function(){var a=t.Link.dataAttr.form,o=e("["+a+"]").first(),n=o.data(t.Util.dataCamelCase(a));o.length>0&&e.post(n,(function(t){var e=o.find(".am-u-autocomplete").first(),a={source:t.autocomplete,minLength:1}
;i.autocomplete(e,a).on("selectitem.uk.autocomplete",(function(t,e){o.find("input").val(e.value),o.find("button").trigger("click")}))}),"json")}},t.Link.init(),e(document).on("ready",t.Link.autocomplete)}(window.Automad=window.Automad||{},jQuery,UIkit),
/*!
 *  Markdown editor based in the htmleditor component of UIkit.
 *
 * UIkit 2.27.5 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License
 */
function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-markdowneditor",["uikit"],(function(){return e||t(UIkit2)}))}((function(t){"use strict";var e=[];return t.component("markdowneditor",{defaults:{mode:"split",autocomplete:!0,enablescripts:!1,height:500,maxsplitsize:1100,codemirror:{mode:"gfm",lineWrapping:!0,dragDrop:!1,autoCloseTags:!1,matchTags:!1,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,tabSize:4,hintOptions:{
completionSingle:!1},extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"},styleSelectedText:!0},toolbar:["bold","italic","link","image","blockquote","listUl","listOl","h1","h2","h3"]},boot:function(){t.ready((function(e){t.$("textarea[data-am-u-markdowneditor]",e).each((function(){var e=t.$(this);e.data("markdowneditor")||t.markdowneditor(e,t.Utils.options(e.attr("data-am-u-markdowneditor")))}))}))},init:function(){var i=this,a=t.components.markdowneditor.template
;this.CodeMirror=this.options.CodeMirror||CodeMirror,this.buttons={},this.markdowneditor=t.$(a),this.content=this.markdowneditor.find(".am-u-markdowneditor-content"),this.toolbar=this.markdowneditor.find(".am-u-markdowneditor-toolbar"),this.preview=this.markdowneditor.find(".am-u-markdowneditor-preview").children().eq(0),this.code=this.markdowneditor.find(".am-u-markdowneditor-code"),this.element.before(this.markdowneditor).appendTo(this.code),
this.editor=this.CodeMirror.fromTextArea(this.element[0],this.options.codemirror),this.editor.markdowneditor=this,this.editor.on("change",t.Utils.debounce((function(){i.render()}),150)),this.editor.on("change",(function(){i.editor.save(),i.element.trigger("input")})),this.code.find(".CodeMirror").css("height",this.options.height),this.preview.container=this.preview,t.$win.on("resize load",t.Utils.debounce((function(){i.fit()}),200))
;var o=i.preview.parent(),n=this.code.find(".CodeMirror-sizer"),r=this.code.find(".CodeMirror-scroll").on("scroll",t.Utils.debounce((function(){if("tab"!=i.markdowneditor.attr("data-mode")){var t=n.height()-r.height(),e=(o[0].scrollHeight-o.height())/t,a=r.scrollTop()*e;o.scrollTop(a)}}),10));this.markdowneditor.on("click",".am-u-markdowneditor-button-code, .am-u-markdowneditor-button-preview",(function(e){e.preventDefault(),
"tab"==i.markdowneditor.attr("data-mode")&&(i.markdowneditor.find(".am-u-markdowneditor-button-code, .am-u-markdowneditor-button-preview").removeClass("am-u-active").filter(this).addClass("am-u-active"),i.activetab=t.$(this).hasClass("am-u-markdowneditor-button-code")?"code":"preview",i.markdowneditor.attr("data-active-tab",i.activetab),i.editor.refresh())})),this.markdowneditor.on("click","a[data-markdowneditor-button]",(function(){
i.code.is(":visible")&&i.trigger("action."+t.$(this).data("markdowneditor-button"),[i.editor])})),this.preview.parent().css("height",this.code.height()),this.options.autocomplete&&this.CodeMirror.showHint&&this.CodeMirror.hint&&this.CodeMirror.hint.html&&this.editor.on("inputRead",t.Utils.debounce((function(){var t=i.editor.getDoc().getCursor();i.CodeMirror.innerMode(i.editor.getMode(),i.editor.getTokenAt(t).state).mode.name}),100)),this.debouncedRedraw=t.Utils.debounce((function(){i.redraw()
}),5),this.on("init.uk.component",(function(){i.debouncedRedraw()})),this.element.attr("data-am-u-check-display",1).on("display.uk.check",function(t){this.markdowneditor.is(":visible")&&this.fit()}.bind(this)),e.push(this)},addButton:function(t,e){this.buttons[t]=e},addButtons:function(e){t.$.extend(this.buttons,e)},_buildtoolbar:function(){if(this.options.toolbar&&this.options.toolbar.length){var t=this,e=[];this.toolbar.empty(),this.options.toolbar.forEach((function(i){if(t.buttons[i]){
var a=t.buttons[i].title?t.buttons[i].title:i;e.push('<li><a data-markdowneditor-button="'+i+'" title="'+a+'" data-am-u-tooltip>'+t.buttons[i].label+"</a></li>")}})),this.toolbar.html(e.join("\n"))}},fit:function(){var t=this.options.mode;"split"==t&&this.markdowneditor.width()<this.options.maxsplitsize&&(t="tab"),"tab"==t&&(this.activetab||(this.activetab="code",this.markdowneditor.attr("data-active-tab",this.activetab)),
this.markdowneditor.find(".am-u-markdowneditor-button-code, .am-u-markdowneditor-button-preview").removeClass("am-u-active").filter("code"==this.activetab?".am-u-markdowneditor-button-code":".am-u-markdowneditor-button-preview").addClass("am-u-active")),this.editor.refresh(),this.preview.parent().css("height",this.code.height()),this.markdowneditor.attr("data-mode",t)},redraw:function(){this._buildtoolbar(),this.render(),this.fit()},getMode:function(){return this.editor.getOption("mode")},render:function(){
if(this.currentvalue=this.editor.getValue(),this.options.enablescripts||(this.currentvalue=this.currentvalue.replace(/<(script|style)\b[^<]*(?:(?!<\/(script|style)>)<[^<]*)*<\/(script|style)>/gim,"")),!this.currentvalue)return this.element.val(""),void this.preview.container.html("");this.trigger("render",[this]),this.trigger("renderLate",[this]),this.preview.container.html(this.currentvalue)},addShortcut:function(e,i){var a={};return t.$.isArray(e)||(e=[e]),e.forEach((function(t){a[t]=i})),
this.editor.addKeyMap(a),a},addShortcutAction:function(t,e){var i=this;this.addShortcut(e,(function(){i.element.trigger("action."+t,[i.editor])}))},replaceSelection:function(t){var e=this.editor.getSelection();if(!e.length){for(var i=this.editor.getCursor(),a=this.editor.getLine(i.line),o=i.ch,n=o;n<a.length&&/[\w$]+/.test(a.charAt(n));)++n;for(;o&&/[\w$]+/.test(a.charAt(o-1));)--o;var r=o!=n&&a.slice(o,n);r&&(this.editor.setSelection({line:i.line,ch:o},{line:i.line,ch:n}),e=r)}
var s=t.replace("$1",e);this.editor.replaceSelection(s,"end"),this.editor.focus()},replaceLine:function(t){var e=this.editor.getDoc().getCursor(),i=this.editor.getLine(e.line),a=t.replace("$1",i);this.editor.replaceRange(a,{line:e.line,ch:0},{line:e.line,ch:i.length}),this.editor.setCursor({line:e.line,ch:a.length}),this.editor.focus()},save:function(){this.editor.save()}}),
t.components.markdowneditor.template=['<div class="am-u-markdowneditor am-u-clearfix" data-mode="split">','<div class="am-u-markdowneditor-navbar">','<ul class="am-u-markdowneditor-navbar-nav am-u-markdowneditor-toolbar"></ul>','<ul class="am-u-markdowneditor-navbar-nav">','<li class="am-u-markdowneditor-button-code"><a title="Markdown" data-am-u-tooltip>','<svg xmlns="http://www.w3.org/2000/svg" width="208" height="128" viewBox="0 0 208 128"><rect width="198" height="118" x="5" y="5" ry="10" stroke-width="10" fill="none"/><path d="M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z"/></svg>',"</a></li>",'<li class="am-u-markdowneditor-button-preview"><a title="Preview" data-am-u-tooltip><i class="am-u-icon-file-text"></i></a></li>',"</ul>","</div>",'<div class="am-u-markdowneditor-content">','<div class="am-u-markdowneditor-code"></div>','<div class="am-text am-u-markdowneditor-preview"><div></div></div>',"</div>","</div>"].join(""),
t.plugin("markdowneditor","base",{init:function(t){t.addButtons({bold:{title:"Bold[Ctrl + B]</small>",label:"<strong>B</strong>"},italic:{title:"Italic[Ctrl + I]</small>",label:"<strong><em>I</em></strong>"},blockquote:{title:"Blockquote",label:'<i class="am-u-icon-quote-right"></i>'},link:{title:"Link[Ctrl + L]</small>",label:'<i class="am-u-icon-link"></i>'},image:{title:"Image",label:'<i class="am-u-icon-picture-o"></i>'},listUl:{title:"Unordered List",label:'<i class="am-u-icon-list-ul"></i>'},
listOl:{title:"Ordered List",label:'<i class="am-u-icon-list-ol"></i>'},h1:{title:"Heading 1",label:"H1"},h2:{title:"Heading 2",label:"H2"},h3:{title:"Heading 3",label:"H3"}}),t.addShortcutAction("bold",["Ctrl-B","Cmd-B"]),t.addShortcutAction("italic",["Ctrl-I","Cmd-I"]),t.addShortcutAction("link",["Ctrl-L","Cmd-L"]);var e=t.options.mdparser||window.marked||null;function i(e,i,a){t.on("action."+e,(function(){t["replaceLine"==a?"replaceLine":"replaceSelection"](i)}))}e&&(i("h1","# $1"),
i("h2","## $1"),i("h3","### $1"),i("bold","**$1**"),i("italic","*$1*"),i("strike","~~$1~~"),i("blockquote","> $1","replaceLine"),t.on("action.link",(function(){t.editor.AutomadLink()})),t.on("action.image",(function(){t.editor.AutomadBlockImage()})),t.on("action.listUl",(function(){for(var e=t.editor,i=e.getDoc().getCursor(!0),a=e.getDoc().getCursor(!1),o=i.line;o<a.line+1;o++)e.replaceRange("* "+e.getLine(o),{line:o,ch:0},{line:o,ch:e.getLine(o).length});e.setCursor({line:a.line,
ch:e.getLine(a.line).length}),e.focus()})),t.on("action.listOl",(function(){var e,i=t.editor,a=i.getDoc().getCursor(!0),o=i.getDoc().getCursor(!1),n=1;a.line>0&&((e=i.getLine(a.line-1).match(/^(\d+)\./))&&(n=Number(e[1])+1));for(var r=a.line;r<o.line+1;r++)i.replaceRange(n+". "+i.getLine(r),{line:r,ch:0},{line:r,ch:i.getLine(r).length}),n++;i.setCursor({line:o.line,ch:i.getLine(o.line).length}),i.focus()})),t.on("renderLate",(function(){
t.currentvalue=t.currentvalue.replace(/!\[([^\]]*)\]\(([^\)]+)\)/g,(function(t,e,i){return"!["+e+"]("+Automad.Util.resolvePath(i)+")"})),t.currentvalue=t.currentvalue.replace(/(^|[^!])\[(!\[[^\]]*\]\([^\)]*\)|[^\]]*)\]\(([^\)]+)\)/g,(function(t,e,i,a){return e+"["+i+"]("+Automad.Util.resolveUrl(a)+")"})),t.currentvalue=e(t.currentvalue)})),t.on("cursorMode",(function(e,i){var a=t.editor.getDoc().getCursor();t.editor.getTokenAt(a).state.base.htmlState||(i.mode="markdown")})))}}),t.markdowneditor
})),function(t,e){t.MissingImages={init:function(){e(document).ajaxComplete((function(t,i,a){(a.url.includes("Page::data")||a.url.includes("Shared::data")||a.url.includes("InPage::edit"))&&setTimeout((function(){e(".am-u-form-row img").each((function(){var t=e(this),i=t.attr("src");this.complete&&e("<img>",{src:i,error:function(){t.addClass("am-u-hidden"),e("<span>").text(" Missing: "+i.split(/[\\/]/).pop()).insertAfter(t).addClass("am-u-text-danger")}})}))}),1500)}))}},t.MissingImages.init()
}(window.Automad=window.Automad||{},jQuery),function(t,e){t.Notify={error:function(t){e.notify(t,{timeout:0,pos:"top-right",status:"danger"})},success:function(t){e.notify(t,{timeout:3e3,pos:"top-right",status:"success"})}}}(window.Automad=window.Automad||{},UIkit),function(t,e,i){t.Packages={dataAttr:{packages:"data-am-packages",filter:"data-am-packages-filter"},composerDone:function(){e("html").on("composerDone",(function(){t.Packages.get(),window.setTimeout((function(){
i.modal(".am-u-modal.am-u-open").hide()}),500)}))},filter:function(){var a=t.Packages,o=e("["+a.dataAttr.filter+"]"),n=function(){var t=o.val().toLowerCase().split(" ");e("["+a.dataAttr.packages+"]").find("li").filter((function(){for(var i=e(this).text().toLowerCase(),a=!0,o=0;o<t.length;o++)if(-1==i.indexOf(t[o])){a=!1;break}e(this).toggle(a),e(window).trigger("resize")}))};e(document).ajaxComplete((function(t,e,i){"?controller=PackageManager::getPackages"==i.url&&n()})),
o.on("keyup",i.Utils.debounce(n,250))},get:function(){var i=t.Packages;e("["+i.dataAttr.packages+"]").each((function(){var t=e(this);e.get("?controller=PackageManager::getPackages",(function(i){i.html&&(t.html(i.html),e.get("?controller=PackageManager::getOutdatedPackages",(function(t){if(t.buffer)try{var i=JSON.parse(t.buffer).installed;for(let t=0;t<i.length;t++)e('[data-package="'+i[t].name+'"] form.am-u-hidden').removeClass("am-u-hidden")}catch(t){return!1}}),"json")),
i.error&&t.html('<div class="am-u-alert am-u-alert-danger">'+i.error+"</div>")}),"json")}))},init:function(){t.Packages.composerDone(),t.Packages.get(),t.Packages.filter()}},e(document).on("ready",t.Packages.init)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t){t(document).on("click",".am-remove-parent",(function(){var e=t(this).parent();e.find("input, textarea, select").trigger("keydown"),e.remove(),t(document).trigger("count.automad")}))}(jQuery),function(t,e){t.Scrollbars={defaults:{
scrollToItem:!1},dataAttr:"data-am-scroll-box",init:function(){var i=t.Scrollbars,a=t.Util;e("["+i.dataAttr+"]").each((function(){var t=e(this),o=t.data(a.dataCamelCase(i.dataAttr)),n=e.extend({},i.defaults,o);if(t.am_mCustomScrollbar({scrollbarPosition:"inside",theme:"minimal-dark",autoHideScrollbar:!0,scrollInertia:50,scrollButtons:{enable:!1},callbacks:{onScroll:function(){t.trigger("scrolled.automad")},onUpdate:function(){t.trigger("scrolled.automad")}}}),n.scrollToItem){
var r=t.find(n.scrollToItem);r.length&&setTimeout((function(){r.offset().top+180>e(window).height()&&t.am_mCustomScrollbar("scrollTo",(function(){return r.offset().top-e(window).height()+180}),{scrollInertia:200})}),150)}}))}},e(document).ready(t.Scrollbars.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.ScrollPosition={init:function(){var t=e(document),i=e("html");e(window).scroll((function(){this.scrolling&&clearTimeout(this.scrolling),this.scrolling=setTimeout((function(){
e(this).trigger("scrolled.automad")}),10)})),e(window).on("load scrolled.automad",(function(){var e=t.scrollTop(),a="am-scrolled",o="am-scrolled-secondary";e>30?i.addClass(a):i.removeClass(a),e>60?i.addClass(o):i.removeClass(o)}))}},e(document).ready(t.ScrollPosition.init)}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Search={form:null,init:function(){const t=document.querySelector("[data-am-search]");if(!t)return!1
;const e=t.querySelector('[name="searchValue"]'),a=t.querySelector('[name="replaceValue"]'),o=t.querySelector('[name="replaceSelected"]'),n=t.querySelector('[name="checkAll"]'),r=t.querySelector('[name="unCheckAll"]'),s=t.querySelector('[name="isRegex"]'),l=t.querySelector('[name="isCaseSensitive"]');this.form=t.querySelector("form"),e.addEventListener("keyup",i.Utils.debounce((()=>{this.search(e.value,s.checked,l.checked)}),200)),s.addEventListener("change",(()=>{
this.search(e.value,s.checked,l.checked)})),l.addEventListener("change",(()=>{this.search(e.value,s.checked,l.checked)})),o.addEventListener("click",(()=>{this.submit([{name:"searchValue",value:e.value},{name:"replaceValue",value:a.value},{name:"replaceSelected",value:!0},{name:"isRegex",value:s.checked?1:0},{name:"isCaseSensitive",value:l.checked?1:0}])})),this.search(e.value,s.checked,l.checked),n.addEventListener("click",(()=>{this.toggleAll(!0)})),r.addEventListener("click",(()=>{
this.toggleAll(!1)}))},search:function(t,e,i){if(history.pushState){const e=window.location.href.replace(/(&search=.*)?$/,`&search=${encodeURIComponent(t)}`);window.history.pushState({path:e},"",e)}this.submit([{name:"searchValue",value:t},{name:"isRegex",value:e?1:0},{name:"isCaseSensitive",value:i?1:0}])},submit:function(t){const e=new FormData(this.form);t.forEach((t=>{e.append(t.name,t.value)})),fetch("?controller=Search::searchAndReplace",{method:"POST",body:e
}).then((t=>t.json())).then((t=>{this.form.innerHTML=t.html})).catch((t=>{console.log(t)}))},toggleAll:function(i){const a=this.form.querySelectorAll("[data-am-toggle] > input");Array.from(a).forEach((a=>{a.checked=i,t.Toggle.update(e(a))}))}},e(document).on("ready",(()=>{t.Search.init()}))}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e,i){t.SelectImage={dataAttr:{field:"data-am-select-image-field"},modalSelector:"#am-select-image-modal",preview:function(e){
if(!e.value||/[\*,]/.test(e.value))return;const i=t.Util.resolvePath(e.value);fetch(i,{method:"HEAD"}).then((a=>{try{const o=t.SelectImage.dataAttr,n=e.closest(`[${o.field}]`).querySelector("figure");if(a.ok){let t=n.querySelector("img");t?i!=t.src&&(t.src=i):(t=document.createElement("img"),n.appendChild(t),t.src=i)}else n.innerHTML=""}catch(t){}}))},init:function(){var i=t.SelectImage,a=i.dataAttr;e(document).on("click",`[${a.field}] button`,(function(){var t=e(this).parent().find("input")
;i.dialog(t,!1,(function(e){t.val(e),t[0].dispatchEvent(new Event("keydown",{bubbles:!0}))}))})),e(document).on("change keyup keydown",`[${a.field}] input`,(t=>{i.preview(t.target)})),e(document).on("ajaxComplete",(()=>{const t=document.querySelectorAll(`[${a.field}] input`);Array.from(t).forEach((t=>i.preview(t)))}))},dialog:function(a,o,n){var r=t.SelectImage.modalSelector,s=i.modal(r),l=function(t,e){if(s.isActive()){if(o&&"label"==e.tagName.toLowerCase()){
var i=s.find('[name="width"]').val(),a=s.find('[name="height"]').val();i&&a&&(t=t+"?"+i+"x"+a)}"function"==typeof n&&n(t),s.hide()}};e(r).removeClass("am-select-image-resize-hide"),o||e(r).addClass("am-select-image-resize-hide");var d=e(".am-inpage");if(d.length>0){var c=d.find('[name="context"]').val();s.find("form").data("amUrl",c)}s.show(),s.on("click.automad.selectImage","form button",(function(){l(e(this).parent().find("input").val(),this)})),
s.on("click.automad.selectImage","form label",(function(){l(e(this).find("input").val(),this)})),s.on("hide.uk.modal.automad.selectImage",(function(){a&&a.focus(),s.off(".automad.selectImage")}))}},t.SelectImage.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.SiteTree={class:{active:"am-u-active",iconOpen:"am-site-tree-icon-open",iconClose:"am-site-tree-icon-close",toggle:"am-site-tree-toggle"},dataAttr:"data-am-site-tree",urlAsValue:function(i,a){
var o=t.SiteTree,n=i.find('a[href^="?"]'),r=i.find("."+o.class.active+' > a[href^="?"]');r.length>0&&a.val(decodeURIComponent(r.attr("href").split("=")[1])),n.click((function(t){t.preventDefault();var n=e(this),r=n.parent(),s=decodeURIComponent(n.attr("href").split("=")[1]);i.find("."+o.class.active).removeClass(o.class.active),r.addClass(o.class.active),r.find("> a").has("."+o.class.iconOpen).click(),a.val(s).trigger("change")}))},init:function(){var i=t.SiteTree
;e("["+i.dataAttr+"]").each((function(){var a=e(this),o=a.data(t.Util.dataCamelCase(i.dataAttr));a.find("li li").has("li").each((function(){var t=e(this),a=t.children("ul"),o=e("<a></a>",{class:i.class.toggle,href:"#"}).prependTo(t),n=e("<i></i>").prependTo(o);t.hasClass(i.class.active)||t.find("."+i.class.active).length>0?n.addClass(i.class.iconClose):(n.addClass(i.class.iconOpen),a.hide()),o.click((function(t){t.preventDefault(),a.toggle(),n.toggleClass(i.class.iconOpen+" "+i.class.iconClose)
}))})),o.length>0&&i.urlAsValue(a,e(o))}))}},e(document).ready(t.SiteTree.init)}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Status={dataAttr:"data-am-status",get:function(){var i=t.Status;e("["+i.dataAttr+"]").each((function(){var a=e(this),o=a.data(t.Util.dataCamelCase(i.dataAttr));e.post("?controller=Status::get",{item:o},(function(t){a.html(t.status)}),"json")}))},init:function(){var a=e(document),o=t.Status;a.ready((function(){o.get()})),
a.ajaxComplete(i.Utils.debounce((function(t,e,i){["?controller=UserCollection::edit","?controller=UserCollection::createUser","?controller=UserCollection::inviteUser","?controller=Headless::editTemplate","?controller=Headless::resetTemplate","?controller=Config::update","?controller=PackageManager::getPackages","?controller=System::update"].includes(i.url)&&o.get()}),1e3))}},t.Status.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.Switcher=function(){
const t="data-am-switcher-item",e=Array.from(document.querySelectorAll(`[${t}]`));if(!e.length)return!1;const i={};e.forEach((e=>{const a=e.getAttribute(t);i[a]=e}));const a=".am-switcher-link",o=".am-switcher-dropdown-label",n={},r=document.querySelector(o);Array.from(document.querySelectorAll(a)).forEach((t=>{n[t.getAttribute("href")]=t}));const s=document.querySelector("body"),l=()=>{window.location.hash&&void 0!==i[window.location.hash]||(window.location.hash=Object.keys(i)[0])
;const t=window.location.hash,e=`am-switcher-hash-${t.replace("#","")}`;s.className=s.className.replace(/am\-switcher\-hash\-\w+/g,""),s.classList.add(e),(t=>{Object.values(i).forEach((t=>{t.classList.remove("active")})),i[t].classList.add("active")})(t),(t=>{for(const[e,i]of Object.entries(n))i.classList.toggle("active",t===e);n&&r&&(r.innerHTML=n[t].innerHTML)})(t)};window.addEventListener("hashchange",(()=>{l()})),l()},e(document).on("ready",(function(){new t.Switcher}))
}(window.Automad=window.Automad||{},jQuery),function(t,e,i){t.Tags={containerId:"am-taggle",inputId:"am-input-data-tags",dataAttr:"data-am-tags",init:function(){var a=t.Tags,o=e("#"+a.containerId);if(o.length){var n=t.Util,r=e("#"+a.inputId),s=o.data(n.dataCamelCase(a.dataAttr)),l=new Taggle(a.containerId,{tags:s.tags,preserveCase:!0,submitKeys:[188,9],focusInputOnContainerClick:!0,placeholder:"",saveOnBlur:!1,clearOnBlur:!0,onTagAdd:function(){d(),r.trigger("change")},onTagRemove:function(){
d(),r.trigger("change")}}),d=function(){r.val(l.getTagValues().sort().join(", "))};d(),o.removeAttr("id"),$inputWrapper=e(l.getInput()).wrap('<div class="am-u-autocomplete"></div>').parent(),$autocomplete=i.autocomplete($inputWrapper,{source:s.autocomplete,minLength:1}),$autocomplete.on("selectitem.uk.autocomplete",(function(t,e,i){l.add(e.value)})),e(l.getInput()).on("change",(function(){e(this).val("")}))}}},e(document).on("ajaxComplete",t.Tags.init)
}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,e){t.Textarea={selector:"textarea.am-u-form-controls:not([data-am-u-markdowneditor]), textarea.cdx-input",handleTabs:function(t){if(9===t.keyCode){t.preventDefault(),t.stopPropagation();var i=this.selectionStart,a=this.selectionEnd,o=e(t.target),n=o.val();o.val(n.substring(0,i)+"\t"+n.substring(a)),this.selectionStart=this.selectionEnd=i+1}},init:function(){var i=t.Textarea,a=e(document),o=function(){
e(i.selector).trigger("update.automad.textarea")};a.on("keyup focus focusout update.automad.textarea",i.selector,i.resize),a.on("drop cut paste",i.selector,(function(t){var i=e(t.target);setTimeout((function(t){i.trigger("update.automad.textarea")}),50)})),a.ajaxComplete(o),a.on("ready",o),a.on("click",".am-u-accordion-title",(function(){setTimeout(o,50)})),e(window).resize(o),a.on("keydown",i.selector,i.handleTabs)},resize:function(t){
var i=e(t.target),a=i.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />"),o=e("<div></div>").appendTo("body").hide().width(i.width()).html(a+" ").css({"white-space":"pre-wrap","word-wrap":"break-word","overflow-wrap":"break-word","font-family":i.css("font-family"),"font-size":i.css("font-size"),"line-height":i.css("line-height"),"letter-spacing":i.css("letter-spacing")});i.height(o.height()),o.remove()}},t.Textarea.init()}(window.Automad=window.Automad||{},jQuery),
function(t,e){t.Toggle={labelDataAttr:"data-am-toggle",class:{active:"am-u-active"},checkbox:function(i){t.Toggle.update(e(i.target))},init:function(){e("["+t.Toggle.labelDataAttr+"] input").each((function(){t.Toggle.update(e(this))}))},radio:function(i){e('input[name="'+e(i.target).attr("name")+'"]').each((function(){t.Toggle.update(e(this))}))},update:function(i){var a=t.Toggle,o=i.parent(),n=o.data(t.Util.dataCamelCase(a.labelDataAttr))
;if(i.is(":checked")?o.addClass(a.class.active):o.removeClass(a.class.active),n){var r=e(n);i.is(":checked")?r.addClass(a.class.active):r.removeClass(a.class.active)}}},e(document).on("change","["+t.Toggle.labelDataAttr+'] [type="checkbox"]',t.Toggle.checkbox),e(document).on("change","["+t.Toggle.labelDataAttr+'] [type="radio"]',t.Toggle.radio),e(document).on("ready ajaxComplete",t.Toggle.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){t.ToggleDefault={
dataAttr:"data-am-toggle-default",update:function(e){e.closest("["+t.ToggleDefault.dataAttr+"]").attr("data-selected",e.find(":selected").val())},init:function(){e("["+t.ToggleDefault.dataAttr+"] select").each((function(){t.ToggleDefault.update(e(this))}))}},e(document).on("change","["+t.ToggleDefault.dataAttr+"] select",(function(i){t.ToggleDefault.update(e(this))})),e(document).on("ready ajaxComplete",t.ToggleDefault.init)}(window.Automad=window.Automad||{},jQuery),function(t,e){
t(document).on("ready ajaxComplete",(function(){setTimeout((function(){t("html.am-u-touch [data-am-u-tooltip]").removeAttr("data-am-u-tooltip")}),200)})),e.on("beforeready.uk.dom",(function(){t.extend(e.components.tooltip.prototype.defaults,{src:function(t){var e=t.attr("title");return void 0!==e&&(/mac/i.test(window.navigator.userAgent)&&(e=e.replace("Ctrl","⌘")),e=e.replace(/\[([^\]]+)\]/,"<div><small>$1</small></div>"),t.data("cached-title",e).removeAttr("title")),t.data("cached-title")}})}))
}(jQuery,UIkit),function(t,e){t.Upload={dataAttr:{url:"data-am-url",dropzoneText:"data-am-dropzone-text",browseText:"data-am-browse-text"},selectors:{modal:"#am-upload-modal",container:"#am-upload-container"},$modal:"",$container:"",$close:"",page:"",$dropzone:e("<div></div>",{class:"am-files-dropzone am-u-hidden-touch"}),$input:e('<input type="file" multiple />'),$browse:e("<button></button>",{type:"button",class:"am-u-button am-u-button-success am-u-button-large am-u-width-1-1 am-u-margin-small-top"}),
init:function(i){var a=t.Upload,o=t.Util,n=a.dataAttr;a.$modal=e(a.selectors.modal),a.$container=e(a.selectors.container).empty(),a.page=a.$modal.data(o.dataCamelCase(n.url)),a.$dropzone.html('<i class="am-u-icon-arrows"></i>&nbsp;&nbsp;'+a.$modal.data(o.dataCamelCase(n.dropzoneText))).appendTo(a.$container),a.$input.appendTo(a.$dropzone).hide(),a.$browse.html('<i class="am-u-icon-folder-open"></i>&nbsp;&nbsp;'+a.$modal.data(o.dataCamelCase(n.browseText))).insertAfter(a.$dropzone).click((function(){
return t.Upload.$input.click(),!1})),a.$close=a.$modal.find(".am-u-modal-close"),a.plugin(),e(a.selectors.modal).on("hide.uk.modal",{$filesForm:a.$modal.closest("form")},a.refresh)},plugin:function(){var i=t.Upload;i.$input.fileupload({url:"?controller=FileCollection::upload",dataType:"json",dropZone:i.$dropzone,sequentialUploads:!0,singleFileUploads:!0,formData:[{name:"url",value:i.page}],add:function(a,o){var n="";e.each(o.files,(function(e){
n+='<div class="am-text-white am-u-text-truncate">'+o.files[e].name+'</div><div class="am-u-text-small am-u-text-muted">'+t.Util.formatBytes(o.files[e].size)+"</div>"})),o.context=e("<div></div>",{class:"am-u-margin-top"}).appendTo(i.$container),e(n).appendTo(o.context),e('<div class="am-u-progress am-u-progress-striped am-u-active"><div class="am-u-progress-bar"></div></div>').appendTo(o.context),o.context.find(".am-u-progress-bar").width("0px"),o.submit(),i.$close.prop("disabled",!0)},progress:function(t,e){
var i=parseInt(e.loaded/e.total*100,10);e.context.find(".am-u-progress-bar").width(i+"%").text(i+" %")},stop:function(t){i.$close.prop("disabled",!1)},done:function(t,e){e.context.find(".am-u-progress").removeClass("am-u-progress-striped am-u-active"),e.result.error?e.context.find(".am-u-progress").addClass("am-u-progress-danger").find(".am-u-progress-bar").text(e.result.error):e.context.find(".am-u-progress").addClass("am-u-progress-success")},fail:function(t,e){
e.context.find(".am-u-progress").addClass("am-u-progress-danger").removeClass("am-u-progress-striped am-u-active"),e.context.find(".am-u-progress-bar").text("Error")}})},refresh:function(t){t.data.$filesForm.empty().submit()}},e(document).on("click",'[href="'+t.Upload.selectors.modal+'"]',t.Upload.init),e(document).on("drop dragover",t.Upload.selectors.modal,(function(t){t.preventDefault()}))}(window.Automad=window.Automad||{},jQuery),function(t,e){t.Util={create:{element:function(t,e){
for(var i=document.createElement(t),a=0;a<e.length;a++)i.classList.add(e[a]);return i},colorPicker:function(e,i){const a=t.Util.create.element("div",["am-u-flex"]);return a.dataset.amColorpicker=!0,a.innerHTML=`\n\t\t\t\t\t<input type="color" value="${i}">\n\t\t\t\t\t<input type="text" class="${e} am-u-form-controls am-u-width-1-1" value="${i}">\n\t\t\t\t`,a},editable:function(e,i,a){var o=t.Util.create.element("span",e);return o.contentEditable=!0,o.dataset.placeholder=i,o.innerHTML=a,o},
label:function(e,i=["am-block-label"]){var a=t.Util.create.element("label",i);return a.textContent=e,a},numberUnit:function(e,i){const a=t.Util.create,o=a.element("div",["am-form-input-group"]);var n=(i=String(i)).replace(/([^\d\.]+)/g,""),r=i.replace(/.+?(px|em|rem|%|vh|vw)/g,"$1")||"px";return o.innerHTML=`\n\t\t\t\t\t${a.editable(["cdx-input","am-u-text-right",`${e}number`],"",n).outerHTML}\n\t\t\t\t\t${a.select(["cdx-input",`${e}unit`],["px","em","rem","%","vw","vh"],r).outerHTML}\n\t\t\t\t`,o
},select:function(e,i,a){var o=t.Util.create.element("select",e),n=[];return i.forEach((function(t){let e,i,o="";t==a&&(o=" selected"),i=t.replace(/^[\/\\\\]/g,"").replace(/[\/\\\\]/g," / ").replace(/_/g," ").replace(".php",""),e=`<option value="${t}"${o}>${i}</option>`,n.push(e)})),o.innerHTML=n.join(""),o}},dataCamelCase:function(t){return t=(t=t.replace(/data-/g,"")).replace(/\-[a-z]/g,(function(t){return t.charAt(1).toUpperCase()}))},formatBytes:function(t){
return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" gb":t>=1e6?(t/1e6).toFixed(2)+" mb":(t/1e3).toFixed(2)+" kb"},getNumberUnitAsString:function(e,i){const a=t.Util.stripNbsp(e.textContent).trim(),o=i.value;return a.length?`${a}${o}`:""},resolvePath:function(t){var i=e("[data-am-path]").data("amPath"),a=e("[data-am-base-url]"),o=".";return a.length&&(o=a.data("amBaseUrl")),void 0===i&&(i=""),t.includes("://")?t:t.startsWith("/")?o+t:o+"/pages"+i+t},resolveUrl:function(t){
var i=e("[data-am-url]").data("amUrl");return void 0===i&&(i=""),t.includes("://")?t:t.startsWith("/")?"."+t:"."+i+"/"+t},stripNbsp:function(t){return t.replace(/\&nbsp;/g," ").trim()}}}(window.Automad=window.Automad||{},jQuery),function(t,e,i){i.defineExtension("AutomadBlockImage",(function(){var i=this;t.SelectImage.dialog(i,!0,(function(t){i.replaceRange("![]("+t+")\n",i.getCursor()),e(i.getTextArea()).trigger("keydown")}))}))}(window.Automad=window.Automad||{},jQuery,CodeMirror),
function(t,e,i){i.defineExtension("AutomadLink",(function(){var i=this;t.Link.dialog(i,(function(t){var a=i.getSelection();a||(a=t),i.replaceSelection("["+a+"]("+t+")"),e(i.getTextArea()).trigger("keydown")}))}))}(window.Automad=window.Automad||{},jQuery,CodeMirror);class AutomadEditorConfig{static get cls(){return{editor:"codex-editor",redactor:"codex-editor__redactor",toolbar:"ce-toolbar",actionsButton:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",block:"ce-block",
blockFocused:"ce-block--focused",blockContent:"ce-block__content",input:"cdx-input",settingsButton:"cdx-settings-button",settingsLayout:"am-block-settings-layout"}}static tools(t,e){const i=AutomadEditorTranslation.get;let a={},o=!1,n=!1;return t||(o=["bold","italic","underline","inlineCode","link","fontSize","lineHeight","color","background","editorJSStyle"],n=["bold","italic","underline","inlineCode","fontSize","lineHeight","color","background"],a={bold:AutomadBold,italic:AutomadItalic,
underline:AutomadUnderline,inlineCode:AutomadInlineCode,link:AutomadLink,color:AutomadColor,background:AutomadBackground,fontSize:AutomadFontSize,lineHeight:AutomadLineHeight,editorJSStyle:{class:EditorJSStyle.StyleInlineTool,shortcut:" "}}),Object.assign({layout:{class:AutomadTuneLayout,config:{flex:e}},paragraph:{class:AutomadBlockParagraph,inlineToolbar:o},section:{class:AutomadBlockSection},header:{class:AutomadBlockHeader,shortcut:"CMD+SHIFT+H",inlineToolbar:o,config:{levels:[1,2,3,4,5,6],
defaultLevel:2}},lists:{class:AutomadBlockList,inlineToolbar:o},table:{class:AutomadBlockTable,inlineToolbar:o},quote:{class:AutomadBlockQuote,inlineToolbar:o,config:{quotePlaceholder:i("quote_placeholder"),captionPlaceholder:i("quote_placeholder_caption")}},delimiter:{class:AutomadBlockDelimiter},image:{class:AutomadBlockImage,inlineToolbar:o},gallery:{class:AutomadBlockGallery},slider:{class:AutomadBlockSlider},buttons:{class:AutomadBlockButtons,inlineToolbar:n},pagelist:{
class:AutomadBlockPagelist},filelist:{class:AutomadBlockFilelist},toc:{class:AutomadBlockToc},code:{class:AutomadBlockTextareaCode},raw:{class:AutomadBlockTextareaRaw},mail:{class:AutomadBlockMail},snippet:{class:AutomadBlockSnippet},embed:{class:AutomadBlockEmbed}},a)}}class AutomadEditorIcons{static get get(){return{
alignCenter:'<svg width="16" height="11" viewBox="0 0 16 11"><path d="M1.069 0H13.33a1.069 1.069 0 0 1 0 2.138H1.07a1.069 1.069 0 1 1 0-2.138zm3.15 4.275h5.962a1.069 1.069 0 0 1 0 2.137H4.22a1.069 1.069 0 1 1 0-2.137zM1.069 8.55H13.33a1.069 1.069 0 0 1 0 2.137H1.07a1.069 1.069 0 0 1 0-2.137z"/></svg>',
alignLeft:'<svg width="16" height="11" viewBox="0 0 16 11"><path d="M1.069 0H13.33a1.069 1.069 0 0 1 0 2.138H1.07a1.069 1.069 0 1 1 0-2.138zm0 4.275H9.03a1.069 1.069 0 1 1 0 2.137H1.07a1.069 1.069 0 1 1 0-2.137zm0 4.275h9.812a1.069 1.069 0 0 1 0 2.137H1.07a1.069 1.069 0 0 1 0-2.137z" /></svg>',
listOrdered:'<svg width="17" height="13" viewBox="0 0 17 13"><path d="M5.819 4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0-4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0 9.357h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 0 1 0-2.137zM1.468 4.155V1.33c-.554.404-.926.606-1.118.606a.338.338 0 0 1-.244-.104A.327.327 0 0 1 0 1.59c0-.107.035-.184.105-.234.07-.05.192-.114.369-.192.264-.118.475-.243.633-.373.158-.13.298-.276.42-.438a3.94 3.94 0 0 1 .238-.298C1.802.019 1.872 0 1.975 0c.115 0 .208.042.277.127.07.085.105.202.105.351v3.556c0 .416-.15.624-.448.624a.421.421 0 0 1-.32-.127c-.08-.085-.121-.21-.121-.376zm-.283 6.664h1.572c.156 0 .275.03.358.091a.294.294 0 0 1 .123.25.323.323 0 0 1-.098.238c-.065.065-.164.097-.296.097H.629a.494.494 0 0 1-.353-.119.372.372 0 0 1-.126-.28c0-.068.027-.16.081-.273a.977.977 0 0 1 .178-.268c.267-.264.507-.49.722-.678.215-.188.368-.312.46-.371.165-.11.302-.222.412-.334.109-.112.192-.226.25-.344a.786.786 0 0 0 .085-.345.6.6 0 0 0-.341-.553.75.75 0 0 0-.345-.08c-.263 0-.47.11-.62.329-.02.029-.054.107-.101.235a.966.966 0 0 1-.16.295c-.059.069-.145.103-.26.103a.348.348 0 0 1-.25-.094.34.34 0 0 1-.099-.258c0-.132.031-.27.093-.413.063-.143.155-.273.279-.39.123-.116.28-.21.47-.282.189-.072.411-.107.666-.107.307 0 .569.045.786.137a1.182 1.182 0 0 1 .618.623 1.18 1.18 0 0 1-.096 1.083 2.03 2.03 0 0 1-.378.457c-.128.11-.344.282-.646.517-.302.235-.509.417-.621.547a1.637 1.637 0 0 0-.148.187z"/></svg>',
listUnordered:'<svg width="17" height="13" viewBox="0 0 17 13"><path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>'}}}
class AutomadEditorImageSelection{constructor(t,e){const i=t.replace(/\s/g,"").split(",");this.container=e,this.render(i)}render(t){const e=document.createElement("div"),i=document.createElement("div");t.forEach((t=>{e.appendChild(this.renderItem(t))})),e.classList.add("am-sortable"),i.classList.add("am-u-button"),i.innerHTML=`<i class="am-u-icon-plus"></i>&nbsp; ${AutomadEditorTranslation.get("ui_add")}`,i.addEventListener("click",(()=>{const t=this.renderItem(""),i=t.querySelector("input")
;e.appendChild(t),Automad.SelectImage.dialog(!1,!1,(t=>{i.value=t,i.dispatchEvent(new Event("keydown",{bubbles:!0}))}))})),this.container.appendChild(e),this.container.appendChild(i),Sortable.create(e,{group:"automad",animation:200,draggable:".am-item",handle:".am-drag, figure",forceFallback:!0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag"})}renderItem(t){const e=Automad.Util.create.element("div",["am-item"])
;return e.setAttribute("data-am-select-image-field",""),
e.innerHTML=`\n\t\t\t<figure></figure>\n\t\t\t<div>\n\t\t\t\t<input type="text" class="am-u-form-controls am-u-width-1-1" value="${this.sanitize(t)}" />\n\t\t\t\t<button type="button" class="am-u-button">\n\t\t\t\t\t<i class="am-u-icon-folder-open-o"></i>&nbsp;\n\t\t\t\t\t${AutomadEditorTranslation.get("ui_browse")}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<span class="am-delete am-u-button"><i class="am-u-icon-trash-o"></i></span>\n\t\t\t<span class="am-drag"><i class="am-u-icon-arrows-v"></i></span>\n\t\t`,
e.querySelector(".am-delete").addEventListener("click",(()=>{e.remove()})),Automad.SelectImage.preview(e.querySelector("input")),e}save(){const t=this.container.querySelectorAll("input"),e=[];return Array.from(t).forEach((t=>{const i=this.sanitize(t.value);i.length>0&&e.push(i)})),e.join(", ")}sanitize(t){return t.replace(/[^\w\-\/\:\?\=\&\+\*\.]/g,"")}}class AutomadInlineTool{static get isInline(){return!0}static get title(){}static get sanitize(){}get cls(){return{input:"am-inline-tool-input",
wrapper:"am-inline-tool-action"}}get tag(){}get icon(){}get state(){return this._state}set state(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}constructor({api:t}){this.api=t,this.button=null,this._state=!1}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`<svg width="20px" height="20px" viewBox="0 0 20 20">${this.icon}</svg>`,this.button.classList.add(this.api.styles.inlineToolButton),
this.button}surround(t){this.state?this.unwrap():this.wrap(t)}wrap(t){const e=t.extractContents(),i=document.createElement(this.tag);i.appendChild(e),t.insertNode(i),this.api.selection.expandToTag(i)}unwrap(){try{const t=this.api.selection.findParentTag(this.tag);this.api.selection.expandToTag(t);const e=window.getSelection().getRangeAt(0),i=e.extractContents();t.remove(),e.insertNode(i)}catch(t){}}checkState(){const t=this.api.selection.findParentTag(this.tag);this.state=!!t,
void 0!==this.showActions&&void 0!==this.hideActions&&(this.state?this.showActions(t):this.hideActions())}}!function(t,e,i){t.layout={$:e,UIkit:i}}(window.Automad=window.Automad||{},jQuery,UIkit);class AutomadLayoutButton{constructor(t,e,i,a){this.options=Object.assign({title:"",icon:"",name:"",value:"",buttonsClearRegex:"",clearDataKeys:[]},a),this.data=e,this.api=t,this.wrapper=i,this.cls=t.styles.settingsButton,this.clsActive=t.styles.settingsButtonActive,
this.button=Automad.Util.create.element("div",[this.cls,this.options.name]),this.button.innerHTML=this.options.icon,t.tooltip.onHover(this.button,this.options.title,{placement:"top"}),this.button.addEventListener("click",(()=>{this.onClickHandler()})),this.onInit()}onInit(){this.button.classList.toggle(this.clsActive,this.data[this.options.name]==this.options.value)}onClickHandler(){
const t=this.wrapper.querySelectorAll(`.${this.cls}`),e=this.api.blocks.getBlockByIndex(this.api.blocks.getCurrentBlockIndex()).holder;Array.from(t).forEach((t=>{t.className.match(this.options.buttonsClearRegex)&&t.classList.remove(this.clsActive)})),this.options.clearDataKeys.forEach((t=>{this.data[t]=!1})),this.button.classList.add(this.clsActive),this.data[this.options.name]=this.options.value,AutomadLayout.toggleBlockClasses(e,this.data)}get(){return this.button}}
class AutomadLayoutResetButton extends AutomadLayoutButton{onInit(){this.button.classList.toggle(this.clsActive,!this.data.width&&!this.data.stretched)}onClickHandler(){const t=this.wrapper.querySelectorAll(`.${this.cls}`),e=this.api.blocks.getBlockByIndex(this.api.blocks.getCurrentBlockIndex()).holder;Array.from(t).forEach((t=>{t.className.match(this.options.buttonsClearRegex)&&t.classList.remove(this.clsActive)})),this.options.clearDataKeys.forEach((t=>{this.data[t]=!1})),
this.button.classList.add(this.clsActive),AutomadLayout.toggleBlockClasses(e,this.data)}}class AutomadLayout{static get options(){const t=AutomadEditorTranslation.get;return{reset:{title:t("layout_default"),name:"reset",icon:'<svg width="24px" height="16px" viewBox="0 0 30 20"><path d="M27,0H3C1.3,0,0,1.3,0,3v14c0,1.7,1.3,3,3,3h24c1.7,0,3-1.3,3-3V3C30,1.3,28.7,0,27,0z M2,17V3c0-0.6,0.4-1,1-1h5v16H3 C2.4,18,2,17.6,2,17z M28,17c0,0.6-0.4,1-1,1h-5V2h5c0.6,0,1,0.4,1,1V17z"/></svg>'},stretch:{
title:t("layout_stretch"),name:"stretched",
icon:'<svg width="24px" height="16px" viewBox="0 0 30 20"><path d="M27,0H3C1.3,0,0,1.3,0,3v14c0,1.7,1.3,3,3,3h24c1.7,0,3-1.3,3-3V3C30,1.3,28.7,0,27,0z M25.9,10.9l-5,5 c-0.2,0.2-0.6,0.4-0.9,0.4s-0.6-0.1-0.9-0.4c-0.5-0.5-0.5-1.3,0-1.8l2.9-2.9H8l2.9,2.9c0.5,0.5,0.5,1.3,0,1.8 c-0.2,0.2-0.6,0.4-0.9,0.4s-0.6-0.1-0.9-0.4l-5-5c-0.5-0.5-0.5-1.3,0-1.8l5-5c0.5-0.5,1.3-0.5,1.8,0s0.5,1.3,0,1.8L8,8.8h14 l-2.9-2.9c-0.5-0.5-0.5-1.3,0-1.8s1.3-0.5,1.8,0l5,5C26.4,9.6,26.4,10.4,25.9,10.9z"/></svg>',value:!0},
width:[{title:t("layout_width")+": 1⁄4",name:"width",icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18,16c0,1.1-0.9,2-2,2H5V2h11 c1.1,0,2,0.9,2,2V16z"/>',value:"1/4"},{title:t("layout_width")+": 1⁄3",name:"width",icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18,16c0,1.1-0.9,2-2,2H7V2h9 c1.1,0,2,0.9,2,2V16z"/>',value:"1/3"},{title:t("layout_width")+": 1⁄2",name:"width",
icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18,16c0,1.1-0.9,2-2,2h-6V2h6 c1.1,0,2,0.9,2,2V16z"/>',value:"1/2"},{title:t("layout_width")+": 2⁄3",name:"width",icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18,16c0,1.1-0.9,2-2,2h-3V2h3 c1.1,0,2,0.9,2,2V16z"/>',value:"2/3"},{title:t("layout_width")+": 3⁄4",name:"width",
icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18,16c0,1.1-0.9,2-2,2h-1V2h1 c1.1,0,2,0.9,2,2V16z"/>',value:"3/4"},{title:t("layout_width")+": 1⁄1",name:"width",icon:'<path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z"/>',value:"1/1"}]}}constructor(t){const e=t.configuration.holder;this.editor=t,this.holder="string"==typeof e?document.getElementById(e):e,this.initUndoHandler()}alignButton(){
let t=this.editor;try{var e=t.configuration.holder,i=document.getElementById(e).querySelector(`.${AutomadEditorConfig.cls.actionsButton}`),a=t.blocks.getCurrentBlockIndex(),o=t.blocks.getBlockByIndex(a).holder.querySelector(`.${AutomadEditorConfig.cls.blockContent}`);i.style.transform="translate3d(0,0,0)";var n=o.getBoundingClientRect().right,r=i.getBoundingClientRect().right,s=o.getBoundingClientRect().top,l=i.getBoundingClientRect().top,d=r-n,c=s-l
;i.style.transform=`translate3d(${-1*d}px,${c}px,0)`}catch(t){}}applyLayout(t=!1,e=!1){var i=this.editor,a=t=>{for(var a=0;a<i.blocks.getBlocksCount();a++){var o=i.blocks.getBlockByIndex(a).holder;void 0!==t.blocks&&void 0!==t.blocks[a]&&void 0!==t.blocks[a].tunes&&void 0!==t.blocks[a].tunes.layout&&AutomadLayout.toggleBlockClasses(o,t.blocks[a].tunes.layout)}"function"==typeof e&&e()};if(t)a(t);else try{i.save().then((t=>{a(t)}))}catch(t){}}settingsButtonObserver(){
var t=this.editor.configuration.holder,e=this,i=function(){e.alignButton()};Automad.layout.$(document).on("mousedown",`#${t} .${AutomadEditorConfig.cls.block}, #${t} .${AutomadEditorConfig.cls.redactor}`,(function(){setTimeout(i,50)})),Automad.layout.$(document).on("mousedown click",`#${t} .${AutomadEditorConfig.cls.settingsLayout} div, .${AutomadEditorConfig.cls.settingsButton}`,i),Automad.layout.$(document).on("dragend mouseup",`#${t} .${AutomadEditorConfig.cls.actionsButton} div`,i)}
initPasteHandler(){document.querySelector(`#${this.editor.configuration.holder} > div > div`).addEventListener("paste",(()=>{setTimeout((()=>{this.applyLayout()}),50)}))}initUndoHandler(){this.holder.addEventListener("undo",(()=>{this.applyLayout(),this.alignButton()}))}static toggleBlockClasses(t,e){t.className=t.className.replace(/width[\d\-]+/g,""),t.classList.toggle("stretched",void 0!==e.stretched&&e.stretched),void 0!==e.width&&e.width&&t.classList.add(`width-${e.width.replace("/","-")}`)}
static renderSettings(t,e,i,a){const o=a.allowStretching||!1,n=a.flex||!1,r=Automad.Util.create.element,s=AutomadLayout.options,l=r("div",[AutomadEditorConfig.cls.settingsLayout]);if(n||o){const a=r("div",["cdx-settings-1-2"]),d=r("div",["cdx-settings"]);o&&(t.stretched=e.stretched||!1),n&&(t.width=e.width||!1);const c=new AutomadLayoutResetButton(i,t,l,Object.assign(s.reset,{icon:s.reset.icon,buttonsClearRegex:/(width|stretched)/g,clearDataKeys:["stretched","width"]}))
;if(a.appendChild(c.get()),o){const e=new AutomadLayoutButton(i,t,l,Object.assign(s.stretch,{icon:s.stretch.icon,buttonsClearRegex:/(width|reset)/g,clearDataKeys:["width"]}));a.appendChild(e.get())}else{let t=r("div",[i.styles.settingsButton,"disabled"]);t.innerHTML=s.stretch.icon,t.addEventListener("click",(function(t){return t.preventDefault(),t.stopPropagation(),!1})),a.appendChild(t)}l.appendChild(a),n&&(s.width.forEach((function(e){const a=new AutomadLayoutButton(i,t,l,Object.assign(e,{
icon:AutomadLayout.icon(e.icon),buttonsClearRegex:/(width|stretched|reset)/g,clearDataKeys:["stretched"]}));d.appendChild(a.get())})),l.appendChild(d))}return l}static icon(t){return`<svg width="16px" height="16px" viewBox="0 0 20 20">${t}</svg>`}}class AutomadLegacyData{get targetVersion(){return"1.9.0"}constructor(t){this.data=t}convert(){let t=this.data
;return void 0===t.blocks||this.normalizeVersion(t.automadVersion)>=this.normalizeVersion(this.targetVersion)||(console.log("Converting legacy block data ..."),t=this.convertLayout(t),t=this.convertLists(t)),t}normalizeVersion(t){void 0===t&&(t="0.0.0");return t.split(".").map((t=>t.padStart(3,"0"))).join("")}convertLayout(t){return t.blocks.forEach((t=>{void 0===t.tunes&&(t.tunes={layout:{width:t.data.widthFraction||!1,stretched:t.data.stretched||!1}})})),t}convertLists(t){
return t.blocks.forEach((t=>{"lists"==t.type&&(t.data.items=t.data.items.map((t=>"string"==typeof t?{content:t,items:[]}:t)))})),t}}class AutomadEditorTranslation{static get(t){try{return AutomadEditorTextModules[`editor_${t}`]}catch(t){return""}}}class AutomadEditorUndo{static get limit(){return 20}constructor({editor:t,data:e}){const i=t.configuration.holder;this.editor=t,this.holder="string"==typeof i?document.getElementById(i):i
;const a=new AutomadUndoObserver((()=>this.registerChange()),this.holder),o="blocks"in e?e.blocks:[],n={index:o.length-1,state:o};this.stack=[n],this.initialItem=n,this.position=0,a.setMutationObserver(),this.setEventListeners()}defaultState(t){return t.length||(t=[{type:"paragraph",data:{}}]),t}renderState(t){const{index:e,state:i}=this.stack[t];this.shouldSaveHistory=!1,this.editor.blocks.render({blocks:this.defaultState(i)}).then((()=>{this.editor.caret.setToBlock(e,"end"),
this.holder.dispatchEvent(new CustomEvent("undo"))}))}undo(){this.position>0&&this.renderState(this.position-=1)}redo(){this.position<this.stack.length-1&&this.renderState(this.position+=1)}save(t){const e=this.editor.blocks.getCurrentBlockIndex();this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1),this.stack.push({index:e,state:t}),this.position+=1}truncate(t,e){
for(;t.length>e;)t.shift()}editorDidUpdate(t){const{state:e}=this.stack[this.position];return t.length!==e.length||JSON.stringify(e)!==JSON.stringify(t)}registerChange(){this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then((t=>{this.editorDidUpdate(t.blocks)&&this.save(t.blocks)})),this.shouldSaveHistory=!0}setEventListeners(){const t=/(mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",e=e=>{e[t]&&"z"===e.key&&(e.preventDefault(),this.undo())},i=e=>{
e[t]&&"y"===e.key&&(e.preventDefault(),this.redo())};this.holder.addEventListener("keydown",e),this.holder.addEventListener("keydown",i),this.holder.addEventListener("destroy",(()=>{this.holder.removeEventListener("keydown",e),this.holder.removeEventListener("keydown",i)}))}}class AutomadUndoObserver{constructor(t,e){this.holder=e,this.observer=null,this.debounceTimer=500,this.mutationDebouncer=this.debounce((()=>{t()}),this.debounceTimer)}mutationHandler(t){let e=!1;t.forEach((t=>{
switch(t.type){case"childList":t.target===this.holder?this.onDestroy():e=!0;break;case"characterData":e=!0;break;case"attributes":t.target.classList.contains("ce-block")||(e=!0)}})),e&&this.mutationDebouncer()}setMutationObserver(){const t=this.holder;this.observer=new MutationObserver((t=>{this.mutationHandler(t)})),this.observer.observe(t,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}debounce(t,e){let i;return(...a)=>{const o=this;clearTimeout(i),
i=setTimeout((()=>t.apply(o,a)),e)}}onDestroy(){const t=new CustomEvent("destroy");this.holder.dispatchEvent(t),this.observer.disconnect()}}class AutomadBlockButtons{static get isReadOnlySupported(){return!0}static get sanitize(){return{primaryText:{},primaryLink:!1,primaryStyle:!1,secondaryText:{},secondaryLink:!1,secondaryStyle:!1}}static get toolbox(){return{title:AutomadEditorTranslation.get("buttons_toolbox"),
icon:'<svg xmlns="http://www.w3.org/2000/svg" width="18px" height="15px" viewBox="0 0 18 15"><path d="M16,2.359c0,0,0,0.001,0,0.002C15,0.972,13.623,0,12,0H4C1.791,0,0,1.791,0,4v5c0,1.624,0.972,3,2.362,4 c-0.001,0-0.001,0-0.002,0C2.987,14,4.377,15,6,15h8c2.209,0,4-1.791,4-4V6C18,4.377,17,2.987,16,2.359z M2,4c0-1.103,0.897-2,2-2h8 c1.103,0,2,0.897,2,2v5c0,1.103-0.897,2-2,2H4c-1.103,0-2-0.897-2-2V4z"/><path d="M6,8H5C4.171,8,3.5,7.329,3.5,6.5S4.171,5,5,5h1c0.828,0,1.5,0.671,1.5,1.5S6.828,8,6,8z"/><path d="M11,8h-1C9.172,8,8.5,7.329,8.5,6.5S9.172,5,10,5h1c0.828,0,1.5,0.671,1.5,1.5S11.828,8,11,8z"/></svg>'
}}constructor({data:t,api:e}){var i=Automad.Util.create,a=AutomadEditorTranslation.get;this.api=e,this.data={primaryText:t.primaryText||"",primaryLink:t.primaryLink||"",primaryStyle:t.primaryStyle||{},secondaryText:t.secondaryText||"",secondaryLink:t.secondaryLink||"",secondaryStyle:t.secondaryStyle||{},alignment:t.alignment||"left"},this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box","am-block-buttons"),
this.wrapper.innerHTML=`\n\t\t\t<ul class="am-u-grid am-u-grid-width-medium-1-2 am-u-form" data-am-u-grid-margin>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="am-preview-primary am-u-display-inline-block">\n\t\t\t\t\t\t${""!=this.data.primaryText?this.data.primaryText:"Button"}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="am-preview-secondary am-u-display-inline-block">\n\t\t\t\t\t\t${""!=this.data.secondaryText?this.data.secondaryText:"Button"}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t\t<hr>\n\t\t\t<ul class="am-u-grid am-u-grid-width-medium-1-2 am-u-form" data-am-u-grid-margin>\n\t\t\t\t<li class="primary">\n\t\t\t\t\t<div class="am-block-title am-u-text-truncate">${a("button_primary")}</div>\n\t\t\t\t\t<div class="style"></div>\n\t\t\t\t\t${i.label(a("button_label")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-primary-text"],"",this.data.primaryText).outerHTML}\n\t\t\t\t\t${i.label(a("button_link")).outerHTML}\n\t\t\t\t\t<div class="am-form-icon-button-input am-u-flex">\n\t\t\t\t\t\t<button type="button" class="am-u-button am-u-button-large">\n\t\t\t\t\t\t\t<i class="am-u-icon-link"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<input type="text" class="am-block-primary-link am-u-form-controls am-u-width-1-1" value="${this.data.primaryLink}" />\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="secondary">\n\t\t\t\t\t<div class="am-block-title am-u-text-truncate">${a("button_secondary")}</div>\n\t\t\t\t\t<div class="style"></div>\n\t\t\t\t\t${i.label(a("button_label")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-secondary-text"],"",this.data.secondaryText).outerHTML}\n\t\t\t\t\t${i.label(a("button_link")).outerHTML}\n\t\t\t\t\t<div class="am-form-icon-button-input am-u-flex">\n\t\t\t\t\t\t<button type="button" class="am-u-button am-u-button-large">\n\t\t\t\t\t\t\t<i class="am-u-icon-link"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<input type="text" class="am-block-secondary-link am-u-form-controls am-u-width-1-1" value="${this.data.secondaryLink}" />\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>`
;var o=this.wrapper.querySelectorAll("button"),n=this.wrapper.querySelector("li.primary .style"),r=this.wrapper.querySelector("li.secondary .style");for(let t=0;t<o.length;++t)e.listeners.on(o[t],"click",(function(){Automad.Link.click(o[t])}));this.inputs={primaryText:this.wrapper.querySelector(".am-block-primary-text"),primaryLink:this.wrapper.querySelector(".am-block-primary-link"),secondaryText:this.wrapper.querySelector(".am-block-secondary-text"),
secondaryLink:this.wrapper.querySelector(".am-block-secondary-link")},this.renderStyleSettings(n,this.data.primaryStyle),this.renderStyleSettings(r,this.data.secondaryStyle),this.renderPreview(),this.settings=[{title:a("left"),name:"left",icon:AutomadEditorIcons.get.alignLeft},{title:a("center"),name:"center",icon:AutomadEditorIcons.get.alignCenter}]}render(){return this.wrapper}save(){return this.renderPreview(),Object.assign(this.data,{primaryText:this.inputs.primaryText.innerHTML,
primaryLink:this.inputs.primaryLink.value.trim(),secondaryText:this.inputs.secondaryText.innerHTML,secondaryLink:this.inputs.secondaryLink.value.trim()})}renderSettings(){var t=document.createElement("div"),e=document.createElement("div"),i=this;return e.classList.add("cdx-settings-1-2"),this.settings.map((function(t){var a=document.createElement("div");return a.innerHTML=t.icon,a.classList.add(i.api.styles.settingsButton),
a.classList.toggle(i.api.styles.settingsButtonActive,t.name===i.data.alignment),i.api.tooltip.onHover(a,t.title,{placement:"top"}),e.appendChild(a),a})).forEach((function(t,e,a){t.addEventListener("click",(function(){i.toggleTune(i.settings[e].name),a.forEach(((t,e)=>{var a=i.settings[e].name;t.classList.toggle(i.api.styles.settingsButtonActive,a===i.data.alignment)}))}))})),t.appendChild(e),t}toggleTune(t){this.data.alignment=t}renderStyleSettings(t,e){
const i=Automad.Util.create,a=AutomadEditorTranslation.get,o=i.element("div",["am-u-position-relative","am-u-margin-small-top"]),n=[[{label:a("button_border_width"),name:"borderWidth",type:"numberUnit"}],[{label:a("button_border_radius"),name:"borderRadius",type:"numberUnit"}],[{label:a("button_padding_horizontal"),name:"paddingHorizontal",type:"numberUnit"}],[{label:a("button_padding_vertical"),name:"paddingVertical",type:"numberUnit"}],[{label:a("button_color"),name:"color",type:"colorPicker"},{
label:a("button_background_color"),name:"background",type:"colorPicker"},{label:a("button_border_color"),name:"borderColor",type:"colorPicker"}],[{label:`${a("button_color")} (hover)`,name:"hoverColor",type:"colorPicker"},{label:`${a("button_background_color")} (hover)`,name:"hoverBackground",type:"colorPicker"},{label:`${a("button_border_color")} (hover)`,name:"hoverBorderColor",type:"colorPicker"}]]
;o.innerHTML=`\n\t\t\t<div class="am-u-form" data-am-u-dropdown="{mode:'click',pos:'bottom-center'}">\n\t\t\t\t<div class="am-u-button am-u-width-1-1 am-u-text-left am-u-text-truncate">\n\t\t\t\t\t<i class="am-u-icon-sliders"></i>&nbsp;\n\t\t\t\t\t${a("edit_style")}\n\t\t\t\t</div>\n\t\t\t\t<div class="am-style-dropdown am-u-dropdown">\n\t\t\t\t\t<div class="am-u-grid am-u-grid-width-medium-1-2" data-am-u-grid-margin></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`
;const r=o.querySelector(".am-u-grid"),s=o.querySelector(".am-style-dropdown");n.forEach((t=>{const a=i.element("div",[]);t.forEach((t=>{const o=i.label(t.label),n=i[t.type]("",e[t.name]||"");a.appendChild(o),a.appendChild(n),Array.from(n.querySelectorAll("input, select, [contenteditable]")).forEach((i=>{i.addEventListener("input",(i=>{var a;if("numberUnit"==t.type){const t=n.querySelector("[contenteditable]"),e=n.querySelector("select");a=Automad.Util.getNumberUnitAsString(t,e)
}else a=i.currentTarget.value;a?e[t.name]=a:delete e[t.name]}))}))})),r.appendChild(a)}));const l=i.label("Class (CSS)"),d=i.editable(["cdx-input"],"",e.class||"");d.addEventListener("input",(()=>{e.class=d.innerHTML})),s.appendChild(l),s.appendChild(d),t.appendChild(o)}renderPreview(){["primary","secondary"].forEach((t=>{const e=this.wrapper.querySelector(`.am-preview-${t}`),i=this.data[`${t}Style`],a={borderWidth:i.borderWidth||"1px",borderRadius:i.borderRadius||"4px",
paddingHorizontal:i.paddingHorizontal||"2em",paddingVertical:i.paddingVertical||"0.5em",color:i.color||"#121212",background:i.background||"#FFFFFF",borderColor:i.borderColor||"#CCCCCC"};e.removeAttribute("style"),["borderWidth","borderRadius","color","background","borderColor"].forEach((t=>{e.style[t]=a[t]})),e.style.borderStyle="solid",e.style.padding=`${a.paddingVertical} ${a.paddingHorizontal}`,e.innerHTML=this.data[`${t}Text`]||"Button",this.data[`${t}Text`]||(e.style.opacity="0.3")}))}}
class AutomadBlockDelimiter{static get contentless(){return!0}static get isReadOnlySupported(){return!0}static get toolbox(){return{
icon:'<svg width="18px" height="16px" viewBox="0 0 18 16"><path d="M17,9H1C0.45,9,0,8.55,0,8v0c0-0.55,0.45-1,1-1h16c0.55,0,1,0.45,1,1v0C18,8.55,17.55,9,17,9z"/><path d="M9,6C8.74,6,8.49,5.9,8.29,5.71l-3-3c-0.39-0.39-0.39-1.02,0-1.41s1.02-0.39,1.41,0L9,3.59l2.29-2.29 c0.39-0.39,1.02-0.39,1.41,0s0.39,1.02,0,1.41l-3,3C9.51,5.9,9.26,6,9,6z"/><path d="M12,15c-0.26,0-0.51-0.1-0.71-0.29L9,12.41l-2.29,2.29c-0.39,0.39-1.02,0.39-1.41,0s-0.39-1.02,0-1.41l3-3 c0.39-0.39,1.02-0.39,1.41,0l3,3c0.39,0.39,0.39,1.02,0,1.41C12.51,14.9,12.26,15,12,15z"/></svg>',
title:AutomadEditorTranslation.get("delimiter_toolbox")}}constructor({data:t,api:e}){this.api=e,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=t}drawView(){let t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t}render(){return this._element}save(t){return this.data}}(window.Automad=window.Automad||{}).embedUtils={debounce:function(t,e,i){var a,o,n,r,s;function l(){var d=Date.now()-r
;d<e&&d>=0?a=setTimeout(l,e-d):(a=null,i||(s=t.apply(n,o),n=o=null))}null==e&&(e=100);var d=function(){n=this,o=arguments,r=Date.now();var d=i&&!a;return a||(a=setTimeout(l,e)),d&&(s=t.apply(n,o),n=o=null),s};return d.clear=function(){a&&(clearTimeout(a),a=null)},d.flush=function(){a&&(s=t.apply(n,o),n=o=null,clearTimeout(a),a=null)},d}};class AutomadBlockEmbed{static get isReadOnlySupported(){return!0}static get pasteConfig(){return{patterns:AutomadBlockEmbed.patterns}}
static prepare({config:t={}}){const{services:e={}}=t;let i=Object.entries(Automad.editorJS.embedServices);const a=Object.entries(e).filter((([t,e])=>"boolean"==typeof e&&!0===e)).map((([t])=>t)),o=Object.entries(e).filter((([t,e])=>"object"==typeof e)).filter((([t,e])=>AutomadBlockEmbed.checkServiceConfig(e))).map((([t,e])=>{const{regex:i,embedUrl:a,html:o,height:n,width:r,id:s}=e;return[t,{regex:i,embedUrl:a,html:o,height:n,width:r,id:s}]}));a.length&&(i=i.filter((([t])=>a.includes(t)))),
i=i.concat(o),AutomadBlockEmbed.services=i.reduce(((t,[e,i])=>e in t?(t[e]=Object.assign({},t[e],i),t):(t[e]=i,t)),{}),AutomadBlockEmbed.patterns=i.reduce(((t,[e,i])=>(t[e]=i.regex,t)),{})}static checkServiceConfig(t){const{regex:e,embedUrl:i,html:a,height:o,width:n,id:r}=t;let s=e&&e instanceof RegExp&&i&&"string"==typeof i&&a&&"string"==typeof a;return s=s&&(void 0===r||r instanceof Function),s=s&&(void 0===o||Number.isFinite(o)),s=s&&(void 0===n||Number.isFinite(n)),s}
constructor({data:t,api:e,readOnly:i}){this.api=e,this._data={},this.element=null,this.readOnly=i,this.data=t}set data(t){if(!(t instanceof Object))throw Error("Embed Tool data should be object");const{service:e,source:i,embed:a,width:o,height:n,caption:r=""}=t;this._data={service:e||this.data.service,source:i||this.data.source,embed:a||this.data.embed,width:o||this.data.width,height:n||this.data.height,caption:r||this.data.caption||""};const s=this.element
;s&&s.parentNode.replaceChild(this.render(),s)}get data(){if(this.element){const t=this.element.querySelector(`.${this.api.styles.input}`);this._data.caption=t?t.innerHTML:""}return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",containerLoading:"embed-tool--loading",preloader:"embed-tool__preloader",caption:"embed-tool__caption",url:"embed-tool__url",content:"embed-tool__content"}}render(){if(!this.data.service){
const t=document.createElement("div");return this.element=t,t}const{html:t}=AutomadBlockEmbed.services[this.data.service],e=document.createElement("div"),i=document.createElement("div"),a=document.createElement("template"),o=this.createPreloader();e.classList.add(this.CSS.baseClass,this.CSS.container,this.CSS.containerLoading),i.classList.add(this.CSS.input,this.CSS.caption),e.appendChild(o),i.contentEditable=!this.readOnly,i.dataset.placeholder="Enter a caption",
i.innerHTML=this.data.caption||"",a.innerHTML=t,a.content.firstChild.setAttribute("src",this.data.embed),a.content.firstChild.classList.add(this.CSS.content);const n=this.embedIsReady(e);return e.appendChild(a.content.firstChild),e.appendChild(i),n.then((()=>{e.classList.remove(this.CSS.containerLoading)})),this.element=e,e}createPreloader(){const t=document.createElement("preloader"),e=document.createElement("div");return e.textContent=this.data.source,t.classList.add(this.CSS.preloader),
e.classList.add(this.CSS.url),t.appendChild(e),t}save(){return this.data}onPaste(t){const{key:e,data:i}=t.detail,{regex:a,embedUrl:o,width:n,height:r,id:s=(t=>t.shift())}=AutomadBlockEmbed.services[e],l=a.exec(i).slice(1),d=o.replace(/<\%\= remote\_id \%\>/g,s(l));this.data={service:e,source:i,embed:d,width:n,height:r}}embedIsReady(t){let e=null;return new Promise(((i,a)=>{e=new MutationObserver(Automad.embedUtils.debounce(i,450)),e.observe(t,{childList:!0,subtree:!0})})).then((()=>{
e.disconnect()}))}}!function(t){t.embedServices={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:9,width:16},youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,
embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:9,width:16,id:([t,e])=>{if(!e&&t)return t;const i={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};return e=e.slice(1).split("&").map((e=>{const[a,o]=e.split("=");if(t||"v"!==a){if(i[a])return`${i[a]}=${o}`}else t=o})).filter((t=>!!t)),t+"?"+e.join("&")}},imgur:{
regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},codepen:{regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,
embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:t=>t.join("/embed/")},instagram:{regex:/https?:\/\/www\.instagram\.com\/p\/([^\/\?\&]+)\/?/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",
html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400},dailymotion:{regex:/https?:\/\/www\.dailymotion\.com\/video\/(\w+)(\?.*?)?$/,embedUrl:"https://www.dailymotion.com/embed/video/<%= remote_id %>/",html:'<iframe width="640" height="360" frameborder="0" allowFullScreen></iframe>',height:360,width:640},giphy:{regex:/https?:\/\/giphy\.com\/(?:gifs|videos)\/(?:[^\/]*\-)?([a-zA-Z0-9]+)$/,
embedUrl:"https://giphy.com/embed/<%= remote_id %>/",html:'<iframe width="600" height="480" frameborder="0" allowFullScreen></iframe>',height:480,width:600},mixcloud:{regex:/https?:\/\/www\.mixcloud\.com\/(.+)\/$/,embedUrl:"https://www.mixcloud.com/widget/iframe/?hide_cover=1&feed=/<%= remote_id %>/",html:'<iframe height="180" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;"></iframe>',height:180,width:0},soundcloud:{
regex:/(https:\/\/soundcloud\.com\/.+)$/,embedUrl:"https://w.soundcloud.com/player/?url=<%= remote_id %>",html:'<iframe height="180" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;"></iframe>',height:180,width:0},twitter:{regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+)(?:\/.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",
html:'<iframe width="500" height="300" style="display: block; width: 500px; border-bottom: 1px solid #E0E0E0; margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:0,width:0,id:t=>t.join("/status/")}}}(function(t){return t.editorJS=t.editorJS||{},t.editorJS}(window.Automad=window.Automad||{}));class AutomadBlockFilelist{static get isReadOnlySupported(){return!0}static get sanitize(){return{file:!1,glob:!1}}static get toolbox(){return{
title:AutomadEditorTranslation.get("filelist_toolbox"),
icon:'<svg width="16px" height="18px" viewBox="0 0 16 18"><path d="M14.52,7.02c-1.57-1.57-0.99-0.99-2.5-2.5C10.89,3.39,10.25,3,8,3C7.5,3,7.19,3,7,3C4.79,3,3,4.79,3,7v7c0,2.21,1.79,4,4,4 h5c2.21,0,4-1.79,4-4c0,0,0-1.02,0-3C16,8.75,15.67,8.17,14.52,7.02z M14,14c0,1.1-0.9,2-2,2H7c-1.1,0-2-0.9-2-2V7c0-1.1,0.9-2,2-2 h2v1c0,2.21,1.79,4,4,4h1V14z"/><path d="M6,2h3.5C9.37,1.87,9.21,1.71,9.02,1.52C7.89,0.39,7.25,0,5,0C4.5,0,4.19,0,4,0C1.79,0,0,1.79,0,4v7 c0,1.48,0.81,2.75,2,3.45V11V4v0c0-1.1,0.9-2,2-2H6z"/></svg>'
}}constructor({data:t}){var e=Automad.Util.create,i=AutomadEditorTranslation.get;this.data={file:t.file||"",glob:t.glob||"*.*"},this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box"),
this.wrapper.innerHTML=`\n\t\t\t<div class="am-block-icon">${AutomadBlockFilelist.toolbox.icon}</div>\n\t\t\t<div class="am-block-title">${AutomadBlockFilelist.toolbox.title}</div>\n\t\t\t<hr>\n\t\t\t${e.label(i("filelist_template"),["am-block-label","am-u-margin-top-remove"]).outerHTML}\n\t\t\t<div class="am-block-file-select am-u-form-select am-u-button am-u-text-left am-u-width-1-1" data-am-u-form-select>\n\t\t\t\t<i class="am-u-icon-file"></i>&nbsp;\n\t\t\t\t<span></span>\n\t\t\t\t${e.select(["am-block-file"],[i("filelist_default")].concat(window.AutomadBlockTemplates.filelist),this.data.file).outerHTML}\n\t\t\t</div>\n\t\t\t${e.label(i("filelist_files")).outerHTML}\n\t\t\t${e.editable(["cdx-input","am-block-glob"],"*.pdf, *.zip",this.data.glob).outerHTML}\n\t\t`,
this.inputs={file:this.wrapper.querySelector(".am-block-file"),glob:this.wrapper.querySelector(".am-block-glob")}}render(){return this.wrapper}save(){var t=Automad.Util.stripNbsp;return Object.assign(this.data,{file:this.inputs.file.value,glob:t(this.inputs.glob.innerHTML)})}}class AutomadBlockGallery{static get enableLineBreaks(){return!0}static get isReadOnlySupported(){return!0}static get sanitize(){return{globs:!1,width:!1}}static get toolbox(){return{
title:AutomadEditorTranslation.get("gallery_toolbox"),icon:'<svg width="18px" height="15px" viewBox="0 0 18 15"><path d="M14,0H4C1.791,0,0,1.791,0,4v7c0,2.209,1.791,4,4,4h10c2.209,0,4-1.791,4-4V4C18,1.791,16.209,0,14,0z M4,2h4v6H2V4 C2,2.897,2.897,2,4,2z M4,13c-1.103,0-2-0.897-2-2v-1h6v3H4z M16,11c0,1.103-0.897,2-2,2h-4V7h6V11z M16,5h-6V2h4 c1.103,0,2,0.897,2,2V5z"/></svg>'}}constructor({data:t,api:e}){this.api=e,this.data={globs:t.globs||"*.jpg, *.png",layout:t.layout||"vertical",
width:t.width||"250px",height:t.height||"10rem",gap:t.gap||"5px",cleanBottom:void 0===t.cleanBottom||t.cleanBottom},this.inputs={},this.wrapper=this.drawView()}drawView(){const t=Automad.Util.create,e=AutomadEditorTranslation.get,i=t.element("div",["am-block-gallery","am-u-panel","am-u-panel-box"]),a=t.element("div",[]),o=t.element("div",[]);return this.imageSelection=new AutomadEditorImageSelection(this.data.globs,a),
i.innerHTML=`\n\t\t\t<div class="am-block-icon">${AutomadBlockGallery.toolbox.icon}</div>\n\t\t\t<div class="am-block-title">${AutomadBlockGallery.toolbox.title}</div>\n\t\t\t<hr>\n\t\t\t${t.label(e("gallery_files")).outerHTML}\n\t\t`,
o.innerHTML=`\n\t\t\t${t.label(e("gallery_layout"),["am-block-label","am-u-margin-top-remove"]).outerHTML}\n\t\t\t<div class="am-block-gallery-layout">\n\t\t\t\t<div class="am-block-gallery-layout-tabs">\n\t\t\t\t\t<div class="vertical">${e("gallery_layout_vertical")}</div>\n\t\t\t\t\t<div class="horizontal">${e("gallery_layout_horizontal")}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="am-block-gallery-layout-options">\n\t\t\t\t\t<div class="vertical">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("gallery_width")).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("width-",this.data.width).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="am-u-form-row">\n\t\t\t\t\t\t\t${t.label("Masonry").outerHTML}\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclass="${1==this.data.cleanBottom?"am-u-active":""} am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${e("gallery_clean_bottom")}\n\t\t\t\t\t\t\t\t<input type="checkbox" class="clean-bottom" ${1==this.data.cleanBottom?"checked":""}>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="horizontal">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("gallery_height")).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("height-",this.data.height).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t${t.label(e("gallery_gap")).outerHTML}\n\t\t\t${t.numberUnit("gap-",this.data.gap).outerHTML}\n\t\t`,
i.appendChild(a),i.appendChild(t.element("hr",[])),i.appendChild(o),["vertical","horizontal"].forEach((t=>{const e=o.querySelector(`.am-block-gallery-layout-tabs .${t}`),i=o.querySelector(`.am-block-gallery-layout-options .${t}`);e.classList.toggle("active",t==this.data.layout),i.classList.toggle("active",t==this.data.layout),e.addEventListener("click",(()=>{const a=o.querySelectorAll(".active");Array.from(a).forEach((t=>{t.classList.remove("active")})),e.classList.add("active"),
i.classList.add("active"),this.data.layout=t}))})),this.inputs.gapNumber=i.querySelector(".gap-number"),this.inputs.gapUnit=i.querySelector(".gap-unit"),this.inputs.widthNumber=i.querySelector(".width-number"),this.inputs.widthUnit=i.querySelector(".width-unit"),this.inputs.heightNumber=i.querySelector(".height-number"),this.inputs.heightUnit=i.querySelector(".height-unit"),this.inputs.cleanBottom=i.querySelector(".clean-bottom"),i}render(){return this.wrapper}save(){
var t=Automad.Util.getNumberUnitAsString;return Object.assign(this.data,{globs:this.imageSelection.save(),gap:t(this.inputs.gapNumber,this.inputs.gapUnit),width:t(this.inputs.widthNumber,this.inputs.widthUnit),height:t(this.inputs.heightNumber,this.inputs.heightUnit),cleanBottom:this.inputs.cleanBottom.checked})}}class AutomadBlockHeader{static get conversionConfig(){return{export:"text",import:"text"}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{
tags:["H1","H2","H3","H4","H5","H6"]}}static get sanitize(){return{level:!1,text:{}}}static get toolbox(){return{icon:'<svg width="10" height="14" viewBox="0 0 10 14"><path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/></svg>',title:AutomadEditorTranslation.get("heading_toolbox")}}constructor({data:t,config:e,api:i,readOnly:a}){this.api=i,this.readOnly=a,this._CSS={
block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header"},this._settings=e,this._data=this.normalizeData(t),this.settingsButtons=[],this._element=this.getTag()}normalizeData(t){const e={};return"object"!=typeof t&&(t={}),e.text=t.text||"",e.level=parseInt(t.level)||this.defaultLevel.number,e.alignment=t.alignment||"left",e}render(){return this._element}renderSettings(){
const t=document.createElement("DIV"),e=document.createElement("DIV"),i=document.createElement("DIV"),a=[{title:AutomadEditorTranslation.get("left"),icon:AutomadEditorIcons.get.alignLeft,value:"left"},{title:AutomadEditorTranslation.get("center"),icon:AutomadEditorIcons.get.alignCenter,value:"center"}];return i.classList.add("cdx-settings-1-2"),e.classList.add("cdx-settings"),a.forEach((t=>{const e=document.createElement("SPAN");e.classList.add(this._CSS.settingsButton),
e.classList.toggle(this._CSS.settingsButtonActive,this.data.alignment==t.value),e.innerHTML=t.icon,e.addEventListener("click",(()=>{const a=i.querySelectorAll(`.${this._CSS.settingsButton}`);Array.from(a).forEach((t=>{t.classList.toggle(this._CSS.settingsButtonActive,!1)})),this._data.alignment=t.value,e.classList.toggle(this._CSS.settingsButtonActive,!0),this.setAlignment(this._element)})),this.api.tooltip.onHover(e,t.title,{placement:"top"}),i.appendChild(e)})),this.levels.forEach((t=>{
const i=document.createElement("SPAN");i.classList.add(this._CSS.settingsButton),this.currentLevel.number===t.number&&i.classList.add(this._CSS.settingsButtonActive),i.innerHTML=`<span style="font-weight: 560;">${t.tag}</span>`,i.dataset.level=t.number,i.addEventListener("click",(()=>{this.setLevel(t.number)})),e.appendChild(i),this.settingsButtons.push(i)})),t.appendChild(i),t.appendChild(e),t}setAlignment(t){t.classList.toggle("am-u-text-center","center"==this._data.alignment)}setLevel(t){
this.data={level:t,text:this.data.text,alignment:this.data.alignment},this.settingsButtons.forEach((e=>{e.classList.toggle(this._CSS.settingsButtonActive,parseInt(e.dataset.level)===t)}))}merge(t){const e={text:this.data.text+t.text,level:this.data.level,alignment:this.data.alignment};this.data=e}validate(t){return""!==t.text.trim()}save(t){return Object.assign(this.data,{text:t.innerHTML,level:this.currentLevel.number})}get data(){return this._data.text=this._element.innerHTML,
this._data.level=this.currentLevel.number,this._data}set data(t){if(this._data=this.normalizeData(t),void 0!==t.level&&this._element.parentNode){const t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}void 0!==t.text&&(this._element.innerHTML=this._data.text||"")}getTag(){const t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),this.setAlignment(t),
t.contentEditable=this.readOnly?"false":"true",t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}get currentLevel(){let t=this.levels.find((t=>t.number===this._data.level));return t||(t=this.defaultLevel),t}get defaultLevel(){if(this._settings.defaultLevel){const t=this.levels.find((t=>t.number===this._settings.defaultLevel));if(t)return t;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}
get levels(){const t=[{number:1,tag:"H1"},{number:2,tag:"H2"},{number:3,tag:"H3"},{number:4,tag:"H4"},{number:5,tag:"H5"},{number:6,tag:"H6"}];return this._settings.levels?t.filter((t=>this._settings.levels.includes(t.number))):t}onPaste(t){const e=t.detail.data;let i=this.defaultLevel.number;switch(e.tagName){case"H1":i=1;break;case"H2":i=2;break;case"H3":i=3;break;case"H4":i=4;break;case"H5":i=5;break;case"H6":i=6}
this._settings.levels&&(i=this._settings.levels.reduce(((t,e)=>Math.abs(e-i)<Math.abs(t-i)?e:t))),this.data={level:i,text:e.innerHTML}}}class AutomadBlockImage{static get isReadOnlySupported(){return!0}static get pasteConfig(){return{patterns:{image:/(https?:\/\/)?\S+\.(gif|jpe?g|tiff|png)$/i}}}static get sanitize(){return{caption:{},link:!1}}static get toolbox(){return{title:AutomadEditorTranslation.get("image_toolbox"),
icon:'<svg width="18px" height="15px" viewBox="0 0 18 15"><path d="M18,4c0-2.209-1.791-4-4-4H4C1.791,0,0,1.791,0,4v7c0,2.209,1.791,4,4,4h10c2.209,0,4-1.791,4-4V4z M4,2h10 c1.103,0,2,0.897,2,2v3.636l-1.279-1.33C14.534,6.113,14.278,6.002,14.01,6c-0.287-0.012-0.527,0.103-0.717,0.293l-2.302,2.302 L6.573,4.284c-0.389-0.379-1.008-0.379-1.396,0L2,7.383V4C2,2.897,2.897,2,4,2z M14,13H4c-1.103,0-2-0.897-2-2v-0.822l3.875-3.781 l4.427,4.319C10.496,10.905,10.748,11,11,11c0.256,0,0.512-0.098,0.707-0.293l2.279-2.279L16,10.521V11C16,12.103,15.103,13,14,13z" /></svg>'
}}constructor({data:t,api:e}){this.api=e,this.data={url:t.url||"",caption:t.caption||"",link:t.link||""},this.wrapper=document.createElement("div"),this.wrapper.classList.add("cdx-block"),this.img=document.createElement("img"),this.caption=Automad.Util.create.editable(["cdx-input"],AutomadEditorTranslation.get("image_caption"),this.data.caption);const i=document.createElement("div");i.classList.add("am-form-icon-button-input","am-u-flex");const a=document.createElement("button");a.type="button",
a.classList.add("am-u-button","am-u-button-large"),a.innerHTML='<i class="am-u-icon-link"></i>',e.listeners.on(a,"click",(()=>{Automad.Link.click(a)})),this.link=document.createElement("input"),this.link.type="text",this.link.placeholder=AutomadEditorTranslation.get("image_link"),this.link.value=this.data.link,this.link.classList.add("am-block-link","am-u-form-controls","am-u-width-1-1"),i.appendChild(a),i.appendChild(this.link),this.wrapper.appendChild(this.img),this.wrapper.appendChild(this.caption),
this.wrapper.appendChild(i),this.button=document.createElement("div"),this.button.innerHTML='<i class="am-u-icon-image am-u-icon-small"></i>&nbsp;&nbsp;Select Image',this.button.classList.add("am-u-panel","am-u-panel-box","am-u-text-muted","am-u-text-center"),this.button.addEventListener("click",(()=>{this.select()}))}insertImage(t){t&&(this.img.src=Automad.Util.resolvePath(t),this.data.url=t,this.button.parentNode.replaceChild(this.wrapper,this.button))}select(){var t=this
;Automad.SelectImage.dialog(!1,!0,(function(e){t.insertImage(e)}))}appendCallback(){this.select()}render(){return this.data&&this.data.url?(this.img.src=Automad.Util.resolvePath(this.data.url),this.wrapper):this.button}save(){return Object.assign(this.data,{url:this.data.url,caption:this.caption.innerHTML,link:this.link.value})}onPaste(t){"pattern"==t.type&&this.insertImage(t.detail.data)}}class AutomadBlockList extends NestedList{static get toolbox(){return{
icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',
title:AutomadEditorTranslation.get("list_toolbox")}}}class AutomadBlockMail{static get isReadOnlySupported(){return!0}static get sanitize(){return{to:!1,placeholderEmail:!1,placeholderSubject:!1,placeholderMessage:!1}}static get toolbox(){return{title:AutomadEditorTranslation.get("mail_toolbox"),
icon:'<svg width="18px" height="15px" viewBox="0 0 18 15"><path d="M14,0H4C1.791,0,0,1.791,0,4v7c0,2.209,1.791,4,4,4h10c2.209,0,4-1.791,4-4V4C18,1.791,16.209,0,14,0z M14,2 c0.153,0,0.302,0.021,0.445,0.054L9,7.5L3.554,2.054C3.698,2.021,3.846,2,4,2H14z M16,11c0,1.103-0.897,2-2,2H4 c-1.103,0-2-0.897-2-2V4c0-0.154,0.021-0.302,0.054-0.446L8.25,9.75C8.457,9.957,8.729,10.061,9,10.061S9.543,9.957,9.75,9.75 l6.195-6.196C15.979,3.698,16,3.846,16,4V11z"/></svg>'}}constructor({data:t}){
var e=Automad.Util.create,i=AutomadEditorTranslation.get;this.data={to:t.to||"",error:t.error||i("mail_data_error"),success:t.success||i("mail_data_success"),placeholderEmail:t.placeholderEmail||i("mail_data_placeholder_address"),placeholderSubject:t.placeholderSubject||i("mail_data_placeholder_subject"),placeholderMessage:t.placeholderMessage||i("mail_data_placeholder_message"),textButton:t.textButton||i("mail_data_send")},this.inputs={
to:e.editable(["cdx-input"],i("mail_placeholder_address"),this.data.to),error:e.editable(["cdx-input"],i("mail_placeholder_error"),this.data.error),success:e.editable(["cdx-input"],i("mail_placeholder_success"),this.data.success),placeholderEmail:e.editable(["cdx-input"],"",this.data.placeholderEmail),placeholderSubject:e.editable(["cdx-input"],"",this.data.placeholderSubject),placeholderMessage:e.editable(["cdx-input"],"",this.data.placeholderMessage),
textButton:e.editable(["cdx-input"],"",this.data.textButton)};var a=document.createElement("div"),o=document.createElement("div");a.innerHTML=AutomadBlockMail.toolbox.icon,a.classList.add("am-block-icon"),o.innerHTML=AutomadBlockMail.toolbox.title,o.classList.add("am-block-title"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box"),this.wrapper.appendChild(a),this.wrapper.appendChild(o),this.wrapper.appendChild(document.createElement("hr")),
this.wrapper.appendChild(e.label(i("mail_label_address"))),this.wrapper.appendChild(this.inputs.to),this.wrapper.appendChild(e.label(i("mail_label_success"))),this.wrapper.appendChild(this.inputs.success),this.wrapper.appendChild(e.label(i("mail_label_error"))),this.wrapper.appendChild(this.inputs.error),this.wrapper.appendChild(e.label(i("mail_label_placeholder_address"))),this.wrapper.appendChild(this.inputs.placeholderEmail),
this.wrapper.appendChild(e.label(i("mail_label_placeholder_subject"))),this.wrapper.appendChild(this.inputs.placeholderSubject),this.wrapper.appendChild(e.label(i("mail_label_placeholder_message"))),this.wrapper.appendChild(this.inputs.placeholderMessage),this.wrapper.appendChild(e.label(i("mail_label_button"))),this.wrapper.appendChild(this.inputs.textButton)}render(){return this.wrapper}save(){var t=Automad.Util.stripNbsp;return Object.assign(this.data,{to:t(this.inputs.to.innerHTML),
error:t(this.inputs.error.innerHTML),success:t(this.inputs.success.innerHTML),placeholderEmail:t(this.inputs.placeholderEmail.innerHTML),placeholderSubject:t(this.inputs.placeholderSubject.innerHTML),placeholderMessage:t(this.inputs.placeholderMessage.innerHTML),textButton:t(this.inputs.textButton.innerHTML)})}}class AutomadBlockPagelist{static get isReadOnlySupported(){return!0}static get sanitize(){return{type:!1,excludeHidden:!1,matchUrl:!1,filter:!1,template:!1,limit:!1,offset:!1,sortKey:!1,
sortOrder:!1,file:!1}}static get toolbox(){return{title:AutomadEditorTranslation.get("pagelist_toolbox"),
icon:'<svg width="16px" height="18px" viewBox="0 0 16 18"><path d="M7,3C4.79,3,3,4.79,3,7v7c0,2.21,1.79,4,4,4h5c2.21,0,4-1.79,4-4V7c0-2.21-1.79-4-4-4 M12,5c1.1,0,2,0.9,2,2v7 c0,1.1-0.9,2-2,2H7c-1.1,0-2-0.9-2-2V7c0-1.1,0.9-2,2-2"/><path d="M2,11V6V4c0-1.1,0.9-2,2-2h1h4h3.45C11.75,0.81,10.48,0,9,0H4C1.79,0,0,1.79,0,4v7c0,1.48,0.81,2.75,2,3.45V11z"/><path d="M12,9H7C6.72,9,6.5,8.78,6.5,8.5S6.72,8,7,8h5c0.28,0,0.5,0.22,0.5,0.5S12.28,9,12,9z"/><path d="M12,11H7c-0.28,0-0.5-0.22-0.5-0.5S6.72,10,7,10h5c0.28,0,0.5,0.22,0.5,0.5S12.28,11,12,11z"/><path d="M12,13H7c-0.28,0-0.5-0.22-0.5-0.5S6.72,12,7,12h5c0.28,0,0.5,0.22,0.5,0.5S12.28,13,12,13z"/></svg>'
}}constructor({data:t,api:e}){var i=Automad.Util.create,a=AutomadEditorTranslation.get;this.api=e,this.data={type:t.type||"",excludeHidden:void 0===t.excludeHidden||t.excludeHidden,matchUrl:t.matchUrl||"",filter:t.filter||"",template:t.template||"",limit:t.limit||3,offset:t.offset||0,sortKey:t.sortKey||":path",sortOrder:t.sortOrder||"asc",file:t.file||""},this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box"),
this.wrapper.innerHTML=`\n\t\t\t<div class="am-block-icon">${AutomadBlockPagelist.toolbox.icon}</div>\n\t\t\t<div class="am-block-title">${AutomadBlockPagelist.toolbox.title}</div>\n\t\t\t<hr>\n\t\t\t<ul class="am-u-grid">\n\t\t\t\t<li class="am-u-width-medium-1-1">\n\t\t\t\t\t${i.label(a("pagelist_template"),["am-block-label","am-u-margin-top-remove"]).outerHTML}\n\t\t\t\t\t<div class="am-block-file-select am-u-form-select am-u-button am-u-text-left am-u-width-1-1" data-am-u-form-select>\n\t\t\t\t\t\t<i class="am-u-icon-file"></i>&nbsp;\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t${i.select(["am-block-file"],[a("pagelist_default")].concat(window.AutomadBlockTemplates.pagelist),this.data.file).outerHTML}\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-1">\n\t\t\t\t\t${i.label(a("pagelist_url_regex")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-match-url"],"work|blog",this.data.matchUrl).outerHTML}\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-1">\n\t\t\t\t\t<div class="am-u-form-row am-u-margin-small-top">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\tclass="${1==this.data.excludeHidden?"am-u-active":""} am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${a("pagelist_exclude_hidden")}\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype="checkbox" \n\t\t\t\t\t\t\tclass="am-block-exclude-hidden"\n\t\t\t\t\t\t\t${1==this.data.excludeHidden?"checked":""}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_type")).outerHTML}\n\t\t\t\t\t${i.select(["cdx-input","am-block-type"],["all","children","related","siblings"],this.data.type).outerHTML}\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_filter_tag")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-filter"],"",this.data.filter).outerHTML}\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_filter_template")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-template"],"post|project",this.data.template).outerHTML}\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_limit_offset")).outerHTML}\n\t\t\t\t\t<div class="am-form-input-group">\n\t\t\t\t\t\t${i.editable(["cdx-input","am-block-limit"],"",this.data.limit).outerHTML}\n\t\t\t\t\t\t${i.editable(["cdx-input","am-block-offset"],"",this.data.offset).outerHTML}\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_sort_var")).outerHTML}\n\t\t\t\t\t${i.editable(["cdx-input","am-block-sort-key"],":path",this.data.sortKey).outerHTML}\n\t\t\t\t</li>\n\t\t\t\t<li class="am-u-width-medium-1-3">\n\t\t\t\t\t${i.label(a("pagelist_sort_order")).outerHTML}\n\t\t\t\t\t${i.select(["cdx-input","am-block-sort-order"],["asc","desc"],this.data.sortOrder).outerHTML}\n\t\t\t\t</li>\n\t\t\t</ul>`,
this.inputs={type:this.wrapper.querySelector(".am-block-type"),excludeHidden:this.wrapper.querySelector(".am-block-exclude-hidden"),matchUrl:this.wrapper.querySelector(".am-block-match-url"),filter:this.wrapper.querySelector(".am-block-filter"),template:this.wrapper.querySelector(".am-block-template"),limit:this.wrapper.querySelector(".am-block-limit"),offset:this.wrapper.querySelector(".am-block-offset"),sortKey:this.wrapper.querySelector(".am-block-sort-key"),
sortOrder:this.wrapper.querySelector(".am-block-sort-order"),file:this.wrapper.querySelector(".am-block-file")}}render(){return this.wrapper}save(){var t=Automad.Util.stripNbsp;return Object.assign(this.data,{type:this.inputs.type.value,excludeHidden:this.inputs.excludeHidden.checked,matchUrl:t(this.inputs.matchUrl.innerHTML),filter:t(this.inputs.filter.innerHTML),template:t(this.inputs.template.innerHTML),limit:t(this.inputs.limit.innerHTML),offset:t(this.inputs.offset.innerHTML),
sortKey:t(this.inputs.sortKey.innerHTML),sortOrder:this.inputs.sortOrder.value,file:this.inputs.file.value})}}class AutomadBlockParagraph{static get conversionConfig(){return{export:"text",import:"text"}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get sanitize(){return{text:{br:!0}}}static get toolbox(){return{
icon:'<svg viewBox="0.2 -0.3 9 11.4" width="12" height="14"><path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/></svg>',
title:AutomadEditorTranslation.get("paragraph_toolbox")}}constructor({data:t,api:e,config:i}){var a=void 0!==t.large&&t.large;this.api=e,this.placeholder=i.placeholder||"",this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph",large:"am-paragraph-large"},this._data={},this.onKeyUp=this.onKeyUp.bind(this),this.input=this.drawView(a),this.data={text:t.text||"",large:a,alignment:t.alignment||"left"},this.setAlignment(this.input)}onKeyUp(t){if("Backspace"!==t.code&&"Delete"!==t.code)return
;const{textContent:e}=this.input;""===e&&(this.input.innerHTML="")}drawView(t){var e=Automad.Util.create.editable([this._CSS.wrapper,this._CSS.block],"","");return t&&e.classList.add(this._CSS.large),this.placeholder&&(e.dataset.placeholder=this.placeholder),e.addEventListener("keyup",this.onKeyUp),e}render(){return this.input}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return""!==t.text.trim()}save(){return Object.assign(this.data,this.layout,{
text:this.input.innerHTML.replace(/\<br\>$/,"")})}onPaste(t){const e={text:t.detail.data.innerHTML};this.data=e}get data(){let t=this.input.innerHTML;return this._data.text=t,this._data}set data(t){this._data=t||{},this.input.innerHTML=this._data.text||""}renderSettings(){var t=Automad.Util.create,e="cdx-settings-button",i="cdx-settings-button--active",a=t.element("div",[]),o=t.element("div",["cdx-settings"]),n=t.element("div",[e]);return[{title:AutomadEditorTranslation.get("left"),
icon:AutomadEditorIcons.get.alignLeft,value:"left"},{title:AutomadEditorTranslation.get("center"),icon:AutomadEditorIcons.get.alignCenter,value:"center"}].forEach((a=>{var n=t.element("div",[e,"alignment"]);n.classList.toggle(i,this.data.alignment==a.value),n.innerHTML=a.icon,n.addEventListener("click",(()=>{const t=o.querySelectorAll(".alignment");Array.from(t).forEach((t=>{t.classList.toggle(i,!1)})),this.data.alignment=a.value,n.classList.toggle(i,!0),this.setAlignment(this.input)})),
this.api.tooltip.onHover(n,a.title,{placement:"top"}),o.appendChild(n)})),n.classList.toggle(i,this.data.large),
n.innerHTML='<svg width="24px" height="14px" viewBox="0 0 24 14"><path d="M12.815,11.695L7.609,1.283c-0.387-0.771-1.651-0.771-2.038,0L0.365,11.695c-0.281,0.562-0.054,1.246,0.509,1.527 c0.562,0.287,1.247,0.057,1.528-0.508l0.987-1.975h6.402l0.986,1.975c0.2,0.398,0.602,0.629,1.02,0.629 c0.173,0,0.346-0.038,0.508-0.121C12.869,12.941,13.095,12.258,12.815,11.695z M4.528,8.463l2.061-4.124l2.063,4.124H4.528z"/><path d="M23.416,4.887L19.6,1.11c-0.208-0.271-0.52-0.456-0.889-0.456c-0.368,0-0.68,0.186-0.889,0.456l-3.816,3.777 c-0.447,0.442-0.451,1.165-0.01,1.611c0.445,0.445,1.164,0.453,1.611,0.01l1.965-1.946v7.643c0,0.629,0.51,1.139,1.139,1.139 s1.139-0.51,1.139-1.139V4.562l1.966,1.946c0.221,0.219,0.511,0.328,0.8,0.328c0.295,0,0.588-0.113,0.811-0.338 C23.868,6.052,23.864,5.33,23.416,4.887z"/></svg>',
this.api.tooltip.onHover(n,AutomadEditorTranslation.get("paragraph_large"),{placement:"top"}),n.addEventListener("click",(()=>{this.data.large=!this.data.large,n.classList.toggle(i),this.input.classList.toggle(this._CSS.large)})),o.appendChild(n),a.appendChild(o),a}setAlignment(t){t.classList.toggle("am-u-text-center","center"==this._data.alignment)}}class AutomadBlockQuote extends Quote{static get toolbox(){return{
icon:'<svg width="15" height="14" viewBox="0 0 15 14" xmlns="http://www.w3.org/2000/svg"><path d="M13.53 6.185l.027.025a1.109 1.109 0 0 1 0 1.568l-5.644 5.644a1.109 1.109 0 1 1-1.569-1.568l4.838-4.837L6.396 2.23A1.125 1.125 0 1 1 7.986.64l5.52 5.518.025.027zm-5.815 0l.026.025a1.109 1.109 0 0 1 0 1.568l-5.644 5.644a1.109 1.109 0 1 1-1.568-1.568l4.837-4.837L.58 2.23A1.125 1.125 0 0 1 2.171.64L7.69 6.158l.025.027z" /></svg>',title:AutomadEditorTranslation.get("quote_toolbox")}}get settings(){
return[{name:"left",icon:AutomadEditorIcons.get.alignLeft,title:AutomadEditorTranslation.get("left")},{name:"center",icon:AutomadEditorIcons.get.alignCenter,title:AutomadEditorTranslation.get("center")}]}}!function(t,e,i){t.sectionEditor={$:e,UIkit:i}}(window.Automad=window.Automad||{},jQuery,UIkit);class AutomadBlockSection{static get isReadOnlySupported(){return!0}static get cls(){return{block:"am-block-section",modal:"am-block-section-modal",modalContainer:"am-block-section-modal-container",
flex:"am-block-section-flex",flexSettings:"am-block-section-flex-settings"}}static get ids(){return{modal:"am-block-section-modal",modalEditor:"am-block-section-modal-editor",modalDropdown:"am-block-section-modal-dropdown"}}static get enableLineBreaks(){return!0}static get sanitize(){return{content:!0,style:!1}}static get toolbox(){return{title:AutomadEditorTranslation.get("section_toolbox"),
icon:'<svg width="18px" height="18px" viewBox="0 0 18 18"><path d="M14,0H4C1.8,0,0,1.8,0,4v10c0,2.2,1.8,4,4,4h10c2.2,0,4-1.8,4-4V4C18,1.8,16.2,0,14,0z M3,4c0-0.6,0.4-1,1-1h7 c0.6,0,1,0.4,1,1v2c0,0.6-0.4,1-1,1H4C3.4,7,3,6.6,3,6V4z M9,15H4c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h5c0.6,0,1,0.4,1,1 C10,14.6,9.6,15,9,15z M14,11H4c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h10c0.6,0,1,0.4,1,1C15,10.6,14.6,11,14,11z"/></svg>'}}constructor({data:t,api:e}){
var i=Automad.Util.create,a=AutomadEditorTranslation.get,o=Date.now();this.modalContainerCls=`${AutomadBlockSection.cls.modalContainer}-${o}`,this.modalId=`${AutomadBlockSection.ids.modal}-${o}`,this.modalEditorId=`${AutomadBlockSection.ids.modalEditor}-${o}`,this.modalDropdownId=`${AutomadBlockSection.ids.modalDropdown}-${o}`,this.api=e,this.data={content:t.content||{},style:t.style||{},justify:t.justify||"start",gap:void 0!==t.gap?t.gap:"",
minBlockWidth:void 0!==t.minBlockWidth?t.minBlockWidth:""},this.container=document.querySelector("body"),this.wrapper=i.element("div",["am-block-editor-container",AutomadBlockSection.cls.block]),
this.wrapper.innerHTML=`\n\t\t\t<input type="hidden">\n\t\t\t<section class="${AutomadBlockSection.cls.flex}"></section>\n\t\t\t<div class="am-section-overlay-focus"></div>\n\t\t\t<a href="#" class="am-section-edit-button">\n\t\t\t\t${AutomadEditorTranslation.get("section_edit")}&nbsp;\n\t\t\t\t<i class="am-u-icon-expand"></i>\n\t\t\t</a>\n\t\t\t`,this.input=this.wrapper.querySelector("input"),this.input.value=JSON.stringify(this.data.content,null,2),
this.holder=this.wrapper.querySelector("section"),this.overlay=this.wrapper.querySelector(".am-section-overlay-focus"),this.button=this.wrapper.querySelector(".am-section-edit-button"),this.renderSection(),[this.button,this.overlay].forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.showModal()}))})),this.justifySettings=[{value:"start",
icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M6,17H4c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C7,16.6,6.6,17,6,17z"/><path d="M11,17H9c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C12,16.6,11.6,17,11,17z"/></svg>',title:a("section_justify_start")},{
value:"center",icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M8.5,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C9.5,16.6,9.1,17,8.5,17z"/><path d="M13.5,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C14.5,16.6,14.1,17,13.5,17z"/></svg>',
title:a("section_justify_center")},{value:"end",
icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M11,17H9c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C12,16.6,11.6,17,11,17z"/><path d="M16,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C17,16.6,16.6,17,16,17z"/></svg>',title:a("section_justify_end")
},{value:"space-between",icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M6,17H4c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C7,16.6,6.6,17,6,17z"/><path d="M16,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C17,16.6,16.6,17,16,17z"/></svg>',
title:a("section_justify_space_between")},{value:"space-evenly",
icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M7.5,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C8.5,16.6,8.1,17,7.5,17z"/><path d="M14.5,17h-2c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C15.5,16.6,15.1,17,14.5,17z"/></svg>',
title:a("section_justify_space_evenly")},{value:"fill-row",
icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><path d="M8.5,17H4c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1h4.5c0.6,0,1,0.4,1,1v12C9.5,16.6,9.1,17,8.5,17z"/><path d="M16,17h-4.5c-0.6,0-1-0.4-1-1V4c0-0.6,0.4-1,1-1H16c0.6,0,1,0.4,1,1v12C17,16.6,16.6,17,16,17z"/></svg>',
title:a("section_justify_fill_row")}],this.sizeSettings={gap:{name:"gap",title:a("section_gap"),icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><rect x="8.5" y="1" width="3" height="18"/><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/></svg>'},minBlockWidth:{name:"minBlockWidth",title:a("section_min_block_width"),
icon:'<svg width="18px" height="18px" viewBox="0 0 20 20"><path d="M16,0H4C1.8,0,0,1.8,0,4v12c0,2.2,1.8,4,4,4h12c2.2,0,4-1.8,4-4V4C20,1.8,18.2,0,16,0z M18.5,16c0,1.4-1.1,2.5-2.5,2.5H4 c-1.4,0-2.5-1.1-2.5-2.5V4c0-1.4,1.1-2.5,2.5-2.5h12c1.4,0,2.5,1.1,2.5,2.5V16z"/><rect x="4" y="9" width="12" height="2"/><path d="M4.9,6.9L2.1,9.6C2,9.8,2,10.2,2.1,10.4l2.8,2.8c0.3,0.3,0.9,0.1,0.9-0.4V7.2C5.8,6.8,5.3,6.5,4.9,6.9z"/><path d="M15.1,6.9l2.8,2.8c0.2,0.2,0.2,0.5,0,0.7l-2.8,2.8c-0.3,0.3-0.9,0.1-0.9-0.4V7.2C14.2,6.8,14.7,6.5,15.1,6.9z"/></svg>'
}}}appendCallback(){this.showModal()}renderSection(){try{this.editor.destroy()}catch(t){}this.holder.innerHTML="",this.editor=Automad.BlockEditor.createEditor({holder:this.holder,input:this.input,readOnly:!0}),this.applyStyleSettings(this.holder)}destroyModal(){try{this.modalEditor.destroy()}catch(t){}var t=Automad.sectionEditor.$(this.container).find(`.${this.modalContainerCls}`);try{Automad.sectionEditor.$(".ct:not(.init)").remove()}catch(t){}try{t.remove()}catch(t){}}renderStyleSettings(){
const t=Automad.Util.create,e=AutomadEditorTranslation.get,i=Object.assign({card:!1,shadow:!1,matchRowHeight:!1,color:"",backgroundColor:"",backgroundBlendMode:"",borderColor:"",borderWidth:"",borderRadius:"",backgroundImage:"",paddingTop:"",paddingBottom:"",overflowHidden:!1,class:""},this.data.style)
;return`\n\t\t\t<div\n\t\t\tid="${this.modalDropdownId}" \n\t\t\tclass="am-u-form" \n\t\t\tdata-am-u-dropdown="{mode:'click', pos:'bottom-left'}"\n\t\t\t>\n\t\t\t\t<div class="am-u-button am-section-style-button">\n\t\t\t\t\t<i class="am-u-icon-sliders"></i>&nbsp;\n\t\t\t\t\t${e("edit_style")}&nbsp;\n\t\t\t\t\t<i class="am-u-icon-caret-down"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="am-u-dropdown am-u-dropdown-blank">\n\t\t\t  \t\t<div class="am-u-form-row am-u-margin-small-bottom">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\tclass="am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${e("section_card")}\n\t\t\t\t\t\t\t<input id="am-section-card" type="checkbox" ${1==i.card?"checked":""}>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="am-u-form-row am-u-margin-small-bottom">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\tclass="am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${e("section_overflow_hidden")}\n\t\t\t\t\t\t\t<input id="am-section-overflow" type="checkbox" ${1==i.overflowHidden?"checked":""}>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="am-u-grid am-u-grid-width-medium-1-2" data-am-u-grid-margin>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class="am-u-form-row">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclass="am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${e("section_shadow")}\n\t\t\t\t\t\t\t\t\t<input id="am-section-shadow" type="checkbox" ${1==i.shadow?"checked":""}>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class="am-u-form-row">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclass="am-toggle-switch am-u-text-truncate am-u-button am-u-text-left am-u-width-1-1"\n\t\t\t\t\t\t\t\tdata-am-toggle\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${e("section_match_row_height")}\n\t\t\t\t\t\t\t\t\t<input id="am-section-match-row-height" type="checkbox" ${1==i.matchRowHeight?"checked":""}>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="am-u-grid am-u-grid-width-medium-1-2 am-u-margin-top-remove">\n\t\t\t  \t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("section_color")).outerHTML}\n\t\t\t\t\t\t\t${t.colorPicker("am-section-color",i.color).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t  \t\t\t\t${t.label(e("section_background_color")).outerHTML}\n\t\t\t\t\t\t\t${t.colorPicker("am-section-background-color",i.backgroundColor).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.label(e("section_background_image")).outerHTML}\n\t\t\t\t\t<div data-am-select-image-field>\n\t\t\t\t\t\t<figure></figure>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="am-section-background-image am-u-form-controls am-u-width-1-1"\n\t\t\t\t\t\t\tvalue="${i.backgroundImage}"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button type="button" class="am-u-button">\n\t\t\t\t\t\t\t\t<i class="am-u-icon-folder-open-o"></i>&nbsp;\n\t\t\t\t\t\t\t\t${e("ui_browse")}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.label(e("section_background_blend_mode")).outerHTML}\n\t\t\t\t\t${t.select(["am-section-background-blend-mode","am-u-button","am-u-width-1-1","am-u-text-left"],["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],i.backgroundBlendMode).outerHTML}\n\t\t\t\t\t<div class="am-u-grid am-u-grid-width-medium-1-3 am-u-margin-top-remove">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("section_border_color")).outerHTML}\n\t\t\t\t\t\t\t${t.colorPicker("am-section-border-color",i.borderColor).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("section_border_width")).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("am-section-border-width-",i.borderWidth).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(e("section_border_radius")).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("am-section-border-radius-",i.borderRadius).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="am-u-grid am-u-grid-width-medium-1-2 am-u-margin-top-remove">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(`${e("section_padding_top")} (padding top)`).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("am-section-padding-top-",i.paddingTop).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${t.label(`${e("section_padding_bottom")} (padding bottom)`).outerHTML}\n\t\t\t\t\t\t\t${t.numberUnit("am-section-padding-bottom-",i.paddingBottom).outerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.label("Class (CSS)").outerHTML}\n\t\t\t\t\t${t.editable(["cdx-input","am-section-class"],"",i.class).outerHTML}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`
}saveStyleSettings(){let t={},e=this.modalWrapper;t.card=e.querySelector("#am-section-card"),t.overflowHidden=e.querySelector("#am-section-overflow"),t.shadow=e.querySelector("#am-section-shadow"),t.matchRowHeight=e.querySelector("#am-section-match-row-height"),t.color=e.querySelector(".am-section-color"),t.backgroundColor=e.querySelector(".am-section-background-color"),t.borderColor=e.querySelector(".am-section-border-color"),
t.borderWidthNumber=e.querySelector(".am-section-border-width-number"),t.borderWidthUnit=e.querySelector(".am-section-border-width-unit"),t.borderRadiusNumber=e.querySelector(".am-section-border-radius-number"),t.borderRadiusUnit=e.querySelector(".am-section-border-radius-unit"),t.backgroundImage=e.querySelector(".am-section-background-image"),t.backgroundBlendMode=e.querySelector(".am-section-background-blend-mode"),t.paddingTopNumber=e.querySelector(".am-section-padding-top-number"),
t.paddingTopUnit=e.querySelector(".am-section-padding-top-unit"),t.paddingBottomNumber=e.querySelector(".am-section-padding-bottom-number"),t.paddingBottomUnit=e.querySelector(".am-section-padding-bottom-unit"),t.class=e.querySelector(".am-section-class"),this.data.style={card:t.card.checked,overflowHidden:t.overflowHidden.checked,shadow:t.shadow.checked,matchRowHeight:t.matchRowHeight.checked,color:t.color.value,backgroundColor:t.backgroundColor.value,borderColor:t.borderColor.value,
borderWidth:Automad.Util.getNumberUnitAsString(t.borderWidthNumber,t.borderWidthUnit),borderRadius:Automad.Util.getNumberUnitAsString(t.borderRadiusNumber,t.borderRadiusUnit),backgroundImage:t.backgroundImage.value,backgroundBlendMode:t.backgroundBlendMode.value,paddingTop:Automad.Util.getNumberUnitAsString(t.paddingTopNumber,t.paddingTopUnit),paddingBottom:Automad.Util.getNumberUnitAsString(t.paddingBottomNumber,t.paddingBottomUnit),class:t.class.innerHTML},
"normal"==this.data.style.backgroundBlendMode&&delete this.data.style.backgroundBlendMode,Object.keys(this.data.style).forEach((t=>{this.data.style[t]||delete this.data.style[t]}))}applyStyleSettings(t){const e=this.data.style;try{t.removeAttribute("style"),e.backgroundImage&&(t.style.backgroundImage=`url('${Automad.Util.resolvePath(e.backgroundImage)}')`,t.style.backgroundPosition="50% 50%",t.style.backgroundSize="cover"),
(e.backgroundImage||e.borderColor||e.backgroundColor||e.shadow||e.borderWidth)&&(t.style.padding="1rem"),e.borderWidth&&!e.borderWidth.startsWith("0")&&(t.style.borderStyle="solid"),e.shadow&&(t.style.boxShadow="0 0.2rem 2rem rgba(0,0,0,0.15)"),e.matchRowHeight&&(t.style.height="100%"),["color","backgroundColor","backgroundBlendMode","paddingTop","paddingBottom","borderColor","borderWidth","borderRadius"].forEach((i=>{e[i]&&(t.style[i]=e[i])})),
this.toggleSectionFlexClass(t,"justify",this.data.justify)}catch(t){}}initToggles(){const t=this.modalWrapper.querySelectorAll("label > input");Array.from(t).forEach((t=>{Automad.Toggle.update(Automad.sectionEditor.$(t))}))}showModal(){const t=Automad.Util.create,e=Automad.sectionEditor;this.destroyModal(),this.modalWrapper=t.element("div",[this.modalContainerCls,AutomadBlockSection.cls.modalContainer]),
this.modalWrapper.innerHTML=`\n\t\t\t<div id="${this.modalId}" class="am-u-modal ${AutomadBlockSection.cls.modal}">\n\t\t\t\t<div class="am-u-modal-dialog am-block-editor am-u-form am-text">\n\t\t\t\t\t<div class="am-u-modal-header">\n\t\t\t\t\t\t<div class="am-u-position-relative">\n\t\t\t\t\t\t\t${this.renderStyleSettings()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a class="am-u-modal-close"><i class="am-u-icon-compress"></i></a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="${AutomadBlockSection.cls.flexSettings}"></div>\n\t\t\t\t\t<section \n\t\t\t\t\tid="${this.modalEditorId}" \n\t\t\t\t\tclass="am-block-editor-container ${AutomadBlockSection.cls.flex}"\n\t\t\t\t\t></section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,
this.container.appendChild(this.modalWrapper),Automad.SelectImage.preview(this.modalWrapper.querySelector(".am-section-background-image"));const i=this.modalWrapper.querySelector(`#${this.modalDropdownId}`).querySelectorAll("input, select, [contenteditable]");Array.from(i).forEach((t=>{const e=()=>{setTimeout((()=>{this.saveStyleSettings(),this.applyStyleSettings(document.getElementById(this.modalEditorId))}),100)};t.addEventListener("input",e),t.addEventListener("keydown",e),
t.addEventListener("change",e)}));const a=this.modalWrapper.querySelector(`.${AutomadBlockSection.cls.flexSettings}`);a.appendChild(this.renderFlexSettings(this.justifySettings,"justify")),a.appendChild(this.renderSizeSettings(this.sizeSettings.gap)),a.appendChild(this.renderSizeSettings(this.sizeSettings.minBlockWidth)),this.initToggles();const o=e.UIkit.modal(`#${this.modalId}`,{modal:!1,bgclose:!0,keyboard:!1});this.modalEditor=Automad.BlockEditor.createEditor({holder:this.modalEditorId,
input:this.input,autofocus:!0,flex:!0,onReady:()=>{this.applyStyleSettings(document.getElementById(this.modalEditorId)),o.on("hide.uk.modal",(()=>{this.saveStyleSettings(),e.$(this.input).trigger("change"),this.destroyModal(),this.renderSection()}))}}),o.show()}render(){return this.wrapper}getInputData(){let t;try{t=JSON.parse(this.input.value.replace(/&amp;/g,"&"))}catch(e){t={}}return new AutomadLegacyData(t).convert(t)}save(){return Object.assign(this.data,{content:this.getInputData()})}
renderFlexSettings(t,e){const i=Automad.Util.create,a=i.element("div",[]);return t.forEach((o=>{const n=i.element("div",[this.api.styles.settingsButton]);o.button=n,n.innerHTML=o.icon,this.api.tooltip.onHover(n,o.title,{placement:"top"}),a.appendChild(n),n.addEventListener("click",(()=>{this.data[e]=o.value,this.toggleFlexClasses(t,e)}))})),this.toggleFlexClasses(t,e),a}toggleFlexClasses(t,e){const i=document.getElementById(this.modalEditorId);t.forEach((t=>{
t.button.classList.toggle(this.api.styles.settingsButtonActive,t.value==this.data[e])})),this.toggleSectionFlexClass(i,e,this.data[e])}toggleSectionFlexClass(t,e,i){if("string"==typeof i){var a=new RegExp(`${e}[\\-\\w]+`,"g");t.className=t.className.replace(a,""),t.classList.toggle(`${e}-${i}`,i==this.data[e])}else t.classList.toggle(e,this.data[e])}renderSizeSettings(t){const e=Automad.Util.create,i=e.element("div",[]),a=e.element("span",["am-section-flex-size-settings"]);a.innerHTML=t.icon,
a.appendChild(e.numberUnit("",this.data[t.name])),i.appendChild(a);const o=a.querySelector(".number"),n=a.querySelector(".unit");return[o,n].forEach((e=>{e.addEventListener("input",(()=>{this.data[t.name]=Automad.Util.getNumberUnitAsString(o,n)}))})),this.api.tooltip.onHover(a,t.title,{placement:"top"}),i}}class AutomadBlockSlider{static get enableLineBreaks(){return!0}static get isReadOnlySupported(){return!0}static get sanitize(){return{globs:!1,width:!1,height:!1}}static get toolbox(){return{
title:AutomadEditorTranslation.get("slider_toolbox"),
icon:'<svg width="18px" height="15px" viewBox="0 0 18 15"><path d="M14,0H4C1.791,0,0,1.791,0,4v7c0,2.209,1.791,4,4,4h10c2.209,0,4-1.791,4-4V4C18,1.791,16.209,0,14,0z M16,11 c0,1.103-0.897,2-2,2H4c-1.103,0-2-0.897-2-2V4c0-1.103,0.897-2,2-2h10c1.103,0,2,0.897,2,2V11z"/><path d="M6.5,8.5c-0.097,0-0.194-0.028-0.277-0.084l-3-2C3.083,6.323,3,6.167,3,6s0.083-0.323,0.223-0.416l3-2 c0.153-0.102,0.352-0.111,0.513-0.025C6.898,3.646,7,3.815,7,4v4c0,0.185-0.102,0.354-0.264,0.44C6.662,8.48,6.581,8.5,6.5,8.5z"/><path d="M11.264,8.44C11.102,8.354,11,8.185,11,8V4c0-0.185,0.102-0.354,0.264-0.441c0.162-0.086,0.361-0.077,0.514,0.025l3,2 C14.916,5.677,15,5.833,15,6s-0.084,0.323-0.223,0.416l-3,2C11.693,8.472,11.598,8.5,11.5,8.5C11.419,8.5,11.338,8.48,11.264,8.44z"/><circle cx="9" cy="11" r="1"/><circle cx="6" cy="11" r="1"/><circle cx="12" cy="11" r="1"/></svg>'
}}constructor({data:t,api:e}){var i=Automad.Util.create,a=AutomadEditorTranslation.get;this.api=e,this.data={globs:t.globs||"*.jpg, *.png",width:t.width||1200,height:t.height||600,dots:void 0===t.dots||t.dots,autoplay:void 0===t.autoplay||t.autoplay},this.inputs={width:i.editable(["cdx-input"],"px",this.data.width),height:i.editable(["cdx-input"],"px",this.data.height)}
;var o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),s=document.createElement("ul"),l=document.createElement("li"),d=document.createElement("li");this.imageSelection=new AutomadEditorImageSelection(this.data.globs,r),o.innerHTML=AutomadBlockSlider.toolbox.icon,o.classList.add("am-block-icon"),n.innerHTML=AutomadBlockSlider.toolbox.title,n.classList.add("am-block-title"),s.classList.add("am-u-grid","am-u-grid-width-medium-1-2"),
l.appendChild(i.label(a("slider_width"))),l.appendChild(this.inputs.width),d.appendChild(i.label(a("slider_height"))),d.appendChild(this.inputs.height),s.appendChild(l),s.appendChild(d),this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box"),this.wrapper.appendChild(o),this.wrapper.appendChild(n),this.wrapper.appendChild(document.createElement("hr")),this.wrapper.appendChild(i.label(a("slider_files"))),this.wrapper.appendChild(r),
this.wrapper.appendChild(s),this.settings=[{name:"dots",title:a("slider_dots"),icon:'<svg width="17px" height="10px" viewBox="0 0 17 10"><circle cx="2.0" cy="5" r="2.0"/><circle cx="8.5" cy="5" r="2.0"/><circle cx="15.0" cy="5" r="2.0"/></svg>'},{name:"autoplay",title:a("slider_autoplay"),
icon:'<svg width="14px" height="14px" viewBox="0 0 14 14"><path d="M3,13.424c-0.259,0-0.518-0.067-0.75-0.201C1.786,12.955,1.5,12.46,1.5,11.924V2.076c0-0.536,0.286-1.031,0.75-1.299 c0.464-0.269,1.036-0.269,1.5,0l8.527,4.924c0.464,0.268,0.75,0.763,0.75,1.299s-0.286,1.031-0.75,1.299L3.75,13.223 C3.518,13.356,3.259,13.424,3,13.424z"/></svg>'}]}render(){return this.wrapper}save(){var t=Automad.Util.stripNbsp;return Object.assign(this.data,{globs:this.imageSelection.save(),
width:parseInt(t(this.inputs.width.innerHTML)),height:parseInt(t(this.inputs.height.innerHTML))})}renderSettings(){var t=Automad.Util.create,e=document.createElement("div"),i=t.element("div",["cdx-settings-1-2"]),a=this;return this.settings.forEach((function(t){var e=document.createElement("div");e.classList.add("cdx-settings-button"),e.classList.toggle("cdx-settings-button--active",a.data[t.name]),e.innerHTML=t.icon,i.appendChild(e),e.addEventListener("click",(function(){a.toggleTune(t.name),
e.classList.toggle("cdx-settings-button--active")})),a.api.tooltip.onHover(e,t.title,{placement:"top"})})),e.appendChild(i),e}toggleTune(t){this.data[t]=!this.data[t]}}class AutomadBlockSnippet{static get enableLineBreaks(){return!0}static get isReadOnlySupported(){return!0}static get sanitize(){return{snippet:!0}}static get toolbox(){return{title:AutomadEditorTranslation.get("snippet_toolbox"),
icon:'<svg width="15px" height="18px" viewBox="0 0 15 18"><path d="M11.02,1.52C9.89,0.39,9.25,0,7,0C5,0,4,0,4,0C1.79,0,0,1.79,0,4v10c0,2.21,1.79,4,4,4h7c2.21,0,4-1.79,4-4c0,0,0-4.02,0-6 c0-2.25-0.33-2.83-1.48-3.98C11.95,2.45,12.53,3.03,11.02,1.52z M13,14c0,1.1-0.9,2-2,2H4c-1.1,0-2-0.9-2-2V4c0-1.1,0.9-2,2-2h3v2 c0,2.21,1.79,4,4,4h2V14z"/><path d="M8.63,9.43c-0.31,0.31-0.31,0.82,0,1.13L10.07,12l-1.43,1.43c-0.31,0.31-0.31,0.82,0,1.13C8.79,14.72,9,14.8,9.2,14.8 c0.21,0,0.41-0.08,0.57-0.23l2-2c0.31-0.31,0.31-0.82,0-1.13l-2-2C9.45,9.12,8.95,9.12,8.63,9.43z"/><path d="M6.37,9.43c-0.31-0.31-0.82-0.31-1.13,0l-2,2c-0.31,0.31-0.31,0.82,0,1.13l2,2c0.16,0.16,0.36,0.23,0.57,0.23 s0.41-0.08,0.57-0.23c0.31-0.31,0.31-0.82,0-1.13L4.93,12l1.43-1.43C6.68,10.25,6.68,9.75,6.37,9.43z"/></svg>'
}}constructor({data:t,api:e}){var i=Automad.Util.create;this.api=e,this.data={file:t.file||"",snippet:t.snippet||""},this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box");var a=i.element("textarea",["ce-code","cdx-input","am-block-run-before"]);a.setAttribute("placeholder",'<@ set { :variable: "value" } @>'),
this.wrapper.innerHTML=`\n\t\t\t<div class="am-block-icon">${AutomadBlockSnippet.toolbox.icon}</div>\n\t\t\t<div class="am-block-title">${AutomadBlockSnippet.toolbox.title}</div>\n\t\t\t<hr>\n\t\t\t${i.label(AutomadEditorTranslation.get("snippet_input"),["am-block-label","am-u-margin-top-remove"]).outerHTML}\n\t\t\t${a.outerHTML}\n\t\t\t${i.label(AutomadEditorTranslation.get("snippet_file"),["am-block-label"]).outerHTML}\n\t\t\t<div class="am-block-file-select am-u-form-select am-u-button am-u-text-left am-u-width-1-1" data-am-u-form-select>\n\t\t\t\t<i class="am-u-icon-file"></i>&nbsp;\n\t\t\t\t<span></span>\n\t\t\t\t${i.select(["am-block-file"],["—"].concat(window.AutomadBlockTemplates.snippets),this.data.file).outerHTML}\n\t\t\t</div>\n\t\t`,
this.inputs={file:this.wrapper.querySelector(".am-block-file"),snippet:this.wrapper.querySelector(".am-block-run-before")},this.api.listeners.on(this.inputs.snippet,"keydown",Automad.Textarea.handleTabs,!0),this.inputs.snippet.value=this.data.snippet}render(){return this.wrapper}save(){return Object.assign(this.data,{file:this.inputs.file.value,snippet:this.inputs.snippet.value})}}class AutomadBlockTable extends Table{static get toolbox(){return{
icon:'<svg width="18px" height="16px" viewBox="0 0 18 16"><path d="M14,0H4C1.8,0,0,1.8,0,4v8c0,2.2,1.8,4,4,4h10c2.2,0,4-1.8,4-4V4C18,1.8,16.2,0,14,0z M4,2h4v5H2V4C2,2.9,2.9,2,4,2z M4,14 c-1.1,0-2-0.9-2-2V9h6v5H4z M16,12c0,1.1-0.9,2-2,2h-4V9h6V12z M16,7h-6V2h4c1.1,0,2,0.9,2,2V7z"/></svg>',title:AutomadEditorTranslation.get("table_toolbox")}}}class AutomadBlockTextarea{static get enableLineBreaks(){return!0}static get isReadOnlySupported(){return!0}static get sanitize(){return{code:!0}}
static get toolbox(){return{icon:"",title:""}}constructor({data:t,api:e}){this.api=e,this.data={code:t.code||""},this.wrapper=this.drawView()}drawView(){var t=Automad.Util.create.element("textarea",["ce-code","cdx-input"]),e=Automad.Util.create.label(this.label()),i=Automad.Util.create.element("div",[this.api.styles.block]);return t.value=this.data.code,e.classList.add("am-u-margin-top-remove"),i.appendChild(e),i.appendChild(t),this.input=t,
this.api.listeners.on(this.input,"keydown",Automad.Textarea.handleTabs,!0),i}render(){return this.wrapper}validate(t){return""!==t.code.trim()}save(){return Object.assign(this.data,{code:this.input.value})}label(){return""}placeholder(){return""}}class AutomadBlockTextareaCode extends AutomadBlockTextarea{static get pasteConfig(){return{tags:["pre"]}}static get toolbox(){return{
icon:'<svg width="14" height="14" viewBox="0 -1 14 14"><path d="M3.177 6.852c.205.253.347.572.427.954.078.372.117.844.117 1.417 0 .418.01.725.03.92.02.18.057.314.107.396.046.075.093.117.14.134.075.027.218.056.42.083a.855.855 0 0 1 .56.297c.145.167.215.38.215.636 0 .612-.432.934-1.216.934-.457 0-.87-.087-1.233-.262a1.995 1.995 0 0 1-.853-.751 2.09 2.09 0 0 1-.305-1.097c-.014-.648-.029-1.168-.043-1.56-.013-.383-.034-.631-.06-.733-.064-.263-.158-.455-.276-.578a2.163 2.163 0 0 0-.505-.376c-.238-.134-.41-.256-.519-.371C.058 6.76 0 6.567 0 6.315c0-.37.166-.657.493-.846.329-.186.56-.342.693-.466a.942.942 0 0 0 .26-.447c.056-.2.088-.42.097-.658.01-.25.024-.85.043-1.802.015-.629.239-1.14.672-1.522C2.691.19 3.268 0 3.977 0c.783 0 1.216.317 1.216.921 0 .264-.069.48-.211.643a.858.858 0 0 1-.563.29c-.249.03-.417.076-.498.126-.062.04-.112.134-.139.291-.031.187-.052.562-.061 1.119a8.828 8.828 0 0 1-.112 1.378 2.24 2.24 0 0 1-.404.963c-.159.212-.373.406-.64.583.25.163.454.342.612.538zm7.34 0c.157-.196.362-.375.612-.538a2.544 2.544 0 0 1-.641-.583 2.24 2.24 0 0 1-.404-.963 8.828 8.828 0 0 1-.112-1.378c-.009-.557-.03-.932-.061-1.119-.027-.157-.077-.251-.14-.29-.08-.051-.248-.096-.496-.127a.858.858 0 0 1-.564-.29C8.57 1.401 8.5 1.185 8.5.921 8.5.317 8.933 0 9.716 0c.71 0 1.286.19 1.72.574.432.382.656.893.671 1.522.02.952.033 1.553.043 1.802.009.238.041.458.097.658a.942.942 0 0 0 .26.447c.133.124.364.28.693.466a.926.926 0 0 1 .493.846c0 .252-.058.446-.183.58-.109.115-.281.237-.52.371-.21.118-.377.244-.504.376-.118.123-.212.315-.277.578-.025.102-.045.35-.06.733-.013.392-.027.912-.042 1.56a2.09 2.09 0 0 1-.305 1.097c-.2.323-.486.574-.853.75a2.811 2.811 0 0 1-1.233.263c-.784 0-1.216-.322-1.216-.934 0-.256.07-.47.214-.636a.855.855 0 0 1 .562-.297c.201-.027.344-.056.418-.083.048-.017.096-.06.14-.134a.996.996 0 0 0 .107-.396c.02-.195.031-.502.031-.92 0-.573.039-1.045.117-1.417.08-.382.222-.701.427-.954z" /></svg>',
title:AutomadEditorTranslation.get("code")}}label(){return AutomadEditorTranslation.get("code")}placeholder(){return""}onPaste(t){this.input.value=t.detail.data.textContent}}class AutomadBlockTextareaRaw extends AutomadBlockTextarea{static get toolbox(){return{
icon:'<svg width="19" height="13" viewBox="0 0 19 13"><path d="M18.004 5.794c.24.422.18.968-.18 1.328l-4.943 4.943a1.105 1.105 0 1 1-1.562-1.562l4.162-4.162-4.103-4.103A1.125 1.125 0 1 1 12.97.648l4.796 4.796c.104.104.184.223.239.35zm-15.142.547l4.162 4.162a1.105 1.105 0 1 1-1.562 1.562L.519 7.122c-.36-.36-.42-.906-.18-1.328a1.13 1.13 0 0 1 .239-.35L5.374.647a1.125 1.125 0 0 1 1.591 1.591L2.862 6.341z"/></svg>',title:"Markdown ⁄ HTML"}}label(){return"Markdown ⁄ HTML"}placeholder(){return""}}
class AutomadBlockToc{static get contentless(){return!0}static get isReadOnlySupported(){return!0}static get toolbox(){return{
icon:'<svg width="17px" height="13px" x="0px" y="0px" viewBox="0 0 17 13"><path d="M3.38,5.3h10.25c0.62,0,1.12,0.5,1.12,1.12s-0.5,1.12-1.12,1.12H3.38c-0.62,0-1.12-0.5-1.12-1.12S2.75,5.3,3.38,5.3z"/><path d="M1.38,0.45h10.25c0.62,0,1.12,0.5,1.12,1.12s-0.5,1.12-1.12,1.12H1.38c-0.62,0-1.12-0.5-1.12-1.12S0.75,0.45,1.38,0.45z"/><path d="M5.38,10.3h10.25c0.62,0,1.12,0.5,1.12,1.12s-0.5,1.12-1.12,1.12H5.38c-0.62,0-1.12-0.5-1.12-1.12S4.75,10.3,5.38,10.3z"/></svg>',
title:AutomadEditorTranslation.get("toc")}}constructor({data:t,api:e}){this.data={style:t.style||"ordered"},this.api=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("am-u-panel","am-u-panel-box"),this.wrapper.innerHTML=`\n\t\t\t<div class="am-block-icon">${AutomadBlockToc.toolbox.icon}</div>\n\t\t\t<div class="am-block-title">${AutomadBlockToc.toolbox.title}</div>\n\t\t`,this.settings=[{name:"ordered",title:AutomadEditorTranslation.get("list_ordered"),
icon:AutomadEditorIcons.get.listOrdered},{name:"unordered",title:AutomadEditorTranslation.get("list_unordered"),icon:AutomadEditorIcons.get.listUnordered}]}render(){return this.wrapper}renderSettings(){var t=document.createElement("div"),e=document.createElement("div"),i=this;return e.classList.add(this.CSS.settingsWrapper),this.settings.forEach((function(t){var a=document.createElement("div");a.classList.add(i.CSS.settingsButton),
a.classList.toggle(i.CSS.settingsButtonActive,i.data.style==t.name),a.innerHTML=t.icon,e.appendChild(a),a.addEventListener("click",(function(){i.toggleTune(t);const o=e.parentNode.querySelectorAll("."+i.CSS.settingsButton);Array.from(o).forEach((t=>t.classList.remove(i.CSS.settingsButtonActive))),a.classList.toggle(i.CSS.settingsButtonActive)})),i.api.tooltip.onHover(a,t.title,{placement:"top"})})),t.appendChild(e),t}save(){return this.data}toggleTune(t){this.data.style=t.name}get CSS(){return{
settingsWrapper:"cdx-settings-1-2",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class AutomadBold extends AutomadInlineTool{get shortcut(){return"CMD+B"}static get title(){return"Bold"}static get sanitize(){return{b:!0}}get tag(){return"B"}get icon(){
return'<path d="M2.8,2.1C2.8,1.5,3.3,1,4,1h6.4c4,0,6.1,1.8,6.1,4.6c0,2.1-1.4,3.5-3.4,3.9v0.2c2.2,0.1,4.1,1.7,4.1,4.3c0,2.9-2.3,5-6.3,5 H4c-0.6,0-1.1-0.5-1.1-1.1V2.1z M9.6,8.4c1.4,0,2.4-0.7,2.4-2c0-1.2-0.9-1.9-2.4-1.9H8.3C7.7,4.5,7.2,5,7.2,5.6v1.7 c0,0.6,0.5,1.1,1.1,1.1H9.6z M9.9,15.5c1.9,0,2.8-0.8,2.8-2c0-1.4-1-2.3-2.7-2.3H8.3c-0.6,0-1.1,0.5-1.1,1.1v2 c0,0.6,0.5,1.1,1.1,1.1H9.9z"/>'}}class AutomadInlineCode extends AutomadInlineTool{static get title(){return"Code"}static get sanitize(){return{
code:!0}}get tag(){return"CODE"}get icon(){return'<path d="M7,17c-0.4,0-0.7-0.1-1-0.4L0.4,11c-0.6-0.6-0.6-1.5,0-2L6,3.4C6.3,3.1,6.6,3,7,3c0.4,0,0.7,0.1,1,0.4c0.6,0.6,0.6,1.5,0,2 L3.5,10L8,14.6c0.3,0.3,0.4,0.6,0.4,1c0,0.4-0.1,0.7-0.4,1C7.7,16.9,7.4,17,7,17z"/><path d="M13,17c0.4,0,0.7-0.1,1-0.4l5.6-5.6c0.6-0.6,0.6-1.5,0-2L14,3.4C13.7,3.1,13.4,3,13,3c-0.4,0-0.7,0.1-1,0.4 c-0.6,0.6-0.6,1.5,0,2l4.6,4.6L12,14.6c-0.3,0.3-0.4,0.6-0.4,1c0,0.4,0.1,0.7,0.4,1C12.3,16.9,12.6,17,13,17z"/>'}}
class AutomadColor extends AutomadInlineTool{static get title(){return"Text Color"}static get sanitize(){return{"am-color":!0}}get tag(){return"AM-COLOR"}get icon(){
return'<path d="M18,20H2c-1.1,0-2-0.9-2-2v0c0-1.1,0.9-2,2-2h16c1.1,0,2,0.9,2,2v0C20,19.1,19.1,20,18,20z"/><path d="M3.61,13.01l4.32-12.5C8.03,0.2,8.31,0,8.63,0h2.75c0.32,0,0.6,0.2,0.71,0.51l4.31,12.5C16.56,13.49,16.2,14,15.69,14h-1.58 c-0.32,0-0.61-0.21-0.71-0.52l-0.7-2.16c-0.1-0.31-0.39-0.52-0.71-0.52H8.02c-0.32,0-0.61,0.21-0.71,0.52l-0.7,2.16 C6.5,13.79,6.22,14,5.89,14H4.32C3.8,14,3.44,13.49,3.61,13.01z M10.75,8.5c0.51,0,0.87-0.5,0.71-0.98l-1.4-4.32H9.95l-1.4,4.32 C8.39,8,8.75,8.5,9.26,8.5H10.75z"/>'
}get defaultColor(){return"#FF5252"}renderActions(){const t=Automad.Util.create,e=t.label(this.constructor.title);return this.colorPicker=t.element("input",[this.cls.input]),this.colorPicker.type="color",this.colorPicker.value=this.defaultColor,this.wrapper=t.element("span",[this.cls.wrapper]),this.wrapper.appendChild(e),this.wrapper.appendChild(this.colorPicker),this.wrapper.hidden=!0,this.wrapper}showActions(t){const{color:e}=t.style
;this.colorPicker.value=e?this.convertToHex(e):this.defaultColor,t.style.color=this.colorPicker.value,this.colorPicker.onchange=()=>{t.style.color=this.colorPicker.value},this.wrapper.hidden=!1}hideActions(){this.colorPicker.onchange=null,this.wrapper.hidden=!0}convertToHex(t){const e=t.match(/(\d+)/g);let i=parseInt(e[0]).toString(16),a=parseInt(e[1]).toString(16),o=parseInt(e[2]).toString(16);return i=1===i.length?"0"+i:i,a=1===a.length?"0"+a:a,o=1===o.length?"0"+o:o,"#"+i+a+o}}
class AutomadBackground extends AutomadColor{static get title(){return"Background"}static get sanitize(){return{"am-background":!0}}get tag(){return"AM-BACKGROUND"}get icon(){
return'<path d="M3.55,14l-2.91,2.91C0.24,17.31,0.52,18,1.09,18h6.13c0.21,0,0.41-0.08,0.55-0.23L8,17.55c0.31-0.31,0.31-0.8,0-1.11 L5.1,13.55c-0.31-0.31-0.8-0.31-1.11,0L3.55,14z"/><path d="M19.26,5.71l-3.41-3.41C15.65,2.11,15.4,2,15.14,2h-1.17c-0.27,0-0.52,0.11-0.71,0.29L5.84,9.71 c-0.19,0.19-0.29,0.44-0.29,0.71v1.17c0,0.27,0.11,0.52,0.29,0.71l3.41,3.41C9.44,15.89,9.7,16,9.96,16h1.17 c0.27,0,0.52-0.11,0.71-0.29l7.41-7.41c0.19-0.19,0.29-0.44,0.29-0.71V6.41C19.55,6.15,19.44,5.89,19.26,5.71z"/>'}
get defaultColor(){return"#FFFDC7"}showActions(t){const{backgroundColor:e}=t.style;this.colorPicker.value=e?this.convertToHex(e):this.defaultColor,t.style.backgroundColor=this.colorPicker.value,this.colorPicker.onchange=()=>{t.style.backgroundColor=this.colorPicker.value},this.wrapper.hidden=!1}}class AutomadFontSize extends AutomadInlineTool{static get title(){return"Font Size"}static get sanitize(){return{"am-fontsize":!0}}get tag(){return"AM-FONTSIZE"}get icon(){
return'<path d="M7.14,2h12.2C19.7,2,20,2.3,20,2.66v1.82c0,0.36-0.3,0.66-0.66,0.66h-3.53c-0.36,0-0.66,0.3-0.66,0.66v11.54 c0,0.36-0.3,0.66-0.66,0.66H12c-0.36,0-0.66-0.3-0.66-0.66V5.8c0-0.36-0.3-0.66-0.66-0.66H7.14c-0.36,0-0.66-0.3-0.66-0.66V2.66 C6.48,2.3,6.77,2,7.14,2z"/><path d="M0.45,7h8.39C9.09,7,9.3,7.2,9.3,7.45v1.25c0,0.25-0.2,0.45-0.45,0.45H6.42c-0.25,0-0.45,0.2-0.45,0.45v7.93 c0,0.25-0.2,0.45-0.45,0.45H3.79c-0.25,0-0.45-0.2-0.45-0.45V9.61c0-0.25-0.2-0.45-0.45-0.45H0.45C0.2,9.16,0,8.96,0,8.71V7.45 C0,7.2,0.2,7,0.45,7z"/>'
}get options(){return["70%","80%","90%","100%","110%","120%","130%","140%","150%","160%","170%","180%","190%","200%"]}renderActions(){const t=Automad.Util.create,e=t.label(AutomadFontSize.title);return this.select=t.select([this.cls.input],this.options,this.selected),this.wrapper=t.element("span",[this.cls.wrapper]),this.wrapper.appendChild(e),this.wrapper.appendChild(this.select),this.wrapper.hidden=!0,this.wrapper}showActions(t){const{fontSize:e}=t.style;this.select.value=e||"100%",
t.style.fontSize=this.select.value,this.select.onchange=()=>{t.style.fontSize=this.select.value},this.wrapper.hidden=!1}hideActions(){this.select.onchange=null,this.wrapper.hidden=!0}}class AutomadItalic extends AutomadInlineTool{get shortcut(){return"CMD+I"}static get title(){return"Italic"}static get sanitize(){return{i:!0}}get tag(){return"I"}get icon(){
return'<path d="M4,19c-0.2,0-0.4-0.2-0.4-0.4L4,17l1.4-0.1c0.5,0,0.7-0.1,0.7-0.1c0.2-0.1,0.4-0.2,0.4-0.3c0.1-0.1,0.2-0.3,0.2-0.4 L9.5,3.8c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1c0-0.1,0-0.1-0.2-0.2C9.2,3.3,9,3.2,8.7,3.1C8.3,3.1,8.1,3,7.9,3L7.2,2.9l0.4-1.6 C7.6,1.1,7.8,1,8,1H16c0.2,0,0.4,0.2,0.4,0.4L16,3l-0.5,0c-0.2,0-0.5,0-0.9,0.1s-0.6,0.1-0.8,0.2c-0.1,0-0.3,0.1-0.4,0.2 c-0.1,0.2-0.2,0.3-0.2,0.5l-2.8,12.3c0,0.2,0,0.2,0,0.2c0,0.1,0,0.1,0,0.1l0,0c0,0,0,0,0.2,0.1c0,0,0.1,0.1,0.6,0.2 c0.4,0.1,0.7,0.1,0.8,0.1l0.7,0.1l-0.4,1.7c0,0.2-0.2,0.3-0.4,0.3H4z"/>'
}}class AutomadLineHeight extends AutomadInlineTool{static get title(){return"Line Height"}static get sanitize(){return{"am-lineheight":!0}}get tag(){return"AM-LINEHEIGHT"}get icon(){
return'<path d="M9,20H1c-0.55,0-1-0.45-1-1v0c0-0.55,0.45-1,1-1h8c0.55,0,1,0.45,1,1v0C10,19.55,9.55,20,9,20z"/><path d="M1,0l18,0c0.55,0,1,0.45,1,1v0c0,0.55-0.45,1-1,1H1C0.45,2,0,1.55,0,1v0C0,0.45,0.45,0,1,0z"/><path d="M8.75,6h10.68C19.74,6,20,6.26,20,6.58v1.59c0,0.32-0.26,0.58-0.58,0.58h-3.09c-0.32,0-0.58,0.26-0.58,0.58v10.1 c0,0.32-0.26,0.58-0.58,0.58H13c-0.32,0-0.58-0.26-0.58-0.58V9.33c0-0.32-0.26-0.58-0.58-0.58h-3.1c-0.32,0-0.58-0.26-0.58-0.58 V6.58C8.17,6.26,8.43,6,8.75,6z"/>'}
get options(){return["inherit","0.8","0.9","1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0"]}renderActions(){const t=Automad.Util.create,e=t.label(AutomadLineHeight.title);return this.select=t.select([this.cls.input],this.options,this.selected),this.wrapper=t.element("span",[this.cls.wrapper]),this.wrapper.appendChild(e),this.wrapper.appendChild(this.select),this.wrapper.hidden=!0,this.wrapper}showActions(t){const{lineHeight:e}=t.style;this.select.value=e||"inherit",
t.style.lineHeight=this.select.value,t.style.display="inline-block",this.select.onchange=()=>{t.style.lineHeight=this.select.value},this.wrapper.hidden=!1}hideActions(){this.select.onchange=null,this.wrapper.hidden=!0}}!function(t,e,i){t.inlineLink={$:e,UIkit:i}}(window.Automad=window.Automad||{},jQuery,UIkit);class AutomadLink extends AutomadInlineTool{get shortcut(){return"CMD+L"}static get title(){return"Link"}static get sanitize(){return{a:!0}}get tag(){return"A"}get icon(){
return'<path d="M18.4,12.7l-2.8-2.8c-0.6-0.6-1.3-0.8-2-0.8c-0.7,0-1.5,0.3-2,0.8L11.5,10L10,8.5l0.1-0.1c1.1-1.1,1.1-2.9,0-4L7.3,1.6 C6.7,1.1,6,0.8,5.3,0.8s-1.5,0.3-2,0.8L1.6,3.3c-1.1,1.1-1.1,2.9,0,4l2.8,2.8c0.6,0.6,1.3,0.8,2,0.8s1.5-0.3,2-0.8L8.5,10l1.5,1.5 l-0.1,0.1c-1.1,1.1-1.1,2.9,0,4l2.8,2.8c0.6,0.6,1.3,0.8,2,0.8c0.7,0,1.5-0.3,2-0.8l1.7-1.7C19.5,15.6,19.5,13.8,18.4,12.7z M7,8.7 C6.8,8.9,6.6,8.9,6.4,8.9c-0.1,0-0.4,0-0.6-0.2L3.1,5.9C2.7,5.6,2.7,5,3.1,4.7l1.7-1.7c0.2-0.2,0.4-0.2,0.6-0.2c0.1,0,0.4,0,0.6,0.2 l2.8,2.8C9,6.2,9,6.7,8.7,7L8.6,7.1L8.4,7C8,6.6,7.4,6.6,7,7S6.6,8,7,8.4L7,8.7L7,8.7z M16.9,15.3l-1.7,1.7 c-0.2,0.2-0.4,0.2-0.6,0.2s-0.4,0-0.6-0.2l-2.8-2.8c-0.3-0.3-0.3-0.8,0-1.1l0.1-0.1l0.1,0.1c0.2,0.2,0.5,0.3,0.7,0.3 c0.3,0,0.5-0.1,0.7-0.3c0.4-0.4,0.4-1.1,0-1.5l-0.1-0.1l0.1-0.1c0.2-0.2,0.4-0.2,0.6-0.2s0.4,0,0.6,0.2l2.8,2.8 C17.3,14.4,17.3,15,16.9,15.3z"/>'
}get baseUrl(){const t=document.querySelector("[data-am-inpage-controller]");if(t){return t.dataset.amInpageController.split("?")[0]}return""}renderActions(){const t=Automad.Util.create,e=t.label(AutomadLink.title),i=t.element("script",[]);i.type="text/autocomplete",
i.textContent='\n\t\t\t<ul class="am-u-nav am-u-nav-autocomplete am-u-autocomplete-results">\n\t\t\t\t{{~items}}\n\t\t\t\t\t<li data-value="{{ $item.value }}">\n\t\t\t\t\t\t<a>\n\t\t\t\t\t\t\t<i class="am-u-icon-link"></i>&nbsp;\n\t\t\t\t\t\t\t{{ $item.title }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t{{/items}}\n\t\t\t</ul>\n\t\t';const a=t.element("div",["am-u-autocomplete","am-u-width-1-1","am-u-form"]);this.input=t.element("input",[this.cls.input]),this.input.type="text",
this.wrapper=t.element("span",[this.cls.wrapper,"link"]),this.wrapper.appendChild(e),this.wrapper.appendChild(a),a.appendChild(this.input),a.appendChild(i),this.wrapper.hidden=!0;const o=Automad.inlineLink.$,n=Automad.inlineLink.UIkit;return fetch(`${this.baseUrl}?controller=UI::autocompleteLink`,{method:"post"}).then((t=>t.json())).then((t=>{const e={source:t.autocomplete,minLength:1};n.autocomplete(o(a),e)})),this.wrapper}showActions(t){const e=t.getAttribute("href");this.input.value=e||"",
t.href=this.input.value,this.input.onchange=()=>{t.href=this.input.value},this.wrapper.hidden=!1}hideActions(){this.input.onchange=null,this.wrapper.hidden=!0}}class AutomadUnderline extends AutomadInlineTool{get shortcut(){return"CMD+U"}static get title(){return"Underline"}static get sanitize(){return{u:!0}}get tag(){return"U"}get icon(){
return'<path d="M15.2,1c0.3,0,0.6,0.3,0.6,0.6v8.5c0,3.1-2.3,5.1-5.8,5.1c-3.5,0-5.8-2.1-5.8-5.1V1.6C4.2,1.3,4.4,1,4.8,1h1.7 c0.3,0,0.6,0.3,0.6,0.6v8.3c0,1.6,1.1,2.8,2.9,2.8c1.7,0,2.9-1.2,2.9-2.8V1.6c0-0.3,0.3-0.6,0.6-0.6H15.2z"/><path d="M2.9,18.5v-1c0-0.2,0.2-0.5,0.5-0.5h13.2c0.2,0,0.4,0.2,0.4,0.5v1c0,0.2-0.2,0.5-0.4,0.5H3.4C3.1,19,2.9,18.8,2.9,18.5z"/>'}}class AutomadTuneLayout{static get isTune(){return!0}constructor({api:t,data:e,config:i,block:a}){this.data=e||{},
this.settings=AutomadLayout.renderSettings(this.data,Object.assign({},e),t,{flex:i.flex,allowStretching:["section","delimiter","image","gallery","slider","pagelist","embed","table"].includes(a.name)})}render(){return this.settings}save(){return this.data}}