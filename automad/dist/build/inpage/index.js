/* This file is part of Automad. Copyright and license info at the end. */
var xe=Object.create;var H=Object.defineProperty;var ye=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,Ee=Object.prototype.hasOwnProperty;var w=(f,o)=>()=>(f&&(o=f(f=0)),o);var P=(f,o)=>()=>(o||f((o={exports:{}}).exports,o),o.exports),U=(f,o)=>{for(var i in o)H(f,i,{get:o[i],enumerable:!0})},je=(f,o,i,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of ve(o))!Ee.call(f,t)&&t!==i&&H(f,t,{get:()=>o[t],enumerable:!(c=ye(o,t))||c.enumerable});return f};var Pe=(f,o,i)=>(i=f!=null?xe(qe(f)):{},je(o||!f||!f.__esModule?H(i,"default",{value:f,enumerable:!0}):i,f));var W=w(()=>{});var y,B=w(()=>{y=(f,o=[],i={},c=null,t=null,s=!1)=>{let b=document.createElement(f);o.forEach(r=>{b.classList.add(r)});for(let[r,g]of Object.entries(i))typeof g<"u"&&b.setAttribute(r,g);return c&&(s?c.prepend(b):c.appendChild(b)),t&&(b.innerHTML=t),b}});var N,V=w(()=>{N=f=>{let[o,i]=f.split("::"),c=t=>t.replace(/([A-Z])/g," $1").trim().toLowerCase().replace(/\s/g,"-");return`${c(o.replace("Controller",""))}/${c(i)}`}});var Y=w(()=>{});var F=w(()=>{});var X=w(()=>{});var K=w(()=>{});var j=w(()=>{W();B();V();Y();F();X();K();});var Q,J=w(()=>{Q='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="994px" height="1170px" viewBox="0 0 994 1170" style="enable-background:new 0 0 994 1170;" preserveAspectRatio="xMinYMin meet" xml:space="preserve" fill="currentColor" ><path d="M626.1,345.8L60.7,567.5l-57.4-143L269.6,4.7H724l266.7,419.8l-78.5,195.4L626.1,345.8z M876.2,452.9l7.4-18.5 l-96.4-151.8l-62.9,24.7L876.2,452.9z M114.1,443.7l620.8-243.4l-63.4-99.9H322.2L110.4,434.4L114.1,443.7z"/><path d="M300.7,1165.3l-48.3-120.2l-224.6,62.6l-25.7-92.2l307.2-85.6l56.1,139.7h262.8l56.2-139.7l307.4,85.6 l-25.7,92.2l-224.9-62.6l-48.3,120.2H300.7z"/></svg>'});var O,Z,D,G,$,ee,_=w(()=>{O="am-inpage-scroll-y",Z="am-inpage-dock-position",D=()=>{sessionStorage.setItem(O,`${window.scrollY}`)},G=()=>{let f=sessionStorage.getItem(O);f&&(window.scrollTo(window.scrollX,parseInt(f)),sessionStorage.removeItem(O))},$=f=>{sessionStorage.setItem(Z,JSON.stringify(f.position))},ee=f=>{let o=sessionStorage.getItem(Z);if(!o)return;let i=JSON.parse(o);f.setPosition(i.x,i.y)}});var q,T=w(()=>{q=class extends HTMLElement{constructor(){super()}getAttr(o){let i=this.getAttribute(o);return this.removeAttribute(o),i}}});var te=P((Ze,A)=>{(function(f,o){typeof A=="object"&&A.exports?A.exports=o():f.getSize=o()})(window,function(){function o(b){let r=parseFloat(b);return b.indexOf("%")==-1&&!isNaN(r)&&r}let i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],c=i.length;function t(){let b={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return i.forEach(r=>{b[r]=0}),b}function s(b){if(typeof b=="string"&&(b=document.querySelector(b)),!(b&&typeof b=="object"&&b.nodeType))return;let g=getComputedStyle(b);if(g.display=="none")return t();let e={};e.width=b.offsetWidth,e.height=b.offsetHeight;let l=e.isBorderBox=g.boxSizing=="border-box";i.forEach(x=>{let v=g[x],E=parseFloat(v);e[x]=isNaN(E)?0:E});let d=e.paddingLeft+e.paddingRight,k=e.paddingTop+e.paddingBottom,n=e.marginLeft+e.marginRight,a=e.marginTop+e.marginBottom,p=e.borderLeftWidth+e.borderRightWidth,h=e.borderTopWidth+e.borderBottomWidth,u=o(g.width);u!==!1&&(e.width=u+(l?0:d+p));let m=o(g.height);return m!==!1&&(e.height=m+(l?0:k+h)),e.innerWidth=e.width-(d+p),e.innerHeight=e.height-(k+h),e.outerWidth=e.width+n,e.outerHeight=e.height+a,e}return s})});var ne=P((oe,M)=>{(function(f,o){typeof M=="object"&&M.exports?M.exports=o():f.EvEmitter=o()})(typeof window<"u"?window:oe,function(){function f(){}let o=f.prototype;return o.on=function(i,c){if(!i||!c)return this;let t=this._events=this._events||{},s=t[i]=t[i]||[];return s.includes(c)||s.push(c),this},o.once=function(i,c){if(!i||!c)return this;this.on(i,c);let t=this._onceEvents=this._onceEvents||{},s=t[i]=t[i]||{};return s[c]=!0,this},o.off=function(i,c){let t=this._events&&this._events[i];if(!t||!t.length)return this;let s=t.indexOf(c);return s!=-1&&t.splice(s,1),this},o.emitEvent=function(i,c){let t=this._events&&this._events[i];if(!t||!t.length)return this;t=t.slice(0),c=c||[];let s=this._onceEvents&&this._onceEvents[i];for(let b of t)s&&s[b]&&(this.off(i,b),delete s[b]),b.apply(this,c);return this},o.allOff=function(){return delete this._events,delete this._onceEvents,this},f})});var ie=P((fe,L)=>{(function(f,o){typeof L=="object"&&L.exports?L.exports=o(f,ne()):f.Unidragger=o(f,f.EvEmitter)})(typeof window<"u"?window:fe,function(o,i){function c(){}let t=c.prototype=Object.create(i.prototype);t.handleEvent=function(e){let l="on"+e.type;this[l]&&this[l](e)};let s,b;"ontouchstart"in o?(s="touchstart",b=["touchmove","touchend","touchcancel"]):o.PointerEvent?(s="pointerdown",b=["pointermove","pointerup","pointercancel"]):(s="mousedown",b=["mousemove","mouseup"]),t.touchActionValue="none",t.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},t.unbindHandles=function(){this._bindHandles("removeEventListener","")},t._bindHandles=function(e,l){this.handles.forEach(d=>{d[e](s,this),d[e]("click",this),o.PointerEvent&&(d.style.touchAction=l)})},t.bindActivePointerEvents=function(){b.forEach(e=>{o.addEventListener(e,this)})},t.unbindActivePointerEvents=function(){b.forEach(e=>{o.removeEventListener(e,this)})},t.withPointer=function(e,l){l.pointerId===this.pointerIdentifier&&this[e](l,l)},t.withTouch=function(e,l){let d;for(let k of l.changedTouches)k.identifier===this.pointerIdentifier&&(d=k);d&&this[e](l,d)},t.onmousedown=function(e){this.pointerDown(e,e)},t.ontouchstart=function(e){this.pointerDown(e,e.changedTouches[0])},t.onpointerdown=function(e){this.pointerDown(e,e)};let r=["TEXTAREA","INPUT","SELECT","OPTION"],g=["radio","checkbox","button","submit","image","file"];return t.pointerDown=function(e,l){let d=r.includes(e.target.nodeName),k=g.includes(e.target.type),n=!d||k;!this.isPointerDown&&!e.button&&n&&(this.isPointerDown=!0,this.pointerIdentifier=l.pointerId!==void 0?l.pointerId:l.identifier,this.pointerDownPointer={pageX:l.pageX,pageY:l.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[e,l]))},t.onmousemove=function(e){this.pointerMove(e,e)},t.onpointermove=function(e){this.withPointer("pointerMove",e)},t.ontouchmove=function(e){this.withTouch("pointerMove",e)},t.pointerMove=function(e,l){let d={x:l.pageX-this.pointerDownPointer.pageX,y:l.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[e,l,d]),!this.isDragging&&this.hasDragStarted(d)&&this.dragStart(e,l),this.isDragging&&this.dragMove(e,l,d)},t.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},t.dragStart=function(e,l){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[e,l])},t.dragMove=function(e,l,d){this.emitEvent("dragMove",[e,l,d])},t.onmouseup=function(e){this.pointerUp(e,e)},t.onpointerup=function(e){this.withPointer("pointerUp",e)},t.ontouchend=function(e){this.withTouch("pointerUp",e)},t.pointerUp=function(e,l){this.pointerDone(),this.emitEvent("pointerUp",[e,l]),this.isDragging?this.dragEnd(e,l):this.staticClick(e,l)},t.dragEnd=function(e,l){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[e,l])},t.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},t.onpointercancel=function(e){this.withPointer("pointerCancel",e)},t.ontouchcancel=function(e){this.withTouch("pointerCancel",e)},t.pointerCancel=function(e,l){this.pointerDone(),this.emitEvent("pointerCancel",[e,l])},t.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},t.staticClick=function(e,l){let d=e.type==="mouseup";d&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[e,l]),d&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},c})});var re=P((be,z)=>{(function(f,o){typeof z=="object"&&z.exports?z.exports=o(f,te(),ie()):f.Draggabilly=o(f,f.getSize,f.Unidragger)})(typeof window<"u"?window:be,function(o,i,c){function t(){}let s=o.jQuery;function b(n,a){this.element=typeof n=="string"?document.querySelector(n):n,s&&(this.$element=s(this.element)),this.options={},this.option(a),this._create()}let r=b.prototype=Object.create(c.prototype);r.option=function(n){this.options={...this.options,...n}};let g=["relative","absolute","fixed"];r._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition={...this.position};let n=getComputedStyle(this.element);g.includes(n.position)||(this.element.style.position="relative"),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.setHandles(),this.enable()},r.setHandles=function(){let{handle:n}=this.options;typeof n=="string"?this.handles=this.element.querySelectorAll(n):typeof n=="object"&&n.length?this.handles=n:n instanceof HTMLElement?this.handles=[n]:this.handles=[this.element]};let e=["dragStart","dragMove","dragEnd"],l=r.emitEvent;r.emitEvent=function(n,a){if(!this.isEnabled&&e.includes(n))return;l.call(this,n,a);let h=o.jQuery;if(!h||!this.$element)return;let u,m=a;a&&a[0]instanceof Event&&([u,...m]=a);let v=h.Event(u);v.type=n,this.$element.trigger(v,m)},r._getPosition=function(){let n=getComputedStyle(this.element),a=this._getPositionCoord(n.left,"width"),p=this._getPositionCoord(n.top,"height");this.position.x=isNaN(a)?0:a,this.position.y=isNaN(p)?0:p,this._addTransformPosition(n)},r._getPositionCoord=function(n,a){if(n.includes("%")){let p=i(this.element.parentNode);return p?parseFloat(n)/100*p[a]:0}return parseInt(n,10)},r._addTransformPosition=function(n){let a=n.transform;if(!a.startsWith("matrix"))return;let p=a.split(","),h=a.startsWith("matrix3d")?12:4,u=parseInt(p[h],10),m=parseInt(p[h+1],10);this.position.x+=u,this.position.y+=m},r.handlePointerDown=function(n,a){this.isEnabled&&(this.pointerDownPointer={pageX:a.pageX,pageY:a.pageY},n.preventDefault(),document.activeElement.blur(),this.bindActivePointerEvents(n),this.element.classList.add("is-pointer-down"))},r.handleDragStart=function(){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.animate())},r.measureContainment=function(){let n=this.getContainer();if(!n)return;let a=i(this.element),p=i(n),{borderLeftWidth:h,borderRightWidth:u,borderTopWidth:m,borderBottomWidth:x}=p,v=this.element.getBoundingClientRect(),E=n.getBoundingClientRect(),we=h+u,ke=m+x,R=this.relativeStartPosition={x:v.left-(E.left+h),y:v.top-(E.top+m)};this.containSize={width:p.width-we-R.x-a.width,height:p.height-ke-R.y-a.height}},r.getContainer=function(){let n=this.options.containment;return n?n instanceof HTMLElement?n:typeof n=="string"?document.querySelector(n):this.element.parentNode:void 0},r.handleDragMove=function(n,a,p){if(!this.isEnabled)return;let h=p.x,u=p.y,m=this.options.grid,x=m&&m[0],v=m&&m[1];h=d(h,x),u=d(u,v),h=this.containDrag("x",h,x),u=this.containDrag("y",u,v),h=this.options.axis=="y"?0:h,u=this.options.axis=="x"?0:u,this.position.x=this.startPosition.x+h,this.position.y=this.startPosition.y+u,this.dragPoint.x=h,this.dragPoint.y=u};function d(n,a,p){return a?(p=p||"round",Math[p](n/a)*a):n}r.containDrag=function(n,a,p){if(!this.options.containment)return a;let h=n=="x"?"width":"height",u=this.relativeStartPosition[n],m=d(-u,p,"ceil"),x=this.containSize[h];return x=d(x,p,"floor"),Math.max(m,Math.min(x,a))},r.handlePointerUp=function(){this.element.classList.remove("is-pointer-down")},r.handleDragEnd=function(){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"))},r.animate=function(){this.isDragging&&(this.positionDrag(),requestAnimationFrame(()=>this.animate()))},r.setLeftTop=function(){let{x:n,y:a}=this.position;this.element.style.left=`${n}px`,this.element.style.top=`${a}px`},r.positionDrag=function(){let{x:n,y:a}=this.dragPoint;this.element.style.transform=`translate3d(${n}px, ${a}px, 0)`},r.setPosition=function(n,a){this.position.x=n,this.position.y=a,this.setLeftTop()},r.enable=function(){this.isEnabled||(this.isEnabled=!0,this.bindHandles())},r.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.isDragging&&this.dragEnd(),this.unbindHandles())};let k=["transform","left","top","position"];return r.destroy=function(){this.disable(),k.forEach(n=>{this.element.style[n]=""}),this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},r._init=t,s&&s.bridget&&s.bridget("draggabilly",b),b})});var le={};U(le,{InPageDockComponent:()=>C});var ce,C,ae=w(()=>{j();J();_();T();ce=Pe(re(),1);C=class extends q{connectedCallback(){this.classList.add("am-inpage-dock"),G();let o=this.getAttr("csrf"),i=this.getAttr("api"),c=this.getAttr("dashboard"),t=this.getAttr("url"),s=this.getAttr("state"),b=JSON.parse(decodeURIComponent(this.getAttr("labels"))),r=y("div",["am-inpage-dock__container"],{},this),g=y("span",["am-inpage-dock__handle"],{},r,'<i class="bi bi-grip-vertical"></i>');this.initDrag(r,g),y("div",["am-inpage-dock__logo"],{},y("a",["am-inpage-dock__item"],{href:c},r),Q);let e=(l,d,k)=>{y("i",["bi",`bi-${l}`],{},y("a",["am-inpage-dock__item"],{href:`${c}/page?url=${encodeURIComponent(t)}&section=${d}`,"data-tooltip":k},r))};e("ui-checks","settings",b.fieldsSettings),e("body-text","text",b.fieldsContent),e("grid","files",b.uploadedFiles),y("am-inpage-publish",[],{state:s,url:t,api:i,csrf:o,label:b.publish},r)}initDrag(o,i){let c=new ce.default(o,{handle:i});ee(c),c.on("dragEnd",()=>{$(c)}),i.addEventListener("dblclick",()=>{c.setPosition(0,0),$(c)})}};customElements.define("am-inpage-dock",C)});var se={};U(se,{InPageEditComponent:()=>I});var I,de=w(()=>{j();_();T();I=class extends q{connectedCallback(){this.classList.add("am-inpage-edit");let o=this.getAttr("page"),i=this.getAttr("dashboard"),c=this.getAttr("context"),t=this.getAttr("label"),s=this.getAttribute("field");setTimeout(()=>{let b=y("span",["am-inpage-edit__overlay"],{},this);y("span",["am-inpage-edit__button"],{},b,t).addEventListener("click",()=>{let g=new URLSearchParams({field:s,page:o,context:c}).toString();D(),window.location.href=`${i}/inpage?${g}`})},0)}};customElements.define("am-inpage-edit",I)});var he,pe,ue=w(()=>{j();he=async(f,o,i,c)=>{pe(`${o} >>`,c);let t=new FormData;t.append("__csrf__",i),t.append("__json__",JSON.stringify(c));let s={method:"POST",body:t},r=await(await fetch(`${f}/${N(o)}`,s)).json();return pe(`${o} <<`,r),r},pe=(...f)=>{}});var ge={};U(ge,{InPagePublishComponent:()=>S});var S,me=w(()=>{j();ue();_();T();S=class extends q{connectedCallback(){let o=this.getAttr("state"),i=this.getAttr("url"),c=this.getAttr("api"),t=this.getAttr("csrf"),s=async()=>{let b=await he(c,"InPageController::publish",t,{url:i});if(b.code==200){if(D(),b.redirect){window.location.href=`${b.redirect}`;return}window.location.reload()}};if(this.textContent=this.getAttr("label"),o==="draft"){this.addEventListener("click",s);return}this.setAttribute("disabled","")}};customElements.define("am-inpage-publish",S)});Promise.resolve().then(()=>ae());Promise.resolve().then(()=>de());Promise.resolve().then(()=>me());
/*!
 * Automad (https://automad.org)
 * 
 * Copyright (c) 2026 Marc Anton Dahmen (https://marcdahmen.de)
 * Automad is licensed under the MIT license
 */
/*! Bundled license information:

get-size/get-size.js:
  (*!
   * Infinite Scroll v2.0.4
   * measure size of elements
   * MIT license
   *)

unidragger/unidragger.js:
  (*!
   * Unidragger v3.0.1
   * Draggable base class
   * MIT license
   *)

draggabilly/draggabilly.js:
  (*!
   * Draggabilly v3.0.0
   * Make that shiz draggable
   * https://draggabilly.desandro.com
   * MIT license
   *)
*/
