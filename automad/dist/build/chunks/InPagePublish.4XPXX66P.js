/* Automad 2.0.0-alpha.47, (c) 2025 Marc Anton Dahmen, MIT license */
import{a as p,e as d}from"./chunk.3OLJBBFE.js";import{b as l}from"./chunk.TNS2LIBN.js";import"./chunk.EPACJLJA.js";var f=async(n,t,r,s)=>{m(`${t} >>`,s);let e=new FormData;e.append("__csrf__",r),e.append("__json__",JSON.stringify(s));let i={method:"POST",body:e},c=await(await fetch(`${n}/${l(t)}`,i)).json();return m(`${t} <<`,c),c},m=(...n)=>{};var a=class extends d{connectedCallback(){let t=this.getAttr("state"),r=this.getAttr("url"),s=this.getAttr("api"),e=this.getAttr("csrf"),i=async()=>{let o=await f(s,"InPageController::publish",e,{url:r});if(o.code==200){if(p(),o.redirect){window.location.href=`${o.redirect}`;return}window.location.reload()}};if(this.textContent=this.getAttr("label"),t==="draft"){this.addEventListener("click",i);return}this.setAttribute("disabled","")}};customElements.define("am-inpage-publish",a);export{a as InPagePublishComponent};
