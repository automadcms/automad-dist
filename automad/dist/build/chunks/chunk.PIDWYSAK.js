/* Automad 2.0.0-alpha.48, (c) 2025 Marc Anton Dahmen, MIT license */
import{B as v,M as u,P as h,Q as x,S as g,a as n,e as m,k as p}from"./chunk.DFXEN6GE.js";import{a as i}from"./chunk.G4EF3EQN.js";var d=async(l,t,a)=>{let e=v(a);e.open();let{error:o,success:s}=await g(t,{package:l.name});o&&h(o),s&&x(s),e.close(),m("AutomadPackagesChange"),n.checkForOutdatedPackages()},r=class extends p{static TAG_NAME="am-package-card";set data(t){this.render(t)}createHeader(t,a){i("div",["am-c-card__header"],{},a,u`<div class="${"am-c-card__title"}"> $${t.name.split("/")[0]} /<br />$${t.name.split("/")[1]}</div><am-dropdown class="${"am-c-card__header-dropdown"}" ${"am-right"}><i class="bi bi-three-dots"></i><div class="${"am-c-dropdown__items"}"><a href="${t.documentation}" class="${"am-c-dropdown__link"}" target="_blank" ><am-icon-text ${"am-icon"}="file-richtext" ${"am-text"}="${n.text("packageDocumentation")}" ></am-icon-text></a><a href="${t.repository}" class="${"am-c-dropdown__link"}" target="_blank" ><am-icon-text ${"am-icon"}="git" ${"am-text"}="Repository" ></am-icon-text></a><a href="${t.issues}" class="${"am-c-dropdown__link"}" target="_blank" ><am-icon-text ${"am-icon"}="bug" ${"am-text"}="Issues" ></am-icon-text></a></div></am-dropdown>`)}createDescription(t,a){i("span",["am-u-text-limit-rows"],{},i("div",["am-c-card__body"],{},a)).textContent=t.description}createFooter(t,a){let e=i("div",["am-c-card__buttons"],{},a);t.installed?(this.createRemoveButton(t,e),t.outdated&&this.createUpdateButton(t,e)):this.createInstallButton(t,e)}createUpdateButton(t,a){let e=i("span",[],{},a);i("span",[],{},e).textContent=n.text("packageUpdate"),this.listen(e,"click",()=>{d(t,"PackageManagerController::update",n.text("packageUpdating"))})}createInstallButton(t,a){let e=i("span",[],{},a);i("span",[],{},e).textContent=n.text("packageInstall"),this.listen(e,"click",()=>{d(t,"PackageManagerController::install",n.text("packageInstalling"))})}createRemoveButton(t,a){let e=i("span",[],{},a);if(i("span",[],{},e).textContent=n.text("packageRemove"),t.isDependency){e.setAttribute("disabled",""),e.setAttribute("title",n.text("packageIsDependency"));return}this.listen(e,"click",()=>{d(t,"PackageManagerController::remove",n.text("packageRemoving"))})}createPreview(t,a){let e=s=>{i("i",["bi","bi-box-seam"],{},s)},o=i("a",["am-c-card__teaser"],{href:t.documentation,target:"_blank"},a);if(t.version){let s=["am-e-badge"],c=[t.version];t.outdated&&(c.push("\uE1D7"),c.push(t.latest)),i("span",s,{},o,c.join(" "))}if(t.thumbnail){let s=i("img",[],{src:t.thumbnail},o);this.listen(s,"error",()=>{s.remove(),e(o)});return}e(o)}async render(t){this.classList.add("am-c-card"),this.classList.toggle("am-c-card--active",t.installed),this.createHeader(t,this),this.createPreview(t,this),this.createDescription(t,this),this.createFooter(t,this)}};customElements.define(r.TAG_NAME,r);export{r as a};
