/* Automad 2.0.0-alpha.47, (c) 2025 Marc Anton Dahmen, MIT license */
import{B as T,M as d,a as t,k as g,pa as h}from"./chunk.ETUXSY6N.js";import{a as p,e as x}from"./chunk.TNS2LIBN.js";import"./chunk.44XCHEAG.js";import"./chunk.EPACJLJA.js";var y=(m,e="")=>{let a=m.split("/").reverse()[0].replace(/\.php$/g,"");return h([e,a].join("/"))},u=(m,e="")=>{let a=m.split("/").reverse()[0].replace(/\.php$/g,"");return[e,a].filter(s=>s.length).join("/")},L=({fields:m,template:e,themeKey:a})=>{let s=t.themes,l=s[t.mainTheme];typeof l>"u"&&(l=Object.values(s)[0]);let n=!1,o=l,i=u(e),c=h(i),r="code-slash";return typeof s[m[a]]<"u"&&(o=s[m[a]],c=h(`${o.name}/${i}`),i=u(e,o.path)),n=o?.templates.indexOf(e)!==-1,n||(r="question-circle"),{buttonLabel:c,buttonIcon:r,selectedTemplate:i}},$=(m,e,a,s="*",l="")=>{m.forEach(n=>{let o=u(n,l),i=p("option",[],{value:o},e);i.textContent=y(o,s),a==o&&i.setAttribute("selected","")})},b=class extends g{connectedCallback(){this.classList.add("am-f-select");let e=this.getAttribute("value"),a=t.themes[t.mainTheme]||t.themes[Object.keys(t.themes)[0]],s=t.themes,l=p("span",[],{},this),n=p("select",[],{name:"theme_template"},this),o=p("optgroup",[],{label:"*"},n);$(a?.templates??[],o,e),Object.values(s).forEach(c=>{let r=p("optgroup",[],{label:c.name},n);$(c.templates,r,e,c.name,c.path)});let i=()=>{l.textContent=n.options[n.selectedIndex].text};this.listen(n,"change",i.bind(this,!0)),setTimeout(i,0)}},f=class extends g{set data({fields:e,template:a,themeKey:s,readme:l}){this.render({fields:e,template:a,themeKey:s,readme:l})}connectedCallback(){this.classList.add("am-c-field")}render({fields:e,template:a,themeKey:s,readme:l}){let{buttonLabel:n,buttonIcon:o,selectedTemplate:i}=L({fields:e,template:a,themeKey:s,readme:l});if(this.innerHTML=d`<label class="${"am-c-field__label"}">${t.text("pageTemplate")}</label><am-modal-toggle ${"am-modal"}="#am-page-template-modal" class="${"am-f-input"} ${"am-u-flex"} ${"am-u-flex--align-center"} ${"am-u-flex--between"} ${"am-u-cursor-pointer"}" ><am-icon-text ${"am-icon"}="${o}" ${"am-text"}="${n}" ></am-icon-text><i class="bi bi-pen"></i></am-modal-toggle>`,l){let v=p("a",[],{href:l,target:"_blank"},this);p("am-icon-text",[],{"am-icon":"file-earmark-text","am-text":t.text("themeReadme")},v)}let c=p("am-modal",[],{id:"am-page-template-modal"},this,d`<am-modal-dialog><am-modal-header>${t.text("pageTemplate")}</am-modal-header><am-modal-body></am-modal-body></am-modal-dialog>`),r=x("am-modal-body",this);Object.keys(t.themes).length>0?r.innerHTML=d`<p>${t.text("pageTemplatePurgeUnusedInfo")}</p><am-page-template-select value="${i}" ></am-page-template-select>`:r.textContent=t.text("noThemesFound"),this.listen(c,"change",()=>{T(t.text("switchingTemplateProgress")).open()})}};customElements.define("am-page-template-field",f);customElements.define("am-page-template-select",b);export{f as PageTemplateFieldComponent};
