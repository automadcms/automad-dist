/* Automad 2.0.0-alpha.47, (c) 2025 Marc Anton Dahmen, MIT license */
import{M as s,Q as p,S as d,a as e,ja as g,k as b,v as n,x as h}from"./chunk.ETUXSY6N.js";import{a as t}from"./chunk.TNS2LIBN.js";var f=()=>{let{modal:a,form:o}=h("PackageManagerController::saveAuth","",e.text("composerAuth"),e.text("save"));setTimeout(async()=>{o.innerHTML="<am-spinner></am-spinner>",o.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap-large"),a.open(),t("div",[],{},o,e.text("composerAuthInfo"));let i={...{githubToken:"",githubTokenIsSet:!1,gitlabUrl:"",gitlabToken:"",gitlabTokenIsSet:!1},...(await d("PackageManagerController::getSafeAuth")).data},r=t("div",["am-c-card"],{},o,s`<div class="${"am-c-card__icon"}"><i class="bi bi-github"></i></div><div class="${"am-c-card__title"}">GitHub</div>`),l=t("div",["am-c-card__form"],{},r);n("am-input-field",l,{key:"githubToken",value:"",name:"githubToken",placeholder:i.githubTokenIsSet?"**********":"",label:'Fine-grained access token "Contents: Read"'},[]);let k=t("div",["am-c-card"],{},o,s`<div class="${"am-c-card__icon"}"><i class="bi bi-gitlab"></i></div><div class="${"am-c-card__title"}">GitLab</div>`),u=t("div",["am-c-card__form"],{},k);n("am-input-field",u,{key:"gitlabToken",value:"",name:"gitlabToken",placeholder:i.gitlabTokenIsSet?"**********":"",label:'Personal access token "read_api"'},[]),n("am-input-field",u,{key:"gitlabUrl",value:i.gitlabUrl||"gitlab.com",name:"gitlabUrl",placeholder:"gitlab.com",label:"GitLab URL"},[])},0)},v=async()=>{if(!await g(e.text("composerAuthResetConfirm")))return;let{success:a}=await d("PackageManagerController::resetAuth",{},!0);a&&p(a)},c=class extends b{static{this.TAG_NAME="am-composer-auth"}connectedCallback(){this.classList.add("am-f-group");let o=t("button",["am-e-button","am-f-group__item"],{},this,e.text("composerAuth")),m=t("am-dropdown",["am-e-button","am-e-button--icon","am-f-group__item"],{"am-right":""},this,'<i class="bi bi-three-dots-vertical"></i>'),i=t("div",["am-c-dropdown__items"],{},m),r=t("button",["am-c-dropdown__link"],{},i,s`<am-icon-text ${"am-icon"}="key" ${"am-text"}="${e.text("composerAuthConfig")}" ></am-icon-text>`),l=t("button",["am-c-dropdown__link"],{},i,s`<am-icon-text ${"am-icon"}="x-lg" ${"am-text"}="${e.text("composerAuthReset")}" ></am-icon-text>`);this.listen(o,"click",f.bind(this)),this.listen(r,"click",f.bind(this)),this.listen(l,"click",v.bind(this))}};customElements.define(c.TAG_NAME,c);export{c as a};
