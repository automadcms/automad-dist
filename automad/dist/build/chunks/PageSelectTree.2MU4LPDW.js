/* Automad, (c) Marc Anton Dahmen, MIT license */
import{a as g,b as p,c as m}from"./chunk.5KKUTEJL.js";import{M as u,a as s,da as i,k as c,l as d}from"./chunk.KG3NJGTQ.js";import{e as l}from"./chunk.SQMRGQ3J.js";import"./chunk.ZTO3KGQP.js";import{c as b}from"./chunk.2NNYUVDG.js";var h=b(g(),1);var f=t=>{let e=t.private?"eye-slash-fill":"folder2";return u`<label class="${"am-c-nav__item"}"><input type="radio" name="targetPage" value="${t.url}" tabindex="0" /><span class="${"am-c-nav__link"}"><am-icon-text ${"am-icon"}="${e}" ${"am-text"}="$${t.title}" ></am-icon-text></span></label>`},o=class extends c{tree;get hideCurrent(){return this.hasAttribute("am-hide-current")}connectedCallback(){this.listen(window,"AutomadAppStateChange",this.init.bind(this)),this.init()}init(){this.tree?.destroy(),this.innerHTML="";let e=this.filterPages(Object.values(s.pages)),n=p(e);this.tree=new h.default({nodes:n,element:this,initCollapseLevel:1,disableSorting:!0,styles:m,renderLabel:f});let r=this.tree.findNode("url",i())||this.tree.findNode("url","/");r.reveal();let a=this.closest(d.TAG_NAME);a&&this.listen(a,"AutomadModalOpen",()=>{l("input",r.label).checked=!0})}filterPages(e){if(this.hideCurrent){let n=i(),r=new RegExp(`^${n}(/|$)`);return e.filter(a=>a.url.match(r)==null)}return e}disconnectedCallback(){this.tree?.destroy(),super.disconnectedCallback()}};customElements.define("am-page-select-tree",o);
