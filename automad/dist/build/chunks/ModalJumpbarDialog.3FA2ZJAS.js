/* Automad 2.0.0-alpha.47, (c) 2025 Marc Anton Dahmen, MIT license */
import{a as m}from"./chunk.XGXPFA2P.js";import{M as c,a as e}from"./chunk.ETUXSY6N.js";import{a as o}from"./chunk.TNS2LIBN.js";import"./chunk.44XCHEAG.js";import"./chunk.EPACJLJA.js";var p=()=>[{target:"search",value:e.text("searchTitle"),title:e.text("searchTitle"),icon:"search",cls:["am-c-modal__jumpbar-divider"]}],d=()=>[{external:e.baseIndex||"/",value:e.text("inPageEdit"),title:e.text("inPageEdit"),icon:"window-desktop",cls:["am-c-modal__jumpbar-divider"]}],g=()=>{let a=(r,l,u)=>({target:`system?section=${r}`,value:`${e.text("systemTitle")} ${e.text(l)}`,title:e.text(l),subtitle:e.text("systemTitle"),icon:u,cls:["am-c-modal__jumpbar-divider-system"]}),i=e.isCloud?[]:[a("mail","systemMail","envelope")],t=e.isCloud?[]:[a("debug","systemDebug","bug")];return[a("cache","systemCache","device-ssd"),a("users","systemUsers","person-badge"),a("feed","systemRssFeed","rss"),...i,a("i18n","systemI18n","globe"),a("language","systemLanguage","translate"),...t,a("update","systemUpdate","arrow-repeat")]},h=()=>[{target:"shared",value:e.text("sharedTitle"),title:e.text("sharedTitle"),icon:"file-earmark-medical",cls:["am-c-modal__jumpbar-divider"]}],b=()=>[{target:"components",value:e.text("componentsTitle"),title:e.text("componentsTitle"),icon:"boxes",cls:["am-c-modal__jumpbar-divider"]}],v=()=>[{target:"packages?section=packages",value:e.text("packagesSwitcherTitle"),title:e.text("packagesSwitcherTitle"),icon:"box-seam",cls:["am-c-modal__jumpbar-divider-packages"]},{target:"packages?section=repositories",value:`${e.text("repositoriesSwitcherTitle")} (packages)`,title:e.text("repositoriesSwitcherTitle"),icon:"git",cls:["am-c-modal__jumpbar-divider-packages"]}],D=()=>[{target:"trash",value:e.text("trashTitle"),title:e.text("trashTitle"),icon:"trash3",cls:["am-c-modal__jumpbar-divider"]}],x=()=>{let a=[],i=Object.values(e.pages);return i.sort((t,s)=>t.lastModified<s.lastModified?1:s.lastModified<t.lastModified?-1:0),i.forEach(t=>{let s=t.private?"eye-slash-fill":"file-earmark-text";a.push({target:`page?url=${t.url}`,value:`${t.title} ${t.url}`,title:t.title,subtitle:t.url,icon:s})}),a},I=()=>[].concat(p(),d(),g(),h(),b(),v(),D(),x()),n=class extends m{constructor(){super(...arguments);this.initialIndex=0;this.elementClasses=["am-c-modal__dialog"];this.inputClasses=["am-c-modal__jumpbar-input"];this.itemsClasses=["am-c-modal__jumpbar-items"];this.linkClass="am-c-modal__jumpbar-link";this.linkActiveClass="am-active"}get data(){return I()}get minInputLength(){return 0}createItemElement(t){let s={};t.external&&(s["am-external"]=t.external),t.target&&(s["am-target"]=t.target);let r=t.cls||[],l=o("am-link",r.concat("am-c-modal__jumpbar-link"),s);return l.innerHTML=this.itemHtml(t.icon,t.title,t.subtitle),l}createItemValue(t){return t.value.toLowerCase()}itemHtml(t,s,r){return c`<span class="${"am-c-icon-text"}"><i class="bi bi-${t}"></i><span>$${s}</span><span class="${"am-u-text-muted"}">$${r||""}</span></span>`}update(){let t=this.itemsFiltered[0];t.element.setAttribute("am-target",`search?search=${encodeURIComponent(this.input.value).replace(/%20/g,"+")}`),t.value=`${t.value} ${this.input.value.toLowerCase()}`,t.element.innerHTML=this.itemHtml(t.item.icon,t.item.title,this.input.value),this.maxItems=Math.floor((window.innerHeight-150)/46),super.update()}close(){this.selectedIndex=this.initialIndex,this.toggleActiveItemStyle()}open(){this.update()}select(t){t.preventDefault(),this.selectedIndex!==null&&this.itemsFiltered[this.selectedIndex].element.click(),this.close()}disconnectedCallback(){super.disconnectedCallback(),this.itemsFiltered=null,this.items.forEach(({element:t})=>{t.remove()}),this.items=null}};customElements.define("am-modal-jumpbar-dialog",n);
