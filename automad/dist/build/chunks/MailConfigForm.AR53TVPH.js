/* Automad 2.0.0-alpha.48, (c) 2025 Marc Anton Dahmen, MIT license */
import{b as h}from"./chunk.42CLRD5U.js";import"./chunk.27GPIFBM.js";import{C as f,S as u,a as t,ca as g,e as c,ja as v,v as r}from"./chunk.DFXEN6GE.js";import{a as s}from"./chunk.G4EF3EQN.js";import"./chunk.GP2ROWMN.js";import"./chunk.KC7M4D2V.js";var P=["sendmail","smtp"],i=class extends h{get watch(){return!0}get config(){return this._config}set config(e){this._config=e,this.render()}_config=null;init(){this.config=t.system.mail,this.listen(window,"AutomadAppStateChange",()=>{this.config=t.system.mail})}render(){let e=this.config;this.innerHTML="",this.classList.add("am-u-flex","am-u-flex--column","am-u-flex--gap-large");let o=s("div",[],{},this),n=f(P.map(x=>({value:x})),e.transport,o,"transport");r("am-email-field",o,{key:"from",name:"from",value:e.from,label:`${t.text("emailFrom")} (From)`,placeholder:e.fromDefault});let m=s("div",["am-c-card"],{},this),l=()=>{m.classList.toggle("am-u-display-none",n.value!=="smtp")},a=s("div",["am-c-card__form"],{},m),p=s("div",["am-l-grid","am-l-grid--auto"],{},a);r("am-input-field",p,{key:"smtpServer",name:"smtpServer",value:e.smtpServer,label:"SMTP Server"},[],{pattern:"^\\S*$"}),r("am-input-field",p,{key:"smtpPort",name:"smtpPort",value:e.smtpPort,label:"SMTP Port"},[],{pattern:"^\\d{0,5}$"}),r("am-input-field",a,{key:"smtpUsername",name:"smtpUsername",value:e.smtpUsername,label:`SMTP ${t.text("username")}`},[],{pattern:"^\\S*$"}),r("am-input-field",a,{key:"smtpPassword",name:"smtpPassword",value:"",label:`SMTP ${t.text("password")}`,placeholder:t.system.mail.smtpPasswordIsSet?t.text("systemMailSmtpPasswordPlaceholder"):""}),l(),this.listen(n,"change",l);let d=s("div",["am-u-flex","am-u-flex--gap"],{},this);s("am-submit",["am-e-button","am-e-button--primary"],{disabled:"true"},d,t.text("save"));let S=s("button",["am-e-button","am-e-button--danger"],{},d,t.text("reset"));this.listen(S,"click",async()=>{await v(t.text("systemMailReset"))&&u("MailConfigController::reset",{},!0,()=>{c("AutomadAppStateRequireUpdate"),g.new()})})}};customElements.define("am-mail-config-form",i);export{i as MailConfigFormComponent,P as transportOptions};
