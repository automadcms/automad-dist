/* Automad, (c) Marc Anton Dahmen, MIT license */
import{a as u}from"./chunk.BMD2RVGA.js";import"./chunk.POKN3LWR.js";import{M as a,W as $,a as e,v as m}from"./chunk.KG3NJGTQ.js";import{a as p}from"./chunk.SQMRGQ3J.js";import"./chunk.ZTO3KGQP.js";import"./chunk.2NNYUVDG.js";var f=()=>a`<div class="${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}"> ${e.isCloud?"":a` <am-form class="${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}" ${"am-api"}="${"ConfigController::update"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-auto"} ><input type="hidden" name="type" value="cache" /><div><p>${e.text("systemCacheInfo")}</p><am-cache-enable></am-cache-enable></div><div class="am-cache-settings"><p>${e.text("systemCacheMonitorInfo")}</p><am-cache-monitor></am-cache-monitor><p>${e.text("systemCacheLifetimeInfo")}</p><am-cache-lifetime></am-cache-lifetime></div></am-form>`} <am-form class="am-cache-settings" ${"am-api"}="${"CacheController::clear"}" ><p>${e.text("systemCacheClearInfo")}</p><am-submit class="${"am-e-button"} ${"am-e-button--primary"}"> ${e.text("systemCacheClear")}</am-submit></am-form><am-form class="am-cache-settings" ${"am-api"}="${"CacheController::purge"}" ><p>${e.text("systemCachePurgeInfo")}</p><am-submit class="${"am-e-button"}"> ${e.text("systemCachePurge")}</am-submit></am-form></div>`;var g=()=>a`<am-form ${"am-api"}="${"ConfigController::update"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-auto"} ><input type="hidden" name="type" value="debug" /><div><p>${e.text("systemDebugInfo")}</p><am-debug-enable></am-debug-enable></div></am-form>`;var y=()=>a`<am-form class="${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}" ${"am-api"}="${"ConfigController::update"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-auto"} ><input type="hidden" name="type" value="feed" /><div><p>${e.text("systemRssFeedInfo")}</p><am-feed-enable></am-feed-enable></div><div id="am-feed-settings"><p>${e.text("systemRssFeedUrl")}</p><div class="${"am-f-group"}"><input class="${"am-f-input"} ${"am-u-flex__item-grow"} ${"am-f-group__item"}" value="${e.feedURL}" disabled /><am-copy class="${"am-e-button"} ${"am-e-button--icon"} ${"am-f-group__item"}" value="${e.feedURL}" ${"am-tooltip"}="${e.text("copyUrlClipboard")}" ><i class="bi bi-clipboard"></i></am-copy></div><p>${e.text("systemRssFeedFields")}</p><am-feed-fields></am-feed-fields></div></am-form>`;var v=()=>a`<am-form ${"am-api"}="${"ConfigController::update"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-auto"} ><input type="hidden" name="type" value="i18n" /><div><p>${e.text("systemI18nInfo")}</p><am-i18n-enable></am-i18n-enable></div></am-form>`;var x=()=>a`<am-form ${"am-api"}="${"ConfigController::update"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-auto"} ><input type="hidden" name="type" value="translation" /><div><p>${e.text("systemLanguageInfo")}</p><am-language-select></am-language-select></div></am-form>`;var b=()=>a`<am-system-update-form ${"am-api"}="${"SystemController::update"}" ></am-system-update-form>`;var h=()=>a`<div class="${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}"><am-form ${"am-api"}="${"UserController::edit"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-watch"} ><am-form-error></am-form-error><span class="${"am-c-card"}"><span class="${"am-c-card__body"} ${"am-c-card__body--large"}"> ${e.text("systemUsersInfo")}</span><span class="${"am-c-card__form"} ${"am-u-flex"} ${"am-u-flex--column"} ${"am-u-flex--gap-large"}" ><span class="${"am-u-flex"} ${"am-u-flex--column"}"><am-user-name value="${e.user.name}" ></am-user-name><am-user-email value="${e.user.email}" ></am-user-email></span><span class="${"am-c-card__form-buttons"}"><am-submit class="${"am-e-button"}"><span>${e.text("save")}</span></am-submit><am-modal-toggle class="${"am-e-button"} ${"am-e-button--primary"}" ${"am-modal"}="#am-change-password-modal" ><span>${e.text("systemUsersChangePassword")}</span></am-modal-toggle></span></span></span></am-form><span class="${"am-c-card"}"><span class="${"am-c-card__body"} ${"am-c-card__body--large"}"> ${e.text("systemUsersRegisteredInfo")}</span><span class="${"am-c-card__form"}"><span class="${"am-c-card__form-buttons"}"><am-modal-toggle class="${"am-e-button"}" ${"am-modal"}="#am-registered-users-modal" ><span class="${"am-c-icon-text"}"><span class="${"am-u-flex"} ${"am-u-flex--align-center"} ${"am-u-flex--gap"}" ><span>${e.text("systemUsersRegistered")}</span><span class="${"am-e-badge"}"><am-user-count-indicator></am-user-count-indicator></span></span></span></am-modal-toggle></span><span class="${"am-c-card__form-buttons"}"><am-modal-toggle class="${"am-e-button"}" ${"am-modal"}="#am-add-user-modal" ><span>${e.text("systemUsersAdd")}</span></am-modal-toggle><am-modal-toggle class="${"am-e-button"}" ${"am-modal"}="#am-invite-user-modal" ><span>${e.text("systemUsersInvite")}</span></am-modal-toggle></span></span></span></div><!-- Modals --><am-modal id="am-change-password-modal"><am-form class="${"am-c-modal__dialog"}" ${"am-api"}="${"UserController::changePassword"}" ><am-modal-header>${e.text("systemUsersChangePassword")}</am-modal-header><am-modal-body><am-form-error></am-form-error><div>${m("am-password-field",null,{key:"currentPassword",value:"",name:"currentPassword",label:e.text("currentPassword")},[],{}).outerHTML} ${m("am-password-field",null,{key:"newPassword1",value:"",name:"newPassword1",label:e.text("newPassword")},[],{}).outerHTML} ${m("am-password-field",null,{key:"newPassword2",value:"",name:"newPassword2",label:e.text("repeatPassword")},[],{}).outerHTML}</div></am-modal-body><am-modal-footer><am-modal-close class="${"am-e-button"}"> ${e.text("close")}</am-modal-close><am-submit class="${"am-e-button"} ${"am-e-button--primary"}"> ${e.text("save")}</am-submit></am-modal-footer></am-form></am-modal><am-modal id="am-registered-users-modal" nofocus><am-modal-dialog><am-modal-header>${e.text("systemUsersRegistered")}</am-modal-header><am-modal-body><am-delete-users-form ${"am-api"}="${"UserCollectionController::edit"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ${"am-watch"} ></am-delete-users-form></am-modal-body><am-modal-footer><am-modal-close class="${"am-e-button"}"> ${e.text("close")}</am-modal-close><am-submit class="${"am-e-button"} ${"am-e-button--danger"}" ${"am-form"}="${"UserCollectionController::edit"}" disabled > ${e.text("deleteSelection")}</am-submit></am-modal-footer></am-modal-dialog></am-modal><am-modal id="am-add-user-modal"><am-form class="${"am-c-modal__dialog"}" ${"am-api"}="${"UserCollectionController::createUser"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ><am-modal-header>${e.text("systemUsersAdd")}</am-modal-header><am-modal-body><am-form-error></am-form-error><div><am-user-name></am-user-name><am-user-email></am-user-email>${m("am-password-field",null,{key:"password1",id:"am-field__create-password1",value:"",name:"password1",label:e.text("password")},[],{required:""}).outerHTML} ${m("am-password-field",null,{key:"password2",id:"am-field__create-password2",value:"",name:"password2",label:e.text("repeatPassword")},[],{required:""}).outerHTML}</div></am-modal-body><am-modal-footer><am-modal-close class="${"am-e-button"}"> ${e.text("close")}</am-modal-close><am-submit class="${"am-e-button"} ${"am-e-button--primary"}"> ${e.text("systemUsersAdd")}</am-submit></am-modal-footer></am-form></am-modal><am-modal id="am-invite-user-modal"><am-form class="${"am-c-modal__dialog"}" ${"am-api"}="${"UserCollectionController::inviteUser"}" ${"am-event"}="${"AutomadAppStateRequireUpdate"}" ><am-modal-header>${e.text("systemUsersInvite")}</am-modal-header><am-modal-body><am-form-error></am-form-error><div><am-user-name></am-user-name><am-user-email></am-user-email></div></am-modal-body><am-modal-footer><am-modal-close class="${"am-e-button"}"> ${e.text("close")}</am-modal-close><am-submit class="${"am-e-button"} ${"am-e-button--primary"}"> ${e.text("systemUsersSendInvitation")}</am-submit></am-modal-footer></am-form></am-modal>`;var w=()=>`<p>${e.text("systemMailInfo")}</p><div class="am-u-flex am-u-flex--column am-u-flex--gap-large"><am-mail-config-form am-api="MailConfigController::save" am-event="AutomadAppStateRequireUpdate" ></am-mail-config-form><am-form am-api=MailConfigController::test><am-submit class="am-e-button"> ${e.text("systemMailSendTest")}</am-submit></am-form></div>`;var S=()=>{let c=e.isCloud?[]:[{section:"mail",icon:"envelope-at",title:e.text("systemMail"),info:e.text("systemMailCardInfo"),state:"<am-system-mail-indicator></am-system-mail-indicator>",render:w,narrowIcon:!1}],t=e.isCloud?[]:[{section:"debug",icon:"bug",title:e.text("systemDebug"),info:e.text("systemDebugCardInfo"),state:"<am-system-debug-indicator></am-system-debug-indicator>",render:g}];return[{section:"cache",icon:"device-ssd",title:e.text("systemCache"),info:e.text("systemCacheCardInfo"),state:"<am-system-cache-indicator></am-system-cache-indicator>",render:f,narrowIcon:!0},{section:"users",icon:"person-badge",title:e.text("systemUsers"),info:e.text("systemUsersCardInfo"),state:a`<span class="${"am-u-text-muted"}"> ${e.text("systemUsersRegistered")}: <am-user-count-indicator></am-user-count-indicator></span>`,render:h,narrowIcon:!0},{section:"feed",icon:"rss",title:e.text("systemRssFeed"),info:e.text("systemRssFeedCardInfo"),state:"<am-system-feed-indicator></am-system-feed-indicator>",render:y},...c,{section:"i18n",icon:"globe",title:e.text("systemI18n"),info:e.text("systemI18nCardInfo"),state:"<am-system-i18n-indicator></am-system-i18n-indicator>",render:v},{section:"language",icon:"translate",title:e.text("systemLanguage"),info:e.text("systemLanguageCardInfo"),state:a`<span class="${"am-u-text-muted"}"> ${Object.keys(e.languages).find(s=>e.languages[s]==e.system.translation)}</span>`,render:x},...t,{section:"update",icon:"arrow-repeat",title:e.text("systemUpdate"),info:e.text("systemUpdateCardInfo"),state:"<am-system-update-indicator></am-system-update-indicator>",render:b}]},l=class extends u{sectionData=null;get pageTitle(){return e.text("systemTitle")}get menuData(){let t=[];return this.sectionData.forEach(s=>{t.push({title:s.title,section:s.section})}),{overview:{icon:"grid",section:"overview"},items:t}}renderMainPartial(){let t=p("am-switcher-dropdown",[],{"am-narrow":""});return this.sectionData=S(),t.data=this.menuData,a`<am-breadcrumbs-route ${"am-target"}="${"system"}" ${"am-text"}="${this.pageTitle}" ${"am-narrow"} ></am-breadcrumbs-route>${t.outerHTML} <section class="${"am-l-dashboard__section"}"><div class="${"am-l-dashboard__content"} ${"am-l-dashboard__content--narrow"}" > ${this.renderSections()}${this.renderOverviewSection()}</div></section>`}renderSections(){let t="";return this.sectionData.forEach(s=>{t+=a`<am-switcher-section name="${s.section}"> ${s.render()}</am-switcher-section>`}),t}renderOverviewSection(){return a`<am-switcher-section name="${"overview"}"><div class="${"am-l-grid"}" style="--min: 17rem;"> ${this.renderOverviewCards(this.sectionData.slice(0,2))}</div><div class="${"am-l-grid"}" style="--min: ${e.isCloud?"17":"13"}rem;" > ${this.renderOverviewCards(this.sectionData.slice(2,8))}</div></am-switcher-section>`}renderOverviewCards(t){let s="";return t.forEach(o=>{s+=a`<am-switcher-link class="${"am-c-card"} ${"am-c-card--hover"}" ${"am-section"}="${o.section}" ><div class="${"am-u-flex__item-grow"}"><span class="${"am-c-card__icon"} ${"am-u-display-small-none"} ${o.narrowIcon?"am-c-card__icon--narrow":""}" ><i class="bi bi-${o.icon}"></i></span><div class="${"am-c-card__title"}">${o.title}</div><div class="${"am-c-card__body"}">${o.info}</div></div>${o.state?`<div class="am-c-card__state">${o.state}</div>`:""}</am-switcher-link>`}),s}};customElements.define($("system"),l);export{l as SystemComponent};
