/* Automad 2.0.0-alpha.47, (c) 2025 Marc Anton Dahmen, MIT license */
import{a as m,e as s,f as r}from"./chunk.TNS2LIBN.js";import"./chunk.EPACJLJA.js";var i={message:"am-message",validate:"am-validate"},u=a=>{let t=!0;return a.forEach(e=>{e.checkValidity()||(t=!1)}),t},p=a=>{a.forEach(t=>{t.value=""})},o=class{constructor(t){this.element=t,setTimeout(this.init.bind(this),2e3)}init(){let t=s("button",this.element),e=r("[name]",this.element);t.addEventListener("click",async()=>{if(this.element.classList.add(i.validate),!!u(e))try{let n=await fetch(window.location.href,{method:"POST",body:this.getData(e)}),{data:l}=await n.json();if(l.status){let c=s("p",this.element)??m("p",[i.message],{},this.element,"",!0);c.textContent=l.status,p(e),this.element.classList.remove(i.validate)}}catch{}})}getData(t){let e=new FormData;return t.forEach(n=>{e.append(n.name,n.value)}),e.append("id",this.element.id),e}};export{o as default};
