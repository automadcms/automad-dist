/* Automad 2.0.0-alpha.48, (c) 2025 Marc Anton Dahmen, MIT license */
import"../chunks/chunk.KMHGAFHL.js";import{a as s,e as m,f as p}from"../chunks/chunk.G4EF3EQN.js";import"../chunks/chunk.KC7M4D2V.js";var g='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16"><path d="M6 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4.5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-.5 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/><path d="M8 0a7.96 7.96 0 0 0-4.075 1.114q-.245.102-.437.28A8 8 0 1 0 8 0m3.25 14.201a1.5 1.5 0 0 0-2.13.71A7 7 0 0 1 8 15a6.97 6.97 0 0 1-3.845-1.15 1.5 1.5 0 1 0-2.005-2.005A6.97 6.97 0 0 1 1 8c0-1.953.8-3.719 2.09-4.989a1.5 1.5 0 1 0 2.469-1.574A7 7 0 0 1 8 1c1.42 0 2.742.423 3.845 1.15a1.5 1.5 0 1 0 2.005 2.005A6.97 6.97 0 0 1 15 8c0 .596-.074 1.174-.214 1.727a1.5 1.5 0 1 0-1.025 2.25 7 7 0 0 1-2.51 2.224Z"/></svg>',b="am-cookie-consent",h="am-cookie-consent-revoked",c="AutomadConsentStateChange",v=()=>{let e=location.hostname.split("."),n=[];n.push(location.hostname);for(let o=0;o<e.length-1;o++){let t=e.slice(o).join(".");e.length-o>=2&&n.push(`.${t}`)}return[...new Set(n)]},C=e=>{v().forEach(o=>{document.cookie=`${e}=; Max-Age=0; path=/; domain=${o}`}),document.cookie=`${e}=; Max-Age=0; path=/`},k=()=>{document.cookie.split(";").map(e=>e.trim()).forEach(e=>{let[n]=e.split("=");/^Automad-/.test(n)||C(n)}),localStorage.clear(),sessionStorage.clear()},a={banner:"am-consent-banner",bannerOpen:"am-consent-banner--open",bannerSmall:"am-consent-banner--small",button:"am-consent-banner__button",placeholder:"am-consent-placeholder"},d=class e extends HTMLElement{static banner=null;static pendingInstances=[];static set state(n){localStorage.setItem(b,n),e.banner.classList.remove(a.bannerOpen),e.banner.dispatchEvent(new Event(c))}static get state(){return localStorage.getItem(b)}static get hasConsent(){return e.state==="accepted"}static get hasNoConsent(){return e.state==="declined"}get type(){return this.getAttribute("type")??"iframe"}constructor(){super()}connectedCallback(){e.hasConsent&&this.injectContent(),e.pendingInstances.push(this),e.banner||(this.renderBanner(),localStorage.getItem(h)&&k()),this.renderPlaceholder()}renderBanner(){e.banner=s("div",[a.banner],{},document.body,`${g} <span>${decodeURIComponent(window.amCookieConsentText||"This site uses third-party cookies.")}</span>`),m("svg",e.banner).addEventListener("click",()=>{e.banner.classList.toggle(a.bannerOpen)});let o=()=>{s("button",[a.button],{},e.banner,decodeURIComponent(window.amCookieConsentAccept||"That's fine")).addEventListener("click",()=>{e.state="accepted",e.pendingInstances.forEach(f=>f.injectContent()),e.pendingInstances=[]})},t=()=>{s("button",[a.button],{},e.banner,decodeURIComponent(window.amCookieConsentDecline||"No, thanks")).addEventListener("click",()=>{e.state="declined",e.banner.classList.add(a.bannerOpen)})},r=()=>{s("button",[a.button],{},e.banner,decodeURIComponent(window.amCookieConsentRevoke||"Revoke consent")).addEventListener("click",()=>{e.state=null,e.banner.remove(),localStorage.setItem(h,"true"),location.reload()})},u=()=>{if(p(`.${a.button}`,e.banner).forEach(i=>{i.remove()}),e.hasNoConsent){e.banner.classList.add(a.bannerSmall,a.bannerOpen),o();return}if(e.hasConsent){e.banner.classList.add(a.bannerSmall),e.banner.setAttribute("title",window.amCookieConsentTooltip||"Manage cookie consent"),r();return}o(),t()};e.banner.addEventListener(c,u.bind(this)),e.banner.dispatchEvent(new Event(c))}renderPlaceholder(){this.type=="iframe"&&(this.innerHTML="<am-consent-placeholder></am-consent-placeholder>")}injectContent(){let n=this.type,o=Array.from(this.attributes).filter(t=>t.name!="type").reduce((t,r)=>(t[r.name]=r.value,t),{});if(n==="iframe"){let t=s("iframe",[],o);this.replaceWith(t)}if(n==="script"){let t=s("script",[],o);setTimeout(()=>{t.text=atob(this.textContent),this.replaceWith(t)},0)}}},l=class extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add(a.placeholder),this.innerHTML=`${g} <span>${window.amCookieConsentPlaceholder||"Cookies are disabled"}</span>`}};customElements.define("am-consent",d);customElements.define("am-consent-placeholder",l);
