/* This file is part of Automad. Copyright and license info at the end. */
var i=(e,t=[],o={},n=null,s=null,l=!1)=>{let r=document.createElement(e);t.forEach(c=>{r.classList.add(c)});for(let[c,u]of Object.entries(o))typeof u<"u"&&r.setAttribute(c,u);return n&&(l?n.prepend(r):n.appendChild(r)),s&&(r.innerHTML=s),r};var b=(e,t=document)=>t.querySelector(e),g=(e,t=document)=>Array.from(t.querySelectorAll(e));var v='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16"><path d="M6 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4.5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-.5 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/><path d="M8 0a7.96 7.96 0 0 0-4.075 1.114q-.245.102-.437.28A8 8 0 1 0 8 0m3.25 14.201a1.5 1.5 0 0 0-2.13.71A7 7 0 0 1 8 15a6.97 6.97 0 0 1-3.845-1.15 1.5 1.5 0 1 0-2.005-2.005A6.97 6.97 0 0 1 1 8c0-1.953.8-3.719 2.09-4.989a1.5 1.5 0 1 0 2.469-1.574A7 7 0 0 1 8 1c1.42 0 2.742.423 3.845 1.15a1.5 1.5 0 1 0 2.005 2.005A6.97 6.97 0 0 1 15 8c0 .596-.074 1.174-.214 1.727a1.5 1.5 0 1 0-1.025 2.25 7 7 0 0 1-2.51 2.224Z"/></svg>',f="am-cookie-consent",h="am-cookie-consent-revoked",d="AutomadConsentStateChange",x=()=>{let e=location.hostname.split("."),t=[];t.push(location.hostname);for(let o=0;o<e.length-1;o++){let n=e.slice(o).join(".");e.length-o>=2&&t.push(`.${n}`)}return[...new Set(t)]},y=e=>{x().forEach(o=>{document.cookie=`${e}=; Max-Age=0; path=/; domain=${o}`}),document.cookie=`${e}=; Max-Age=0; path=/`},C=()=>{document.cookie.split(";").map(e=>e.trim()).forEach(e=>{let[t]=e.split("=");/^Automad-/.test(t)||y(t)}),localStorage.clear(),sessionStorage.clear()},a={banner:"am-consent-banner",bannerOpen:"am-consent-banner--open",bannerSmall:"am-consent-banner--small",button:"am-consent-banner__button",buttonPrimary:"am-consent-banner__button--primary",placeholder:"am-consent-placeholder"},p=class e extends HTMLElement{static banner=null;static pendingInstances=[];static set state(t){localStorage.setItem(f,t),e.banner.classList.remove(a.bannerOpen),e.banner.dispatchEvent(new Event(d))}static get state(){return localStorage.getItem(f)}static get hasConsent(){return e.state==="accepted"}static get hasNoConsent(){return e.state==="declined"}get type(){return this.getAttribute("type")??"iframe"}constructor(){super()}connectedCallback(){e.hasConsent&&this.injectContent(),e.pendingInstances.push(this),e.banner||(this.renderBanner(),localStorage.getItem(h)&&C()),this.renderPlaceholder()}renderBanner(){e.banner=i("div",[a.banner],{},document.body,`${v} <span>${decodeURIComponent(window.amCookieConsentText||"This site uses third-party cookies.")}</span>`),b("svg",e.banner).addEventListener("click",()=>{e.banner.classList.toggle(a.bannerOpen)});let o=()=>{i("button",[a.button,a.buttonPrimary],{},e.banner,decodeURIComponent(window.amCookieConsentAccept||"That's fine")).addEventListener("click",()=>{e.state="accepted",e.pendingInstances.forEach(c=>c.injectContent()),e.pendingInstances=[]})},n=()=>{i("button",[a.button],{},e.banner,decodeURIComponent(window.amCookieConsentDecline||"No, thanks")).addEventListener("click",()=>{e.state="declined",e.banner.classList.add(a.bannerOpen)})},s=()=>{i("button",[a.button,a.buttonPrimary],{},e.banner,decodeURIComponent(window.amCookieConsentRevoke||"Revoke consent")).addEventListener("click",()=>{e.state=null,e.banner.remove(),localStorage.setItem(h,"true"),location.reload()})},l=()=>{if(g(`.${a.button}`,e.banner).forEach(r=>{r.remove()}),e.hasNoConsent){e.banner.classList.add(a.bannerSmall,a.bannerOpen),o();return}if(e.hasConsent){e.banner.classList.add(a.bannerSmall),e.banner.setAttribute("title",window.amCookieConsentTooltip||"Manage cookie consent"),s();return}o(),n()};e.banner.addEventListener(d,l.bind(this)),e.banner.dispatchEvent(new Event(d))}renderPlaceholder(){this.type=="iframe"&&(this.innerHTML="<am-consent-placeholder></am-consent-placeholder>")}injectContent(){let t=this.type,o=Array.from(this.attributes).filter(n=>n.name!="type").reduce((n,s)=>(n[s.name]=s.value,n),{});if(t==="iframe"){let n=i("iframe",[],o);this.replaceWith(n)}if(t==="script"){let n=i("script",[],o);setTimeout(()=>{n.text=atob(this.textContent),this.replaceWith(n)},0)}}},m=class extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add(a.placeholder),this.innerHTML=`${v} <span>${window.amCookieConsentPlaceholder||"Cookies are disabled"}</span>`}};customElements.define("am-consent",p);customElements.define("am-consent-placeholder",m);
/*!
 * Automad (https://automad.org)
 * 
 * Copyright (c) 2026 Marc Anton Dahmen (https://marcdahmen.de)
 * Automad is licensed under the MIT license
 */
